!function(e){function t(t){for(var r,i,a=t[0],c=t[1],l=t[2],u=0,p=[];u<a.length;u++)i=a[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(d&&d(t);p.length;)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,i=1;i<n.length;i++){var c=n[i];0!==o[c]&&(r=!1)}r&&(s.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={0:0},o={0:0},s=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(e){var t=[];i[e]?t.push(i[e]):0!==i[e]&&{2:1,3:1,4:1}[e]&&t.push(i[e]=new Promise((function(t,n){for(var r="static/css/"+({}[e]||e)+"."+{2:"4e6541aa0979ab5fe8ab",3:"2f4099421df47087d7d1",4:"10e378d3da0e7f32661d",5:"31d6cfe0d16ae931b73c",6:"31d6cfe0d16ae931b73c",7:"31d6cfe0d16ae931b73c",8:"31d6cfe0d16ae931b73c",9:"31d6cfe0d16ae931b73c",10:"31d6cfe0d16ae931b73c",11:"31d6cfe0d16ae931b73c",12:"31d6cfe0d16ae931b73c",13:"31d6cfe0d16ae931b73c",14:"31d6cfe0d16ae931b73c",15:"31d6cfe0d16ae931b73c",16:"31d6cfe0d16ae931b73c",17:"31d6cfe0d16ae931b73c",18:"31d6cfe0d16ae931b73c",19:"31d6cfe0d16ae931b73c",20:"31d6cfe0d16ae931b73c",21:"31d6cfe0d16ae931b73c",22:"31d6cfe0d16ae931b73c",23:"31d6cfe0d16ae931b73c",24:"31d6cfe0d16ae931b73c",25:"31d6cfe0d16ae931b73c",26:"31d6cfe0d16ae931b73c",27:"31d6cfe0d16ae931b73c",28:"31d6cfe0d16ae931b73c",29:"31d6cfe0d16ae931b73c",30:"31d6cfe0d16ae931b73c",31:"31d6cfe0d16ae931b73c",32:"31d6cfe0d16ae931b73c"}[e]+".css",o=a.p+r,s=document.getElementsByTagName("link"),c=0;c<s.length;c++){var l=(d=s[c]).getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(l===r||l===o))return t()}var u=document.getElementsByTagName("style");for(c=0;c<u.length;c++){var d;if((l=(d=u[c]).getAttribute("data-href"))===r||l===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete i[e],p.parentNode.removeChild(p),n(s)},p.href=o,document.getElementsByTagName("head")[0].appendChild(p)})).then((function(){i[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=r);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,a.nc&&c.setAttribute("nonce",a.nc),c.src=function(e){return a.p+"static/js/"+({}[e]||e)+"."+{2:"eb2c361cdcbd8c4f7638",3:"6817af5c7ddbbd72fbf1",4:"927a84e2225924985925",5:"bbbe2165b2726754babd",6:"c6e50a831e6b09d426c7",7:"7a9d3de7e3eb6affa8fa",8:"6e10d130a82421e5de97",9:"4c310a18d1e30d64ab78",10:"b67f1d16d8fdcd03f775",11:"88732498617afe7ab4fa",12:"21fb2f8c9787acc40766",13:"bd887f6f8965a89629f1",14:"8d076150d2d32a70c85c",15:"458ea2a090159a1c312d",16:"b026bc770b996a75ab86",17:"37f97cc3eab74f285530",18:"5e155da6b34cb233975a",19:"4449616295c79e9feb82",20:"c3c9f56f752974bf19cf",21:"13590b4f67813801857e",22:"af3b6f25635a9809f6e8",23:"27002d630c581d75786b",24:"17fecccd566085bc7273",25:"d92131b48359fae551a4",26:"8e2b950cad8e4bb7145f",27:"b70f29d1c24421eeb8e0",28:"3eeac63a0c7d7ca9f57e",29:"a9703e50212c8482b1b8",30:"ccdf2a34d5a00135f6b7",31:"079c61206f2e6ac69873",32:"2c5f6af0c5d2d87ad611"}[e]+".js"}(e);var l=new Error;s=function(t){c.onerror=c.onload=null,clearTimeout(u);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",l.name="ChunkLoadError",l.type=r,l.request=i,n[1](l)}o[e]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(t)},a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a.oe=function(e){throw console.error(e),e};var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var d=l;s.push([593,1]),n()}([,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"g",(function(){return h})),n.d(t,"a",(function(){return b})),n.d(t,"f",(function(){return m})),n.d(t,"e",(function(){return f})),n.d(t,"d",(function(){return j})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return v}));var r=n(5),i=n.n(r),o=n(103),s=n.n(o),a=n(312),c=n.n(a),l=n(26),u=n(313);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e){var t={},n=e.hasOwnProperty("acct"),r=n&&!e.hasOwnProperty("avatar");if(t.id=String(e.id),t._original=e,n){if(t.screen_name=e.acct,t.statusnet_profile_url=e.url,r)return t;if(t.emoji=e.emojis,t.name=s()(e.display_name),t.name_html=t.name,t.name_unescaped=e.display_name,t.description=e.note,t.description_html=e.note,t.fields=e.fields,t.fields_html=e.fields.map((function(e){return{name:s()(e.name),value:e.value}})),t.fields_text=e.fields.map((function(e){return{name:unescape(e.name.replace(/<[^>]*>/g,"")),value:unescape(e.value.replace(/<[^>]*>/g,""))}})),t.profile_image_url=e.avatar,t.profile_image_url_original=e.avatar,t.cover_photo=e.header,t.friends_count=e.following_count,t.bot=e.bot,e.pleroma){var i=e.pleroma.relationship;t.background_image=e.pleroma.background_image,t.favicon=e.pleroma.favicon,t.token=e.pleroma.chat_token,i&&(t.relationship=i),t.allow_following_move=e.pleroma.allow_following_move,t.hide_follows=e.pleroma.hide_follows,t.hide_followers=e.pleroma.hide_followers,t.hide_follows_count=e.pleroma.hide_follows_count,t.hide_followers_count=e.pleroma.hide_followers_count,t.rights={moderator:e.pleroma.is_moderator,admin:e.pleroma.is_admin},t.rights.admin?t.role="admin":t.rights.moderator?t.role="moderator":t.role="member"}e.source&&(t.description=e.source.note,t.default_scope=e.source.privacy,t.fields=e.source.fields,e.source.pleroma&&(t.no_rich_text=e.source.pleroma.no_rich_text,t.show_role=e.source.pleroma.show_role,t.discoverable=e.source.pleroma.discoverable)),t.is_local=!t.screen_name.includes("@")}else t.screen_name=e.screen_name,t.name=e.name,t.name_html=e.name_html,t.description=e.description,t.description_html=e.description_html,t.profile_image_url=e.profile_image_url,t.profile_image_url_original=e.profile_image_url_original,t.cover_photo=e.cover_photo,t.friends_count=e.friends_count,t.statusnet_profile_url=e.statusnet_profile_url,t.is_local=e.is_local,t.role=e.role,t.show_role=e.show_role,e.rights&&(t.rights={moderator:e.rights.delete_others_notice,admin:e.rights.admin}),t.no_rich_text=e.no_rich_text,t.default_scope=e.default_scope,t.hide_follows=e.hide_follows,t.hide_followers=e.hide_followers,t.hide_follows_count=e.hide_follows_count,t.hide_followers_count=e.hide_followers_count,t.background_image=e.background_image,t.token=e.token,t.relationship={muting:e.muted,blocking:e.statusnet_blocking,followed_by:e.follows_you,following:e.following};if(t.created_at=new Date(e.created_at),t.locked=e.locked,t.followers_count=e.followers_count,t.statuses_count=e.statuses_count,e.pleroma&&(t.follow_request_count=e.pleroma.follow_request_count,t.tags=e.pleroma.tags,t.deactivated=void 0!==e.pleroma.is_active?!e.pleroma.is_active:e.pleroma.deactivated,t.notification_settings=e.pleroma.notification_settings,t.unread_chat_count=e.pleroma.unread_chat_count),t.tags=t.tags||[],t.rights=t.rights||{},t.notification_settings=t.notification_settings||{},t.screen_name_ui=t.screen_name,t.screen_name&&t.screen_name.includes("@")){var o=t.screen_name.split("@"),a=u.a.toUnicode(o[1]);a!==o[1]&&(a="ðŸŒ"+a,t.screen_name_ui=[o[0],a].join("@"))}return t},b=function(e){var t={};return!e.hasOwnProperty("oembed")?(t.mimetype=e.pleroma?e.pleroma.mime_type:e.type,t.meta=e.meta,t.id=e.id):t.mimetype=e.mimetype,t.url=e.url,t.large_thumb_url=e.preview_url,t.description=e.description,t},m=function e(t){var n={},r=t.hasOwnProperty("account");if(r){if(n.favorited=t.favourited,n.fave_num=t.favourites_count,n.repeated=t.reblogged,n.repeat_num=t.reblogs_count,n.bookmarked=t.bookmarked,n.type=t.reblog?"retweet":"status",n.nsfw=t.sensitive,n.raw_html=t.content,n.emojis=t.emojis,n.tags=t.tags,t.pleroma){var i=t.pleroma;n.text=i.content?t.pleroma.content["text/plain"]:t.content,n.summary=i.spoiler_text?t.pleroma.spoiler_text["text/plain"]:t.spoiler_text,n.statusnet_conversation_id=t.pleroma.conversation_id,n.is_local=i.local,n.in_reply_to_screen_name=t.pleroma.in_reply_to_account_acct,n.thread_muted=i.thread_muted,n.emoji_reactions=i.emoji_reactions,n.parent_visible=void 0===i.parent_visible||i.parent_visible}else n.text=t.content,n.summary=t.spoiler_text;if(t.akkoma){var o=t.akkoma;o&&o.source&&"text/x.misskeymarkdown"===o.source.mediaType&&(n.mfm_content=o.source.content)}else n.mfm_content=null;n.in_reply_to_status_id=t.in_reply_to_id,n.in_reply_to_user_id=t.in_reply_to_account_id,n.replies_count=t.replies_count,"retweet"===n.type&&(n.retweeted_status=e(t.reblog)),n.summary_raw_html=s()(t.spoiler_text),n.external_url=t.url,n.poll=t.poll,n.poll&&(n.poll.options=(n.poll.options||[]).map((function(e){return p(p({},e),{},{title_html:s()(e.title)})}))),n.pinned=t.pinned,n.muted=t.muted}else n.favorited=t.favorited,n.fave_num=t.fave_num,n.repeated=t.repeated,n.repeat_num=t.repeat_num,n.type=function(e){return e.is_post_verb?"status":e.retweeted_status?"retweet":"string"==typeof e.uri&&e.uri.match(/(fave|objectType=Favourite)/)||"string"==typeof e.text&&e.text.match(/favorited/)?"favorite":e.text.match(/deleted notice {{tag/)||e.qvitter_delete_notice?"deletion":e.text.match(/started following/)||"follow"===e.activity_type?"follow":"unknown"}(t),void 0===t.nsfw?(n.nsfw=O(t),t.retweeted_status&&(n.nsfw=t.retweeted_status.nsfw)):n.nsfw=t.nsfw,n.raw_html=t.statusnet_html,n.text=t.text,n.in_reply_to_status_id=t.in_reply_to_status_id,n.in_reply_to_user_id=t.in_reply_to_user_id,n.in_reply_to_screen_name=t.in_reply_to_screen_name,n.statusnet_conversation_id=t.statusnet_conversation_id,"retweet"===n.type&&(n.retweeted_status=e(t.retweeted_status)),n.summary=t.summary,n.summary_html=t.summary_html,n.external_url=t.external_url,n.is_local=t.is_local;n.id=String(t.id),n.visibility=t.visibility,n.card=t.card,n.created_at=new Date(t.created_at),n.in_reply_to_status_id=n.in_reply_to_status_id?String(n.in_reply_to_status_id):null,n.in_reply_to_user_id=n.in_reply_to_user_id?String(n.in_reply_to_user_id):null,n.user=h(r?t.account:t.user),n.attentions=((r?t.mentions:t.attentions)||[]).map(h),n.attachments=((r?t.media_attachments:t.attachments)||[]).map(b);var a=r?t.reblog:t.retweeted_status;return a&&(n.retweeted_status=e(a)),n.favoritedBy=[],n.rebloggedBy=[],n},f=function(e){var t={};if(!e.hasOwnProperty("ntype"))t.type={favourite:"like",reblog:"repeat"}[e.type]||e.type,t.seen=e.pleroma.is_seen,t.status=Object(l.b)(t.type)?m(e.status):null,t.action=t.status,t.target="move"!==t.type?null:h(e.target),t.from_profile=h(e.account),t.emoji=e.emoji,t.emoji_url=e.emoji_url;else{var n=m(e.notice);t.type=e.ntype,t.seen=Boolean(e.is_seen),t.status="like"===t.type?m(e.notice.favorited_status):n,t.action=n,t.from_profile="pleroma:chat_mention"===t.type?h(e.account):h(e.from_profile)}return t.created_at=new Date(e.created_at),t.id=parseInt(e.id),t},O=function(e){return(e.tags||[]).includes("nsfw")||!!(e.text||"").match(/#nsfw/i)},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.flakeId,r=c()(e);if(r){var i=r.next.max_id,o=r.prev.min_id;return{maxId:n?i:parseInt(i,10),minId:n?o:parseInt(o,10)}}},g=function(e){var t={};return t.id=e.id,t.account=h(e.account),t.unread=e.unread,t.lastMessage=v(e.last_message),t.updated_at=new Date(e.updated_at),t},v=function(e){if(e){if(e.isNormalized)return e;var t=e;return t.id=e.id,t.created_at=new Date(e.created_at),t.chat_id=e.chat_id,t.emojis=e.emojis,t.content=e.content,e.attachment?t.attachments=[b(e.attachment)]:t.attachments=[],t.pending=!!e.pending,t.error=!1,t.idempotency_key=e.idempotency_key,t.isNormalized=!0,t}}},function(e,t,n){"use strict";n.d(t,"d",(function(){return xe})),n.d(t,"a",(function(){return Ie})),n.d(t,"b",(function(){return ze}));var r=n(13),i=n.n(r),o=n(40),s=n.n(o),a=n(11),c=n.n(a),l=n(5),u=n.n(l),d=n(16),p=n.n(d),h=n(46),b=n.n(h),m=n(97),f=n.n(m),O=n(21),j=n.n(O),g=n(29),v=n.n(g),y=n(10),w=n.n(y),k=n(14),_=n(28),S=n.n(_),C=n(128),P=n.n(C),x=n(129),D=n.n(x),T=n(165),I=n.n(T),$=n(314),z=n.n($),M=n(315),U=n.n(M),F=n(130),E=n.n(F),L=n(316),R=n.n(L),A=n(12),N=n.n(A),B=n(166),V=n.n(B);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E()(e);if(t){var i=E()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return U()(this,n)}}function q(e,t,n,r){this.name="StatusCodeError",this.statusCode=e,this.message=e+" - "+(JSON&&JSON.stringify?JSON.stringify(t):t),this.error=t,this.options=n,this.response=r,Error.captureStackTrace&&Error.captureStackTrace(this)}q.prototype=Object.create(Error.prototype),q.prototype.constructor=q;var J=function(e){z()(n,e);var t=H(n);function n(e){var r,i;D()(this,n),r=t.call(this),Error.captureStackTrace&&Error.captureStackTrace(I()(r));try{if("string"==typeof e&&(e=JSON.parse(e)).hasOwnProperty("error")&&(e=JSON.parse(e.error)),"object"===S()(e)){var o=JSON.parse(e.error);o.ap_id&&(o.username=o.ap_id,delete o.ap_id),r.message=(i=o,Object.entries(i).reduce((function(e,t){var n=c()(t,2),r=n[0],i=n[1].reduce((function(e,t){return e+[V()(r.replace(/_/g," ")),t].join(" ")+". "}),"");return[].concat(N()(e),[i])}),[]))}else r.message=e}catch(t){r.message=e}return r}return P()(n)}(R()(Error)),W=["nickname"],Y=["id","credentials"];function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X=function(e,t){return"/api/pleroma/admin/users/".concat(e,"/permission_group/").concat(t)},Z=function(e){return"/api/v1/notifications/".concat(e,"/dismiss")},Q=function(e){return"/api/v1/statuses/".concat(e,"/favourite")},ee=function(e){return"/api/v1/statuses/".concat(e,"/unfavourite")},te=function(e){return"/api/v1/statuses/".concat(e,"/reblog")},ne=function(e){return"/api/v1/statuses/".concat(e,"/unreblog")},re=function(e){return"/api/v1/accounts/".concat(e,"/statuses")},ie=function(e){return"/api/v1/timelines/tag/".concat(e)},oe=function(e){return"/api/v1/accounts/".concat(e,"/mute")},se=function(e){return"/api/v1/accounts/".concat(e,"/unmute")},ae=function(e){return"/api/v1/pleroma/accounts/".concat(e,"/subscribe")},ce=function(e){return"/api/v1/pleroma/accounts/".concat(e,"/unsubscribe")},le=function(e){return"/api/v1/statuses/".concat(e,"/bookmark")},ue=function(e){return"/api/v1/statuses/".concat(e,"/unbookmark")},de=function(e){return"/api/v1/statuses/".concat(e,"/favourited_by")},pe=function(e){return"/api/v1/statuses/".concat(e,"/reblogged_by")},he=function(e){return"/api/v1/statuses/".concat(e,"/pin")},be=function(e){return"/api/v1/statuses/".concat(e,"/unpin")},me=function(e){return"/api/v1/statuses/".concat(e,"/mute")},fe=function(e){return"/api/v1/statuses/".concat(e,"/unmute")},Oe=function(e){return"/api/v1/pleroma/statuses/".concat(e,"/reactions")},je=function(e,t){return"/api/v1/pleroma/statuses/".concat(e,"/reactions/").concat(t)},ge=function(e,t){return"/api/v1/pleroma/statuses/".concat(e,"/reactions/").concat(t)},ve=function(e){return"/api/v1/pleroma/chats/".concat(e,"/messages")},ye=function(e){return"/api/v1/pleroma/chats/".concat(e,"/read")},we=function(e,t){return"/api/v1/pleroma/chats/".concat(e,"/messages/").concat(t)},ke=window.fetch,_e=function(e,t){var n=""+e;return(t=t||{}).credentials="same-origin",ke(n,t)},Se=function(e){var t=e.method,n=e.url,r=e.params,i=e.payload,o=e.credentials,s=e.headers,a={method:t,headers:K({Accept:"application/json","Content-Type":"application/json"},void 0===s?{}:s)};return r&&(n+="?"+Object.entries(r).map((function(e){var t=c()(e,2),n=t[0],r=t[1];return encodeURIComponent(n)+"="+encodeURIComponent(r)})).join("&")),i&&(a.body=JSON.stringify(i)),o&&(a.headers=K(K({},a.headers),Ce(o))),_e(n,a).then((function(e){return new Promise((function(t,r){return e.json().then((function(i){return e.ok?t(i):r(new q(e.status,i,{url:n,options:a},e))})).catch((function(t){return r(new q(e.status,t,{url:n,options:a},e))}))}))}))},Ce=function(e){return e?{Authorization:"Bearer ".concat(e)}:{}},Pe=function(e){var t=e.id,n=e.maxId,r=e.sinceId,i=e.limit,o=void 0===i?20:i,s=e.credentials,a=function(e){return"/api/v1/accounts/".concat(e,"/following")}(t),c=[n&&"max_id=".concat(n),r&&"since_id=".concat(r),o&&"limit=".concat(o),"with_relationships=true"].filter((function(e){return e})).join("&");return _e(a+=c?"?"+c:"",{headers:Ce(s)}).then((function(e){return e.json()})).then((function(e){return e.map(k.g)}))},xe=function(e){var t=e.credentials,n=e.stream,r=e.args,i=void 0===r?{}:r;return Object.entries(K(K({},t?{access_token:t}:{}),{},{stream:n},i)).reduce((function(e,t){var n=c()(t,2),r=n[0],i=n[1];return e+"".concat(r,"=").concat(i,"&")}),"/api/v1/streaming?")},De=new Set(["update","notification","delete","filters_changed"]),Te=new Set(["pleroma:chat_update"]),Ie=function(e){var t=e.url,n=e.preprocessor,r=void 0===n?$e:n,i=e.id,o=void 0===i?"Unknown":i,s=new EventTarget,a=new WebSocket(t);if(!a)throw new Error("Failed to create socket ".concat(o));var c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};e.addEventListener(t,(function(e){s.dispatchEvent(new CustomEvent(t,{detail:n(e)}))}))};return a.addEventListener("open",(function(e){console.debug("[WS][".concat(o,"] Socket connected"),e)})),a.addEventListener("error",(function(e){console.debug("[WS][".concat(o,"] Socket errored"),e)})),a.addEventListener("close",(function(e){console.debug("[WS][".concat(o,"] Socket disconnected with code ").concat(e.code),e)})),c(a,"open"),c(a,"close"),c(a,"message",r),c(a,"error"),s.close=function(){a.close(1e3,"Shutting down socket")},s.getState=function(){return a.readyState},s},$e=function(e){var t=e.data;if(t){var n=JSON.parse(t),r=n.event,i=n.payload;if(!De.has(r)&&!Te.has(r))return console.warn("Unknown event",e),null;if("delete"===r)return{event:r,id:i};var o=i?JSON.parse(i):null;return"update"===r?{event:r,status:Object(k.f)(o)}:"notification"===r?{event:r,notification:Object(k.e)(o)}:"pleroma:chat_update"===r?{event:r,chatUpdate:Object(k.b)(o)}:void 0}},ze=Object.freeze({JOINED:1,CLOSED:2,ERROR:3,DISABLED:4,STARTING:5,STARTING_INITIAL:6}),Me={verifyCredentials:function(e){return _e("/api/v1/accounts/verify_credentials",{headers:Ce(e)}).then((function(e){return e.ok?e.json():{error:e}})).then((function(e){return e.error?e:Object(k.g)(e)}))},fetchTimeline:function(e){var t=e.timeline,n=e.credentials,r=e.since,i=void 0!==r&&r,o=e.until,s=void 0!==o&&o,a=e.userId,c=void 0!==a&&a,l=e.tag,u=void 0!==l&&l,d=e.withMuted,p=void 0!==d&&d,h=e.replyVisibility,b=void 0===h?"all":h,m="notifications"===t,f=[],O={public:"/api/v1/timelines/public",friends:"/api/v1/timelines/home",dms:"/api/v1/timelines/direct",notifications:"/api/v1/notifications",publicAndExternal:"/api/v1/timelines/public",user:re,media:re,favorites:"/api/v1/favourites",tag:ie,bookmarks:"/api/v1/bookmarks"}[t];"user"!==t&&"media"!==t||(O=O(c)),i&&f.push(["since_id",i]),s&&f.push(["max_id",s]),u&&(O=O(u)),"media"===t&&f.push(["only_media",1]),"public"===t&&f.push(["local",!0]),"public"!==t&&"publicAndExternal"!==t||f.push(["only_media",!1]),"favorites"!==t&&"bookmarks"!==t&&f.push(["with_muted",p]),"all"!==b&&f.push(["reply_visibility",b]),f.push(["limit",20]);var g=j()(f,(function(e){return"".concat(e[0],"=").concat(e[1])})).join("&");O+="?".concat(g);var v="",y="",w={};return _e(O,{headers:Ce(n)}).then((function(e){return v=e.status,y=e.statusText,w=Object(k.d)(e.headers.get("Link"),{flakeId:"bookmarks"!==t&&"notifications"!==t}),e})).then((function(e){return e.json()})).then((function(e){return e.errors?(e.status=v,e.statusText=y,e):{data:e.map(m?k.e:k.f),pagination:w}}))},fetchPinnedStatuses:function(e){var t=e.id,n=e.credentials,r=re(t)+"?pinned=true";return Se({url:r,credentials:n}).then((function(e){return e.map(k.f)}))},fetchConversation:function(e){var t=e.id,n=e.credentials,r=function(e){return"/api/v1/statuses/".concat(e,"/context")}(t);return _e(r,{headers:Ce(n)}).then((function(e){if(e.ok)return e;throw new Error("Error fetching timeline",e)})).then((function(e){return e.json()})).then((function(e){var t=e.ancestors,n=e.descendants;return{ancestors:t.map(k.f),descendants:n.map(k.f)}}))},fetchStatus:function(e){var t=e.id,n=e.credentials,r=function(e){return"/api/v1/statuses/".concat(e)}(t);return _e(r,{headers:Ce(n)}).then((function(e){if(e.ok)return e;throw new Error("Error fetching timeline",e)})).then((function(e){return e.json()})).then((function(e){return Object(k.f)(e)}))},fetchFriends:Pe,exportFriends:function(e){var t,n=e.id,r=e.credentials;return new Promise((t=i()(w.a.mark((function e(t,i){var o,s,a,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,o=[],s=!0;case 3:if(!s){e.next=12;break}return a=o.length>0?b()(o).id:void 0,e.next=7,Pe({id:n,maxId:a,credentials:r});case 7:c=e.sent,o=f()(o,c),0===c.length&&(s=!1),e.next=3;break;case 12:t(o),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),i(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])}))),function(e,n){return t.apply(this,arguments)}))},fetchFollowers:function(e){var t=e.id,n=e.maxId,r=e.sinceId,i=e.limit,o=void 0===i?20:i,s=e.credentials,a=function(e){return"/api/v1/accounts/".concat(e,"/followers")}(t),c=[n&&"max_id=".concat(n),r&&"since_id=".concat(r),o&&"limit=".concat(o),"with_relationships=true"].filter((function(e){return e})).join("&");return _e(a+=c?"?"+c:"",{headers:Ce(s)}).then((function(e){return e.json()})).then((function(e){return e.map(k.g)}))},followUser:function(e){var t=e.id,n=e.credentials,r=s()(e,Y),i=function(e){return"/api/v1/accounts/".concat(e,"/follow")}(t),o={};return void 0!==r.reblogs&&(o.reblogs=r.reblogs),_e(i,{body:JSON.stringify(o),headers:K(K({},Ce(n)),{},{"Content-Type":"application/json"}),method:"POST"}).then((function(e){return e.json()}))},unfollowUser:function(e){var t=e.id,n=e.credentials,r=function(e){return"/api/v1/accounts/".concat(e,"/unfollow")}(t);return _e(r,{headers:Ce(n),method:"POST"}).then((function(e){return e.json()}))},pinOwnStatus:function(e){var t=e.id,n=e.credentials;return Se({url:he(t),credentials:n,method:"POST"}).then((function(e){return Object(k.f)(e)}))},unpinOwnStatus:function(e){var t=e.id,n=e.credentials;return Se({url:be(t),credentials:n,method:"POST"}).then((function(e){return Object(k.f)(e)}))},muteConversation:function(e){var t=e.id,n=e.credentials;return Se({url:me(t),credentials:n,method:"POST"}).then((function(e){return Object(k.f)(e)}))},unmuteConversation:function(e){var t=e.id,n=e.credentials;return Se({url:fe(t),credentials:n,method:"POST"}).then((function(e){return Object(k.f)(e)}))},blockUser:function(e){var t=e.id,n=e.credentials;return _e(function(e){return"/api/v1/accounts/".concat(e,"/block")}(t),{headers:Ce(n),method:"POST"}).then((function(e){return e.json()}))},unblockUser:function(e){var t=e.id,n=e.credentials;return _e(function(e){return"/api/v1/accounts/".concat(e,"/unblock")}(t),{headers:Ce(n),method:"POST"}).then((function(e){return e.json()}))},fetchUser:function(e){var t=e.id,n=e.credentials,r="".concat("/api/v1/accounts","/").concat(t);return Se({url:r,credentials:n}).then((function(e){return Object(k.g)(e)}))},fetchUserRelationship:function(e){var t=e.id,n=e.credentials,r="".concat("/api/v1/accounts/relationships","/?id=").concat(t);return _e(r,{headers:Ce(n)}).then((function(e){return new Promise((function(t,n){return e.json().then((function(i){return e.ok?t(i):n(new q(e.status,i,{url:r},e))}))}))}))},favorite:function(e){var t=e.id,n=e.credentials;return Se({url:Q(t),method:"POST",credentials:n}).then((function(e){return Object(k.f)(e)}))},unfavorite:function(e){var t=e.id,n=e.credentials;return Se({url:ee(t),method:"POST",credentials:n}).then((function(e){return Object(k.f)(e)}))},retweet:function(e){var t=e.id,n=e.credentials;return Se({url:te(t),method:"POST",credentials:n}).then((function(e){return Object(k.f)(e)}))},unretweet:function(e){var t=e.id,n=e.credentials;return Se({url:ne(t),method:"POST",credentials:n}).then((function(e){return Object(k.f)(e)}))},bookmarkStatus:function(e){var t=e.id,n=e.credentials;return Se({url:le(t),headers:Ce(n),method:"POST"})},unbookmarkStatus:function(e){var t=e.id,n=e.credentials;return Se({url:ue(t),headers:Ce(n),method:"POST"})},postStatus:function(e){var t=e.credentials,n=e.status,r=e.spoilerText,i=e.visibility,o=e.sensitive,s=e.poll,a=e.mediaIds,c=void 0===a?[]:a,l=e.inReplyToStatusId,u=e.contentType,d=e.preview,p=e.idempotencyKey,h=new FormData,b=s.options||[];if(h.append("status",n),h.append("source","Pleroma FE"),r&&h.append("spoiler_text",r),i&&h.append("visibility",i),o&&h.append("sensitive",o),u&&h.append("content_type",u),c.forEach((function(e){h.append("media_ids[]",e)})),b.some((function(e){return""!==e}))){var m={expires_in:s.expiresIn,multiple:s.multiple};Object.keys(m).forEach((function(e){h.append("poll[".concat(e,"]"),m[e])})),b.forEach((function(e){h.append("poll[options][]",e)}))}l&&h.append("in_reply_to_id",l),d&&h.append("preview","true");var f=Ce(t);return p&&(f["idempotency-key"]=p),_e("/api/v1/statuses",{body:h,method:"POST",headers:f}).then((function(e){return e.json()})).then((function(e){return e.error?e:Object(k.f)(e)}))},deleteStatus:function(e){var t=e.id,n=e.credentials;return _e(function(e){return"/api/v1/statuses/".concat(e)}(t),{headers:Ce(n),method:"DELETE"})},uploadMedia:function(e){var t=e.formData,n=e.credentials;return _e("/api/v1/media",{body:t,method:"POST",headers:Ce(n)}).then((function(e){return e.json()})).then((function(e){return Object(k.a)(e)}))},setMediaDescription:function(e){var t=e.id,n=e.description,r=e.credentials;return Se({url:"".concat("/api/v1/media","/").concat(t),method:"PUT",headers:Ce(r),payload:{description:n}}).then((function(e){return Object(k.a)(e)}))},fetchMutes:function(e){var t=e.credentials;return Se({url:"/api/v1/mutes/",credentials:t}).then((function(e){return e.map(k.g)}))},muteUser:function(e){var t=e.id,n=e.credentials;return Se({url:oe(t),credentials:n,method:"POST"})},unmuteUser:function(e){var t=e.id,n=e.credentials;return Se({url:se(t),credentials:n,method:"POST"})},subscribeUser:function(e){var t=e.id,n=e.credentials;return Se({url:ae(t),credentials:n,method:"POST"})},unsubscribeUser:function(e){var t=e.id,n=e.credentials;return Se({url:ce(t),credentials:n,method:"POST"})},fetchBlocks:function(e){var t=e.credentials;return Se({url:"/api/v1/blocks/",credentials:t}).then((function(e){return e.map(k.g)}))},fetchOAuthTokens:function(e){var t=e.credentials;return _e("/api/oauth_tokens.json",{headers:Ce(t)}).then((function(e){if(e.ok)return e.json();throw new Error("Error fetching auth tokens",e)}))},revokeOAuthToken:function(e){var t=e.id,n=e.credentials,r="/api/oauth_tokens/".concat(t);return _e(r,{headers:Ce(n),method:"DELETE"})},tagUser:function(e){var t=e.tag,n=e.credentials,r={nicknames:[e.user.screen_name],tags:[t]},i=Ce(n);return i["Content-Type"]="application/json",_e("/api/pleroma/admin/users/tag",{method:"PUT",headers:i,body:JSON.stringify(r)})},untagUser:function(e){var t=e.tag,n=e.credentials,r={nicknames:[e.user.screen_name],tags:[t]},i=Ce(n);return i["Content-Type"]="application/json",_e("/api/pleroma/admin/users/tag",{method:"DELETE",headers:i,body:JSON.stringify(r)})},deleteUser:function(e){var t=e.credentials,n=e.user.screen_name,r=Ce(t);return _e("".concat("/api/pleroma/admin/users","?nickname=").concat(n),{method:"DELETE",headers:r})},addRight:function(e){var t=e.right,n=e.credentials,r=e.user.screen_name;return _e(X(r,t),{method:"POST",headers:Ce(n),body:{}})},deleteRight:function(e){var t=e.right,n=e.credentials,r=e.user.screen_name;return _e(X(r,t),{method:"DELETE",headers:Ce(n),body:{}})},activateUser:function(e){var t=e.credentials,n=e.user.screen_name;return Se({url:"/api/pleroma/admin/users/activate",method:"PATCH",credentials:t,payload:{nicknames:[n]}}).then((function(e){return p()(e,"users.0")}))},deactivateUser:function(e){var t=e.credentials,n=e.user.screen_name;return Se({url:"/api/pleroma/admin/users/deactivate",method:"PATCH",credentials:t,payload:{nicknames:[n]}}).then((function(e){return p()(e,"users.0")}))},register:function(e){var t=e.params,n=e.credentials,r=t.nickname,i=s()(t,W);return _e("/api/v1/accounts",{method:"POST",headers:K(K({},Ce(n)),{},{"Content-Type":"application/json"}),body:JSON.stringify(K({nickname:r,locale:"en_US",agreement:!0},i))}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw new J(e)}))}))},getCaptcha:function(){return _e("/api/pleroma/captcha").then((function(e){return e.json()}))},updateProfileImages:function(e){var t=e.credentials,n=e.avatar,r=void 0===n?null:n,i=e.avatarName,o=void 0===i?null:i,s=e.banner,a=void 0===s?null:s,c=e.background,l=void 0===c?null:c,u=new FormData;return null!==r&&(null!==o?u.append("avatar",r,o):u.append("avatar",r)),null!==a&&u.append("header",a),null!==l&&u.append("pleroma_background_image",l),_e("/api/v1/accounts/update_credentials",{headers:Ce(t),method:"PATCH",body:u}).then((function(e){return e.json()})).then((function(e){if(e.error)throw new Error(e.error);return Object(k.g)(e)}))},updateProfile:function(e){var t=e.credentials,n=e.params;return Se({url:"/api/v1/accounts/update_credentials",method:"PATCH",payload:n,credentials:t}).then((function(e){return Object(k.g)(e)}))},importMutes:function(e){var t=e.file,n=e.credentials,r=new FormData;return r.append("list",t),_e("/api/pleroma/mutes_import",{body:r,method:"POST",headers:Ce(n)}).then((function(e){return e.ok}))},importBlocks:function(e){var t=e.file,n=e.credentials,r=new FormData;return r.append("list",t),_e("/api/pleroma/blocks_import",{body:r,method:"POST",headers:Ce(n)}).then((function(e){return e.ok}))},importFollows:function(e){var t=e.file,n=e.credentials,r=new FormData;return r.append("list",t),_e("/api/pleroma/follow_import",{body:r,method:"POST",headers:Ce(n)}).then((function(e){return e.ok}))},deleteAccount:function(e){var t=e.credentials,n=e.password,r=new FormData;return r.append("password",n),_e("/api/pleroma/delete_account",{body:r,method:"POST",headers:Ce(t)}).then((function(e){return e.json()}))},changeEmail:function(e){var t=e.credentials,n=e.email,r=e.password,i=new FormData;return i.append("email",n),i.append("password",r),_e("/api/pleroma/change_email",{body:i,method:"POST",headers:Ce(t)}).then((function(e){return e.json()}))},changePassword:function(e){var t=e.credentials,n=e.password,r=e.newPassword,i=e.newPasswordConfirmation,o=new FormData;return o.append("password",n),o.append("new_password",r),o.append("new_password_confirmation",i),_e("/api/pleroma/change_password",{body:o,method:"POST",headers:Ce(t)}).then((function(e){return e.json()}))},settingsMFA:function(e){var t=e.credentials;return _e("/api/pleroma/accounts/mfa",{headers:Ce(t),method:"GET"}).then((function(e){return e.json()}))},mfaDisableOTP:function(e){var t=e.credentials,n=e.password,r=new FormData;return r.append("password",n),_e("/api/pleroma/accounts/mfa/totp",{body:r,method:"DELETE",headers:Ce(t)}).then((function(e){return e.json()}))},generateMfaBackupCodes:function(e){var t=e.credentials;return _e("/api/pleroma/accounts/mfa/backup_codes",{headers:Ce(t),method:"GET"}).then((function(e){return e.json()}))},mfaSetupOTP:function(e){var t=e.credentials;return _e("/api/pleroma/accounts/mfa/setup/totp",{headers:Ce(t),method:"GET"}).then((function(e){return e.json()}))},mfaConfirmOTP:function(e){var t=e.credentials,n=e.password,r=e.token,i=new FormData;return i.append("password",n),i.append("code",r),_e("/api/pleroma/accounts/mfa/confirm/totp",{body:i,headers:Ce(t),method:"POST"}).then((function(e){return e.json()}))},fetchFollowRequests:function(e){var t=e.credentials;return _e("/api/v1/follow_requests",{headers:Ce(t)}).then((function(e){return e.json()})).then((function(e){return e.map(k.g)}))},approveUser:function(e){var t=e.id,n=e.credentials,r=function(e){return"/api/v1/follow_requests/".concat(e,"/authorize")}(t);return _e(r,{headers:Ce(n),method:"POST"}).then((function(e){return e.json()}))},denyUser:function(e){var t=e.id,n=e.credentials,r=function(e){return"/api/v1/follow_requests/".concat(e,"/reject")}(t);return _e(r,{headers:Ce(n),method:"POST"}).then((function(e){return e.json()}))},suggestions:function(e){var t=e.credentials;return _e("/api/v1/suggestions",{headers:Ce(t)}).then((function(e){return e.json()}))},markNotificationsAsSeen:function(e){var t=e.id,n=e.credentials,r=e.single,i=void 0!==r&&r,o=new FormData;return i?o.append("id",t):o.append("max_id",t),_e("/api/v1/pleroma/notifications/read",{body:o,headers:Ce(n),method:"POST"}).then((function(e){return e.json()}))},dismissNotification:function(e){var t=e.credentials,n=e.id;return Se({url:Z(n),method:"POST",payload:{id:n},credentials:t})},vote:function(e){var t,n=e.pollId,r=e.choices,i=e.credentials;return(new FormData).append("choices",r),Se({url:(t=encodeURIComponent(n),"/api/v1/polls/".concat(t,"/votes")),method:"POST",credentials:i,payload:{choices:r}})},fetchPoll:function(e){var t,n=e.pollId,r=e.credentials;return Se({url:(t=encodeURIComponent(n),"/api/v1/polls/".concat(t)),method:"GET",credentials:r})},fetchFavoritedByUsers:function(e){var t=e.id,n=e.credentials;return Se({url:de(t),method:"GET",credentials:n}).then((function(e){return e.map(k.g)}))},fetchRebloggedByUsers:function(e){var t=e.id,n=e.credentials;return Se({url:pe(t),method:"GET",credentials:n}).then((function(e){return e.map(k.g)}))},fetchMascot:function(e){var t=e.credentials;return Se({url:"/api/v1/pleroma/mascot",credentials:t})},updateMascot:function(e){var t=e.mascot,n=e.credentials,r=new FormData;return r.append("file",t),_e("/api/v1/pleroma/mascot",{headers:Ce(n),method:"PUT",body:r}).then((function(e){return e.json()}))},fetchEmojiReactions:function(e){var t=e.id,n=e.credentials;return Se({url:Oe(t),credentials:n}).then((function(e){return e.map((function(e){return e.accounts=e.accounts.map(k.g),e}))}))},reactWithEmoji:function(e){var t=e.id,n=e.emoji,r=e.credentials;return Se({url:je(t,n),method:"PUT",credentials:r}).then(k.f)},unreactWithEmoji:function(e){var t=e.id,n=e.emoji,r=e.credentials;return Se({url:ge(t,n),method:"DELETE",credentials:r}).then(k.f)},reportUser:function(e){var t=e.credentials,n=e.userId,r=e.statusIds,i=e.comment,o=e.forward;return Se({url:"/api/v1/reports",method:"POST",payload:{account_id:n,status_ids:r,comment:i,forward:o},credentials:t})},updateNotificationSettings:function(e){var t=e.credentials,n=e.settings,r=new FormData;return v()(n,(function(e,t){r.append(t,e)})),_e("/api/pleroma/notification_settings",{headers:Ce(t),method:"PUT",body:r}).then((function(e){return e.json()}))},search2:function(e){var t=e.credentials,n=e.q,r=e.resolve,i=e.limit,o=e.offset,s=e.following,a="/api/v2/search",c=[];n&&c.push(["q",encodeURIComponent(n)]),r&&c.push(["resolve",r]),i&&c.push(["limit",i]),o&&c.push(["offset",o]),s&&c.push(["following",!0]),c.push(["with_relationships",!0]);var l=j()(c,(function(e){return"".concat(e[0],"=").concat(e[1])})).join("&");return a+="?".concat(l),_e(a,{headers:Ce(t)}).then((function(e){if(e.ok)return e;throw new Error("Error fetching search result",e)})).then((function(e){return e.json()})).then((function(e){return e.accounts=e.accounts.slice(0,i).map((function(e){return Object(k.g)(e)})),e.statuses=e.statuses.slice(0,i).map((function(e){return Object(k.f)(e)})),e}))},searchUsers:function(e){var t=e.credentials,n=e.query;return Se({url:"/api/v1/accounts/search",params:{q:n,resolve:!0},credentials:t}).then((function(e){return e.map(k.g)}))},fetchKnownDomains:function(e){var t=e.credentials;return Se({url:"/api/v1/instance/peers",credentials:t})},fetchDomainMutes:function(e){var t=e.credentials;return Se({url:"/api/v1/domain_blocks",credentials:t})},muteDomain:function(e){var t=e.domain,n=e.credentials;return Se({url:"/api/v1/domain_blocks",method:"POST",payload:{domain:t},credentials:n})},unmuteDomain:function(e){var t=e.domain,n=e.credentials;return Se({url:"/api/v1/domain_blocks",method:"DELETE",payload:{domain:t},credentials:n})},chats:function(e){var t=e.credentials;return _e("/api/v1/pleroma/chats",{headers:Ce(t)}).then((function(e){return e.json()})).then((function(e){return{chats:e.map(k.b).filter((function(e){return e}))}}))},getOrCreateChat:function(e){var t,n=e.accountId,r=e.credentials;return Se({url:(t=n,"/api/v1/pleroma/chats/by-account-id/".concat(t)),method:"POST",credentials:r})},chatMessages:function(e){var t=e.id,n=e.credentials,r=e.maxId,i=e.sinceId,o=e.limit,s=void 0===o?20:o,a=ve(t),c=[r&&"max_id=".concat(r),i&&"since_id=".concat(i),s&&"limit=".concat(s)].filter((function(e){return e})).join("&");return Se({url:a+=c?"?"+c:"",method:"GET",credentials:n})},sendChatMessage:function(e){var t=e.id,n=e.content,r=e.mediaId,i=void 0===r?null:r,o=e.idempotencyKey,s=e.credentials,a={content:n};i&&(a.media_id=i);var c={};return o&&(c["idempotency-key"]=o),Se({url:ve(t),method:"POST",payload:a,credentials:s,headers:c})},readChat:function(e){var t=e.id,n=e.lastReadId,r=e.credentials;return Se({url:ye(t),method:"POST",payload:{last_read_id:n},credentials:r})},deleteChatMessage:function(e){var t=e.chatId,n=e.messageId,r=e.credentials;return Se({url:we(t,n),method:"DELETE",credentials:r})}};t.c=Me},,,function(e,t,n){"use strict";n.d(t,"i",(function(){return p})),n.d(t,"h",(function(){return b})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return j})),n.d(t,"f",(function(){return g})),n.d(t,"g",(function(){return v})),n.d(t,"j",(function(){return y})),n.d(t,"e",(function(){return w})),n.d(t,"d",(function(){return k}));var r=n(5),i=n.n(r),o=n(11),s=n.n(o),a=n(28),c=n.n(a),l=n(20);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(e,t,n){if(null!=e){if("#"===e[0]||"transparent"===e)return e;if("object"===c()(e)){var r=e;e=r.r,t=r.g,n=r.b}var i=[e,t,n].map((function(e){return e=(e=(e=Math.ceil(e))<0?0:e)>255?255:e})),o=s()(i,3);return e=o[0],t=o[1],n=o[2],"#".concat(((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1))}},h=function(e){return"rgb".split("").reduce((function(t,n){return t[n]=function(e){var t=e/255;return t<.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}(e[n]),t}),{})},b=function(e){var t=h(e);return.2126*t.r+.7152*t.g+.0722*t.b},m=function(e,t){var n=b(e),r=b(t),i=n>r?[n,r]:[r,n],o=s()(i,2);return(o[0]+.05)/(o[1]+.05)},f=function(e,t,n){return m(j(n,t),e)},O=function(e,t,n){return 1===t||void 0===t?e:"rgb".split("").reduce((function(r,i){return r[i]=e[i]*t+n[i]*(1-t),r}),{})},j=function(e,t){return t.reduce((function(e,t){var n=s()(t,2),r=n[0],i=n[1];return O(r,i,e)}),e)},g=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},v=function(e,t){return"rgb".split("").reduce((function(n,r){return n[r]=(e[r]+t[r])/2,n}),{})},y=function(e){return"rgba(".concat(Math.floor(e.r),", ").concat(Math.floor(e.g),", ").concat(Math.floor(e.b),", ").concat(e.a,")")},w=function(e,t,n){if(m(e,t)<4.5){var r=void 0!==t.a?{a:t.a}:{},i=Object.assign(r,Object(l.invertLightness)(t).rgb);return!n&&m(e,i)<4.5?Object(l.contrastRatio)(e,t).rgb:i}return t},k=function(e,t){var n={};if("object"===c()(e))n=e;else if("string"==typeof e){if(!e.startsWith("#"))return e;n=g(e)}return y(d(d({},n),{},{a:t}))}},,,,function(e,t,n){"use strict";n.r(t);var r=n(0);var i=n(50),o=n(6),s=n(3);o.c.add(s.ab);var a={props:["user","betterShadow","compact","bot"],data:function(){return{showPlaceholder:!1,defaultAvatar:"".concat(this.$store.state.instance.server+this.$store.state.instance.defaultAvatar)}},components:{StillImage:i.a},methods:{imgSrc:function(e){return!e||this.showPlaceholder?this.defaultAvatar:e},imageLoadError:function(){this.showPlaceholder=!0}}},c=(n(512),n(4));const l=n.n(c)()(a,[["render",function(e,t,n,i,o,s){const a=Object(r.J)("StillImage"),c=Object(r.J)("FAIcon");return Object(r.D)(),Object(r.j)("span",{class:Object(r.w)(["Avatar",{"-compact":e.compact}])},[e.user?(Object(r.D)(),Object(r.h)(a,{key:0,class:Object(r.w)(["avatar",{"-compact":e.compact,"-better-shadow":e.betterShadow}]),alt:e.user.screen_name_ui,title:e.user.screen_name_ui,src:e.imgSrc(e.user.profile_image_url_original),"image-load-error":e.imageLoadError},null,8,["alt","title","src","image-load-error","class"])):(Object(r.D)(),Object(r.j)("div",{key:1,class:Object(r.w)(["avatar -placeholder",{"-compact":e.compact}])},null,2)),e.bot?(Object(r.D)(),Object(r.h)(c,{key:2,icon:"robot",class:"bot-indicator"})):Object(r.i)("",!0)],2)}]]);t.default=l},function(e,t,n){"use strict";var r=n(124),i=n.n(r),o=function(e){return e&&e.includes("@")};t.a=function(e,t,n){var r=!t||o(t)||i()(n,t);return{name:r?"external-user-profile":"user-profile",params:r?{id:e}:{name:t}}}},function(e,t,n){"use strict";n.r(t);var r=n(0);var i={name:"Popover",props:{trigger:String,placement:String,boundTo:Object,boundToSelector:String,margin:Object,offset:Object,popoverClass:String,removePadding:Boolean},data:function(){return{hidden:!0,styles:{opacity:0},oldSize:{width:0,height:0}}},methods:{containerBoundingClientRect:function(){return(this.boundToSelector?this.$el.closest(this.boundToSelector):this.$el.offsetParent).getBoundingClientRect()},updateStyles:function(){if(this.hidden)this.styles={opacity:0};else{var e=this.$refs.trigger&&this.$refs.trigger.children[0]||this.$el,t=e.offsetWidth||e.clientWidth,n=e.offsetHeight||e.clientHeight,r=e.getBoundingClientRect(),i=r.left+.5*r.width,o=r.top,s=this.$refs.content,a=this.boundTo&&("container"===this.boundTo.x||"container"===this.boundTo.y)&&this.containerBoundingClientRect(),c=this.margin||{},l=this.boundTo&&"container"===this.boundTo.x?{min:a.left+(c.left||0),max:a.right-(c.right||0)}:{min:0+(c.left||10),max:window.innerWidth-(c.right||10)},u=this.boundTo&&"container"===this.boundTo.y?{min:a.top+(c.top||0),max:a.bottom-(c.bottom||0)}:{min:0+(c.top||50),max:window.innerHeight-(c.bottom||5)},d=0;i-.5*s.offsetWidth<l.min&&(d+=-(i-.5*s.offsetWidth)+l.min),i+d+.5*s.offsetWidth>l.max&&(d-=i+d+.5*s.offsetWidth-l.max);var p="bottom"!==this.placement;o+s.offsetHeight>u.max&&(p=!0),o-s.offsetHeight<u.min&&(p=!1);var h=0;if(this.removePadding&&p){var b=getComputedStyle(e);h=parseFloat(b.paddingTop)+parseFloat(b.paddingBottom)}var m=this.offset&&this.offset.y||0,f=p?-n+h-m-s.offsetHeight:m,O=this.offset&&this.offset.x||0,j=.5*t-.5*s.offsetWidth+d+O;this.styles={opacity:1,transform:"translateX(".concat(Math.round(j),"px) translateY(").concat(Math.round(f),"px)")}}},showPopover:function(){var e=this,t=this.hidden;this.hidden=!1,this.$nextTick((function(){t&&e.$emit("show"),e.updateStyles()}))},hidePopover:function(){this.hidden||this.$emit("close"),this.hidden=!0,this.styles={opacity:0}},onMouseenter:function(e){"hover"===this.trigger&&this.showPopover()},onMouseleave:function(e){"hover"===this.trigger&&this.hidePopover()},onClick:function(e){"click"===this.trigger&&(this.hidden?this.showPopover():this.hidePopover())},onClickOutside:function(e){this.hidden||this.$el.contains(e.target)||this.hidePopover()}},updated:function(){var e=this.$refs.content;e&&(this.oldSize.width===e.offsetWidth&&this.oldSize.height===e.offsetHeight||(this.updateStyles(),this.oldSize={width:e.offsetWidth,height:e.offsetHeight}))},created:function(){document.addEventListener("click",this.onClickOutside)},unmounted:function(){document.removeEventListener("click",this.onClickOutside),this.hidePopover()}},o=(n(527),n(4));const s=n.n(o)()(i,[["render",function(e,t,n,i,o,s){return Object(r.D)(),Object(r.j)("div",{onMouseenter:t[1]||(t[1]=(...t)=>e.onMouseenter&&e.onMouseenter(...t)),onMouseleave:t[2]||(t[2]=(...t)=>e.onMouseleave&&e.onMouseleave(...t))},[Object(r.k)("button",{ref:"trigger",class:"button-unstyled popover-trigger-button",type:"button",onClick:t[0]||(t[0]=(...t)=>e.onClick&&e.onClick(...t))},[Object(r.I)(e.$slots,"trigger")],512),e.hidden?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("div",{key:0,ref:"content",style:Object(r.x)(e.styles),class:Object(r.w)(["popover",e.popoverClass||"popover-default"])},[Object(r.I)(e.$slots,"content",{class:"popover-inner",close:e.hidePopover})],6))],32)}]]);t.default=s},function(e,t,n){"use strict";var r=n(11),i=n.n(r),o=n(12),s=n.n(o),a=n(40),c=n.n(a),l=n(328),u=n.n(l),d=n(75),p=n.n(d),h=n(0);function b(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=function(e){var t=/(?:<\/(\w+)>|<(\w+)\s?.*?\/?>)/gi.exec(e);return t&&(t[1]||t[2])},O=function(e){var t=e.substring(1,e.length-1).replace(new RegExp("^"+f(e)),"").replace(/\/?$/,"").trim(),n=Array.from(t.matchAll(/([a-z0-9-]+)(?:=("[^"]+?"|'[^']+?'))?/gi)).map((function(e){var t=i()(e,3);t[0];return[t[1],t[2]]})).map((function(e){var t=i()(e,2),n=t[0],r=t[1];return r?[n,r.substring(1,r.length-1)]:[n,!0]}));return Object.fromEntries(n)},j=function(e,t,n){for(var r=[],i="",o=0;o<e.length;o++){var s=e[o];if(":"===s){var a,c=e.slice(o+1),l=!1,u=b(t);try{for(u.s();!(a=u.n()).done;){var d=a.value;if(c.slice(0,d.shortcode.length+1)===d.shortcode+":"){l=d;break}}}catch(e){u.e(e)}finally{u.f()}l?(r.push(i),i="",r.push(n(l)),o+=l.shortcode.length+1):i+=s}else i+=s}return i&&r.push(i),r};function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=n(50),w=n(81);const k={class:"HashtagLink"},_=["href","innerHTML"];var S={name:"HashtagLink",props:{url:{required:!0,type:String},content:{required:!0,type:String},tag:{required:!1,type:String,default:""}},methods:{onClick:function(){var e,t,n=this.tag||(e=this.url,!!(t=/tag[s]*\/(\w+)$/g.exec(e))&&t[1]);if(n){var r=this.generateTagLink(n);this.$router.push(r)}else window.open(this.url,"_blank")},generateTagLink:function(e){return"/tag/".concat(e)}}},C=(n(515),n(4));var P=n.n(C)()(S,[["render",function(e,t,n,r,i,o){return Object(h.D)(),Object(h.j)("span",k,[Object(h.k)("a",{href:e.url,class:"original",target:"_blank",onClick:t[0]||(t[0]=Object(h.Y)((...t)=>e.onClick&&e.onClick(...t),["prevent"])),innerHTML:e.content},null,8,_)])}]]),x=(n(516),["index"]);t.a={name:"RichContent",components:{MentionsLine:w.b,HashtagLink:P},props:{html:{required:!0,type:String},attentions:{required:!1,default:function(){return[]}},emoji:{required:!0,type:Array},handleLinks:{required:!1,type:Boolean,default:!1},greentext:{required:!1,type:Boolean,default:!1}},render:function(){var e=this,t=T(this.html,this.greentext).newHtml,n=null,r="",o=[],a=[],l=[],u=[],d=0,b=0,m=!1,g=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new Set(["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),n=[],r=[["",n]],i="",o=null,s=function(){return r[r.length-1][1]},a=function(){""!==i&&(s().push(i),i="")},c=function(e){s().push([e])},l=function(e){var t=s(),n=[p()(e),[]];r.push(n),t.push(n)},u=function(e){var t=r[r.length-1];f(r[r.length-1][0])===f(e)?(t.push(e),r.pop()):s().push(e)},d=0;d<e.length;d++){var h=e[d];if("<"===h&&null===o)a(),o=h;else if(">"!==h&&null!==o)o+=h;else if(">"===h&&null!==o){var b=o+=h;o=null;var m=f(b);"/"===b[1]?u(b):t.has(m)||"/"===b[b.length-2]?c(b):l(b)}else i+=h}return o&&(i+=o),a(),n}(t).map((function t(o,c,u,p){if("string"==typeof o){var b=""===o.trim();return o.includes("\n")&&(n=null),b?(r=o,c!==u.length-1&&null!==n?o.trim():o):(n=null,o.includes(":")&&(o=["",j(o,e.emoji,(function(e){var t=e.shortcode,n=e.url;return Object(h.m)(y.a,{class:"emoji img",src:n,title:":".concat(t,":"),alt:":".concat(t,":")},null)}))]),o)}if(Array.isArray(o)){var m=o,g=i()(m,3),v=g[0],k=g[1],_=g[2],S=f(v),C=O(v),P=!(null!==n)||k&&"string"==typeof k[0]&&k[0].match(/^\s/)?"":r;switch(S){case"br":n=null;break;case"img":return["",[P,(x=v,Object(h.m)(y.a,Object(h.u)(O(x),{class:"img"}),null))],""];case"a":if(!e.handleLinks)break;if(C.class&&C.class.includes("mention"))return function(t,r){var i=D(t,r,d++);return i.notifying=e.attentions.some((function(e){return e.statusnet_profile_url===i.url})),a.push(i),null===n&&(n=[]),n.push(i),n.length>w.a&&l.push(i),1===n.length?Object(h.m)(w.b,{mentions:n},null):""}(C,k);if(n=null,C.href)return function(e,t){var n=e.href.replace(/&amp;/g,"&"),r=t.map((function(t){return"string"==typeof t?t.replace(e.href,n):"<span>"===t[0]?Object(h.m)("span",null,[t[1]]):t[1]}));return Object(h.m)("a",Object(h.u)({attrs:e},{href:n}),s()(r))}(C,k);break;case"span":if(e.handleLinks&&C.class&&C.class.includes("h-card"))return["",k.map(t),""]}return void 0!==k?["",[P,[v,k.map(t),_]],""]:["",[P,o],""]}var x})),v=s()(g).reverse().map((function t(n,r,a,l){var d;if("string"==typeof n)return""===n.trim()?n:(m||(m=!0),p()(n));if(Array.isArray(n)){var j=i()(n,2),g=j[0],v=j[1],y=""===g?"":f(g);switch(y){case"a":if(!e.handleLinks)break;var w=O(g);if(w.class&&w.class.includes("hashtag")||"tag"===w.rel)return function(e,t,n){var r=D(e,t,b++),i=(r.index,c()(r,x));u.push(i),n||o.push(i);var s=i.url,a=i.tag,l=i.content;return Object(h.m)(P,{url:s,tag:a,content:l},null)}(w,v,m);w.target="_blank";var k=s()(v).reverse().map(t).reverse();return Object(h.m)("a",w,[k]);case"":return s()(v).reverse().map(t).reverse()}if(void 0!==v){var _=Array.isArray(v)?s()(v).reverse().map(t).reverse():v;return Object(h.m)(y,O(g),"function"==typeof(d=_)||"[object Object]"===Object.prototype.toString.call(d)&&!Object(h.t)(d)?_:{default:function(){return[_]}})}return Object(h.m)(y,null,null)}return n})).reverse(),k=Object(h.m)("span",{class:"RichContent"},[v]),_={lastTags:o,writtenMentions:a,writtenTags:u,invisibleMentions:l};return this.$emit("parseReady",_),k}};var D=function(e,t,n){var r=t.map((function e(t){return"string"==typeof t?t:t[1].map(e).join("")})).join("");return{index:n,url:e.href,tag:e["data-tag"],content:u()(t).join(""),textContent:r}},T=function(e,t){var n=new Set(["p","div"]);return{newHtml:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=new Set(["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),r=new Set(["address","article","aside","blockquote","details","dialog","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","ol","p","pre","section","table","ul"]),i=new Set(["br"]),o=new Set([].concat(s()(r.values()),s()(i.values()))),a=new Set(o),c=g(n);try{for(c.s();!(e=c.n()).done;){var l=e.value;a.delete(l)}}catch(e){c.e(e)}finally{c.f()}for(var u=new Set([].concat(s()(a.values()),s()(n.values()))),d=[],p=[],h="",b=null,m=function(){h.trim().length>0?d.push({level:[].concat(p),text:h}):d.push(h),h=""},O=function(e){m(),d.push(e)},j=function(e){m(),d.push(e),p.unshift(f(e))},v=function(e){p[0]===f(e)?(m(),d.push(e),p.shift()):h+=e},y=0;y<t.length;y++){var w=t[y];if("<"===w&&null===b)b=w;else if(">"!==w&&null!==b)b+=w;else if(">"===w&&null!==b){var k=b+=w;b=null;var _=f(k);u.has(_)?i.has(_)?O(k):a.has(_)?"/"===k[1]?v(k):"/"===k[k.length-2]?O(k):j(k):h+=k:h+=k}else"\n"===w?O(w):h+=w}return b&&(h+=b),m(),d}(e).reverse().map((function(e,r,i){if(!e.text)return e;var o=e.text;if(t&&e.level.every((function(e){return n.has(e)}))&&(o.includes("&gt;")||o.includes("&lt;"))){var s=o.replace(/<[^>]+?>/gi,"").replace(/@\w+/gi,"").trim();if(s.startsWith("&gt;"))return"<span class='greentext'>".concat(o,"</span>");if(s.startsWith("&lt;"))return"<span class='cyantext'>".concat(o,"</span>")}return o})).reverse().join("")}}},function(e,t,n){"use strict";n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return O})),n.d(t,"a",(function(){return j})),n.d(t,"f",(function(){return g}));var r=n(124),i=n.n(r),o=n(125),s=n.n(o),a=n(49),c=n.n(a),l=n(126),u=n(127),d=function(e){return e.state.statuses.notifications.data},p=function(e){var t=e.rootState||e.state;return[t.config.notificationVisibility.likes&&"like",t.config.notificationVisibility.mentions&&"mention",t.config.notificationVisibility.repeats&&"repeat",t.config.notificationVisibility.follows&&"follow",t.config.notificationVisibility.followRequest&&"follow_request",t.config.notificationVisibility.moves&&"move",t.config.notificationVisibility.emojiReactions&&"pleroma:emoji_reaction",t.config.notificationVisibility.polls&&"poll"].filter((function(e){return e}))},h=["like","mention","repeat","pleroma:emoji_reaction","poll"],b=function(e){return i()(h,e)},m=function(e){return!(b(e.type)&&!e.status)},f=function(e,t){var n=Number(e.id),r=Number(t.id),i=!Number.isNaN(n),o=!Number.isNaN(r);return i&&o?n>r?-1:1:i&&!o?1:!i&&o||e.id>t.id?-1:1},O=function(e,t){var n=e.rootState||e.state;if(!t.seen&&p(e).includes(t.type)&&("mention"!==t.type||!function(e,t){if(t.status)return t.status.muted||Object(l.a)(t.status,e.rootGetters.mergedConfig.muteWords).length>0}(e,t))){var r=v(t,e.rootGetters.i18n);Object(u.a)(n,r)}},j=function(e,t){var n=d(e).map((function(e){return e})).sort(f);return(n=s()(n,"seen")).filter((function(n){return(t||p(e)).includes(n.type)}))},g=function(e){return c()(j(e),(function(e){return!e.seen}))},v=function(e,t){var n,r={tag:e.id},i=e.status,o=e.from_profile.name;switch(r.title=o,r.icon=e.from_profile.profile_image_url,e.type){case"like":n="favorited_you";break;case"repeat":n="repeated_you";break;case"follow":n="followed_you";break;case"move":n="migrated_to";break;case"follow_request":n="follow_request";break;case"poll":n="poll_ended"}return"pleroma:emoji_reaction"===e.type?r.body=t.t("notifications.reacted_with",[e.emoji]):n?r.body=t.t("notifications."+n):b(e.type)&&(r.body=e.status.text),i&&i.attachments&&i.attachments.length>0&&!i.nsfw&&i.attachments[0].mimetype.startsWith("image/")&&(r.image=i.attachments[0].url),r}},,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var r=n(5),i=n.n(r),o=n(18);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=function(e){if(void 0!==e){var t=e.color,n=e.type;if("string"==typeof t){var r=Object(o.f)(t);if(null!=r){var i="rgb(".concat(Math.floor(r.r),", ").concat(Math.floor(r.g),", ").concat(Math.floor(r.b),")"),s="rgba(".concat(Math.floor(r.r),", ").concat(Math.floor(r.g),", ").concat(Math.floor(r.b),", .1)"),c="rgba(".concat(Math.floor(r.r),", ").concat(Math.floor(r.g),", ").concat(Math.floor(r.b),", .2)"),l={"--____highlight-solidColor":i,"--____highlight-tintColor":s,"--____highlight-tintColor2":c};return"striped"===n?a({backgroundImage:["repeating-linear-gradient(135deg,","".concat(s," ,"),"".concat(s," 20px,"),"".concat(c," 20px,"),"".concat(c," 40px")].join(" "),backgroundPosition:"0 0"},l):"solid"===n?a({backgroundColor:c},l):"side"===n?a({backgroundImage:["linear-gradient(to right,","".concat(i," ,"),"".concat(i," 2px,"),"transparent 6px"].join(" "),backgroundPosition:"0 0"},l):void 0}}}},l=function(e){return"USER____"+e.screen_name.replace(/\./g,"_").replace(/@/g,"_AT_")}},,function(e,t,n){"use strict";var r=function(e){return e.match(/flash/)?"flash":e.match(/text\/html/)?"html":e.match(/image/)?"image":e.match(/video/)?"video":e.match(/audio/)?"audio":"unknown"},i={fileType:r,fileMatchesSomeType:function(e,t){return e.some((function(e){return r(t.mimetype)===e}))}};t.a=i},function(e,t,n){"use strict";n.r(t);var r=n(0);const i={key:0,class:"alert error"},o={key:1,class:"status-container muted"},s={class:"status-username"},a={key:0,class:"mute-thread"},c={key:1,class:"mute-thread"},l=["title"],u={key:0,class:"pin"},d={class:"faint"},p={class:"right-side faint"},h=["title"],b=Object(r.l)(" "+Object(r.O)(" ")+" "),m=["data-tags"],f={key:0,class:"left-side"},O=["href"],j={class:"right-side"},g={key:1,class:"status-heading"},v={class:"heading-name-row"},y={class:"heading-left"},w=["title"],k=["title"],_=["src"],S={class:"heading-right"},C=["title"],P=["title"],x=["title","aria-expanded"],D=["title"],T={key:0,class:"heading-reply-row"},I={key:0,class:"glued-label reply-glued-label"},$=["aria-label"],z=Object(r.l)(" "+Object(r.O)(" ")+" "),M={class:"reply-to-text"},U={key:1,class:"reply-to-no-popover"},F={class:"reply-to-text"},E={key:1,class:"glued-label"},L=["aria-label"],R={class:"mentions-text"},A={key:2,class:"replies"},N=["title"],B={key:1,class:"faint"},V=["onClick"],H={key:0,class:"favs-repeated-users"},q={class:"stats"},J={class:"stat-count"},W={class:"stat-title"},Y={class:"stat-number"},G={class:"stat-count"},K={class:"stat-title"},X={class:"stat-number"},Z={class:"avatar-row"},Q={key:4,class:"status-actions"},ee={key:3,class:"gravestone"},te={class:"left-side"},ne={class:"right-side"},re={class:"deleted-text"},ie={key:4,class:"status-container reply-form"};var oe=n(5),se=n.n(oe),ae=n(136),ce=n.n(ae),le=n(75),ue=n.n(le);const de={class:"ReplyButton"},pe=["title"],he={key:1},be={key:2,class:"action-counter"};var me=n(6),fe=n(3);me.c.add(fe.Y);var Oe={name:"ReplyButton",props:["status","replying"],computed:{loggedIn:function(){return!!this.$store.state.users.currentUser}}},je=(n(546),n(4)),ge=n.n(je);var ve=ge()(Oe,[["render",function(e,t,n,i,o,s){const a=Object(r.J)("FAIcon");return Object(r.D)(),Object(r.j)("div",de,[e.loggedIn?(Object(r.D)(),Object(r.j)("button",{key:0,class:Object(r.w)(["button-unstyled interactive",{"-active":e.replying}]),title:e.$t("tool_tip.reply"),onClick:t[0]||(t[0]=Object(r.Y)(t=>e.$emit("toggle"),["prevent"]))},[Object(r.m)(a,{class:"fa-scale-110 fa-old-padding",icon:"reply"})],10,pe)):(Object(r.D)(),Object(r.j)("span",he,[Object(r.m)(a,{icon:"reply",class:"fa-scale-110 fa-old-padding",title:e.$t("tool_tip.reply")},null,8,["title"])])),e.status.replies_count>0?(Object(r.D)(),Object(r.j)("span",be,Object(r.O)(e.status.replies_count),1)):Object(r.i)("",!0)])}]]);const ye={class:"FavoriteButton"},we=["title"],ke={key:1},_e={key:2,class:"action-counter"};var Se=n(8),Ce=n(41);function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}me.c.add(fe.jb,Ce.d);var xe={props:["status","loggedIn"],data:function(){return{animated:!1}},methods:{favorite:function(){var e=this;this.status.favorited?this.$store.dispatch("unfavorite",{id:this.status.id}):this.$store.dispatch("favorite",{id:this.status.id}),this.animated=!0,setTimeout((function(){e.animated=!1}),500)}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){se()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(Se.c)(["mergedConfig"]))};n(547);var De=ge()(xe,[["render",function(e,t,n,i,o,s){const a=Object(r.J)("FAIcon");return Object(r.D)(),Object(r.j)("div",ye,[e.loggedIn?(Object(r.D)(),Object(r.j)("button",{key:0,class:Object(r.w)(["button-unstyled interactive",e.status.favorited&&"-favorited"]),title:e.$t("tool_tip.favorite"),onClick:t[0]||(t[0]=Object(r.Y)(t=>e.favorite(),["prevent"]))},[Object(r.m)(a,{class:"fa-scale-110 fa-old-padding",icon:[e.status.favorited?"fas":"far","star"],spin:e.animated},null,8,["icon","spin"])],10,we)):(Object(r.D)(),Object(r.j)("span",ke,[Object(r.m)(a,{class:"fa-scale-110 fa-old-padding",title:e.$t("tool_tip.favorite"),icon:["far","star"]},null,8,["title"])])),!e.mergedConfig.hidePostStats&&e.status.fave_num>0?(Object(r.D)(),Object(r.j)("span",_e,Object(r.O)(e.status.fave_num),1)):Object(r.i)("",!0)])}]]);const Te={class:"reaction-picker-filter"},Ie=["placeholder"],$e={class:"reaction-picker"},ze=["title","onClick"],Me=Object(r.k)("div",{class:"reaction-picker-divider"},null,-1),Ue=["title","onClick"],Fe=["src"],Ee={key:1},Le=Object(r.k)("div",{class:"reaction-bottom-fader"},null,-1),Re=["title"];var Ae=n(12),Ne=n.n(Ae),Be=n(24);me.c.add(Ce.c);var Ve={props:["status"],data:function(){return{filterWord:""}},components:{Popover:Be.default},methods:{addReaction:function(e,t,n){var r=this.status.emoji_reactions.find((function(e){return e.name===t}));r&&r.me?this.$store.dispatch("unreactWithEmoji",{id:this.status.id,emoji:t}):this.$store.dispatch("reactWithEmoji",{id:this.status.id,emoji:t}),n()},focusInput:function(){var e=this;this.$nextTick((function(){var t=e.$el.querySelector("input");t&&t.focus()}))}},computed:{commonEmojis:function(){return[{displayText:"thumbsup",replacement:"ðŸ‘"},{displayText:"angry",replacement:"ðŸ˜ "},{displayText:"eyes",replacement:"ðŸ‘€"},{displayText:"joy",replacement:"ðŸ˜‚"},{displayText:"fire",replacement:"ðŸ”¥"}]},emojis:function(){if(""!==this.filterWord){for(var e=this.filterWord.toLowerCase(),t=[],n=0,r=[].concat(Ne()(this.$store.state.instance.emoji),Ne()(this.$store.state.instance.customEmoji));n<r.length;n++){var i=r[n];if(i.replacement===this.filterWord)return[i];var o=i.displayText.toLowerCase().indexOf(e);o>-1&&(Array.isArray(t[o])||(t[o]=[]),t[o].push(i))}return t.flat()}return[].concat(Ne()(this.$store.state.instance.emoji),Ne()(this.$store.state.instance.customEmoji))||[]},mergedConfig:function(){return this.$store.getters.mergedConfig}}};n(548);var He=ge()(Ve,[["render",function(e,t,n,i,o,s){const a=Object(r.J)("FAIcon"),c=Object(r.J)("Popover");return Object(r.D)(),Object(r.h)(c,{trigger:"click",class:"ReactButton",placement:"top",offset:{y:5},"bound-to":{x:"container"},"remove-padding":"",onShow:e.focusInput},{content:Object(r.V)(({close:n})=>[Object(r.k)("div",Te,[Object(r.W)(Object(r.k)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.filterWord=t),size:"1",placeholder:e.$t("emoji.search_emoji")},null,8,Ie),[[r.S,e.filterWord]])]),Object(r.k)("div",$e,[(Object(r.D)(!0),Object(r.j)(r.a,null,Object(r.H)(e.commonEmojis,t=>(Object(r.D)(),Object(r.j)("span",{key:t.replacement,class:"emoji-button",title:t.displayText,onClick:r=>e.addReaction(r,t.replacement,n)},Object(r.O)(t.replacement),9,ze))),128)),Me,(Object(r.D)(!0),Object(r.j)(r.a,null,Object(r.H)(e.emojis,(t,i)=>(Object(r.D)(),Object(r.j)("span",{key:i,class:"emoji-button",title:t.displayText,onClick:r=>e.addReaction(r,t.replacement,n)},[!1!==t.imageUrl?(Object(r.D)(),Object(r.j)("img",{key:0,src:t.imageUrl,width:"30px",class:"custom-reaction"},null,8,Fe)):(Object(r.D)(),Object(r.j)("span",Ee,Object(r.O)(t.replacement),1))],8,Ue))),128)),Le])]),trigger:Object(r.V)(()=>[Object(r.k)("button",{class:"button-unstyled popover-trigger",title:e.$t("tool_tip.add_reaction")},[Object(r.m)(a,{class:"fa-scale-110 fa-old-padding",icon:["far","smile-beam"]})],8,Re)]),_:1},8,["onShow"])}]]);const qe={class:"RetweetButton"},Je=["title"],We={key:1},Ye={key:2},Ge={key:3,class:"no-event"};me.c.add(fe.Z);var Ke={props:["status","loggedIn","visibility"],data:function(){return{animated:!1}},methods:{retweet:function(){var e=this;this.status.repeated?this.$store.dispatch("unretweet",{id:this.status.id}):this.$store.dispatch("retweet",{id:this.status.id}),this.animated=!0,setTimeout((function(){e.animated=!1}),500)}},computed:{mergedConfig:function(){return this.$store.getters.mergedConfig}}};n(549);var Xe=ge()(Ke,[["render",function(e,t,n,i,o,s){const a=Object(r.J)("FAIcon");return Object(r.D)(),Object(r.j)("div",qe,["private"!==e.visibility&&"direct"!==e.visibility&&e.loggedIn?(Object(r.D)(),Object(r.j)("button",{key:0,class:Object(r.w)(["button-unstyled interactive",e.status.repeated&&"-repeated"]),title:e.$t("tool_tip.repeat"),onClick:t[0]||(t[0]=Object(r.Y)(t=>e.retweet(),["prevent"]))},[Object(r.m)(a,{class:"fa-scale-110 fa-old-padding",icon:"retweet",spin:e.animated},null,8,["spin"])],10,Je)):e.loggedIn?(Object(r.D)(),Object(r.j)("span",We,[Object(r.m)(a,{class:"fa-scale-110 fa-old-padding",icon:"lock",title:e.$t("timeline.no_retweet_hint")},null,8,["title"])])):(Object(r.D)(),Object(r.j)("span",Ye,[Object(r.m)(a,{class:"fa-scale-110 fa-old-padding",icon:"retweet",title:e.$t("tool_tip.repeat")},null,8,["title"])])),!e.mergedConfig.hidePostStats&&e.status.repeat_num>0?(Object(r.D)(),Object(r.j)("span",Ge,Object(r.O)(e.status.repeat_num),1)):Object(r.i)("",!0)])}]]);const Ze={class:"dropdown-menu"},Qe=["onClick"],et=["onClick"],tt=["onClick"],nt=["onClick"],rt=["onClick"],it=["onClick"],ot=["href"],st=["onClick"],at={class:"button-unstyled popover-trigger"};me.c.add(fe.w,fe.j,Ce.a,fe.C,fe.qb,fe.fb,fe.A,Ce.b);var ct={props:["status"],components:{Popover:Be.default},methods:{deleteStatus:function(){window.confirm(this.$t("status.delete_confirm"))&&this.$store.dispatch("deleteStatus",{id:this.status.id})},pinStatus:function(){var e=this;this.$store.dispatch("pinStatus",this.status.id).then((function(){return e.$emit("onSuccess")})).catch((function(t){return e.$emit("onError",t.error.error)}))},unpinStatus:function(){var e=this;this.$store.dispatch("unpinStatus",this.status.id).then((function(){return e.$emit("onSuccess")})).catch((function(t){return e.$emit("onError",t.error.error)}))},muteConversation:function(){var e=this;this.$store.dispatch("muteConversation",this.status.id).then((function(){return e.$emit("onSuccess")})).catch((function(t){return e.$emit("onError",t.error.error)}))},unmuteConversation:function(){var e=this;this.$store.dispatch("unmuteConversation",this.status.id).then((function(){return e.$emit("onSuccess")})).catch((function(t){return e.$emit("onError",t.error.error)}))},copyLink:function(){var e=this;navigator.clipboard.writeText(this.statusLink).then((function(){return e.$emit("onSuccess")})).catch((function(t){return e.$emit("onError",t.error.error)}))},bookmarkStatus:function(){var e=this;this.$store.dispatch("bookmark",{id:this.status.id}).then((function(){return e.$emit("onSuccess")})).catch((function(t){return e.$emit("onError",t.error.error)}))},unbookmarkStatus:function(){var e=this;this.$store.dispatch("unbookmark",{id:this.status.id}).then((function(){return e.$emit("onSuccess")})).catch((function(t){return e.$emit("onError",t.error.error)}))},reportStatus:function(){this.$store.dispatch("openUserReportingModal",{userId:this.status.user.id,statusIds:[this.status.id]})}},computed:{currentUser:function(){return this.$store.state.users.currentUser},canDelete:function(){if(this.currentUser)return this.currentUser.rights.moderator||this.currentUser.rights.admin||this.status.user.id===this.currentUser.id},ownStatus:function(){return this.status.user.id===this.currentUser.id},canPin:function(){return this.ownStatus&&("public"===this.status.visibility||"unlisted"===this.status.visibility)},canMute:function(){return!!this.currentUser},statusLink:function(){return"".concat(this.$store.state.instance.server).concat(this.$router.resolve({name:"conversation",params:{id:this.status.id}}).href)}}};n(550);var lt=ge()(ct,[["render",function(e,t,n,i,o,s){const a=Object(r.J)("FAIcon"),c=Object(r.J)("Popover");return Object(r.D)(),Object(r.h)(c,{class:"ExtraButtons",trigger:"click",placement:"top",offset:{y:5},"bound-to":{x:"container"},"remove-padding":""},{content:Object(r.V)(({close:n})=>[Object(r.k)("div",Ze,[e.canMute&&!e.status.thread_muted?(Object(r.D)(),Object(r.j)("button",{key:0,class:"button-default dropdown-item dropdown-item-icon",onClick:t[0]||(t[0]=Object(r.Y)((...t)=>e.muteConversation&&e.muteConversation(...t),["prevent"]))},[Object(r.m)(a,{"fixed-width":"",icon:"eye-slash"}),Object(r.k)("span",null,Object(r.O)(e.$t("status.mute_conversation")),1)])):Object(r.i)("",!0),e.canMute&&e.status.thread_muted?(Object(r.D)(),Object(r.j)("button",{key:1,class:"button-default dropdown-item dropdown-item-icon",onClick:t[1]||(t[1]=Object(r.Y)((...t)=>e.unmuteConversation&&e.unmuteConversation(...t),["prevent"]))},[Object(r.m)(a,{"fixed-width":"",icon:"eye-slash"}),Object(r.k)("span",null,Object(r.O)(e.$t("status.unmute_conversation")),1)])):Object(r.i)("",!0),!e.status.pinned&&e.canPin?(Object(r.D)(),Object(r.j)("button",{key:2,class:"button-default dropdown-item dropdown-item-icon",onClick:[t[2]||(t[2]=Object(r.Y)((...t)=>e.pinStatus&&e.pinStatus(...t),["prevent"])),n]},[Object(r.m)(a,{"fixed-width":"",icon:"thumbtack"}),Object(r.k)("span",null,Object(r.O)(e.$t("status.pin")),1)],8,Qe)):Object(r.i)("",!0),e.status.pinned&&e.canPin?(Object(r.D)(),Object(r.j)("button",{key:3,class:"button-default dropdown-item dropdown-item-icon",onClick:[t[3]||(t[3]=Object(r.Y)((...t)=>e.unpinStatus&&e.unpinStatus(...t),["prevent"])),n]},[Object(r.m)(a,{"fixed-width":"",icon:"thumbtack"}),Object(r.k)("span",null,Object(r.O)(e.$t("status.unpin")),1)],8,et)):Object(r.i)("",!0),e.status.bookmarked?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("button",{key:4,class:"button-default dropdown-item dropdown-item-icon",onClick:[t[4]||(t[4]=Object(r.Y)((...t)=>e.bookmarkStatus&&e.bookmarkStatus(...t),["prevent"])),n]},[Object(r.m)(a,{"fixed-width":"",icon:["far","bookmark"]}),Object(r.k)("span",null,Object(r.O)(e.$t("status.bookmark")),1)],8,tt)),e.status.bookmarked?(Object(r.D)(),Object(r.j)("button",{key:5,class:"button-default dropdown-item dropdown-item-icon",onClick:[t[5]||(t[5]=Object(r.Y)((...t)=>e.unbookmarkStatus&&e.unbookmarkStatus(...t),["prevent"])),n]},[Object(r.m)(a,{"fixed-width":"",icon:"bookmark"}),Object(r.k)("span",null,Object(r.O)(e.$t("status.unbookmark")),1)],8,nt)):Object(r.i)("",!0),e.canDelete?(Object(r.D)(),Object(r.j)("button",{key:6,class:"button-default dropdown-item dropdown-item-icon",onClick:[t[6]||(t[6]=Object(r.Y)((...t)=>e.deleteStatus&&e.deleteStatus(...t),["prevent"])),n]},[Object(r.m)(a,{"fixed-width":"",icon:"times"}),Object(r.k)("span",null,Object(r.O)(e.$t("status.delete")),1)],8,rt)):Object(r.i)("",!0),Object(r.k)("button",{class:"button-default dropdown-item dropdown-item-icon",onClick:[t[7]||(t[7]=Object(r.Y)((...t)=>e.copyLink&&e.copyLink(...t),["prevent"])),n]},[Object(r.m)(a,{"fixed-width":"",icon:"share-alt"}),Object(r.k)("span",null,Object(r.O)(e.$t("status.copy_link")),1)],8,it),e.status.is_local?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("a",{key:7,class:"button-default dropdown-item dropdown-item-icon",title:"Source",href:e.status.external_url,target:"_blank"},[Object(r.m)(a,{"fixed-width":"",icon:"external-link-alt"}),Object(r.k)("span",null,Object(r.O)(e.$t("status.external_source")),1)],8,ot)),Object(r.k)("button",{class:"button-default dropdown-item dropdown-item-icon",onClick:[t[8]||(t[8]=Object(r.Y)((...t)=>e.reportStatus&&e.reportStatus(...t),["prevent"])),n]},[Object(r.m)(a,{"fixed-width":"",icon:["far","flag"]}),Object(r.k)("span",null,Object(r.O)(e.$t("user_card.report")),1)],8,st)])]),trigger:Object(r.V)(()=>[Object(r.k)("button",at,[Object(r.m)(a,{class:"fa-scale-110 fa-old-padding",icon:"ellipsis-h"})])]),_:1})}]]),ut=n(57),dt=n(35),pt=n(22),ht=n(144),bt=n(59),mt=n(45),ft=n(25);const Ot={key:1,class:"status-preview-no-content faint"},jt={key:2,class:"status-preview-no-content"};var gt=n(30),vt=n.n(gt);me.c.add(fe.r);var yt={name:"StatusPopover",props:["statusId"],data:function(){return{error:!1}},computed:{status:function(){return vt()(this.$store.state.statuses.allStatuses,{id:this.statusId})}},components:{Status:Object(r.n)((function(){return Promise.resolve().then(n.bind(null,34))})),Popover:Object(r.n)((function(){return Promise.resolve().then(n.bind(null,24))}))},methods:{enter:function(){var e=this;if(!this.status){if(!this.statusId)return void(this.error=!0);this.$store.dispatch("fetchStatus",this.statusId).then((function(t){return e.error=!1})).catch((function(t){return e.error=!0}))}}}};n(552);var wt=ge()(yt,[["render",function(e,t,n,i,o,s){const a=Object(r.J)("Status"),c=Object(r.J)("FAIcon"),l=Object(r.J)("Popover");return Object(r.D)(),Object(r.h)(l,{trigger:"hover","popover-class":"popover-default status-popover","bound-to":{x:"container"},onShow:e.enter},{trigger:Object(r.V)(()=>[Object(r.I)(e.$slots,"default")]),content:Object(r.V)(()=>[e.status?(Object(r.D)(),Object(r.h)(a,{key:0,"is-preview":!0,statusoid:e.status,compact:!0},null,8,["statusoid"])):e.error?(Object(r.D)(),Object(r.j)("div",Ot,Object(r.O)(e.$t("status.status_unavailable")),1)):(Object(r.D)(),Object(r.j)("div",jt,[Object(r.m)(c,{icon:"circle-notch",spin:"",size:"2x"})]))]),_:3},8,["onShow"])}]]);const kt={class:"user-list-popover"},_t={class:"user-list-names"},St={class:"user-list-screen-name"};me.c.add(fe.r);var Ct={name:"UserListPopover",props:["users"],components:{RichContent:ft.a,Popover:Object(r.n)((function(){return Promise.resolve().then(n.bind(null,24))})),UserAvatar:Object(r.n)((function(){return Promise.resolve().then(n.bind(null,22))}))},computed:{usersCapped:function(){return this.users.slice(0,16)}}};n(553);var Pt=ge()(Ct,[["render",function(e,t,n,i,o,s){const a=Object(r.J)("UserAvatar"),c=Object(r.J)("RichContent"),l=Object(r.J)("FAIcon"),u=Object(r.J)("Popover");return Object(r.D)(),Object(r.h)(u,{trigger:"hover",placement:"top",offset:{y:5}},{trigger:Object(r.V)(()=>[Object(r.I)(e.$slots,"default")]),content:Object(r.V)(()=>[Object(r.k)("div",kt,[e.users.length?(Object(r.D)(!0),Object(r.j)(r.a,{key:0},Object(r.H)(e.usersCapped,e=>(Object(r.D)(),Object(r.j)("div",{key:e.id,class:"user-list-row"},[Object(r.m)(a,{user:e,class:"avatar-small",compact:!0},null,8,["user"]),Object(r.k)("div",_t,[Object(r.m)(c,{class:"username",title:"@"+e.screen_name_ui,html:e.name_html,emoji:e.emoji},null,8,["title","html","emoji"]),Object(r.k)("span",St,Object(r.O)(e.screen_name_ui),1)])]))),128)):(Object(r.D)(),Object(r.h)(l,{key:1,icon:"circle-notch",spin:"",size:"3x"}))])]),_:3})}]]);const xt={class:"emoji-reactions"},Dt=["onClick"],Tt={key:0},It=["src","title"],$t={key:1},zt={class:"reaction-emoji unicode-emoji"};var Mt={name:"EmojiReactions",components:{UserAvatar:pt.default,UserListPopover:Pt},props:["status"],data:function(){return{showAll:!1}},computed:{tooManyReactions:function(){return this.status.emoji_reactions.length>12},emojiReactions:function(){return this.showAll?this.status.emoji_reactions:this.status.emoji_reactions.slice(0,12)},showMoreString:function(){return"+".concat(this.status.emoji_reactions.length-12)},accountsForEmoji:function(){return this.status.emoji_reactions.reduce((function(e,t){return e[t.name]=t.accounts||[],e}),{})},loggedIn:function(){return!!this.$store.state.users.currentUser}},methods:{toggleShowAll:function(){this.showAll=!this.showAll},reactedWith:function(e){return this.status.emoji_reactions.find((function(t){return t.name===e})).me},fetchEmojiReactionsByIfMissing:function(){this.status.emoji_reactions.find((function(e){return!e.accounts}))&&this.$store.dispatch("fetchEmojiReactionsBy",this.status.id)},reactWith:function(e){this.$store.dispatch("reactWithEmoji",{id:this.status.id,emoji:e})},unreact:function(e){this.$store.dispatch("unreactWithEmoji",{id:this.status.id,emoji:e})},emojiOnClick:function(e,t){this.loggedIn&&(this.reactedWith(e)?this.unreact(e):this.reactWith(e))}}};n(554);var Ut=ge()(Mt,[["render",function(e,t,n,i,o,s){const a=Object(r.J)("UserListPopover");return Object(r.D)(),Object(r.j)("div",xt,[(Object(r.D)(!0),Object(r.j)(r.a,null,Object(r.H)(e.emojiReactions,n=>(Object(r.D)(),Object(r.h)(a,{key:n.name,users:e.accountsForEmoji[n.name]},{default:Object(r.V)(()=>[Object(r.k)("button",{class:Object(r.w)(["emoji-reaction btn button-default",{"picked-reaction":e.reactedWith(n.name),"not-clickable":!e.loggedIn}]),onClick:t=>e.emojiOnClick(n.name,t),onMouseenter:t[0]||(t[0]=t=>e.fetchEmojiReactionsByIfMissing())},[null!==n.url?(Object(r.D)(),Object(r.j)("span",Tt,[Object(r.k)("img",{src:n.url,title:n.name,class:"reaction-emoji",width:"2.55em"},null,8,It),Object(r.l)(" "+Object(r.O)(n.count),1)])):(Object(r.D)(),Object(r.j)("span",$t,[Object(r.k)("span",zt,Object(r.O)(n.name),1),Object(r.k)("span",null,Object(r.O)(n.count),1)]))],42,Dt)]),_:2},1032,["users"]))),128)),e.tooManyReactions?(Object(r.D)(),Object(r.j)("a",{key:0,class:"emoji-reaction-expand faint",href:"javascript:void(0)",onClick:t[1]||(t[1]=(...t)=>e.toggleShowAll&&e.toggleShowAll(...t))},Object(r.O)(e.showAll?e.$t("general.show_less"):e.showMoreString),1)):Object(r.i)("",!0)])}]]),Ft=n(81),Et=n(79),Lt=n(23),Rt=n(31),At=n(126);function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(n),!0).forEach((function(t){se()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}me.c.add(fe.y,fe.I,fe.O,fe.P,fe.rb,fe.Z,fe.Y,fe.W,fe.jb,fe.ib,fe.w,fe.C,fe.B,fe.qb,fe.q,fe.n,fe.e);var Vt,Ht=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},qt=function(e,t,n){var r=Ht(t),i="controlledSet".concat(r),o="uncontrolled".concat(r);e[i]?e[i](n):e[o]=n},Jt={name:"Status",components:{ReplyButton:ve,FavoriteButton:De,ReactButton:He,RetweetButton:Xe,ExtraButtons:lt,PostStatusForm:ut.a,UserCard:dt.a,UserAvatar:pt.default,AvatarList:ht.a,Timeago:bt.a,StatusPopover:wt,UserListPopover:Pt,EmojiReactions:Ut,StatusContent:mt.a,RichContent:ft.a,MentionLink:Et.a,MentionsLine:Ft.b},props:["statusoid","expandable","inConversation","focused","highlight","compact","replies","isPreview","noHeading","inlineExpanded","showPinned","inProfile","profileUserId","simpleTree","controlledThreadDisplayStatus","controlledToggleThreadDisplay","showOtherRepliesAsButton","controlledShowingTall","controlledToggleShowingTall","controlledExpandingSubject","controlledToggleExpandingSubject","controlledShowingLongSubject","controlledToggleShowingLongSubject","controlledReplying","controlledToggleReplying","controlledMediaPlaying","controlledSetMediaPlaying","dive"],data:function(){return{uncontrolledReplying:!1,unmuted:!1,userExpanded:!1,uncontrolledMediaPlaying:[],suspendable:!0,error:null,headTailLinks:null}},computed:Bt(Bt({},(Vt=["replying","mediaPlaying"],Vt.reduce((function(e,t){var n=Ht(t),r="controlledToggle".concat(n),i="controlled".concat(n),o="uncontrolled".concat(n);return e[t]=function(){return void 0===this.$data[r]&&void 0===this.$props[r]||!this[r]?this[o]:this[i]},e}),{}))),{},{muteWords:function(){return this.mergedConfig.muteWords},showReasonMutedThread:function(){return(this.status.thread_muted||this.status.reblog&&this.status.reblog.thread_muted)&&!this.inConversation},repeaterClass:function(){var e=this.statusoid.user;return Object(Rt.a)(e)},userClass:function(){var e=this.retweet?this.statusoid.retweeted_status.user:this.statusoid.user;return Object(Rt.a)(e)},deleted:function(){return this.statusoid.deleted},repeaterStyle:function(){var e=this.statusoid.user,t=this.mergedConfig.highlight;return Object(Rt.b)(t[e.screen_name])},userStyle:function(){if(!this.noHeading){var e=this.retweet?this.statusoid.retweeted_status.user:this.statusoid.user,t=this.mergedConfig.highlight;return Object(Rt.b)(t[e.screen_name])}},userProfileLink:function(){return this.generateUserProfileLink(this.status.user.id,this.status.user.screen_name)},replyProfileLink:function(){if(this.isReply){var e=this.$store.getters.findUser(this.status.in_reply_to_user_id);return e?e.statusnet_profile_url:"NOT_FOUND"}},retweet:function(){return!!this.statusoid.retweeted_status},retweeterUser:function(){return this.statusoid.user},retweeter:function(){return this.statusoid.user.name||this.statusoid.user.screen_name_ui},retweeterHtml:function(){return this.statusoid.user.name},retweeterProfileLink:function(){return this.generateUserProfileLink(this.statusoid.user.id,this.statusoid.user.screen_name)},status:function(){return this.retweet?this.statusoid.retweeted_status:this.statusoid},statusFromGlobalRepository:function(){return this.$store.state.statuses.allStatusesObject[this.status.id]},loggedIn:function(){return!!this.currentUser},muteWordHits:function(){return Object(At.a)(this.status,this.muteWords)},rtBotStatus:function(){return this.statusoid.user.bot},botStatus:function(){return this.status.user.bot},botIndicator:function(){return this.botStatus&&!this.hideBotIndication},rtBotIndicator:function(){return this.rtBotStatus&&!this.hideBotIndication},mentionsLine:function(){var e=this;if(!this.headTailLinks)return[];var t=new Set(this.headTailLinks.writtenMentions.map((function(e){return e.url})));return this.status.attentions.filter((function(n){return n.id!==e.status.in_reply_to_user_id&&n.statusnet_profile_url!==e.status.user.statusnet_profile_url&&!t.has(n.statusnet_profile_url)})).map((function(e){return{url:e.statusnet_profile_url,content:e.screen_name,userId:e.id}}))},hasMentionsLine:function(){return this.mentionsLine.length>0},muted:function(){if(this.statusoid.user.id===this.currentUser.id)return!1;var e=this.userIsMuted||status.thread_muted||this.muteWordHits.length>0||this.muteBotStatuses&&this.botStatus&&!this.compact;return!this.unmuted&&!this.shouldNotMute&&e},userIsMuted:function(){if(this.statusoid.user.id===this.currentUser.id)return!1;var e=this.status,t=e.reblog,n=this.$store.getters.relationship(e.user.id),r=t&&this.$store.getters.relationship(t.user.id);return e.muted||t&&t.muted||n.muting||r&&r.muting},shouldNotMute:function(){var e=this.status,t=e.reblog;return(this.inProfile&&(!t&&e.user.id===this.profileUserId||t&&t.user.id===this.profileUserId)||this.inConversation&&e.thread_muted)&&!this.muteWordHits.length>0},hideMutedUsers:function(){return this.mergedConfig.hideMutedPosts},hideMutedThreads:function(){return this.mergedConfig.hideMutedThreads},hideFilteredStatuses:function(){return this.mergedConfig.hideFilteredStatuses},hideWordFilteredPosts:function(){return this.mergedConfig.hideWordFilteredPosts},hideStatus:function(){return!this.shouldNotMute&&(this.muted&&this.hideFilteredStatuses||this.userIsMuted&&this.hideMutedUsers||this.status.thread_muted&&this.hideMutedThreads||this.muteWordHits.length>0&&this.hideWordFilteredPosts)},isFocused:function(){return!!this.focused||!!this.inConversation&&this.status.id===this.highlight},isReply:function(){return!(!this.status.in_reply_to_status_id||!this.status.in_reply_to_user_id)},replyToName:function(){if(this.status.in_reply_to_screen_name)return this.status.in_reply_to_screen_name;var e=this.$store.getters.findUser(this.status.in_reply_to_user_id);return e&&e.screen_name_ui},replySubject:function(){if(!this.status.summary)return"";var e=ue()(this.status.summary),t=this.mergedConfig.subjectLineBehavior,n=e.match(/^re[: ]/i);return"noop"!==t&&n||"masto"===t?e:"email"===t?"re: ".concat(e):"noop"===t?"":void 0},combinedFavsAndRepeatsUsers:function(){var e=[].concat(this.statusFromGlobalRepository.favoritedBy,this.statusFromGlobalRepository.rebloggedBy);return ce()(e,"id")},tags:function(){return this.status.tags.filter((function(e){return e.hasOwnProperty("name")})).map((function(e){return e.name})).join(" ")},hidePostStats:function(){return this.mergedConfig.hidePostStats},muteBotStatuses:function(){return this.mergedConfig.muteBotStatuses},hideBotIndication:function(){return this.mergedConfig.hideBotIndication},currentUser:function(){return this.$store.state.users.currentUser},betterShadow:function(){return this.$store.state.interface.browserSupport.cssFilter},mergedConfig:function(){return this.$store.getters.mergedConfig},isSuspendable:function(){return!this.replying&&0===this.mediaPlaying.length},inThreadForest:function(){return!!this.controlledThreadDisplayStatus},threadShowing:function(){return"showing"===this.controlledThreadDisplayStatus},visibilityLocalized:function(){return this.$i18n.t("general.scope_in_timeline."+this.status.visibility)}}),methods:{visibilityIcon:function(e){switch(e){case"private":return"lock";case"unlisted":return"lock-open";case"direct":return"envelope";case"local":return"users";default:return"globe"}},showError:function(e){this.error=e},clearError:function(){this.error=void 0},toggleReplying:function(){!function(e,t){var n=Ht(t),r="controlledToggle".concat(n),i="uncontrolled".concat(n);e[r]?e[r]():e[i]=!e[i]}(this,"replying")},gotoOriginal:function(e){this.inConversation&&this.$emit("goto",e)},toggleExpanded:function(){this.$emit("toggleExpanded")},toggleMute:function(){this.unmuted=!this.unmuted},toggleUserExpanded:function(){this.userExpanded=!this.userExpanded},generateUserProfileLink:function(e,t){return Object(Lt.a)(e,t,this.$store.state.instance.restrictedNicknames)},addMediaPlaying:function(e){qt(this,"mediaPlaying",this.mediaPlaying.concat(e))},removeMediaPlaying:function(e){qt(this,"mediaPlaying",this.mediaPlaying.filter((function(t){return t!==e})))},setHeadTailLinks:function(e){this.headTailLinks=e},toggleThreadDisplay:function(){this.controlledToggleThreadDisplay()},scrollIfHighlighted:function(e){var t=e;if(this.status.id===t){var n=this.$el.getBoundingClientRect();n.top<100||n.height>=window.innerHeight-50?window.scrollBy(0,n.top-100):n.bottom>window.innerHeight-50&&window.scrollBy(0,n.bottom-window.innerHeight+50)}}},watch:{highlight:function(e){this.scrollIfHighlighted(e)},"status.repeat_num":function(e){this.isFocused&&this.statusFromGlobalRepository.rebloggedBy&&this.statusFromGlobalRepository.rebloggedBy.length!==e&&this.$store.dispatch("fetchRepeats",this.status.id)},"status.fave_num":function(e){this.isFocused&&this.statusFromGlobalRepository.favoritedBy&&this.statusFromGlobalRepository.favoritedBy.length!==e&&this.$store.dispatch("fetchFavs",this.status.id)},isSuspendable:function(e){this.suspendable=e}}};n(555);const Wt=ge()(Jt,[["render",function(e,t,n,oe,se,ae){const ce=Object(r.J)("FAIcon"),le=Object(r.J)("router-link"),ue=Object(r.J)("UserAvatar"),de=Object(r.J)("RichContent"),pe=Object(r.J)("UserCard"),he=Object(r.J)("Timeago"),be=Object(r.J)("StatusPopover"),me=Object(r.J)("MentionLink"),fe=Object(r.J)("MentionsLine"),Oe=Object(r.J)("StatusContent"),je=Object(r.J)("UserListPopover"),ge=Object(r.J)("AvatarList"),ve=Object(r.J)("EmojiReactions"),ye=Object(r.J)("reply-button"),we=Object(r.J)("retweet-button"),ke=Object(r.J)("favorite-button"),_e=Object(r.J)("ReactButton"),Se=Object(r.J)("extra-buttons"),Ce=Object(r.J)("PostStatusForm");return e.hideStatus?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("div",{key:0,ref:"root",class:Object(r.w)(["Status",[{"-focused":e.isFocused},{"-conversation":e.inlineExpanded}]])},[e.error?(Object(r.D)(),Object(r.j)("div",i,[Object(r.l)(Object(r.O)(e.error)+" ",1),Object(r.k)("span",{class:"fa-scale-110 fa-old-padding",onClick:t[0]||(t[0]=(...t)=>e.clearError&&e.clearError(...t))},[Object(r.m)(ce,{icon:"times"})])])):Object(r.i)("",!0),e.muted&&!e.isPreview?(Object(r.D)(),Object(r.j)("div",o,[Object(r.k)("small",s,[e.muted&&e.retweet?(Object(r.D)(),Object(r.h)(ce,{key:0,class:"fa-scale-110 fa-old-padding repeat-icon",icon:"retweet"})):Object(r.i)("",!0),Object(r.m)(le,{to:e.userProfileLink},{default:Object(r.V)(()=>[Object(r.l)(Object(r.O)(e.status.user.screen_name_ui),1)]),_:1},8,["to"])]),e.showReasonMutedThread?(Object(r.D)(),Object(r.j)("small",a,Object(r.O)(e.$t("status.thread_muted")),1)):Object(r.i)("",!0),e.showReasonMutedThread&&e.muteWordHits.length>0?(Object(r.D)(),Object(r.j)("small",c,Object(r.O)(e.$t("status.thread_muted_and_words")),1)):Object(r.i)("",!0),Object(r.k)("small",{class:"mute-words",title:e.muteWordHits.join(", ")},Object(r.O)(e.muteWordHits.join(", ")),9,l),Object(r.k)("button",{class:"unmute button-unstyled",onClick:t[1]||(t[1]=Object(r.Y)((...t)=>e.toggleMute&&e.toggleMute(...t),["prevent"]))},[Object(r.m)(ce,{icon:"eye-slash",class:"fa-scale-110 fa-old-padding"})])])):(Object(r.D)(),Object(r.j)(r.a,{key:2},[e.showPinned?(Object(r.D)(),Object(r.j)("div",u,[Object(r.m)(ce,{icon:"thumbtack",class:"faint"}),Object(r.k)("span",d,Object(r.O)(e.$t("status.pinned")),1)])):Object(r.i)("",!0),!e.retweet||e.noHeading||e.inConversation?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("div",{key:1,class:Object(r.w)([[e.repeaterClass,{highlighted:e.repeaterStyle}],"status-container repeat-info"]),style:Object(r.x)([e.repeaterStyle])},[e.retweet?(Object(r.D)(),Object(r.h)(ue,{key:0,class:"left-side repeater-avatar",bot:e.rtBotIndicator,"better-shadow":e.betterShadow,user:e.statusoid.user},null,8,["bot","better-shadow","user"])):Object(r.i)("",!0),Object(r.k)("div",p,[Object(r.k)("span",{class:"status-username repeater-name",title:e.retweeter},[e.retweeterHtml?(Object(r.D)(),Object(r.h)(le,{key:0,to:e.retweeterProfileLink},{default:Object(r.V)(()=>[Object(r.m)(de,{html:e.retweeterHtml,emoji:e.retweeterUser.emoji},null,8,["html","emoji"])]),_:1},8,["to"])):(Object(r.D)(),Object(r.h)(le,{key:1,to:e.retweeterProfileLink},{default:Object(r.V)(()=>[Object(r.l)(Object(r.O)(e.retweeter),1)]),_:1},8,["to"]))],8,h),b,Object(r.m)(ce,{icon:"retweet",class:"repeat-icon",title:e.$t("tool_tip.repeat")},null,8,["title"]),Object(r.l)(" "+Object(r.O)(e.$t("timeline.repeated")),1)])],6)),e.deleted?(Object(r.D)(),Object(r.j)("div",ee,[Object(r.k)("div",te,[Object(r.m)(ue,{class:"post-avatar",compact:e.compact,bot:e.botIndicator},null,8,["compact","bot"])]),Object(r.k)("div",ne,[Object(r.k)("div",re,Object(r.O)(e.$t("status.status_deleted")),1),e.replying?(Object(r.D)(),Object(r.h)(ye,{key:0,replying:e.replying,status:e.status,onToggle:e.toggleReplying},null,8,["replying","status","onToggle"])):Object(r.i)("",!0)])])):(Object(r.D)(),Object(r.j)("div",{key:2,class:Object(r.w)([[e.userClass,{highlighted:e.userStyle,"-repeat":e.retweet&&!e.inConversation}],"status-container"]),style:Object(r.x)([e.userStyle]),"data-tags":e.tags},[e.noHeading?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("div",f,[Object(r.k)("a",{href:e.$router.resolve(e.userProfileLink).href,onClickCapture:t[2]||(t[2]=Object(r.Y)((...t)=>e.toggleUserExpanded&&e.toggleUserExpanded(...t),["stop","prevent"]))},[Object(r.m)(ue,{class:"post-avatar",bot:e.botIndicator,compact:e.compact,"better-shadow":e.betterShadow,user:e.status.user},null,8,["bot","compact","better-shadow","user"])],40,O)])),Object(r.k)("div",j,[e.userExpanded?(Object(r.D)(),Object(r.h)(pe,{key:0,"user-id":e.status.user.id,rounded:!0,bordered:!0,class:"usercard"},null,8,["user-id"])):Object(r.i)("",!0),e.noHeading?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("div",g,[Object(r.k)("div",v,[Object(r.k)("div",y,[e.status.user.name_html?(Object(r.D)(),Object(r.j)("h4",{key:0,class:"status-username",title:e.status.user.name},[Object(r.m)(de,{html:e.status.user.name,emoji:e.status.user.emoji},null,8,["html","emoji"])],8,w)):(Object(r.D)(),Object(r.j)("h4",{key:1,class:"status-username",title:e.status.user.name},Object(r.O)(e.status.user.name),9,k)),Object(r.m)(le,{class:"account-name",title:e.status.user.screen_name_ui,to:e.userProfileLink},{default:Object(r.V)(()=>[Object(r.l)(Object(r.O)(e.status.user.screen_name_ui),1)]),_:1},8,["title","to"]),e.status.user&&e.status.user.favicon?(Object(r.D)(),Object(r.j)("img",{key:2,class:"status-favicon",src:e.status.user.favicon},null,8,_)):Object(r.i)("",!0)]),Object(r.k)("span",S,[Object(r.m)(le,{class:"timeago faint-link",to:{name:"conversation",params:{id:e.status.id}}},{default:Object(r.V)(()=>[Object(r.m)(he,{time:e.status.created_at,"auto-update":60},null,8,["time"])]),_:1},8,["to"]),e.status.visibility?(Object(r.D)(),Object(r.j)("span",{key:0,class:"visibility-icon",title:e.visibilityLocalized},[Object(r.m)(ce,{"fixed-width":"",class:"fa-scale-110",icon:e.visibilityIcon(e.status.visibility)},null,8,["icon"])],8,C)):Object(r.i)("",!0),e.expandable&&!e.isPreview?(Object(r.D)(),Object(r.j)("button",{key:1,class:"button-unstyled",title:e.$t("status.expand"),onClick:t[3]||(t[3]=Object(r.Y)((...t)=>e.toggleExpanded&&e.toggleExpanded(...t),["prevent"]))},[Object(r.m)(ce,{"fixed-width":"",class:"fa-scale-110",icon:"plus-square"})],8,P)):Object(r.i)("",!0),e.unmuted?(Object(r.D)(),Object(r.j)("button",{key:2,class:"button-unstyled",onClick:t[4]||(t[4]=Object(r.Y)((...t)=>e.toggleMute&&e.toggleMute(...t),["prevent"]))},[Object(r.m)(ce,{"fixed-width":"",icon:"eye-slash",class:"fa-scale-110"})])):Object(r.i)("",!0),e.inThreadForest&&e.replies&&e.replies.length&&!e.simpleTree?(Object(r.D)(),Object(r.j)("button",{key:3,class:"button-unstyled",title:e.threadShowing?e.$t("status.thread_hide"):e.$t("status.thread_show"),"aria-expanded":e.threadShowing?"true":"false",onClick:t[5]||(t[5]=Object(r.Y)((...t)=>e.toggleThreadDisplay&&e.toggleThreadDisplay(...t),["prevent"]))},[Object(r.m)(ce,{"fixed-width":"",class:"fa-scale-110",icon:e.threadShowing?"chevron-up":"chevron-down"},null,8,["icon"])],8,x)):Object(r.i)("",!0),e.dive&&!e.simpleTree?(Object(r.D)(),Object(r.j)("button",{key:4,class:"button-unstyled",title:e.$t("status.show_only_conversation_under_this"),onClick:t[6]||(t[6]=Object(r.Y)((...t)=>e.dive&&e.dive(...t),["prevent"]))},[Object(r.m)(ce,{"fixed-width":"",class:"fa-scale-110",icon:"angle-double-right"})],8,D)):Object(r.i)("",!0)])]),e.isReply||e.hasMentionsLine?(Object(r.D)(),Object(r.j)("div",T,[e.isReply?(Object(r.D)(),Object(r.j)("span",I,[e.isPreview?(Object(r.D)(),Object(r.j)("span",U,[Object(r.k)("span",F,Object(r.O)(e.$t("status.reply_to")),1)])):(Object(r.D)(),Object(r.h)(be,{key:0,"status-id":e.status.parent_visible&&e.status.in_reply_to_status_id,class:Object(r.w)(["reply-to-popover",{"-strikethrough":!e.status.parent_visible}]),style:{"min-width":"0"}},{default:Object(r.V)(()=>[Object(r.k)("button",{class:"button-unstyled reply-to","aria-label":e.$t("tool_tip.reply"),onClick:t[7]||(t[7]=Object(r.Y)(t=>e.gotoOriginal(e.status.in_reply_to_status_id),["prevent"]))},[Object(r.m)(ce,{class:"fa-scale-110 fa-old-padding",icon:"reply",flip:"horizontal"}),z,Object(r.k)("span",M,Object(r.O)(e.$t("status.reply_to")),1)],8,$)]),_:1},8,["status-id","class"])),Object(r.m)(me,{content:e.replyToName,url:e.replyProfileLink,"user-id":e.status.in_reply_to_user_id,"user-screen-name":e.status.in_reply_to_screen_name},null,8,["content","url","user-id","user-screen-name"])])):Object(r.i)("",!0),e.hasMentionsLine?(Object(r.D)(),Object(r.j)("span",E,[Object(r.k)("span",{class:"mentions","aria-label":e.$t("tool_tip.mentions"),onClick:t[8]||(t[8]=Object(r.Y)(t=>e.gotoOriginal(e.status.in_reply_to_status_id),["prevent"]))},[Object(r.k)("span",R,Object(r.O)(e.$t("status.mentions")),1)],8,L),e.hasMentionsLine?(Object(r.D)(),Object(r.h)(fe,{key:0,mentions:e.mentionsLine.slice(0,1),class:"mentions-line-first"},null,8,["mentions"])):Object(r.i)("",!0)])):Object(r.i)("",!0),e.hasMentionsLine?(Object(r.D)(),Object(r.h)(fe,{key:2,mentions:e.mentionsLine.slice(1),class:"mentions-line"},null,8,["mentions"])):Object(r.i)("",!0)])):Object(r.i)("",!0)])),Object(r.m)(Oe,{ref:"content",status:e.status,"no-heading":e.noHeading,highlight:e.highlight,focused:e.isFocused,"controlled-showing-tall":e.controlledShowingTall,"controlled-expanding-subject":e.controlledExpandingSubject,"controlled-showing-long-subject":e.controlledShowingLongSubject,"controlled-toggle-showing-tall":e.controlledToggleShowingTall,"controlled-toggle-expanding-subject":e.controlledToggleExpandingSubject,"controlled-toggle-showing-long-subject":e.controlledToggleShowingLongSubject,onMediaplay:t[9]||(t[9]=t=>e.addMediaPlaying(t)),onMediapause:t[10]||(t[10]=t=>e.removeMediaPlaying(t)),onParseReady:e.setHeadTailLinks},null,8,["status","no-heading","highlight","focused","controlled-showing-tall","controlled-expanding-subject","controlled-showing-long-subject","controlled-toggle-showing-tall","controlled-toggle-expanding-subject","controlled-toggle-showing-long-subject","onParseReady"]),e.inConversation&&!e.isPreview&&e.replies&&e.replies.length?(Object(r.D)(),Object(r.j)("div",A,[e.showOtherRepliesAsButton&&e.replies.length>1?(Object(r.D)(),Object(r.j)("button",{key:0,class:"button-unstyled -link faint",title:e.$tc("status.ancestor_follow",e.replies.length-1,{numReplies:e.replies.length-1}),onClick:t[11]||(t[11]=Object(r.Y)((...t)=>e.dive&&e.dive(...t),["prevent"]))},Object(r.O)(e.$tc("status.replies_list_with_others",e.replies.length-1,{numReplies:e.replies.length-1})),9,N)):(Object(r.D)(),Object(r.j)("span",B,Object(r.O)(e.$t("status.replies_list")),1)),(Object(r.D)(!0),Object(r.j)(r.a,null,Object(r.H)(e.replies,t=>(Object(r.D)(),Object(r.h)(be,{key:t.id,"status-id":t.id},{default:Object(r.V)(()=>[Object(r.k)("button",{class:"button-unstyled -link reply-link",onClick:Object(r.Y)(n=>e.gotoOriginal(t.id),["prevent"])},Object(r.O)(t.name),9,V)]),_:2},1032,["status-id"]))),128))])):Object(r.i)("",!0),Object(r.m)(r.e,{name:"fade"},{default:Object(r.V)(()=>[!e.hidePostStats&&e.isFocused&&e.combinedFavsAndRepeatsUsers.length>0?(Object(r.D)(),Object(r.j)("div",H,[Object(r.k)("div",q,[e.statusFromGlobalRepository.rebloggedBy&&e.statusFromGlobalRepository.rebloggedBy.length>0?(Object(r.D)(),Object(r.h)(je,{key:0,users:e.statusFromGlobalRepository.rebloggedBy},{default:Object(r.V)(()=>[Object(r.k)("div",J,[Object(r.k)("a",W,Object(r.O)(e.$t("status.repeats")),1),Object(r.k)("div",Y,Object(r.O)(e.statusFromGlobalRepository.rebloggedBy.length),1)])]),_:1},8,["users"])):Object(r.i)("",!0),e.statusFromGlobalRepository.favoritedBy&&e.statusFromGlobalRepository.favoritedBy.length>0?(Object(r.D)(),Object(r.h)(je,{key:1,users:e.statusFromGlobalRepository.favoritedBy},{default:Object(r.V)(()=>[Object(r.k)("div",G,[Object(r.k)("a",K,Object(r.O)(e.$t("status.favorites")),1),Object(r.k)("div",X,Object(r.O)(e.statusFromGlobalRepository.favoritedBy.length),1)])]),_:1},8,["users"])):Object(r.i)("",!0),Object(r.k)("div",Z,[Object(r.m)(ge,{users:e.combinedFavsAndRepeatsUsers},null,8,["users"])])])])):Object(r.i)("",!0)]),_:1}),!e.mergedConfig.emojiReactionsOnTimeline&&!e.isFocused||e.noHeading||e.isPreview?Object(r.i)("",!0):(Object(r.D)(),Object(r.h)(ve,{key:3,status:e.status},null,8,["status"])),e.noHeading||e.isPreview?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("div",Q,[Object(r.m)(ye,{replying:e.replying,status:e.status,onToggle:e.toggleReplying},null,8,["replying","status","onToggle"]),Object(r.m)(we,{visibility:e.status.visibility,"logged-in":e.loggedIn,status:e.status},null,8,["visibility","logged-in","status"]),Object(r.m)(ke,{"logged-in":e.loggedIn,status:e.status},null,8,["logged-in","status"]),e.loggedIn?(Object(r.D)(),Object(r.h)(_e,{key:0,status:e.status},null,8,["status"])):Object(r.i)("",!0),Object(r.m)(Se,{status:e.status,onOnError:e.showError,onOnSuccess:e.clearError},null,8,["status","onOnError","onOnSuccess"])]))])],14,m)),e.replying?(Object(r.D)(),Object(r.j)("div",ie,[Object(r.m)(Ce,{class:"reply-body","reply-to":e.status.id,attentions:e.status.attentions,"replied-user":e.status.user,"copy-message-scope":e.status.visibility,subject:e.replySubject,onPosted:e.toggleReplying},null,8,["reply-to","attentions","replied-user","copy-message-scope","subject","onPosted"])])):Object(r.i)("",!0)],64))],2))}]]);t.default=Wt},function(e,t,n){"use strict";var r=n(0);const i={class:"panel-heading -flexible-height"},o={class:"user-info"},s={class:"container"},a={class:"user-info-avatar-link-overlay"},c={class:"user-summary"},l={class:"top-line"},u=["href"],d={class:"bottom-line"},p={key:0,class:"alert user-role"},h={key:1,class:"alert user-role"},b={key:2,class:"alert user-role"},m={key:1},f={key:2,class:"dailyAvg"},O={class:"user-meta"},j={key:0,class:"following"},g={key:1,class:"highlighter"},v=["id"],y=["id"],w=Object(r.l)(" "+Object(r.O)(" ")+" "),k={value:"disabled"},_={value:"solid"},S={value:"striped"},C={value:"side"},P={key:0,class:"user-interactions"},x={class:"btn-group"},D=["disabled"],T=["disabled"],I=["disabled"],$={key:1,class:"user-interactions"},z={key:0,class:"panel-body"},M={key:0,class:"user-counts"},U=Object(r.k)("br",null,null,-1);var F=n(5),E=n.n(F),L=n(22),R=n(143),A=n(104),N=n(140);const B={class:"dropdown-menu"},V={key:0},H=Object(r.k)("div",{role:"separator",class:"dropdown-divider"},null,-1),q={key:1,role:"separator",class:"dropdown-divider"},J={key:2};var W=n(6),Y=n(3);const G={class:"panel-heading dialog-modal-heading"},K={class:"title"},X={class:"dialog-modal-content"},Z={class:"dialog-modal-footer user-interactions panel-footer"};var Q={props:{darkOverlay:{default:!0,type:Boolean},onCancel:{default:function(){},type:Function}}},ee=(n(526),n(4)),te=n.n(ee);var ne=te()(Q,[["render",function(e,t,n,i,o,s){return Object(r.D)(),Object(r.j)("span",{class:Object(r.w)({"dark-overlay":e.darkOverlay}),onClick:t[1]||(t[1]=Object(r.Y)(t=>e.onCancel(),["self","stop"]))},[Object(r.k)("div",{class:"dialog-modal panel panel-default",onClick:t[0]||(t[0]=Object(r.Y)(()=>{},["stop"]))},[Object(r.k)("div",G,[Object(r.k)("div",K,[Object(r.I)(e.$slots,"header")])]),Object(r.k)("div",X,[Object(r.I)(e.$slots,"default")]),Object(r.k)("div",Z,[Object(r.I)(e.$slots,"footer")])])],2)}]]),re=n(24);W.c.add(Y.n);var ie={props:["user"],data:function(){return{tags:{FORCE_NSFW:"mrf_tag:media-force-nsfw",STRIP_MEDIA:"mrf_tag:media-strip",FORCE_UNLISTED:"mrf_tag:force-unlisted",DISABLE_REMOTE_SUBSCRIPTION:"mrf_tag:disable-remote-subscription",DISABLE_ANY_SUBSCRIPTION:"mrf_tag:disable-any-subscription",SANDBOX:"mrf_tag:sandbox",QUARANTINE:"mrf_tag:quarantine"},showDeleteUserDialog:!1,toggled:!1}},components:{DialogModal:ne,Popover:re.default},computed:{tagsSet:function(){return new Set(this.user.tags)},hasTagPolicy:function(){return this.$store.state.instance.tagPolicyAvailable}},methods:{hasTag:function(e){return this.tagsSet.has(e)},toggleTag:function(e){var t=this,n=this.$store;this.tagsSet.has(e)?n.state.api.backendInteractor.untagUser({user:this.user,tag:e}).then((function(r){r.ok&&n.commit("untagUser",{user:t.user,tag:e})})):n.state.api.backendInteractor.tagUser({user:this.user,tag:e}).then((function(r){r.ok&&n.commit("tagUser",{user:t.user,tag:e})}))},toggleRight:function(e){var t=this,n=this.$store;this.user.rights[e]?n.state.api.backendInteractor.deleteRight({user:this.user,right:e}).then((function(r){r.ok&&n.commit("updateRight",{user:t.user,right:e,value:!1})})):n.state.api.backendInteractor.addRight({user:this.user,right:e}).then((function(r){r.ok&&n.commit("updateRight",{user:t.user,right:e,value:!0})}))},toggleActivationStatus:function(){this.$store.dispatch("toggleActivationStatus",{user:this.user})},deleteUserDialog:function(e){this.showDeleteUserDialog=e},deleteUser:function(){var e=this,t=this.$store,n=this.user,r=n.id,i=n.name;t.state.api.backendInteractor.deleteUser({user:n}).then((function(t){e.$store.dispatch("markStatusesAsDeleted",(function(e){return n.id===e.user.id}));var o="external-user-profile"===e.$route.name||"user-profile"===e.$route.name,s=e.$route.params.name===i||e.$route.params.id===r;o&&s&&window.history.back()}))},setToggled:function(e){this.toggled=e}}};n(528);var oe=te()(ie,[["render",function(e,t,n,i,o,s){const a=Object(r.J)("FAIcon"),c=Object(r.J)("Popover"),l=Object(r.J)("DialogModal");return Object(r.D)(),Object(r.j)("div",null,[Object(r.m)(c,{trigger:"click",class:"moderation-tools-popover",placement:"bottom",offset:{y:5},onShow:t[11]||(t[11]=t=>e.setToggled(!0)),onClose:t[12]||(t[12]=t=>e.setToggled(!1))},{content:Object(r.V)(()=>[Object(r.k)("div",B,[e.user.is_local?(Object(r.D)(),Object(r.j)("span",V,[Object(r.k)("button",{class:"button-default dropdown-item",onClick:t[0]||(t[0]=t=>e.toggleRight("admin"))},Object(r.O)(e.$t(e.user.rights.admin?"user_card.admin_menu.revoke_admin":"user_card.admin_menu.grant_admin")),1),Object(r.k)("button",{class:"button-default dropdown-item",onClick:t[1]||(t[1]=t=>e.toggleRight("moderator"))},Object(r.O)(e.$t(e.user.rights.moderator?"user_card.admin_menu.revoke_moderator":"user_card.admin_menu.grant_moderator")),1),H])):Object(r.i)("",!0),Object(r.k)("button",{class:"button-default dropdown-item",onClick:t[2]||(t[2]=t=>e.toggleActivationStatus())},Object(r.O)(e.$t(e.user.deactivated?"user_card.admin_menu.activate_account":"user_card.admin_menu.deactivate_account")),1),Object(r.k)("button",{class:"button-default dropdown-item",onClick:t[3]||(t[3]=t=>e.deleteUserDialog(!0))},Object(r.O)(e.$t("user_card.admin_menu.delete_account")),1),e.hasTagPolicy?(Object(r.D)(),Object(r.j)("div",q)):Object(r.i)("",!0),e.hasTagPolicy?(Object(r.D)(),Object(r.j)("span",J,[Object(r.k)("button",{class:"button-default dropdown-item",onClick:t[4]||(t[4]=t=>e.toggleTag(e.tags.FORCE_NSFW))},[Object(r.k)("span",{class:Object(r.w)(["menu-checkbox",{"menu-checkbox-checked":e.hasTag(e.tags.FORCE_NSFW)}])},null,2),Object(r.l)(" "+Object(r.O)(e.$t("user_card.admin_menu.force_nsfw")),1)]),Object(r.k)("button",{class:"button-default dropdown-item",onClick:t[5]||(t[5]=t=>e.toggleTag(e.tags.STRIP_MEDIA))},[Object(r.k)("span",{class:Object(r.w)(["menu-checkbox",{"menu-checkbox-checked":e.hasTag(e.tags.STRIP_MEDIA)}])},null,2),Object(r.l)(" "+Object(r.O)(e.$t("user_card.admin_menu.strip_media")),1)]),Object(r.k)("button",{class:"button-default dropdown-item",onClick:t[6]||(t[6]=t=>e.toggleTag(e.tags.FORCE_UNLISTED))},[Object(r.k)("span",{class:Object(r.w)(["menu-checkbox",{"menu-checkbox-checked":e.hasTag(e.tags.FORCE_UNLISTED)}])},null,2),Object(r.l)(" "+Object(r.O)(e.$t("user_card.admin_menu.force_unlisted")),1)]),Object(r.k)("button",{class:"button-default dropdown-item",onClick:t[7]||(t[7]=t=>e.toggleTag(e.tags.SANDBOX))},[Object(r.k)("span",{class:Object(r.w)(["menu-checkbox",{"menu-checkbox-checked":e.hasTag(e.tags.SANDBOX)}])},null,2),Object(r.l)(" "+Object(r.O)(e.$t("user_card.admin_menu.sandbox")),1)]),e.user.is_local?(Object(r.D)(),Object(r.j)("button",{key:0,class:"button-default dropdown-item",onClick:t[8]||(t[8]=t=>e.toggleTag(e.tags.DISABLE_REMOTE_SUBSCRIPTION))},[Object(r.k)("span",{class:Object(r.w)(["menu-checkbox",{"menu-checkbox-checked":e.hasTag(e.tags.DISABLE_REMOTE_SUBSCRIPTION)}])},null,2),Object(r.l)(" "+Object(r.O)(e.$t("user_card.admin_menu.disable_remote_subscription")),1)])):Object(r.i)("",!0),e.user.is_local?(Object(r.D)(),Object(r.j)("button",{key:1,class:"button-default dropdown-item",onClick:t[9]||(t[9]=t=>e.toggleTag(e.tags.DISABLE_ANY_SUBSCRIPTION))},[Object(r.k)("span",{class:Object(r.w)(["menu-checkbox",{"menu-checkbox-checked":e.hasTag(e.tags.DISABLE_ANY_SUBSCRIPTION)}])},null,2),Object(r.l)(" "+Object(r.O)(e.$t("user_card.admin_menu.disable_any_subscription")),1)])):Object(r.i)("",!0),e.user.is_local?(Object(r.D)(),Object(r.j)("button",{key:2,class:"button-default dropdown-item",onClick:t[10]||(t[10]=t=>e.toggleTag(e.tags.QUARANTINE))},[Object(r.k)("span",{class:Object(r.w)(["menu-checkbox",{"menu-checkbox-checked":e.hasTag(e.tags.QUARANTINE)}])},null,2),Object(r.l)(" "+Object(r.O)(e.$t("user_card.admin_menu.quarantine")),1)])):Object(r.i)("",!0)])):Object(r.i)("",!0)])]),trigger:Object(r.V)(()=>[Object(r.k)("button",{class:Object(r.w)(["btn button-default btn-block moderation-tools-button",{toggled:e.toggled}])},[Object(r.l)(Object(r.O)(e.$t("user_card.admin_menu.moderation"))+" ",1),Object(r.m)(a,{icon:"chevron-down"})],2)]),_:1}),(Object(r.D)(),Object(r.h)(r.c,{to:"#modal"},[e.showDeleteUserDialog?(Object(r.D)(),Object(r.h)(l,{key:0,"on-cancel":e.deleteUserDialog.bind(this,!1)},{header:Object(r.V)(()=>[Object(r.l)(Object(r.O)(e.$t("user_card.admin_menu.delete_user")),1)]),footer:Object(r.V)(()=>[Object(r.k)("button",{class:"btn button-default",onClick:t[13]||(t[13]=t=>e.deleteUserDialog(!1))},Object(r.O)(e.$t("general.cancel")),1),Object(r.k)("button",{class:"btn button-default danger",onClick:t[14]||(t[14]=t=>e.deleteUser())},Object(r.O)(e.$t("user_card.admin_menu.delete_user")),1)]),default:Object(r.V)(()=>[Object(r.k)("p",null,Object(r.O)(e.$t("user_card.admin_menu.delete_user_confirmation")),1)]),_:1},8,["on-cancel"])):Object(r.i)("",!0)]))])}]]);const se={class:"AccountActions"},ae={class:"dropdown-menu"},ce=Object(r.k)("div",{role:"separator",class:"dropdown-divider"},null,-1),le={class:"button-unstyled ellipsis-button"};var ue=n(8);function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}W.c.add(Y.x);var pe={props:["user","relationship"],data:function(){return{}},components:{ProgressButton:A.a,Popover:re.default},methods:{showRepeats:function(){this.$store.dispatch("showReblogs",this.user.id)},hideRepeats:function(){this.$store.dispatch("hideReblogs",this.user.id)},blockUser:function(){this.$store.dispatch("blockUser",this.user.id)},unblockUser:function(){this.$store.dispatch("unblockUser",this.user.id)},reportUser:function(){this.$store.dispatch("openUserReportingModal",{userId:this.user.id})},openChat:function(){this.$router.push({name:"chat",params:{username:this.$store.state.users.currentUser.screen_name,recipient_id:this.user.id}})}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(ue.e)({pleromaChatMessagesAvailable:function(e){return e.instance.pleromaChatMessagesAvailable}}))};n(529);var he=te()(pe,[["render",function(e,t,n,i,o,s){const a=Object(r.J)("FAIcon"),c=Object(r.J)("Popover");return Object(r.D)(),Object(r.j)("div",se,[Object(r.m)(c,{trigger:"click",placement:"bottom","bound-to":{x:"container"},"remove-padding":""},{content:Object(r.V)(()=>[Object(r.k)("div",ae,[e.relationship.following?(Object(r.D)(),Object(r.j)(r.a,{key:0},[e.relationship.showing_reblogs?(Object(r.D)(),Object(r.j)("button",{key:0,class:"btn button-default dropdown-item",onClick:t[0]||(t[0]=(...t)=>e.hideRepeats&&e.hideRepeats(...t))},Object(r.O)(e.$t("user_card.hide_repeats")),1)):Object(r.i)("",!0),e.relationship.showing_reblogs?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("button",{key:1,class:"btn button-default dropdown-item",onClick:t[1]||(t[1]=(...t)=>e.showRepeats&&e.showRepeats(...t))},Object(r.O)(e.$t("user_card.show_repeats")),1)),ce],64)):Object(r.i)("",!0),e.relationship.blocking?(Object(r.D)(),Object(r.j)("button",{key:1,class:"btn button-default btn-block dropdown-item",onClick:t[2]||(t[2]=(...t)=>e.unblockUser&&e.unblockUser(...t))},Object(r.O)(e.$t("user_card.unblock")),1)):(Object(r.D)(),Object(r.j)("button",{key:2,class:"btn button-default btn-block dropdown-item",onClick:t[3]||(t[3]=(...t)=>e.blockUser&&e.blockUser(...t))},Object(r.O)(e.$t("user_card.block")),1)),Object(r.k)("button",{class:"btn button-default btn-block dropdown-item",onClick:t[4]||(t[4]=(...t)=>e.reportUser&&e.reportUser(...t))},Object(r.O)(e.$t("user_card.report")),1),e.pleromaChatMessagesAvailable?(Object(r.D)(),Object(r.j)("button",{key:3,class:"btn button-default btn-block dropdown-item",onClick:t[5]||(t[5]=(...t)=>e.openChat&&e.openChat(...t))},Object(r.O)(e.$t("user_card.message")),1)):Object(r.i)("",!0)])]),trigger:Object(r.V)(()=>[Object(r.k)("button",le,[Object(r.m)(a,{class:"icon",icon:"ellipsis-v"})])]),_:1})])}]]),be=n(52),me=n(25),fe=n(23);function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}W.c.add(Y.bb,Y.i,Y.db,Y.A,Y.v);var ge={props:["userId","switcher","selected","hideBio","rounded","bordered","allowZoomingAvatar"],data:function(){return{followRequestInProgress:!1,betterShadow:this.$store.state.interface.browserSupport.cssFilter}},created:function(){this.$store.dispatch("fetchUserRelationship",this.user.id)},computed:je({user:function(){return this.$store.getters.findUser(this.userId)},relationship:function(){return this.$store.getters.relationship(this.userId)},classes:function(){return[{"user-card-rounded-t":"top"===this.rounded,"user-card-rounded":!0===this.rounded,"user-card-bordered":!0===this.bordered}]},style:function(){return{backgroundImage:["linear-gradient(to bottom, var(--profileTint), var(--profileTint))","url(".concat(this.user.cover_photo,")")].join(", ")}},isOtherUser:function(){return this.user.id!==this.$store.state.users.currentUser.id},subscribeUrl:function(){var e=new URL(this.user.statusnet_profile_url);return"".concat(e.protocol,"//").concat(e.host,"/main/ostatus")},loggedIn:function(){return this.$store.state.users.currentUser},dailyAvg:function(){var e=Math.ceil((new Date-new Date(this.user.created_at))/864e5);return Math.round(this.user.statuses_count/e)},userHighlightType:je({get:function(){var e=this.$store.getters.mergedConfig.highlight[this.user.screen_name];return e&&e.type||"disabled"},set:function(e){var t=this.$store.getters.mergedConfig.highlight[this.user.screen_name];"disabled"!==e?this.$store.dispatch("setHighlight",{user:this.user.screen_name,color:t&&t.color||"#FFFFFF",type:e}):this.$store.dispatch("setHighlight",{user:this.user.screen_name,color:void 0})}},Object(ue.c)(["mergedConfig"])),userHighlightColor:{get:function(){var e=this.$store.getters.mergedConfig.highlight[this.user.screen_name];return e&&e.color},set:function(e){this.$store.dispatch("setHighlight",{user:this.user.screen_name,color:e})}},visibleRole:function(){var e=this.user.rights;if(e){var t=e.admin||e.moderator,n=e.admin?"admin":"moderator";return t&&n}},hideFollowsCount:function(){return this.isOtherUser&&this.user.hide_follows_count},hideFollowersCount:function(){return this.isOtherUser&&this.user.hide_followers_count}},Object(ue.c)(["mergedConfig"])),components:{UserAvatar:L.default,RemoteFollow:R.a,ModerationTools:oe,AccountActions:he,ProgressButton:A.a,FollowButton:N.a,Select:be.a,RichContent:me.a},methods:{refetchRelationship:function(){return this.$store.dispatch("fetchUserRelationship",this.user.id)},muteUser:function(){this.$store.dispatch("muteUser",this.user.id)},unmuteUser:function(){this.$store.dispatch("unmuteUser",this.user.id)},muteDomain:function(){var e=this;this.$store.dispatch("muteDomain",this.user.screen_name.split("@")[1]).then((function(){return e.refetchRelationship()}))},unmuteDomain:function(){var e=this;this.$store.dispatch("unmuteDomain",this.user.screen_name.split("@")[1]).then((function(){return e.refetchRelationship()}))},subscribeUser:function(){return this.$store.dispatch("subscribeUser",this.user.id)},unsubscribeUser:function(){return this.$store.dispatch("unsubscribeUser",this.user.id)},setProfileView:function(e){this.switcher&&this.$store.commit("setProfileView",{v:e})},linkClicked:function(e){var t=e.target;"SPAN"===t.tagName&&(t=t.parentNode),"A"===t.tagName&&window.open(t.href,"_blank")},userProfileLink:function(e){return Object(fe.a)(e.id,e.screen_name,this.$store.state.instance.restrictedNicknames)},openProfileTab:function(){this.$store.dispatch("openSettingsModalTab","profile")},zoomAvatar:function(){var e={url:this.user.profile_image_url_original,mimetype:"image"};this.$store.dispatch("setMedia",[e]),this.$store.dispatch("setCurrentMedia",e)},mentionUser:function(){this.$store.dispatch("openPostStatusModal",{replyTo:!0,repliedUser:this.user})}}};n(530);const ve=te()(ge,[["render",function(e,t,n,F,E,L){const R=Object(r.J)("UserAvatar"),A=Object(r.J)("FAIcon"),N=Object(r.J)("router-link"),B=Object(r.J)("RichContent"),V=Object(r.J)("AccountActions"),H=Object(r.J)("Select"),q=Object(r.J)("FollowButton"),J=Object(r.J)("ProgressButton"),W=Object(r.J)("FALayers"),Y=Object(r.J)("ModerationTools"),G=Object(r.J)("RemoteFollow");return Object(r.D)(),Object(r.j)("div",{class:Object(r.w)(["user-card",e.classes])},[Object(r.k)("div",{class:Object(r.w)([{"hide-bio":e.hideBio},"background-image"]),style:Object(r.x)(e.style)},null,6),Object(r.k)("div",i,[Object(r.k)("div",o,[Object(r.k)("div",s,[e.allowZoomingAvatar?(Object(r.D)(),Object(r.j)("a",{key:0,class:"user-info-avatar-link",onClick:t[0]||(t[0]=(...t)=>e.zoomAvatar&&e.zoomAvatar(...t))},[Object(r.m)(R,{"better-shadow":e.betterShadow,user:e.user},null,8,["better-shadow","user"]),Object(r.k)("div",a,[Object(r.m)(A,{class:"fa-scale-110 fa-old-padding",icon:"search-plus"})])])):(Object(r.D)(),Object(r.h)(N,{key:1,to:e.userProfileLink(e.user)},{default:Object(r.V)(()=>[Object(r.m)(R,{"better-shadow":e.betterShadow,user:e.user},null,8,["better-shadow","user"])]),_:1},8,["to"])),Object(r.k)("div",c,[Object(r.k)("div",l,[Object(r.m)(B,{title:e.user.name,class:"user-name",html:e.user.name,emoji:e.user.emoji},null,8,["title","html","emoji"]),!e.isOtherUser&&e.user.is_local?(Object(r.D)(),Object(r.j)("button",{key:0,class:"button-unstyled edit-profile-button",onClick:t[1]||(t[1]=Object(r.Y)((...t)=>e.openProfileTab&&e.openProfileTab(...t),["stop"]))},[Object(r.m)(A,{"fixed-width":"",class:"icon",icon:"edit",title:e.$t("user_card.edit_profile")},null,8,["title"])])):Object(r.i)("",!0),e.isOtherUser&&!e.user.is_local?(Object(r.D)(),Object(r.j)("a",{key:1,href:e.user.statusnet_profile_url,target:"_blank",class:"button-unstyled external-link-button"},[Object(r.m)(A,{class:"icon",icon:"external-link-alt"})],8,u)):Object(r.i)("",!0),e.isOtherUser&&e.loggedIn?(Object(r.D)(),Object(r.h)(V,{key:2,user:e.user,relationship:e.relationship},null,8,["user","relationship"])):Object(r.i)("",!0)]),Object(r.k)("div",d,[Object(r.m)(N,{class:"user-screen-name",title:e.user.screen_name_ui,to:e.userProfileLink(e.user)},{default:Object(r.V)(()=>[Object(r.l)(" @"+Object(r.O)(e.user.screen_name_ui),1)]),_:1},8,["title","to"]),e.hideBio?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)(r.a,{key:0},[e.user.deactivated?(Object(r.D)(),Object(r.j)("span",p,Object(r.O)(e.$t("user_card.deactivated")),1)):Object(r.i)("",!0),e.visibleRole?(Object(r.D)(),Object(r.j)("span",h,Object(r.O)(e.$t("general.role."+e.visibleRole)),1)):Object(r.i)("",!0),e.user.bot?(Object(r.D)(),Object(r.j)("span",b,Object(r.O)(e.$t("user_card.bot")),1)):Object(r.i)("",!0)],64)),e.user.locked?(Object(r.D)(),Object(r.j)("span",m,[Object(r.m)(A,{class:"lock-icon",icon:"lock",size:"sm"})])):Object(r.i)("",!0),e.mergedConfig.hideUserStats||e.hideBio?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("span",f,Object(r.O)(e.dailyAvg)+" "+Object(r.O)(e.$t("user_card.per_day")),1))])])]),Object(r.k)("div",O,[e.relationship.followed_by&&e.loggedIn&&e.isOtherUser?(Object(r.D)(),Object(r.j)("div",j,Object(r.O)(e.$t("user_card.follows_you")),1)):Object(r.i)("",!0),!e.isOtherUser||!e.loggedIn&&e.switcher?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("div",g,["disabled"!==e.userHighlightType?Object(r.W)((Object(r.D)(),Object(r.j)("input",{key:0,id:"userHighlightColorTx"+e.user.id,"onUpdate:modelValue":t[2]||(t[2]=t=>e.userHighlightColor=t),class:"userHighlightText",type:"text"},null,8,v)),[[r.S,e.userHighlightColor]]):Object(r.i)("",!0),"disabled"!==e.userHighlightType?Object(r.W)((Object(r.D)(),Object(r.j)("input",{key:1,id:"userHighlightColor"+e.user.id,"onUpdate:modelValue":t[3]||(t[3]=t=>e.userHighlightColor=t),class:"userHighlightCl",type:"color"},null,8,y)),[[r.S,e.userHighlightColor]]):Object(r.i)("",!0),w,Object(r.m)(H,{id:"userHighlightSel"+e.user.id,modelValue:e.userHighlightType,"onUpdate:modelValue":t[4]||(t[4]=t=>e.userHighlightType=t),class:"userHighlightSel"},{default:Object(r.V)(()=>[Object(r.k)("option",k,Object(r.O)(e.$t("user_card.highlight.disabled")),1),Object(r.k)("option",_,Object(r.O)(e.$t("user_card.highlight.solid")),1),Object(r.k)("option",S,Object(r.O)(e.$t("user_card.highlight.striped")),1),Object(r.k)("option",C,Object(r.O)(e.$t("user_card.highlight.side")),1)]),_:1},8,["id","modelValue"])]))]),e.loggedIn&&e.isOtherUser?(Object(r.D)(),Object(r.j)("div",P,[Object(r.k)("div",x,[Object(r.m)(q,{relationship:e.relationship,user:e.user},null,8,["relationship","user"]),e.relationship.following?(Object(r.D)(),Object(r.j)(r.a,{key:0},[e.relationship.subscribing?(Object(r.D)(),Object(r.h)(J,{key:1,class:"btn button-default toggled",click:e.unsubscribeUser,title:e.$t("user_card.unsubscribe")},{default:Object(r.V)(()=>[Object(r.m)(W,null,{default:Object(r.V)(()=>[Object(r.m)(A,{icon:"rss",transform:"left-5 shrink-6 up-3 rotate-20",flip:"horizontal"}),Object(r.m)(A,{icon:"rss",transform:"right-5 shrink-6 up-3 rotate-20"}),Object(r.m)(A,{icon:"bell"})]),_:1})]),_:1},8,["click","title"])):(Object(r.D)(),Object(r.h)(J,{key:0,class:"btn button-default",click:e.subscribeUser,title:e.$t("user_card.subscribe")},{default:Object(r.V)(()=>[Object(r.m)(A,{icon:"bell"})]),_:1},8,["click","title"]))],64)):Object(r.i)("",!0)]),Object(r.k)("div",null,[e.relationship.muting?(Object(r.D)(),Object(r.j)("button",{key:0,class:"btn button-default btn-block toggled",disabled:e.user.deactivated,onClick:t[5]||(t[5]=(...t)=>e.unmuteUser&&e.unmuteUser(...t))},Object(r.O)(e.$t("user_card.muted")),9,D)):(Object(r.D)(),Object(r.j)("button",{key:1,class:"btn button-default btn-block",disabled:e.user.deactivated,onClick:t[6]||(t[6]=(...t)=>e.muteUser&&e.muteUser(...t))},Object(r.O)(e.$t("user_card.mute")),9,T))]),Object(r.k)("div",null,[e.relationship.domain_blocking?(Object(r.D)(),Object(r.j)("button",{key:0,class:"btn button-default btn-block toggled",onClick:t[7]||(t[7]=(...t)=>e.unmuteDomain&&e.unmuteDomain(...t))},Object(r.O)(e.$t("user_card.domain_muted")),1)):(Object(r.D)(),Object(r.j)("button",{key:1,class:"btn button-default btn-block",onClick:t[8]||(t[8]=(...t)=>e.muteDomain&&e.muteDomain(...t))},Object(r.O)(e.$t("user_card.mute_domain")),1))]),Object(r.k)("div",null,[Object(r.k)("button",{class:"btn button-default btn-block",disabled:e.user.deactivated,onClick:t[9]||(t[9]=(...t)=>e.mentionUser&&e.mentionUser(...t))},Object(r.O)(e.$t("user_card.mention")),9,I)]),"admin"===e.loggedIn.role?(Object(r.D)(),Object(r.h)(Y,{key:0,user:e.user},null,8,["user"])):Object(r.i)("",!0)])):Object(r.i)("",!0),!e.loggedIn&&e.user.is_local?(Object(r.D)(),Object(r.j)("div",$,[Object(r.m)(G,{user:e.user},null,8,["user"])])):Object(r.i)("",!0)])]),e.hideBio?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("div",z,[!e.mergedConfig.hideUserStats&&e.switcher?(Object(r.D)(),Object(r.j)("div",M,[Object(r.k)("div",{class:"user-count",onClick:t[10]||(t[10]=Object(r.Y)(t=>e.setProfileView("statuses"),["prevent"]))},[Object(r.k)("h5",null,Object(r.O)(e.$t("user_card.statuses")),1),Object(r.k)("span",null,[Object(r.l)(Object(r.O)(e.user.statuses_count)+" ",1),U])]),Object(r.k)("div",{class:"user-count",onClick:t[11]||(t[11]=Object(r.Y)(t=>e.setProfileView("friends"),["prevent"]))},[Object(r.k)("h5",null,Object(r.O)(e.$t("user_card.followees")),1),Object(r.k)("span",null,Object(r.O)(e.hideFollowsCount?e.$t("user_card.hidden"):e.user.friends_count),1)]),Object(r.k)("div",{class:"user-count",onClick:t[12]||(t[12]=Object(r.Y)(t=>e.setProfileView("followers"),["prevent"]))},[Object(r.k)("h5",null,Object(r.O)(e.$t("user_card.followers")),1),Object(r.k)("span",null,Object(r.O)(e.hideFollowersCount?e.$t("user_card.hidden"):e.user.followers_count),1)])])):Object(r.i)("",!0),e.hideBio?Object(r.i)("",!0):(Object(r.D)(),Object(r.h)(B,{key:1,class:"user-card-bio",html:e.user.description_html,emoji:e.user.emoji,"handle-links":!0},null,8,["html","emoji"]))]))],2)}]]);t.a=ve},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return a}));var r=n(20),i=n(18),o={undelay:null,topBar:null,badge:null,profileTint:null,fg:null,bg:"underlay",highlight:"bg",panel:"bg",popover:"bg",selectedMenu:"popover",btn:"bg",btnPanel:"panel",btnTopBar:"topBar",input:"bg",inputPanel:"panel",inputTopBar:"topBar",alert:"bg",alertPanel:"panel",poll:"bg",chatBg:"underlay",chatMessage:"chatBg"},s={profileTint:.5,alert:.5,input:.5,faint:.5,underlay:.15,alertPopup:.95},a={bg:{depends:[],opacity:"bg",priority:1},wallpaper:{depends:["bg"],color:function(e,t){return Object(r.brightness)(-2*e,t).rgb}},fg:{depends:[],priority:1},text:{depends:[],layer:"bg",opacity:null,priority:1},underlay:{default:"#000000",opacity:"underlay"},link:{depends:["accent"],priority:1},accent:{depends:["link"],priority:1},faint:{depends:["text"],opacity:"faint"},faintLink:{depends:["link"],opacity:"faint"},postFaintLink:{depends:["postLink"],opacity:"faint"},cBlue:"#0000ff",cRed:"#FF0000",cGreen:"#00FF00",cOrange:"#E3FF00",profileBg:{depends:["bg"],color:function(e,t){return{r:Math.floor(.53*t.r),g:Math.floor(.56*t.g),b:Math.floor(.59*t.b)}}},profileTint:{depends:["bg"],layer:"profileTint",opacity:"profileTint"},highlight:{depends:["bg"],color:function(e,t){return Object(r.brightness)(5*e,t).rgb}},highlightLightText:{depends:["lightText"],layer:"highlight",textColor:!0},highlightPostLink:{depends:["postLink"],layer:"highlight",textColor:"preserve"},highlightFaintText:{depends:["faint"],layer:"highlight",textColor:!0},highlightFaintLink:{depends:["faintLink"],layer:"highlight",textColor:"preserve"},highlightPostFaintLink:{depends:["postFaintLink"],layer:"highlight",textColor:"preserve"},highlightText:{depends:["text"],layer:"highlight",textColor:!0},highlightLink:{depends:["link"],layer:"highlight",textColor:"preserve"},highlightIcon:{depends:["highlight","highlightText"],color:function(e,t,n){return Object(i.g)(t,n)}},popover:{depends:["bg"],opacity:"popover"},popoverLightText:{depends:["lightText"],layer:"popover",textColor:!0},popoverPostLink:{depends:["postLink"],layer:"popover",textColor:"preserve"},popoverFaintText:{depends:["faint"],layer:"popover",textColor:!0},popoverFaintLink:{depends:["faintLink"],layer:"popover",textColor:"preserve"},popoverPostFaintLink:{depends:["postFaintLink"],layer:"popover",textColor:"preserve"},popoverText:{depends:["text"],layer:"popover",textColor:!0},popoverLink:{depends:["link"],layer:"popover",textColor:"preserve"},popoverIcon:{depends:["popover","popoverText"],color:function(e,t,n){return Object(i.g)(t,n)}},selectedPost:"--highlight",selectedPostFaintText:{depends:["highlightFaintText"],layer:"highlight",variant:"selectedPost",textColor:!0},selectedPostLightText:{depends:["highlightLightText"],layer:"highlight",variant:"selectedPost",textColor:!0},selectedPostPostLink:{depends:["highlightPostLink"],layer:"highlight",variant:"selectedPost",textColor:"preserve"},selectedPostFaintLink:{depends:["highlightFaintLink"],layer:"highlight",variant:"selectedPost",textColor:"preserve"},selectedPostText:{depends:["highlightText"],layer:"highlight",variant:"selectedPost",textColor:!0},selectedPostLink:{depends:["highlightLink"],layer:"highlight",variant:"selectedPost",textColor:"preserve"},selectedPostIcon:{depends:["selectedPost","selectedPostText"],color:function(e,t,n){return Object(i.g)(t,n)}},selectedMenu:{depends:["bg"],color:function(e,t){return Object(r.brightness)(5*e,t).rgb}},selectedMenuLightText:{depends:["highlightLightText"],layer:"selectedMenu",variant:"selectedMenu",textColor:!0},selectedMenuFaintText:{depends:["highlightFaintText"],layer:"selectedMenu",variant:"selectedMenu",textColor:!0},selectedMenuFaintLink:{depends:["highlightFaintLink"],layer:"selectedMenu",variant:"selectedMenu",textColor:"preserve"},selectedMenuText:{depends:["highlightText"],layer:"selectedMenu",variant:"selectedMenu",textColor:!0},selectedMenuLink:{depends:["highlightLink"],layer:"selectedMenu",variant:"selectedMenu",textColor:"preserve"},selectedMenuIcon:{depends:["selectedMenu","selectedMenuText"],color:function(e,t,n){return Object(i.g)(t,n)}},selectedMenuPopover:{depends:["popover"],color:function(e,t){return Object(r.brightness)(5*e,t).rgb}},selectedMenuPopoverLightText:{depends:["selectedMenuLightText"],layer:"selectedMenuPopover",variant:"selectedMenuPopover",textColor:!0},selectedMenuPopoverFaintText:{depends:["selectedMenuFaintText"],layer:"selectedMenuPopover",variant:"selectedMenuPopover",textColor:!0},selectedMenuPopoverFaintLink:{depends:["selectedMenuFaintLink"],layer:"selectedMenuPopover",variant:"selectedMenuPopover",textColor:"preserve"},selectedMenuPopoverText:{depends:["selectedMenuText"],layer:"selectedMenuPopover",variant:"selectedMenuPopover",textColor:!0},selectedMenuPopoverLink:{depends:["selectedMenuLink"],layer:"selectedMenuPopover",variant:"selectedMenuPopover",textColor:"preserve"},selectedMenuPopoverIcon:{depends:["selectedMenuPopover","selectedMenuText"],color:function(e,t,n){return Object(i.g)(t,n)}},lightText:{depends:["text"],layer:"bg",textColor:"preserve",color:function(e,t){return Object(r.brightness)(20*e,t).rgb}},postLink:{depends:["link"],layer:"bg",textColor:"preserve"},postGreentext:{depends:["cGreen"],layer:"bg",textColor:"preserve"},postCyantext:{depends:["cBlue"],layer:"bg",textColor:"preserve"},border:{depends:["fg"],opacity:"border",color:function(e,t){return Object(r.brightness)(2*e,t).rgb}},poll:{depends:["accent","bg"],copacity:"poll",color:function(e,t,n){return Object(i.a)(t,.4,n)}},pollText:{depends:["text"],layer:"poll",textColor:!0},icon:{depends:["bg","text"],inheritsOpacity:!1,color:function(e,t,n){return Object(i.g)(t,n)}},fgText:{depends:["text"],layer:"fg",textColor:!0},fgLink:{depends:["link"],layer:"fg",textColor:"preserve"},panel:{depends:["fg"],opacity:"panel"},panelText:{depends:["text"],layer:"panel",textColor:!0},panelFaint:{depends:["fgText"],layer:"panel",opacity:"faint",textColor:!0},panelLink:{depends:["fgLink"],layer:"panel",textColor:"preserve"},topBar:"--fg",topBarText:{depends:["fgText"],layer:"topBar",textColor:!0},topBarLink:{depends:["fgLink"],layer:"topBar",textColor:"preserve"},tab:{depends:["btn"]},tabText:{depends:["btnText"],layer:"btn",textColor:!0},tabActiveText:{depends:["text"],layer:"bg",textColor:!0},btn:{depends:["fg"],variant:"btn",opacity:"btn"},btnText:{depends:["fgText"],layer:"btn",textColor:!0},btnPanelText:{depends:["btnText"],layer:"btnPanel",variant:"btn",textColor:!0},btnTopBarText:{depends:["btnText"],layer:"btnTopBar",variant:"btn",textColor:!0},btnPressed:{depends:["btn"],layer:"btn"},btnPressedText:{depends:["btnText"],layer:"btn",variant:"btnPressed",textColor:!0},btnPressedPanel:{depends:["btnPressed"],layer:"btn"},btnPressedPanelText:{depends:["btnPanelText"],layer:"btnPanel",variant:"btnPressed",textColor:!0},btnPressedTopBar:{depends:["btnPressed"],layer:"btn"},btnPressedTopBarText:{depends:["btnTopBarText"],layer:"btnTopBar",variant:"btnPressed",textColor:!0},btnToggled:{depends:["btn"],layer:"btn",color:function(e,t){return Object(r.brightness)(20*e,t).rgb}},btnToggledText:{depends:["btnText"],layer:"btn",variant:"btnToggled",textColor:!0},btnToggledPanelText:{depends:["btnPanelText"],layer:"btnPanel",variant:"btnToggled",textColor:!0},btnToggledTopBarText:{depends:["btnTopBarText"],layer:"btnTopBar",variant:"btnToggled",textColor:!0},btnDisabled:{depends:["btn","bg"],color:function(e,t,n){return Object(i.a)(t,.25,n)}},btnDisabledText:{depends:["btnText","btnDisabled"],layer:"btn",variant:"btnDisabled",color:function(e,t,n){return Object(i.a)(t,.25,n)}},btnDisabledPanelText:{depends:["btnPanelText","btnDisabled"],layer:"btnPanel",variant:"btnDisabled",color:function(e,t,n){return Object(i.a)(t,.25,n)}},btnDisabledTopBarText:{depends:["btnTopBarText","btnDisabled"],layer:"btnTopBar",variant:"btnDisabled",color:function(e,t,n){return Object(i.a)(t,.25,n)}},input:{depends:["fg"],opacity:"input"},inputText:{depends:["text"],layer:"input",textColor:!0},inputPanelText:{depends:["panelText"],layer:"inputPanel",variant:"input",textColor:!0},inputTopbarText:{depends:["topBarText"],layer:"inputTopBar",variant:"input",textColor:!0},alertError:{depends:["cRed"],opacity:"alert"},alertErrorText:{depends:["text"],layer:"alert",variant:"alertError",textColor:!0},alertErrorPanelText:{depends:["panelText"],layer:"alertPanel",variant:"alertError",textColor:!0},alertWarning:{depends:["cOrange"],opacity:"alert"},alertWarningText:{depends:["text"],layer:"alert",variant:"alertWarning",textColor:!0},alertWarningPanelText:{depends:["panelText"],layer:"alertPanel",variant:"alertWarning",textColor:!0},alertSuccess:{depends:["cGreen"],opacity:"alert"},alertSuccessText:{depends:["text"],layer:"alert",variant:"alertSuccess",textColor:!0},alertSuccessPanelText:{depends:["panelText"],layer:"alertPanel",variant:"alertSuccess",textColor:!0},alertNeutral:{depends:["text"],opacity:"alert"},alertNeutralText:{depends:["text"],layer:"alert",variant:"alertNeutral",color:function(e,t){return Object(r.invertLightness)(t).rgb},textColor:!0},alertNeutralPanelText:{depends:["panelText"],layer:"alertPanel",variant:"alertNeutral",textColor:!0},alertPopupError:{depends:["alertError"],opacity:"alertPopup"},alertPopupErrorText:{depends:["alertErrorText"],layer:"popover",variant:"alertPopupError",textColor:!0},alertPopupWarning:{depends:["alertWarning"],opacity:"alertPopup"},alertPopupWarningText:{depends:["alertWarningText"],layer:"popover",variant:"alertPopupWarning",textColor:!0},alertPopupSuccess:{depends:["alertSuccess"],opacity:"alertPopup"},alertPopupSuccessText:{depends:["alertSuccessText"],layer:"popover",variant:"alertPopupSuccess",textColor:!0},alertPopupNeutral:{depends:["alertNeutral"],opacity:"alertPopup"},alertPopupNeutralText:{depends:["alertNeutralText"],layer:"popover",variant:"alertPopupNeutral",textColor:!0},badgeNotification:"--cRed",badgeNotificationText:{depends:["text","badgeNotification"],layer:"badge",variant:"badgeNotification",textColor:"bw"},chatBg:{depends:["bg"]},chatMessageIncomingBg:{depends:["chatBg"]},chatMessageIncomingText:{depends:["text"],layer:"chatMessage",variant:"chatMessageIncomingBg",textColor:!0},chatMessageIncomingLink:{depends:["link"],layer:"chatMessage",variant:"chatMessageIncomingBg",textColor:"preserve"},chatMessageIncomingBorder:{depends:["border"],opacity:"border",color:function(e,t){return Object(r.brightness)(2*e,t).rgb}},chatMessageOutgoingBg:{depends:["chatMessageIncomingBg"],color:function(e,t){return Object(r.brightness)(5*e,t).rgb}},chatMessageOutgoingText:{depends:["text"],layer:"chatMessage",variant:"chatMessageOutgoingBg",textColor:!0},chatMessageOutgoingLink:{depends:["link"],layer:"chatMessage",variant:"chatMessageOutgoingBg",textColor:"preserve"},chatMessageOutgoingBorder:{depends:["chatMessageOutgoingBg"],opacity:"border",color:function(e,t){return Object(r.brightness)(2*e,t).rgb}}}},,function(e,t,n){"use strict";var r=n(21),i=n.n(r),o=n(70),s=n(336),a={ja_easy:"ja",zh_Hant:"zh-HANT",zh:"zh-Hans"},c=function(e){return a[e]||e},l=function(e){var t={ja_easy:"ã‚„ã•ã—ã„ã«ã»ã‚“ã”",zh:"ç®€ä½“ä¸­æ–‡",zh_Hant:"ç¹é«”ä¸­æ–‡"}[e]||s.a.getNativeName(e),n=c(e);return t.charAt(0).toLocaleUpperCase(n)+t.slice(1)},u=i()(o.a.languages,(function(e){return{code:e,name:l(e)}})).sort((function(e,t){return e.name.localeCompare(t.name)})),d={internalToBrowserLocale:c,internalToBackendLocale:function(e){return c(e).replace("_","-")},languages:u,getLanguageName:l};t.a=d},,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"i",(function(){return O})),n.d(t,"e",(function(){return g})),n.d(t,"g",(function(){return v})),n.d(t,"f",(function(){return y})),n.d(t,"a",(function(){return C})),n.d(t,"h",(function(){return P})),n.d(t,"d",(function(){return x})),n.d(t,"k",(function(){return T})),n.d(t,"c",(function(){return I})),n.d(t,"m",(function(){return $})),n.d(t,"j",(function(){return z})),n.d(t,"l",(function(){return M}));var r=n(28),i=n.n(r),o=n(12),s=n.n(o),a=n(5),c=n.n(a),l=n(11),u=n.n(l),d=n(20),p=n(18),h=n(54);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(e){var t=D(e).rules,n=document.head,r=document.body;r.classList.add("hidden");var i=document.createElement("style");n.appendChild(i);var o=i.sheet;o.toString(),o.insertRule(":root { ".concat(t.radii," }"),"index-max"),o.insertRule(":root { ".concat(t.colors," }"),"index-max"),o.insertRule(":root { ".concat(t.shadows," }"),"index-max"),o.insertRule(":root { ".concat(t.fonts," }"),"index-max"),r.classList.remove("hidden")},O=function(e,t){return 0===e.length?"none":e.filter((function(e){return t?e.inset:e})).map((function(e){return[e.x,e.y,e.blur,e.spread].map((function(e){return e+"px"})).concat([Object(p.d)(e.color,e.alpha),e.inset?"inset":""]).join(" ")})).join(", ")},j=function(e){return 0===e.length?"none":e.filter((function(e){return!e.inset&&0===Number(e.spread)})).map((function(e){return[e.x,e.y,e.blur/2].map((function(e){return e+"px"})).concat([Object(p.d)(e.color,e.alpha)]).join(" ")})).map((function(e){return"drop-shadow(".concat(e,")")})).join(" ")},g=function(e){var t=e.themeEngineVersion?e.colors||e:I(e.colors||e),n=Object(h.d)(t,e.opacity||{}),r=n.colors,i=n.opacity,o=Object.entries(r).reduce((function(e,t){var n=u()(t,2),r=n[0],i=n[1];return i?(e.solid[r]=Object(p.i)(i),e.complete[r]=void 0===i.a?Object(p.i)(i):Object(p.j)(i),e):e}),{complete:{},solid:{}});return{rules:{colors:Object.entries(o.complete).filter((function(e){var t=u()(e,2);t[0];return t[1]})).map((function(e){var t=u()(e,2),n=t[0],r=t[1];return"--".concat(n,": ").concat(r)})).join(";")},theme:{colors:o.solid,opacity:i}}},v=function(e){var t=e.radii||{};void 0!==e.btnRadius&&(t=Object.entries(e).filter((function(e){var t=u()(e,2),n=t[0];t[1];return n.endsWith("Radius")})).reduce((function(e,t){return e[t[0].split("Radius")[0]]=t[1],e}),{}));var n=Object.entries(t).filter((function(e){var t=u()(e,2);t[0];return t[1]})).reduce((function(e,t){var n=u()(t,2),r=n[0],i=n[1];return e[r]=i,e}),{btn:4,input:4,checkbox:2,panel:10,avatar:5,avatarAlt:50,tooltip:2,attachment:5,chatMessage:t.panel});return{rules:{radii:Object.entries(n).filter((function(e){var t=u()(e,2);t[0];return t[1]})).map((function(e){var t=u()(e,2),n=t[0],r=t[1];return"--".concat(n,"Radius: ").concat(r,"px")})).join(";")},theme:{radii:n}}},y=function(e){var t=Object.entries(e.fonts||{}).filter((function(e){var t=u()(e,2);t[0];return t[1]})).reduce((function(e,t){var n=u()(t,2),r=n[0],i=n[1];return e[r]=Object.entries(i).filter((function(e){var t=u()(e,2);t[0];return t[1]})).reduce((function(e,t){var n=u()(t,2),r=n[0],i=n[1];return e[r]=i,e}),e[r]),e}),{interface:{family:"sans-serif"},input:{family:"inherit"},post:{family:"inherit"},postCode:{family:"monospace"}});return{rules:{fonts:Object.entries(t).filter((function(e){var t=u()(e,2);t[0];return t[1]})).map((function(e){var t=u()(e,2),n=t[0],r=t[1];return"--".concat(n,"Font: ").concat(r.family)})).join(";")},theme:{fonts:t}}},w=function(e,t){return{x:0,y:e?1:-1,blur:0,spread:0,color:t?"#000000":"#FFFFFF",alpha:.2,inset:!0}},k=[w(!0,!1),w(!1,!0)],_=[w(!0,!0),w(!1,!1)],S={x:0,y:0,blur:4,spread:0,color:"--faint",alpha:1},C={panel:[{x:1,y:1,blur:4,spread:0,color:"#000000",alpha:.6}],topBar:[{x:0,y:0,blur:4,spread:0,color:"#000000",alpha:.6}],popup:[{x:2,y:2,blur:3,spread:0,color:"#000000",alpha:.5}],avatar:[{x:0,y:1,blur:8,spread:0,color:"#000000",alpha:.7}],avatarStatus:[],panelHeader:[],button:[{x:0,y:0,blur:2,spread:0,color:"#000000",alpha:1}].concat(k),buttonHover:[S].concat(k),buttonPressed:[S].concat(_),input:[].concat(_,[{x:0,y:0,blur:2,inset:!0,spread:0,color:"#000000",alpha:1}])},P=function(e,t){var n={button:"btn",panel:"bg",top:"topBar",popup:"popover",avatar:"bg",panelHeader:"panel",input:"input"},r=Object.fromEntries(Object.entries(e.shadows||{}).map((function(e){var t=u()(e,2);return[t[0],t[1].map((function(e){return m({color:"#000000"},e)}))]}))),i=r&&!e.themeEngineVersion?$(r,e.opacity):r||{},o=Object.entries(m(m({},C),i)).reduce((function(e,r){var i=u()(r,2),o=i[0],a=i[1],l=o.replace(/[A-Z].*$/,""),b=n[l],f=Object(p.h)(Object(d.convert)(t[b]).rgb)<.5?1:-1,O=a.reduce((function(e,n){return[].concat(s()(e),[m(m({},n),{},{color:Object(p.i)(Object(h.c)(n.color,(function(e){return Object(d.convert)(t[e]).rgb}),f))})])}),[]);return m(m({},e),{},c()({},o,O))}),{});return{rules:{shadows:Object.entries(o).map((function(e){var t=u()(e,2),n=t[0],r=t[1];return["--".concat(n,"Shadow: ").concat(O(r)),"--".concat(n,"ShadowFilter: ").concat(j(r)),"--".concat(n,"ShadowInset: ").concat(O(r,!0))].join(";")})).join(";")},theme:{shadows:o}}},x=function(e,t,n,r){return{rules:m(m(m(m({},n.rules),e.rules),t.rules),r.rules),theme:m(m(m(m({},n.theme),e.theme),t.theme),r.theme)}},D=function(e){var t=g(e);return x(t,v(e),P(e,t.theme.colors,t.mod),y(e))},T=function(){return window.fetch("/static/styles.json",{cache:"no-store"}).then((function(e){return e.json()})).then((function(e){return Object.entries(e).map((function(e){var t=u()(e,2),n=t[0],r=t[1],o=null;return"object"===i()(r)?o=Promise.resolve(r):"string"==typeof r&&(o=window.fetch(r,{cache:"no-store"}).then((function(e){return e.json()})).catch((function(e){return console.error(e),null}))),[n,o]}))})).then((function(e){return e.reduce((function(e,t){var n=u()(t,2),r=n[0],i=n[1];return e[r]=i,e}),{})}))},I=function(e){return Object.entries(e).reduce((function(e,t){var n=u()(t,2),r=n[0],i=n[1];switch(r){case"lightBg":return m(m({},e),{},{highlight:i});case"btnText":return m(m({},e),["","Panel","TopBar"].reduce((function(e,t){return m(m({},e),{},c()({},"btn"+t+"Text",i))}),{}));default:return m(m({},e),{},c()({},r,i))}}),{})},$=function(e,t){return Object.entries(e).reduce((function(e,n){var r=u()(n,2),i=r[0],o=r[1],a=o.reduce((function(e,n){return[].concat(s()(e),[m(m({},n),{},{alpha:(o=n,a=o.color,(void 0===a?"#000000":a).startsWith("--")?(r=n,i=r.color,t[Object(h.f)(i.substring(2).split(",")[0])]||1):n.alpha)})]);var r,i,o,a}),[]);return m(m({},e),{},c()({},i,a))}),{})},z=function(e){return T().then((function(t){return t[e]?t[e]:t["pleroma-dark"]})).then((function(e){var t=Array.isArray(e),n=t?{}:e.theme;if(t){var r=Object(p.f)(e[1]),i=Object(p.f)(e[2]),o=Object(p.f)(e[3]),s=Object(p.f)(e[4]),a=Object(p.f)(e[5]||"#FF0000"),c=Object(p.f)(e[6]||"#00FF00"),l=Object(p.f)(e[7]||"#0000FF"),u=Object(p.f)(e[8]||"#E3FF00");n.colors={bg:r,fg:i,text:o,link:s,cRed:a,cBlue:l,cGreen:c,cOrange:u}}return{theme:n,source:e.source}}))},M=function(e){return z(e).then((function(e){return f(e.theme)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t){var n=!1,r=null;return r=window.setTimeout((function i(){var o=e();o&&o.finally?o.finally((function(){n||(r=window.setTimeout(i,t))})):console.warn("promiseInterval: promise call did not return a promise, stopping interval.")}),t),{stop:function(){n=!0,window.clearTimeout(r)}}}},function(e,t,n){"use strict";var r=n(0);const i={key:0},o={key:1},s={key:3,class:"link-preview media-body"};var a=n(5),c=n.n(a),l=n(58);const u=["title"],d={class:"option-result-label"},p={class:"result-percentage"},h=["onClick"],b=["disabled","value"],m=["disabled","value"],f={class:"option-vote"},O={class:"footer faint"},j=["disabled"],g={class:"total"};var v=n(21),y=n.n(v),w=n(164),k=n.n(w),_=n(59),S=n(25),C={name:"Poll",props:["basePoll","emoji"],components:{Timeago:_.a,RichContent:S.a},data:function(){return{loading:!1,choices:[]}},created:function(){this.$store.state.polls.pollsObject[this.pollId]||this.$store.dispatch("mergeOrAddPoll",this.basePoll),this.$store.dispatch("trackPoll",this.pollId)},unmounted:function(){this.$store.dispatch("untrackPoll",this.pollId)},computed:{pollId:function(){return this.basePoll.id},poll:function(){return this.$store.state.polls.pollsObject[this.pollId]||{}},options:function(){return this.poll&&this.poll.options||[]},expiresAt:function(){return this.poll&&this.poll.expires_at||0},expired:function(){return this.poll&&this.poll.expired||!1},loggedIn:function(){return this.$store.state.users.currentUser},showResults:function(){return this.poll.voted||this.expired||!this.loggedIn},totalVotesCount:function(){return this.poll.votes_count},containerClass:function(){return{loading:this.loading}},choiceIndices:function(){return this.choices.map((function(e,t){return e&&t})).filter((function(e){return"number"==typeof e}))},isDisabled:function(){var e=0===this.choiceIndices.length;return this.loading||e}},methods:{percentageForOption:function(e){return 0===this.totalVotesCount?0:Math.round(e/this.totalVotesCount*100)},resultTitle:function(e){return"".concat(e.votes_count,"/").concat(this.totalVotesCount," ").concat(this.$t("polls.votes"))},fetchPoll:function(){this.$store.dispatch("refreshPoll",{id:this.statusId,pollId:this.poll.id})},activateOption:function(e){var t=this.$el.querySelectorAll("input"),n=this.$el.querySelector('input[value="'.concat(e,'"]'));this.poll.multiple?n.checked=!n.checked:(k()(t,(function(e){e.checked=!1})),n.checked=!0),this.choices=y()(t,(function(e){return e.checked}))},optionId:function(e){return"poll".concat(this.poll.id,"-").concat(e)},vote:function(){var e=this;0!==this.choiceIndices.length&&(this.loading=!0,this.$store.dispatch("votePoll",{id:this.statusId,pollId:this.poll.id,choices:this.choiceIndices}).then((function(t){e.loading=!1})))}}},P=(n(517),n(4)),x=n.n(P);var D=x()(C,[["render",function(e,t,n,i,o,s){const a=Object(r.J)("RichContent"),c=Object(r.J)("Timeago"),l=Object(r.J)("i18n-t");return Object(r.D)(),Object(r.j)("div",{class:Object(r.w)(["poll",e.containerClass])},[(Object(r.D)(!0),Object(r.j)(r.a,null,Object(r.H)(e.options,(t,n)=>(Object(r.D)(),Object(r.j)("div",{key:n,class:"poll-option"},[e.showResults?(Object(r.D)(),Object(r.j)("div",{key:0,title:e.resultTitle(t),class:"option-result"},[Object(r.k)("div",d,[Object(r.k)("span",p,Object(r.O)(e.percentageForOption(t.votes_count))+"% ",1),Object(r.m)(a,{html:t.title_html,"handle-links":!1,emoji:e.emoji},null,8,["html","emoji"])]),Object(r.k)("div",{class:"result-fill",style:Object(r.x)({width:e.percentageForOption(t.votes_count)+"%"})},null,4)],8,u)):(Object(r.D)(),Object(r.j)("div",{key:1,onClick:t=>e.activateOption(n)},[e.poll.multiple?(Object(r.D)(),Object(r.j)("input",{key:0,type:"checkbox",disabled:e.loading,value:n},null,8,b)):(Object(r.D)(),Object(r.j)("input",{key:1,type:"radio",disabled:e.loading,value:n},null,8,m)),Object(r.k)("label",f,[Object(r.m)(a,{html:t.title_html,"handle-links":!1,emoji:e.emoji},null,8,["html","emoji"])])],8,h))]))),128)),Object(r.k)("div",O,[e.showResults?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("button",{key:0,class:"btn button-default poll-vote-button",type:"button",disabled:e.isDisabled,onClick:t[0]||(t[0]=(...t)=>e.vote&&e.vote(...t))},Object(r.O)(e.$t("polls.vote")),9,j)),Object(r.k)("div",g,["number"==typeof e.poll.voters_count?(Object(r.D)(),Object(r.j)(r.a,{key:0},[Object(r.l)(Object(r.O)(e.$tc("polls.people_voted_count",e.poll.voters_count,{count:e.poll.voters_count}))+"Â Â·Â  ",1)],64)):(Object(r.D)(),Object(r.j)(r.a,{key:1},[Object(r.l)(Object(r.O)(e.$tc("polls.votes_count",e.poll.votes_count,{count:e.poll.votes_count}))+"Â Â·Â  ",1)],64))]),Object(r.k)("span",null,[Object(r.m)(l,{scope:"global",keypath:e.expired?"polls.expired":"polls.expires_in"},{default:Object(r.V)(()=>[Object(r.m)(c,{time:e.expiresAt,"auto-update":60,"now-threshold":0},null,8,["time"])]),_:1},8,["keypath"])])])],2)}]]),T=n(78);const I={class:"body"},$={key:0};var z=n(33),M=n(12),U=n.n(M),F=n(329),E=n(79),L=n(40),R=n.n(L),A=n(23),N=n(8),B=n(31),V=n(22),H=n(6),q=n(3),J=["backgroundColor","backgroundPosition","backgroundImage"];function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}H.c.add(q.f);V.default,Y(Y({user:function(){return this.url&&this.$store&&this.$store.getters.findUserByUrl(this.url)},isYou:function(){return this.user&&this.user.id===this.currentUser.id},userName:function(){return this.user&&this.userNameFullUi.split("@")[0]},serverName:function(){return this.user&&(this.userNameFullUi.split("@")[1]||this.$store.getters.instanceDomain)},userNameFull:function(){return this.user&&this.user.screen_name},userNameFullUi:function(){return this.user&&this.user.screen_name_ui},highlight:function(){return this.user&&this.mergedConfig.highlight[this.user.screen_name]},highlightType:function(){return this.highlight&&"-"+this.highlight.type},highlightClass:function(){if(this.highlight)return Object(B.a)(this.user)},style:function(){if(this.highlight){var e=Object(B.b)(this.highlight);e.backgroundColor,e.backgroundPosition,e.backgroundImage;return R()(e,J)}},classnames:function(){return[{"-you":this.isYou&&this.shouldBoldenYou,"-highlighted":this.highlight},this.highlightType]},useAtIcon:function(){return this.mergedConfig.useAtIcon},isRemote:function(){return this.userName!==this.userNameFull},shouldShowFullUserName:function(){var e=this.mergedConfig.mentionLinkDisplay;return"short"!==e&&("full"===e||this.isRemote)},shouldShowTooltip:function(){return this.mergedConfig.mentionLinkShowTooltip&&"short"===this.mergedConfig.mentionLinkDisplay&&this.isRemote},shouldShowAvatar:function(){return this.mergedConfig.mentionLinkShowAvatar},shouldShowYous:function(){return this.mergedConfig.mentionLinkShowYous},shouldBoldenYou:function(){return this.mergedConfig.mentionLinkBoldenYou},shouldFadeDomain:function(){return this.mergedConfig.mentionLinkFadeDomain}},Object(N.c)(["mergedConfig"])),Object(N.e)({currentUser:function(e){return e.users.currentUser}}));function G(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var X=["tada","jelly","twitch","shake","spin","jump","bounce","flip","x2","x3","x4","font","blur","rainbow","sparkle","rotate"],Z=Object(r.o)({props:{status:{type:Object,required:!0}},render:function(){var e=this;if(!this.status)return null;var t=F.parse(this.status.mfm_content,{fnNameList:X}),n=function(e){return null==e?null:e.match(/^[0-9.]+s$/)?e:null};return Object(r.q)("span",function t(i){return o=i.map((function(i){switch(i.type){case"text":var o,s=[],a=G(i.props.text.replace(/(\r\n|\n|\r)/g,"\n").split("\n"));try{for(a.s();!(o=a.n()).done;){var c=o.value;s.push(Object(r.q)("br")),s.push(c)}}catch(e){a.e(e)}finally{a.f()}return s.shift(),s;case"bold":return[Object(r.q)("b",t(i.children))];case"strike":return[Object(r.q)("del",t(i.children))];case"italic":return Object(r.q)("i",{style:"font-style: oblique;"},t(i.children));case"fn":var l;switch(i.props.name){case"tada":l="font-size: 150%;animation: tada 1s linear infinite both;";break;case"jelly":var u=n(i.props.args.speed)||"1s";l="animation: mfm-rubberBand ".concat(u," linear infinite both;");break;case"twitch":var d=n(i.props.args.speed)||"0.5s";l="animation: mfm-twitch ".concat(d," ease infinite;");break;case"shake":var p=n(i.props.args.speed)||"0.5s";l="animation: mfm-shake ".concat(p," ease infinite;");break;case"spin":var h=i.props.args.left?"reverse":i.props.args.alternate?"alternate":"normal",b=i.props.args.x?"mfm-spinX":i.props.args.y?"mfm-spinY":"mfm-spin",m=n(i.props.args.speed)||"1.5s";l="animation: ".concat(b," ").concat(m," linear infinite; animation-direction: ").concat(h,";");break;case"jump":l="animation: mfm-jump 0.75s linear infinite;";break;case"bounce":l="animation: mfm-bounce 0.75s linear infinite; transform-origin: center bottom;";break;case"flip":var f=i.props.args.h&&i.props.args.v?"scale(-1, -1)":i.props.args.v?"scaleY(-1)":"scaleX(-1)";l="transform: ".concat(f,";");break;case"x2":l="font-size: 200%;";break;case"x3":l="font-size: 400%;";break;case"x4":l="font-size: 600%;";break;case"font":var O=i.props.args.serif?"serif":i.props.args.monospace?"monospace":i.props.args.cursive?"cursive":i.props.args.fantasy?"fantasy":i.props.args.emoji?"emoji":i.props.args.math?"math":null;O&&(l="font-family: ".concat(O,";"));break;case"blur":return Object(r.q)("span",{class:"_mfm_blur_"},t(i.children));case"rainbow":l="animation: mfm-rainbow 1s linear infinite;";break;case"sparkle":return Object(r.q)(MkSparkle,{},t(i.children));case"rotate":var j=parseInt(i.props.args.deg)||"90";l="transform: rotate(".concat(j,"deg); transform-origin: center center;")}return null==l?Object(r.q)("span",{},["$[",i.props.name," "].concat(U()(t(i.children)),["]"])):Object(r.q)("span",{style:"display: inline-block;"+l},t(i.children));case"small":return[Object(r.q)("small",{style:"opacity: 0.7;"},t(i.children))];case"center":return[Object(r.q)("div",{style:"text-align:center;"},t(i.children))];case"url":return[Object(r.q)("a",{key:Math.random(),href:i.props.url,rel:"nofollow noopener"})];case"link":return[Object(r.q)("a",{key:Math.random(),href:i.props.url,rel:"nofollow noopener"},t(i.children))];case"mention":var g=e.status.attentions.find((function(e){return"@".concat(e.screen_name)===i.props.acct||e.screen_name===i.props.username}));return g?[Object(r.q)(E.a,{url:g.statusnet_profile_url,content:i.props.acct,userScreenName:i.props.acct})]:null;case"hashtag":return[Object(r.q)("a",{rel:"noopener noreferrer",target:"_blank",key:i.props.hashtag,href:e.status.tags.find((function(e){return e.name===i.props.hashtag})).url},"#".concat(i.props.hashtag))];case"blockCode":return[Object(r.q)("pre",{key:Math.random(),lang:i.props.lang},i.props.code)];case"inlineCode":return[Object(r.q)("pre",{key:Math.random(),code:i.props.code,inline:!0})];case"quote":return e.nowrap?[Object(r.q)("span",{class:"quote"},t(i.children))]:[Object(r.q)("div",{class:"quote"},t(i.children))];case"emojiCode":return[Object(r.q)("div",{class:"still-image emoji img"},[Object(r.q)("img",{key:Math.random(),title:i.props.name,alt:i.props.name,src:e.status.emojis.find((function(e){return e.shortcode===i.props.name})).static_url})])];case"unicodeEmoji":return i.props.emoji;default:return console.error("unrecognized ast type:",i.type),[]}})),(s=[]).concat.apply(s,U()(o));var o,s}(t))}});function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}H.c.add(q.D,q.Q,q.K,q.N,q.X);var ee={name:"StatusContent",props:["compact","status","focused","noHeading","fullContent","singleLine","showingTall","expandingSubject","showingLongSubject","toggleShowingTall","toggleExpandingSubject","toggleShowingLongSubject"],data:function(){var e=this.$store.getters.mergedConfig.renderMisskeyMarkdown;return{postLength:this.status.text.length,parseReadyDone:!1,renderMisskeyMarkdown:e}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({localCollapseSubjectDefault:function(){return this.mergedConfig.collapseMessageWithSubject},tallStatus:function(){return!this.singleLine&&!this.compact&&this.status.raw_html.split(/<p|<br/).length+this.postLength/80>20},longSubject:function(){return this.status.summary.length>240},mightHideBecauseSubject:function(){return!!this.status.summary&&this.localCollapseSubjectDefault},mightHideBecauseTall:function(){return this.tallStatus&&!(this.status.summary&&this.localCollapseSubjectDefault)},hideSubjectStatus:function(){return this.mightHideBecauseSubject&&!this.expandingSubject},hideTallStatus:function(){return this.mightHideBecauseTall&&!this.showingTall},showingMore:function(){return this.mightHideBecauseTall&&this.showingTall||this.mightHideBecauseSubject&&this.expandingSubject},attachmentTypes:function(){return this.status.attachments.map((function(e){return z.a.fileType(e.mimetype)}))}},Object(N.c)(["mergedConfig"])),components:{RichContent:S.a,MFMContent:Z},mounted:function(){var e=this;this.status.attentions&&this.status.attentions.forEach((function(t){var n=t.id;e.$store.dispatch("fetchUserIfMissing",n)}))},methods:{onParseReady:function(e){var t=this;if(!this.parseReadyDone){this.parseReadyDone=!0,this.$emit("parseReady",e);var n=e.writtenMentions,r=e.invisibleMentions;n.filter((function(e){return!e.notifying})).forEach((function(e){var n=e.content,r=e.url,i=n.replace(/<[^>]+?>/gi,"");if(i.startsWith("@")){var o=i.slice(1),s=r.replace(/^https?:\/\//,"").replace(/\/.+?$/,"");t.$store.dispatch("fetchUserIfMissing","".concat(o,"@").concat(s))}})),this.postLength=r.reduce((function(e,t){return e-t.textContent.length-1}),this.postLength)}},toggleShowMore:function(){this.mightHideBecauseTall?this.toggleShowingTall():this.mightHideBecauseSubject&&this.toggleExpandingSubject()},generateTagLink:function(e){return"/tag/".concat(e)}}};n(521);var te=x()(ee,[["render",function(e,t,n,i,o,s){const a=Object(r.J)("RichContent"),c=Object(r.J)("MFMContent"),l=Object(r.J)("FAIcon");return Object(r.D)(),Object(r.j)("div",{class:Object(r.w)(["StatusBody",{"-compact":e.compact}])},[Object(r.k)("div",I,[e.status.summary_raw_html?(Object(r.D)(),Object(r.j)("div",{key:0,class:Object(r.w)(["summary-wrapper",{"-tall":e.longSubject&&!e.showingLongSubject}])},[Object(r.m)(a,{class:"media-body summary",html:e.status.summary_raw_html,emoji:e.status.emojis},null,8,["html","emoji"]),Object(r.W)(Object(r.k)("button",{class:"button-unstyled -link tall-subject-hider",onClick:t[0]||(t[0]=Object(r.Y)((...t)=>e.toggleShowingLongSubject&&e.toggleShowingLongSubject(...t),["prevent"]))},Object(r.O)(e.$t("status.hide_full_subject")),513),[[r.T,e.longSubject&&e.showingLongSubject]]),Object(r.W)(Object(r.k)("button",{class:"button-unstyled -link tall-subject-hider",onClick:t[1]||(t[1]=Object(r.Y)((...t)=>e.toggleShowingLongSubject&&e.toggleShowingLongSubject(...t),["prevent"]))},Object(r.O)(e.$t("status.show_full_subject")),513),[[r.T,e.longSubject&&!e.showingLongSubject]])],2)):Object(r.i)("",!0),Object(r.k)("div",{class:Object(r.w)([{"-tall-status":e.hideTallStatus},"text-wrapper"])},[Object(r.W)(Object(r.k)("button",{class:Object(r.w)(["button-unstyled -link tall-status-hider",{"-focused":e.focused}]),onClick:t[2]||(t[2]=Object(r.Y)((...t)=>e.toggleShowMore&&e.toggleShowMore(...t),["prevent"]))},Object(r.O)(e.$t("general.show_more")),3),[[r.T,e.hideTallStatus]]),e.hideSubjectStatus||e.singleLine&&e.status.summary_raw_html?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("div",$,[e.renderMisskeyMarkdown&&e.status.mfm_content?(Object(r.D)(),Object(r.h)(c,{key:0,class:"RichContent text media-body mfm-post-content",status:e.status},null,8,["status"])):(Object(r.D)(),Object(r.h)(a,{key:1,class:Object(r.w)([{"-single-line":e.singleLine},"text media-body"]),html:e.status.raw_html,emoji:e.status.emojis,"handle-links":!0,greentext:e.mergedConfig.greentext,attentions:e.status.attentions,onParseReady:e.onParseReady},null,8,["class","html","emoji","greentext","attentions","onParseReady"]))])),Object(r.W)(Object(r.k)("button",{class:"button-unstyled -link cw-status-hider",onClick:t[3]||(t[3]=Object(r.Y)((...t)=>e.toggleShowMore&&e.toggleShowMore(...t),["prevent"]))},[Object(r.l)(Object(r.O)(e.$t("status.show_content"))+" ",1),e.attachmentTypes.includes("image")?(Object(r.D)(),Object(r.h)(l,{key:0,icon:"image"})):Object(r.i)("",!0),e.attachmentTypes.includes("video")?(Object(r.D)(),Object(r.h)(l,{key:1,icon:"video"})):Object(r.i)("",!0),e.attachmentTypes.includes("audio")?(Object(r.D)(),Object(r.h)(l,{key:2,icon:"music"})):Object(r.i)("",!0),e.attachmentTypes.includes("unknown")?(Object(r.D)(),Object(r.h)(l,{key:3,icon:"file"})):Object(r.i)("",!0),e.status.poll&&e.status.poll.options?(Object(r.D)(),Object(r.h)(l,{key:4,icon:"poll-h"})):Object(r.i)("",!0),e.status.card?(Object(r.D)(),Object(r.h)(l,{key:5,icon:"link"})):Object(r.i)("",!0)],512),[[r.T,e.hideSubjectStatus]]),Object(r.W)(Object(r.k)("button",{class:"button-unstyled -link status-unhider",onClick:t[4]||(t[4]=Object(r.Y)((...t)=>e.toggleShowMore&&e.toggleShowMore(...t),["prevent"]))},Object(r.O)(e.tallStatus?e.$t("general.show_less"):e.$t("status.hide_content")),513),[[r.T,e.showingMore&&!e.fullContent]])],2)]),e.hideSubjectStatus?Object(r.i)("",!0):Object(r.I)(e.$slots,"default",{key:0})],2)}]]),ne=n(142);function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}H.c.add(q.r,q.D,q.Q,q.K,q.N,q.X);var oe,se=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},ae=function(e,t){var n=se(t),r="controlledToggle".concat(n),i="uncontrolled".concat(n);e[r]?e[r]():e[i]=!e[i]},ce={name:"StatusContent",props:["status","compact","focused","noHeading","fullContent","singleLine","controlledShowingTall","controlledExpandingSubject","controlledToggleShowingTall","controlledToggleExpandingSubject","controlledShowingLongSubject","controlledToggleShowingLongSubject"],data:function(){return{uncontrolledShowingTall:this.fullContent||this.inConversation&&this.focused,uncontrolledShowingLongSubject:!1,uncontrolledExpandingSubject:!this.$store.getters.mergedConfig.collapseMessageWithSubject}},computed:ie(ie(ie({},(oe=["showingTall","expandingSubject","showingLongSubject"],oe.reduce((function(e,t){var n=se(t),r="controlledToggle".concat(n),i="controlled".concat(n),o="uncontrolled".concat(n);return e[t]=function(){return void 0===this.$data[r]&&void 0===this.$props[r]||!this[r]?this[o]:this[i]},e}),{}))),{},{hideAttachments:function(){return this.mergedConfig.hideAttachments&&!this.inConversation||this.mergedConfig.hideAttachmentsInConv&&this.inConversation},nsfwClickthrough:function(){return!!this.status.nsfw&&(!this.status.summary||!this.localCollapseSubjectDefault)},attachmentSize:function(){return this.compact?"small":this.mergedConfig.hideAttachments&&!this.inConversation||this.mergedConfig.hideAttachmentsInConv&&this.inConversation||this.status.attachments.length>this.maxThumbnails?"hide":"normal"},maxThumbnails:function(){return this.mergedConfig.maxThumbnails}},Object(N.c)(["mergedConfig"])),Object(N.e)({currentUser:function(e){return e.users.currentUser}})),components:{Attachment:l.a,Poll:D,Gallery:T.a,LinkPreview:ne.a,StatusBody:te},methods:{toggleShowingTall:function(){ae(this,"showingTall")},toggleExpandingSubject:function(){ae(this,"expandingSubject")},toggleShowingLongSubject:function(){ae(this,"showingLongSubject")},setMedia:function(){var e=this,t="hide"===this.attachmentSize?this.status.attachments:this.galleryAttachments;return function(){return e.$store.dispatch("setMedia",t)}}}};n(523);const le=x()(ce,[["render",function(e,t,n,a,c,l){const u=Object(r.J)("Poll"),d=Object(r.J)("FAIcon"),p=Object(r.J)("gallery"),h=Object(r.J)("link-preview"),b=Object(r.J)("StatusBody");return Object(r.D)(),Object(r.j)("div",{class:Object(r.w)(["StatusContent",{"-compact":e.compact}])},[Object(r.I)(e.$slots,"header"),Object(r.m)(b,{status:e.status,compact:e.compact,"single-line":e.singleLine,"showing-tall":e.showingTall,"expanding-subject":e.expandingSubject,"showing-long-subject":e.showingLongSubject,"toggle-showing-tall":e.toggleShowingTall,"toggle-expanding-subject":e.toggleExpandingSubject,"toggle-showing-long-subject":e.toggleShowingLongSubject,onParseReady:t[2]||(t[2]=t=>e.$emit("parseReady",t))},{default:Object(r.V)(()=>[e.status.poll&&e.status.poll.options&&!e.compact?(Object(r.D)(),Object(r.j)("div",i,[Object(r.m)(u,{"base-poll":e.status.poll,emoji:e.status.emojis},null,8,["base-poll","emoji"])])):e.status.poll&&e.status.poll.options&&e.compact?(Object(r.D)(),Object(r.j)("div",o,[Object(r.m)(d,{icon:"poll-h",size:"2x"})])):Object(r.i)("",!0),0!==e.status.attachments.length?(Object(r.D)(),Object(r.h)(p,{key:2,class:"attachments media-body",nsfw:e.nsfwClickthrough,attachments:e.status.attachments,limit:e.compact?1:0,size:e.attachmentSize,onPlay:t[0]||(t[0]=t=>e.$emit("mediaplay",e.attachment.id)),onPause:t[1]||(t[1]=t=>e.$emit("mediapause",e.attachment.id))},null,8,["nsfw","attachments","limit","size"])):Object(r.i)("",!0),!e.status.card||e.noHeading||e.compact?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("div",s,[Object(r.m)(h,{card:e.status.card,size:e.attachmentSize,nsfw:e.nsfwClickthrough},null,8,["card","size","nsfw"])]))]),_:1},8,["status","compact","single-line","showing-tall","expanding-subject","showing-long-subject","toggle-showing-tall","toggle-expanding-subject","toggle-showing-long-subject"]),Object(r.I)(e.$slots,"footer")],2)}]]);t.a=le},,function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return u}));var r=6e4,i=60*r,o=24*i,s=7*o,a=30*o,c=365.25*o,l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;"string"==typeof e&&(e=Date.parse(e));var n=Date.now()>e?Math.floor:Math.ceil,l=Math.abs(Date.now()-e),u={num:n(l/c),key:"time.years"};return l<1e3*t?(u.num=0,u.key="time.now"):l<r?(u.num=n(l/1e3),u.key="time.seconds"):l<i?(u.num=n(l/r),u.key="time.minutes"):l<o?(u.num=n(l/i),u.key="time.hours"):l<s?(u.num=n(l/o),u.key="time.days"):l<a?(u.num=n(l/s),u.key="time.weeks"):l<c&&(u.num=n(l/a),u.key="time.months"),1===u.num&&(u.key=u.key.slice(0,-1)),u},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=l(e,t);return n.key+="_short",n}},,,function(e,t,n){"use strict";var r=n(0);const i={key:0,ref:"canvas"},o=["alt","title","src","referrerpolicy"];var s={props:["src","referrerpolicy","mimetype","imageLoadError","imageLoadHandler","alt","height","width"],data:function(){return{stopGifs:this.$store.getters.mergedConfig.stopGifs}},computed:{animated:function(){return this.stopGifs&&("image/gif"===this.mimetype||this.src.endsWith(".gif"))},style:function(){var e=function(e){return/\d$/.test(e)?e+"px":e};return{height:this.height?e(this.height):null,width:this.width?e(this.width):null}}},methods:{onLoad:function(){var e=this.$refs.src;if(e){this.imageLoadHandler&&this.imageLoadHandler(e);var t=this.$refs.canvas;if(t){var n=e.naturalWidth,r=e.naturalHeight;t.width=n,t.height=r,t.getContext("2d").drawImage(e,0,0,n,r)}}},onError:function(){this.imageLoadError&&this.imageLoadError()}}},a=(n(507),n(4));const c=n.n(a)()(s,[["render",function(e,t,n,s,a,c){return Object(r.D)(),Object(r.j)("div",{class:Object(r.w)(["still-image",{animated:e.animated}]),style:Object(r.x)(e.style)},[e.animated?(Object(r.D)(),Object(r.j)("canvas",i,null,512)):Object(r.i)("",!0),(Object(r.D)(),Object(r.j)("img",{ref:"src",key:e.src,alt:e.alt,title:e.alt,src:e.src,referrerpolicy:e.referrerpolicy,onLoad:t[0]||(t[0]=(...t)=>e.onLoad&&e.onLoad(...t)),onError:t[1]||(t[1]=(...t)=>e.onError&&e.onError(...t))},null,40,o)),Object(r.I)(e.$slots,"default")],6)}]]);t.a=c},function(e,t,n){"use strict";var r=n(0);const i=["disabled","checked","indeterminate"],o=Object(r.k)("i",{class:"checkbox-indicator"},null,-1),s={key:0,class:"label"};var a={emits:["update:modelValue"],props:["modelValue","indeterminate","disabled"]},c=(n(502),n(4));const l=n.n(c)()(a,[["render",function(e,t,n,a,c,l){return Object(r.D)(),Object(r.j)("label",{class:Object(r.w)(["checkbox",{disabled:n.disabled,indeterminate:n.indeterminate}])},[Object(r.k)("input",{type:"checkbox",disabled:n.disabled,checked:n.modelValue,indeterminate:n.indeterminate,onChange:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.checked))},null,40,i),o,e.$slots.default?(Object(r.D)(),Object(r.j)("span",s,[Object(r.I)(e.$slots,"default")])):Object(r.i)("",!0)],2)}]]);t.a=l},function(e,t,n){"use strict";var r=n(0);const i=["disabled","value"],o=Object(r.l)(" "+Object(r.O)(" ")+" ");var s=n(6),a=n(3);s.c.add(a.n);var c={emits:["update:modelValue"],props:["modelValue","disabled","unstyled","kind"]},l=(n(505),n(4));const u=n.n(l)()(c,[["render",function(e,t,n,s,a,c){const l=Object(r.J)("FAIcon");return Object(r.D)(),Object(r.j)("label",{class:Object(r.w)(["Select input",{disabled:e.disabled,unstyled:e.unstyled}])},[Object(r.k)("select",{disabled:e.disabled,value:e.modelValue,onChange:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.value))},[Object(r.I)(e.$slots,"default")],40,i),o,Object(r.m)(l,{class:"select-down-icon",icon:"chevron-down"})],2)}]]);t.a=u},function(e,t,n){"use strict";var r=n(0);const i={class:"basic-user-card"},o={key:0,class:"basic-user-card-expanded-content"},s={key:1,class:"basic-user-card-collapsed-content"},a=["title"];var c=n(35),l=n(22),u=n(25),d=n(23),p={props:["user"],data:function(){return{userExpanded:!1}},components:{UserCard:c.a,UserAvatar:l.default,RichContent:u.a},methods:{toggleUserExpanded:function(){this.userExpanded=!this.userExpanded},userProfileLink:function(e){return Object(d.a)(e.id,e.screen_name,this.$store.state.instance.restrictedNicknames)}}},h=(n(577),n(4));const b=n.n(h)()(p,[["render",function(e,t,n,c,l,u){const d=Object(r.J)("UserAvatar"),p=Object(r.J)("router-link"),h=Object(r.J)("UserCard"),b=Object(r.J)("RichContent");return Object(r.D)(),Object(r.j)("div",i,[Object(r.m)(p,{to:e.userProfileLink(e.user)},{default:Object(r.V)(()=>[Object(r.m)(d,{class:"avatar",user:e.user,onClick:Object(r.Y)(e.toggleUserExpanded,["prevent"])},null,8,["user","onClick"])]),_:1},8,["to"]),e.userExpanded?(Object(r.D)(),Object(r.j)("div",o,[Object(r.m)(h,{"user-id":e.user.id,rounded:!0,bordered:!0},null,8,["user-id"])])):(Object(r.D)(),Object(r.j)("div",s,[Object(r.k)("div",{title:e.user.name,class:"basic-user-card-user-name"},[Object(r.m)(b,{class:"basic-user-card-user-name-value",html:e.user.name,emoji:e.user.emoji},null,8,["html","emoji"])],8,a),Object(r.k)("div",null,[Object(r.m)(p,{class:"basic-user-card-screen-name",to:e.userProfileLink(e.user)},{default:Object(r.V)(()=>[Object(r.l)(" @"+Object(r.O)(e.user.screen_name_ui),1)]),_:1},8,["to"])]),Object(r.I)(e.$slots,"default")]))])}]]);t.a=b},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"e",(function(){return j})),n.d(t,"f",(function(){return y})),n.d(t,"b",(function(){return _})),n.d(t,"c",(function(){return S})),n.d(t,"d",(function(){return C}));var r=n(5),i=n.n(r),o=n(11),s=n.n(o),a=n(28),c=n.n(a),l=n(12),u=n.n(l),d=n(20),p=n(18),h=n(36);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=3,O=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.b,n=[e],r=t[e];r;)n.unshift(r),r=t[r];return n},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;return O(e).map((function(o){return[o===e?r[t]:r[o],o===e?i[n]||1:i[o]]}))},g=function(e,t){var n=t[e];if("string"==typeof n&&n.startsWith("--"))return[n.substring(2)];if(null===n)return[];var r=n.depends,i=n.layer,o=n.variant,s=i?O(i).map((function(e){return e===i?o||i:e})):[];return Array.isArray(r)?[].concat(u()(r),u()(s)):u()(s)},v=function(e){return"object"===c()(e)?e:{depends:e.startsWith("--")?[e.substring(2)]:[],default:e.startsWith("#")?e:void 0}},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.c,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g,r=v(t[e]);if(null!==r.opacity){if(r.opacity)return r.opacity;var i=function r(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[e],s=n(i,t)[0];if(void 0!==s){var a=t[s];if(void 0!==a)return a.opacity||null===a?a.opacity:a.depends&&o.includes(s)?r(s,[].concat(u()(o),[s])):null}};return r.depends?i(e):void 0}},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.c,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g,r=v(t[e]);if(h.b[e])return e;if(null!==r.layer){if(r.layer)return r.layer;var i=function r(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[e],s=n(i,t)[0];if(void 0!==s){var a=t[s];if(void 0!==a)return a.layer||null===a?a.layer:a.depends?r(a,[].concat(u()(o),[s])):null}};return r.depends?i(e):void 0}},k=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.c,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,n=Object.keys(e),r=new Set(n),i=new Set,o=new Set,s=u()(n),a=[],c=function n(s){if(r.has(s))r.delete(s),i.add(s),t(s,e).forEach(n),i.delete(s),o.add(s),a.push(s);else if(i.has(s))console.debug("Cyclic depenency in topoSort, ignoring"),a.push(s);else if(!o.has(s))throw new Error("Unintended condition in topoSort!")};s.length>0;)c(s.pop());return a.map((function(e,t){return{data:e,index:t}})).sort((function(n,r){var i=n.data,o=n.index,s=r.data,a=r.index,c=t(i,e).length,l=t(s,e).length;return c===l||0!==l&&0!==c?o-a:0===c&&0!==l?-1:0===l&&0!==c?1:void 0})).map((function(e){return e.data}))}(Object.entries(h.c).sort((function(e,t){var n=s()(e,2),r=(n[0],n[1]),i=s()(t,2),o=(i[0],i[1]);return(r&&r.priority||0)-(o&&o.priority||0)})).reduce((function(e,t){var n=s()(t,2),r=n[0],o=n[1];return m(m({},e),{},i()({},r,o))}),{})),_=Object.entries(h.c).reduce((function(e,t){var n=s()(t,2),r=n[0],o=(n[1],y(r,h.c,g));return o?m(m({},e),{},i()({},o,{defaultValue:h.a[o]||1,affectedSlots:[].concat(u()(e[o]&&e[o].affectedSlots||[]),[r])})):e}),{}),S=function(e,t,n){if("string"!=typeof e||!e.startsWith("--"))return e;var r=null,i=e.split(/,/g).map((function(e){return e.trim()})),o=s()(i,2),a=o[0],c=o[1];return r=t(a.substring(2)),c&&(r=Object(d.brightness)(Number.parseFloat(c)*n,r).rgb),r},C=function(e,t){return k.reduce((function(n,r){var o=n.colors,s=n.opacity,a=e[r],c=v(h.c[r]),l=g(r,h.c),b=!!c.textColor,f=c.variant||c.layer,O=null;O=b?Object(p.b)(m({},o[l[0]]||Object(d.convert)(e[r]||"#FF00FF").rgb),j(w(r)||"bg",f||"bg",y(f),o,s)):f&&f!==r?o[f]||Object(d.convert)(e[f]).rgb:o.bg||Object(d.convert)(e.bg);var k=Object(p.h)(O)<.5?1:-1,C=null;if(a){var P=a;if("transparent"===P){var x=j(w(r),r,y(r)||r,o,s).slice(0,-1);P=m(m({},Object(p.b)(Object(d.convert)("#FF00FF").rgb,x)),{},{a:0})}else"string"==typeof a&&a.startsWith("--")?P=S(a,(function(t){return o[t]||e[t]}),k):"string"==typeof a&&a.startsWith("#")&&(P=Object(d.convert)(P).rgb);C=m({},P)}else if(c.default)C=Object(d.convert)(c.default).rgb;else{var D=c.color||function(e,t){return m({},t)};if(c.textColor)if("bw"===c.textColor)C=Object(d.contrastRatio)(O).rgb;else{var T=m({},o[l[0]]);c.color&&(T=D.apply(void 0,[k].concat(u()(l.map((function(e){return m({},o[e])})))))),C=Object(p.e)(O,m({},T),"preserve"===c.textColor)}else C=D.apply(void 0,[k].concat(u()(l.map((function(e){return m({},o[e])})))))}if(!C)throw new Error("Couldn't generate color for "+r);var I=c.opacity||y(r),$=c.opacity;if(null===$)C.a=1;else if("transparent"===a)C.a=0;else{var z=$&&void 0!==t[I],M=l[0],U=M&&o[M];$||!U||c.textColor||null===$?U||I?U&&0===U.a?C.a=0:C.a=Number(z?t[I]:(_[I]||{}).defaultValue):delete C.a:C.a=U.a}return(Number.isNaN(C.a)||void 0===C.a)&&(C.a=1),I?{colors:m(m({},o),{},i()({},r,C)),opacity:m(m({},s),{},i()({},I,C.a))}:{colors:m(m({},o),{},i()({},r,C)),opacity:s}}),{colors:{},opacity:{}})}},,,function(e,t,n){"use strict";var r=n(0);const i={ref:"form",class:"post-status-form"},o={class:"form-group"},s={key:1,class:"visibility-notice notice-dismissible"},a={key:2,class:"visibility-notice notice-dismissible"},c={key:3,class:"visibility-notice notice-dismissible"},l={key:4,class:"visibility-notice"},u={key:0},d={key:1},p={key:5,class:"preview-heading faint"},h={class:"preview-spinner"},b={key:6,class:"preview-container"},m={key:0,class:"preview-status"},f={key:1,class:"preview-status preview-error"},O=["placeholder","disabled"],j=["placeholder","disabled"],g={key:8,class:"visibility-tray"},v={key:0,class:"text-format"},y=["value"],w={key:1,class:"text-format"},k={class:"only-format"},_={ref:"bottom",class:"form-bottom"},S={class:"form-bottom-left"},C=["title"],P=["title"],x={key:0,disabled:"",class:"btn button-default"},D={key:1,disabled:"",class:"btn button-default"},T=["disabled"],I={key:1,class:"alert error"},$={key:3,class:"upload_settings"};var z=n(13),M=n.n(z),U=n(5),F=n.n(U),E=n(12),L=n.n(E),R=n(56),A=n.n(R),N=n(136),B=n.n(N),V=n(21),H=n.n(V),q=n(224),J=n.n(q),W=n(10),Y=n.n(W),G=n(76);const K=["title"],X=["disabled"];var Z=n(96),Q=n(6),ee=n(3);function te(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Q.c.add(ee.tb,ee.r);var re={data:function(){return{uploadCount:0,uploadReady:!0}},computed:{uploading:function(){return this.uploadCount>0}},methods:{uploadFile:function(e){var t=this,n=this.$store;if(e.size>n.state.instance.uploadlimit){var r=Z.a.fileSizeFormat(e.size),i=Z.a.fileSizeFormat(n.state.instance.uploadlimit);t.$emit("upload-failed","file_too_big",{filesize:r.num,filesizeunit:r.unit,allowedsize:i.num,allowedsizeunit:i.unit})}else{var o=new FormData;o.append("file",e),t.$emit("uploading"),t.uploadCount++,G.a.uploadMedia({store:n,formData:o}).then((function(e){t.$emit("uploaded",e),t.decreaseUploadCount()}),(function(e){t.$emit("upload-failed","default"),t.decreaseUploadCount()}))}},decreaseUploadCount:function(){this.uploadCount--,0===this.uploadCount&&this.$emit("all-uploaded")},clearFile:function(){var e=this;this.uploadReady=!1,this.$nextTick((function(){e.uploadReady=!0}))},multiUpload:function(e){var t,n=te(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.uploadFile(r)}}catch(e){n.e(e)}finally{n.f()}},change:function(e){var t=e.target;this.multiUpload(t.files)}},props:["dropFiles","disabled"],watch:{dropFiles:function(e){this.uploading||this.multiUpload(e)}}},ie=(n(500),n(4)),oe=n.n(ie);var se=oe()(re,[["render",function(e,t,n,i,o,s){const a=Object(r.J)("FAIcon");return Object(r.D)(),Object(r.j)("label",{class:Object(r.w)(["media-upload",{disabled:e.disabled}]),title:e.$t("tool_tip.media_upload")},[e.uploading?(Object(r.D)(),Object(r.h)(a,{key:0,class:"progress-icon",icon:"circle-notch",spin:""})):Object(r.i)("",!0),e.uploading?Object(r.i)("",!0):(Object(r.D)(),Object(r.h)(a,{key:1,class:"new-icon",icon:"upload"})),e.uploadReady?(Object(r.D)(),Object(r.j)("input",{key:2,class:"hidden-input-file",disabled:e.disabled,type:"file",multiple:"true",onChange:t[0]||(t[0]=(...t)=>e.change&&e.change(...t))},null,40,X)):Object(r.i)("",!0)],10,K)}]]),ae=n(175),ce=n(310);const le={key:0,class:"poll-form"},ue={class:"input-container"},de=["id","onUpdate:modelValue","placeholder","maxlength","onKeydown"],pe=["onClick"],he={class:"poll-type-expiry"},be=["title"],me={value:"single"},fe={value:"multiple"},Oe=["title"],je=["min","max"],ge=Object(r.l)(" "+Object(r.O)(" ")+" "),ve=["value"];var ye=n(98),we=n.n(ye),ke=n(47),_e=n(52);Q.c.add(ee.rb,ee.V);var Se={components:{Select:_e.a},name:"PollForm",props:["visible"],data:function(){return{pollType:"single",options:["",""],expiryAmount:10,expiryUnit:"minutes"}},computed:{pollLimits:function(){return this.$store.state.instance.pollLimits},maxOptions:function(){return this.pollLimits.max_options},maxLength:function(){return this.pollLimits.max_option_chars},expiryUnits:function(){var e=this,t=this.convertExpiryFromUnit;return["minutes","hours","days"].filter((function(n){return e.pollLimits.max_expiration>=t(n,1)}))},minExpirationInCurrentUnit:function(){return Math.ceil(this.convertExpiryToUnit(this.expiryUnit,this.pollLimits.min_expiration))},maxExpirationInCurrentUnit:function(){return Math.floor(this.convertExpiryToUnit(this.expiryUnit,this.pollLimits.max_expiration))}},methods:{clear:function(){this.pollType="single",this.options=["",""],this.expiryAmount=10,this.expiryUnit="minutes"},nextOption:function(e){var t=this.$el.querySelector("#poll-".concat(e+1));t?t.focus():this.addOption()&&this.$nextTick((function(){this.nextOption(e)}))},addOption:function(){return this.options.length<this.maxOptions&&(this.options.push(""),!0)},deleteOption:function(e,t){this.options.length>2&&(this.options.splice(e,1),this.updatePollToParent())},convertExpiryToUnit:function(e,t){switch(e){case"minutes":return 1e3*t/ke.c;case"hours":return 1e3*t/ke.b;case"days":return 1e3*t/ke.a}},convertExpiryFromUnit:function(e,t){switch(e){case"minutes":return.001*t*ke.c;case"hours":return.001*t*ke.b;case"days":return.001*t*ke.a}},expiryAmountChange:function(){this.expiryAmount=Math.max(this.minExpirationInCurrentUnit,this.expiryAmount),this.expiryAmount=Math.min(this.maxExpirationInCurrentUnit,this.expiryAmount),this.updatePollToParent()},updatePollToParent:function(){var e=this.convertExpiryFromUnit(this.expiryUnit,this.expiryAmount),t=we()(this.options.filter((function(e){return""!==e})));t.length<2?this.$emit("update-poll",{error:this.$t("polls.not_enough_options")}):this.$emit("update-poll",{options:t,multiple:"multiple"===this.pollType,expiresIn:e})}}};n(506);var Ce=oe()(Se,[["render",function(e,t,n,i,o,s){const a=Object(r.J)("FAIcon"),c=Object(r.J)("Select");return e.visible?(Object(r.D)(),Object(r.j)("div",le,[(Object(r.D)(!0),Object(r.j)(r.a,null,Object(r.H)(e.options,(n,i)=>(Object(r.D)(),Object(r.j)("div",{key:i,class:"poll-option"},[Object(r.k)("div",ue,[Object(r.W)(Object(r.k)("input",{id:"poll-"+i,"onUpdate:modelValue":t=>e.options[i]=t,size:"1",class:"poll-option-input",type:"text",placeholder:e.$t("polls.option"),maxlength:e.maxLength,onChange:t[0]||(t[0]=(...t)=>e.updatePollToParent&&e.updatePollToParent(...t)),onKeydown:Object(r.X)(Object(r.Y)(t=>e.nextOption(i),["stop","prevent"]),["enter"])},null,40,de),[[r.S,e.options[i]]])]),e.options.length>2?(Object(r.D)(),Object(r.j)("button",{key:0,class:"delete-option button-unstyled -hover-highlight",onClick:t=>e.deleteOption(i)},[Object(r.m)(a,{icon:"times"})],8,pe)):Object(r.i)("",!0)]))),128)),e.options.length<e.maxOptions?(Object(r.D)(),Object(r.j)("button",{key:0,class:"add-option faint button-unstyled -hover-highlight",onClick:t[1]||(t[1]=(...t)=>e.addOption&&e.addOption(...t))},[Object(r.m)(a,{icon:"plus",size:"sm"}),Object(r.l)(" "+Object(r.O)(e.$t("polls.add_option")),1)])):Object(r.i)("",!0),Object(r.k)("div",he,[Object(r.k)("div",{class:"poll-type",title:e.$t("polls.type")},[Object(r.m)(c,{modelValue:e.pollType,"onUpdate:modelValue":t[2]||(t[2]=t=>e.pollType=t),class:"poll-type-select",unstyled:"true",onChange:e.updatePollToParent},{default:Object(r.V)(()=>[Object(r.k)("option",me,Object(r.O)(e.$t("polls.single_choice")),1),Object(r.k)("option",fe,Object(r.O)(e.$t("polls.multiple_choices")),1)]),_:1},8,["modelValue","onChange"])],8,be),Object(r.k)("div",{class:"poll-expiry",title:e.$t("polls.expiry")},[Object(r.W)(Object(r.k)("input",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.expiryAmount=t),type:"number",class:"expiry-amount hide-number-spinner",min:e.minExpirationInCurrentUnit,max:e.maxExpirationInCurrentUnit,onChange:t[4]||(t[4]=(...t)=>e.expiryAmountChange&&e.expiryAmountChange(...t))},null,40,je),[[r.S,e.expiryAmount]]),ge,Object(r.m)(c,{modelValue:e.expiryUnit,"onUpdate:modelValue":t[5]||(t[5]=t=>e.expiryUnit=t),unstyled:"true",class:"expiry-unit",onChange:e.expiryAmountChange},{default:Object(r.V)(()=>[(Object(r.D)(!0),Object(r.j)(r.a,null,Object(r.H)(e.expiryUnits,t=>(Object(r.D)(),Object(r.j)("option",{key:t,value:t},Object(r.O)(e.$t(`time.${t}_short`,[""])),9,ve))),128))]),_:1},8,["modelValue","onChange"])],8,Oe)])])):Object(r.i)("",!0)}]]),Pe=n(58),xe=n(78),De=n(45),Te=n(33),Ie=n(137),$e=n(167),ze=n(8),Me=n(51);function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){F()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Q.c.add(ee.ib,ee.X,ee.tb,ee.g,ee.rb,ee.r);var Ee=function(e){return Number(e.substring(0,e.length-2))},Le={props:["replyTo","repliedUser","attentions","copyMessageScope","subject","disableSubject","disableScopeSelector","disableNotice","disableLockWarning","disablePolls","disableSensitivityCheckbox","disableSubmit","disablePreview","placeholder","maxHeight","postHandler","preserveFocus","autoFocus","fileLimit","submitOnEnter","emojiPickerPlacement","optimisticPosting"],emits:["posted","resize","mediaplay","mediapause"],components:{MediaUpload:se,EmojiInput:ce.a,PollForm:Ce,ScopeSelector:ae.a,Checkbox:Me.a,Select:_e.a,Attachment:Pe.a,StatusContent:De.a,Gallery:xe.a},mounted:function(){if(this.updateIdempotencyKey(),this.resize(this.$refs.textarea),this.replyTo){var e=this.$refs.textarea.value.length;this.$refs.textarea.setSelectionRange(e,e)}(this.replyTo||this.autoFocus)&&this.$refs.textarea.focus()},data:function(){var e=this.$route.query.message||"",t=this.$store.getters.mergedConfig.scopeCopy;if(this.replyTo){var n=this.$store.state.users.currentUser;e=function(e,t){var n=e.user,r=e.attentions,i=void 0===r?[]:r,o=L()(i);o.unshift(n),o=B()(o,"id"),o=J()(o,{id:t.id});var s=H()(o,(function(e){return"@".concat(e.screen_name)}));return s.length>0?s.join(" ")+" ":""}({user:this.repliedUser,attentions:this.attentions},n)}var r=this.copyMessageScope&&t||"direct"===this.copyMessageScope?this.copyMessageScope:this.$store.state.users.currentUser.default_scope,i=this.$store.getters.mergedConfig,o=i.postContentType,s=i.sensitiveByDefault,a=i.sensitiveIfSubject;return{dropFiles:[],uploadingFiles:!1,error:null,posting:!1,highlighted:0,newStatus:{spoilerText:this.subject||"",status:e,sensitiveIfSubject:a,nsfw:!!s,files:[],poll:{},mediaDescriptions:{},visibility:r,contentType:o},caret:0,pollFormVisible:!1,showDropIcon:"hide",dropStopTimeout:null,preview:null,previewLoading:!1,emojiInputShown:!1,idempotencyKey:""}},computed:Fe(Fe({users:function(){return this.$store.state.users.users},userDefaultScope:function(){return this.$store.state.users.currentUser.default_scope},showAllScopes:function(){return!this.mergedConfig.minimalScopesMode},emojiUserSuggestor:function(){return Object($e.a)({emoji:[].concat(L()(this.$store.state.instance.emoji),L()(this.$store.state.instance.customEmoji)),store:this.$store})},emojiSuggestor:function(){return Object($e.a)({emoji:[].concat(L()(this.$store.state.instance.emoji),L()(this.$store.state.instance.customEmoji))})},emoji:function(){return this.$store.state.instance.emoji||[]},customEmoji:function(){return this.$store.state.instance.customEmoji||[]},statusLength:function(){return this.newStatus.status.length},spoilerTextLength:function(){return this.newStatus.spoilerText.length},statusLengthLimit:function(){return this.$store.state.instance.textlimit},hasStatusLengthLimit:function(){return this.statusLengthLimit>0},charactersLeft:function(){return this.statusLengthLimit-(this.statusLength+this.spoilerTextLength)},isOverLengthLimit:function(){return this.hasStatusLengthLimit&&this.charactersLeft<0},minimalScopesMode:function(){return this.$store.state.instance.minimalScopesMode},alwaysShowSubject:function(){return this.mergedConfig.alwaysShowSubjectInput},postFormats:function(){return this.$store.state.instance.postFormats||[]},safeDMEnabled:function(){return this.$store.state.instance.safeDM},pollsAvailable:function(){return this.$store.state.instance.pollsAvailable&&this.$store.state.instance.pollLimits.max_options>=2&&!0!==this.disablePolls},hideScopeNotice:function(){return this.disableNotice||this.$store.getters.mergedConfig.hideScopeNotice},pollContentError:function(){return this.pollFormVisible&&this.newStatus.poll&&this.newStatus.poll.error},showPreview:function(){return!this.disablePreview&&(!!this.preview||this.previewLoading)},emptyStatus:function(){return""===this.newStatus.status.trim()&&0===this.newStatus.files.length},uploadFileLimitReached:function(){return this.newStatus.files.length>=this.fileLimit}},Object(ze.c)(["mergedConfig"])),Object(ze.e)({mobileLayout:function(e){return e.interface.mobileLayout}})),watch:{newStatus:{deep:!0,handler:function(){this.statusChanged()}}},methods:{statusChanged:function(){this.autoPreview(),this.updateIdempotencyKey()},clearStatus:function(){var e=this,t=this.newStatus;this.newStatus={status:"",spoilerText:"",files:[],visibility:t.visibility,contentType:t.contentType,poll:{},mediaDescriptions:{}},this.pollFormVisible=!1,this.$refs.mediaUpload&&this.$refs.mediaUpload.clearFile(),this.clearPollForm(),this.preserveFocus&&this.$nextTick((function(){e.$refs.textarea.focus()}));var n=this.$el.querySelector("textarea");n.style.height="auto",n.style.height=void 0,this.error=null,this.preview&&this.previewStatus()},postStatus:function(e,t){var n=arguments,r=this;return M()(Y.a.mark((function i(){var o,s,a;return Y.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n.length>2&&void 0!==n[2]?n[2]:{},o=r.$store.getters.mergedConfig.sensitiveIfSubject,!r.posting||r.optimisticPosting){i.next=4;break}return i.abrupt("return");case 4:if(!r.disableSubmit){i.next=6;break}return i.abrupt("return");case 6:if(!r.emojiInputShown){i.next=8;break}return i.abrupt("return");case 8:if(r.submitOnEnter&&(e.stopPropagation(),e.preventDefault()),!r.optimisticPosting||!r.emptyStatus&&!r.isOverLengthLimit){i.next=11;break}return i.abrupt("return");case 11:if(!r.emptyStatus){i.next=14;break}return r.error=r.$t("post_status.empty_status_error"),i.abrupt("return");case 14:if(s=r.pollFormVisible?r.newStatus.poll:{},!r.pollContentError){i.next=18;break}return r.error=r.pollContentError,i.abrupt("return");case 18:return r.posting=!0,i.prev=19,i.next=22,r.setAllMediaDescriptions();case 22:i.next=29;break;case 24:return i.prev=24,i.t0=i.catch(19),r.error=r.$t("post_status.media_description_error"),r.posting=!1,i.abrupt("return");case 29:a={status:t.status,spoilerText:t.spoilerText||null,visibility:t.visibility,sensitive:t.nsfw||o&&t.spoilerText,media:t.files,store:r.$store,inReplyToStatusId:r.replyTo,contentType:t.contentType,poll:s,idempotencyKey:r.idempotencyKey},(r.postHandler?r.postHandler:G.a.postStatus)(a).then((function(e){e.error?r.error=e.error:(r.clearStatus(),r.$emit("posted",e)),r.posting=!1}));case 32:case"end":return i.stop()}}),i,null,[[19,24]])})))()},previewStatus:function(){var e=this;if(this.emptyStatus&&""===this.newStatus.spoilerText.trim())return this.preview={error:this.$t("post_status.preview_empty")},void(this.previewLoading=!1);var t=this.newStatus;this.previewLoading=!0,G.a.postStatus({status:t.status,spoilerText:t.spoilerText||null,visibility:t.visibility,sensitive:t.nsfw,media:[],store:this.$store,inReplyToStatusId:this.replyTo,contentType:t.contentType,poll:{},preview:!0}).then((function(t){e.previewLoading&&(t.error?e.preview={error:t.error}:e.preview=t)})).catch((function(t){e.preview={error:t}})).finally((function(){e.previewLoading=!1}))},debouncePreviewStatus:A()((function(){this.previewStatus()}),500),autoPreview:function(){this.preview&&(this.previewLoading=!0,this.debouncePreviewStatus())},closePreview:function(){this.preview=null,this.previewLoading=!1},togglePreview:function(){this.showPreview?this.closePreview():this.previewStatus()},addMediaFile:function(e){this.newStatus.files.push(e),this.$emit("resize",{delayed:!0})},removeMediaFile:function(e){var t=this.newStatus.files.indexOf(e);this.newStatus.files.splice(t,1),this.$emit("resize")},editAttachment:function(e,t){this.newStatus.mediaDescriptions[e.id]=t},shiftUpMediaFile:function(e){var t=this.newStatus.files,n=this.newStatus.files.indexOf(e);t.splice(n,1),t.splice(n-1,0,e)},shiftDnMediaFile:function(e){var t=this.newStatus.files,n=this.newStatus.files.indexOf(e);t.splice(n,1),t.splice(n+1,0,e)},uploadFailed:function(e,t){t=t||{},this.error=this.$t("upload.error.base")+" "+this.$t("upload.error."+e,t)},startedUploadingFiles:function(){this.uploadingFiles=!0},finishedUploadingFiles:function(){this.$emit("resize"),this.uploadingFiles=!1},type:function(e){return Te.a.fileType(e.mimetype)},paste:function(e){this.autoPreview(),this.resize(e),e.clipboardData.files.length>0&&(e.preventDefault(),this.dropFiles=[e.clipboardData.files[0]])},fileDrop:function(e){e.dataTransfer&&e.dataTransfer.types.includes("Files")&&(e.preventDefault(),this.dropFiles=e.dataTransfer.files,clearTimeout(this.dropStopTimeout),this.showDropIcon="hide")},fileDragStop:function(e){var t=this;clearTimeout(this.dropStopTimeout),this.showDropIcon="fade",this.dropStopTimeout=setTimeout((function(){return t.showDropIcon="hide"}),500)},fileDrag:function(e){e.dataTransfer.dropEffect=this.uploadFileLimitReached?"none":"copy",e.dataTransfer&&e.dataTransfer.types.includes("Files")&&(clearTimeout(this.dropStopTimeout),this.showDropIcon="show")},onEmojiInputInput:function(e){var t=this;this.$nextTick((function(){t.resize(t.$refs.textarea)}))},resize:function(e){var t=e.target||e;if(t instanceof window.Element){if(""===t.value)return t.style.height=null,this.$emit("resize"),void this.$refs["emoji-input"].resize();var n=this.$refs.form,r=this.$refs.bottom,i=window.getComputedStyle(r)["padding-bottom"],o=Ee(i),s=this.$el.closest(".column.-scrollable")||this.$el.closest(".post-form-modal-view")||window,a=window.getComputedStyle(t)["padding-top"],c=window.getComputedStyle(t)["padding-bottom"],l=Ee(a)+Ee(c),u=Ee(t.style.height),d=s===window?s.scrollY:s.scrollTop,p=s===window?s.innerHeight:s.offsetHeight,h=d+p;t.style.height="auto";var b=Math.floor(t.scrollHeight-l),m=this.maxHeight?Math.min(b,this.maxHeight):b;Math.abs(m-u)<=1&&(m=u),t.style.height="".concat(m,"px"),this.$emit("resize",m);var f=r.offsetHeight+Object(Ie.a)(r,s).top+o,O=h<f,j=p<n.offsetHeight,g=f-h,v=O&&!(j&&this.$refs.textarea.selectionStart!==this.$refs.textarea.value.length)?g:0,y=Math.round(d+v);s===window?s.scroll(0,y):s.scrollTop=y,this.$refs["emoji-input"].resize()}},showEmojiPicker:function(){this.$refs.textarea.focus(),this.$refs["emoji-input"].triggerShowPicker()},clearError:function(){this.error=null},changeVis:function(e){this.newStatus.visibility=e},togglePollForm:function(){this.pollFormVisible=!this.pollFormVisible},setPoll:function(e){this.newStatus.poll=e},clearPollForm:function(){this.$refs.pollForm&&this.$refs.pollForm.clear()},dismissScopeNotice:function(){this.$store.dispatch("setOption",{name:"hideScopeNotice",value:!0})},setMediaDescription:function(e){var t=this.newStatus.mediaDescriptions[e];if(t&&""!==t.trim())return G.a.setMediaDescription({store:this.$store,id:e,description:t})},setAllMediaDescriptions:function(){var e=this,t=this.newStatus.files.map((function(e){return e.id}));return Promise.all(t.map((function(t){return e.setMediaDescription(t)})))},handleEmojiInputShow:function(e){this.emojiInputShown=e},updateIdempotencyKey:function(){this.idempotencyKey=Date.now().toString()},openProfileTab:function(){this.$store.dispatch("openSettingsModalTab","profile")}}};n(524);const Re=oe()(Le,[["render",function(e,t,n,z,M,U){const F=Object(r.J)("i18n-t"),E=Object(r.J)("FAIcon"),L=Object(r.J)("StatusContent"),R=Object(r.J)("EmojiInput"),A=Object(r.J)("scope-selector"),N=Object(r.J)("Select"),B=Object(r.J)("poll-form"),V=Object(r.J)("media-upload"),H=Object(r.J)("gallery"),q=Object(r.J)("Checkbox");return Object(r.D)(),Object(r.j)("div",i,[Object(r.k)("form",{autocomplete:"off",onSubmit:t[26]||(t[26]=Object(r.Y)(()=>{},["prevent"])),onDragover:t[27]||(t[27]=Object(r.Y)((...t)=>e.fileDrag&&e.fileDrag(...t),["prevent"]))},[Object(r.k)("div",o,[e.$store.state.users.currentUser.locked||"private"!=e.newStatus.visibility||e.disableLockWarning?Object(r.i)("",!0):(Object(r.D)(),Object(r.h)(F,{key:0,keypath:"post_status.account_not_locked_warning",tag:"p",class:"visibility-notice",scope:"global"},{default:Object(r.V)(()=>[Object(r.k)("button",{class:"button-unstyled -link",onClick:t[0]||(t[0]=(...t)=>e.openProfileTab&&e.openProfileTab(...t))},Object(r.O)(e.$t("post_status.account_not_locked_warning_link")),1)]),_:1})),e.hideScopeNotice||"public"!==e.newStatus.visibility?e.hideScopeNotice||"unlisted"!==e.newStatus.visibility?!e.hideScopeNotice&&"private"===e.newStatus.visibility&&e.$store.state.users.currentUser.locked?(Object(r.D)(),Object(r.j)("p",c,[Object(r.k)("span",null,Object(r.O)(e.$t("post_status.scope_notice.private")),1),Object(r.k)("a",{class:"fa-scale-110 fa-old-padding dismiss",onClick:t[3]||(t[3]=Object(r.Y)(t=>e.dismissScopeNotice(),["prevent"]))},[Object(r.m)(E,{icon:"times"})])])):"direct"===e.newStatus.visibility?(Object(r.D)(),Object(r.j)("p",l,[e.safeDMEnabled?(Object(r.D)(),Object(r.j)("span",u,Object(r.O)(e.$t("post_status.direct_warning_to_first_only")),1)):(Object(r.D)(),Object(r.j)("span",d,Object(r.O)(e.$t("post_status.direct_warning_to_all")),1))])):Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("p",a,[Object(r.k)("span",null,Object(r.O)(e.$t("post_status.scope_notice.unlisted")),1),Object(r.k)("a",{class:"fa-scale-110 fa-old-padding dismiss",onClick:t[2]||(t[2]=Object(r.Y)(t=>e.dismissScopeNotice(),["prevent"]))},[Object(r.m)(E,{icon:"times"})])])):(Object(r.D)(),Object(r.j)("p",s,[Object(r.k)("span",null,Object(r.O)(e.$t("post_status.scope_notice.public")),1),Object(r.k)("a",{class:"fa-scale-110 fa-old-padding dismiss",onClick:t[1]||(t[1]=Object(r.Y)(t=>e.dismissScopeNotice(),["prevent"]))},[Object(r.m)(E,{icon:"times"})])])),e.disablePreview?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("div",p,[Object(r.k)("a",{class:"preview-toggle faint",onClick:t[4]||(t[4]=Object(r.Y)((...t)=>e.togglePreview&&e.togglePreview(...t),["stop","prevent"]))},[Object(r.l)(Object(r.O)(e.$t("post_status.preview"))+" ",1),Object(r.m)(E,{icon:e.showPreview?"chevron-left":"chevron-right"},null,8,["icon"])]),Object(r.W)(Object(r.k)("div",h,[Object(r.m)(E,{class:"fa-old-padding",spin:"",icon:"circle-notch"})],512),[[r.T,e.previewLoading]])])),e.showPreview?(Object(r.D)(),Object(r.j)("div",b,[e.preview?e.preview.error?(Object(r.D)(),Object(r.j)("div",f,Object(r.O)(e.preview.error),1)):(Object(r.D)(),Object(r.h)(L,{key:2,status:e.preview,class:"preview-status"},null,8,["status"])):(Object(r.D)(),Object(r.j)("div",m,Object(r.O)(e.$t("general.loading")),1))])):Object(r.i)("",!0),e.disableSubject||!e.newStatus.spoilerText&&!e.alwaysShowSubject?Object(r.i)("",!0):(Object(r.D)(),Object(r.h)(R,{key:7,modelValue:e.newStatus.spoilerText,"onUpdate:modelValue":t[6]||(t[6]=t=>e.newStatus.spoilerText=t),"enable-emoji-picker":"",suggest:e.emojiSuggestor,class:"form-control"},{default:Object(r.V)(()=>[Object(r.W)(Object(r.k)("input",{"onUpdate:modelValue":t[5]||(t[5]=t=>e.newStatus.spoilerText=t),type:"text",placeholder:e.$t("post_status.content_warning"),disabled:e.posting&&!e.optimisticPosting,size:"1",class:"form-post-subject"},null,8,O),[[r.S,e.newStatus.spoilerText]])]),_:1},8,["modelValue","suggest"])),Object(r.m)(R,{ref:"emoji-input",modelValue:e.newStatus.status,"onUpdate:modelValue":t[14]||(t[14]=t=>e.newStatus.status=t),suggest:e.emojiUserSuggestor,placement:e.emojiPickerPlacement,class:"form-control main-input","enable-emoji-picker":"","hide-emoji-button":"","newline-on-ctrl-enter":e.submitOnEnter,"enable-sticker-picker":"",onInput:e.onEmojiInputInput,onStickerUploaded:e.addMediaFile,onStickerUploadFailed:e.uploadFailed,onShown:e.handleEmojiInputShow},{default:Object(r.V)(()=>[Object(r.W)(Object(r.k)("textarea",{ref:"textarea","onUpdate:modelValue":t[7]||(t[7]=t=>e.newStatus.status=t),placeholder:e.placeholder||e.$t("post_status.default"),rows:"1",cols:"1",disabled:e.posting&&!e.optimisticPosting,class:Object(r.w)(["form-post-body",{"scrollable-form":!!e.maxHeight}]),onKeydown:[t[8]||(t[8]=Object(r.X)(Object(r.Y)(t=>e.submitOnEnter&&e.postStatus(t,e.newStatus),["exact"]),["enter"])),t[9]||(t[9]=Object(r.X)(Object(r.Y)(t=>e.postStatus(t,e.newStatus),["meta"]),["enter"])),t[10]||(t[10]=Object(r.X)(Object(r.Y)(t=>!e.submitOnEnter&&e.postStatus(t,e.newStatus),["ctrl"]),["enter"]))],onInput:t[11]||(t[11]=(...t)=>e.resize&&e.resize(...t)),onCompositionupdate:t[12]||(t[12]=(...t)=>e.resize&&e.resize(...t)),onPaste:t[13]||(t[13]=(...t)=>e.paste&&e.paste(...t))},null,42,j),[[r.S,e.newStatus.status]]),e.hasStatusLengthLimit?(Object(r.D)(),Object(r.j)("p",{key:0,class:Object(r.w)(["character-counter faint",{error:e.isOverLengthLimit}])},Object(r.O)(e.charactersLeft),3)):Object(r.i)("",!0)]),_:1},8,["modelValue","suggest","placement","newline-on-ctrl-enter","onInput","onStickerUploaded","onStickerUploadFailed","onShown"]),e.disableScopeSelector?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("div",g,[Object(r.m)(A,{"show-all":e.showAllScopes,"user-default":e.userDefaultScope,"original-scope":e.copyMessageScope,"initial-scope":e.newStatus.visibility,"on-scope-change":e.changeVis},null,8,["show-all","user-default","original-scope","initial-scope","on-scope-change"]),e.postFormats.length>1?(Object(r.D)(),Object(r.j)("div",v,[Object(r.m)(N,{id:"post-content-type",modelValue:e.newStatus.contentType,"onUpdate:modelValue":t[15]||(t[15]=t=>e.newStatus.contentType=t),class:"form-control"},{default:Object(r.V)(()=>[(Object(r.D)(!0),Object(r.j)(r.a,null,Object(r.H)(e.postFormats,t=>(Object(r.D)(),Object(r.j)("option",{key:t,value:t},Object(r.O)(e.$t(`post_status.content_type["${t}"]`)),9,y))),128))]),_:1},8,["modelValue"])])):Object(r.i)("",!0),1===e.postFormats.length&&"text/plain"!==e.postFormats[0]?(Object(r.D)(),Object(r.j)("div",w,[Object(r.k)("span",k,Object(r.O)(e.$t(`post_status.content_type["${e.postFormats[0]}"]`)),1)])):Object(r.i)("",!0)]))]),e.pollsAvailable?(Object(r.D)(),Object(r.h)(B,{key:0,ref:"pollForm",visible:e.pollFormVisible,onUpdatePoll:e.setPoll},null,8,["visible","onUpdatePoll"])):Object(r.i)("",!0),Object(r.k)("div",_,[Object(r.k)("div",S,[Object(r.m)(V,{ref:"mediaUpload",class:"media-upload-icon","drop-files":e.dropFiles,disabled:e.uploadFileLimitReached,onUploading:e.startedUploadingFiles,onUploaded:e.addMediaFile,onUploadFailed:e.uploadFailed,onAllUploaded:e.finishedUploadingFiles},null,8,["drop-files","disabled","onUploading","onUploaded","onUploadFailed","onAllUploaded"]),Object(r.k)("button",{class:"emoji-icon button-unstyled",title:e.$t("emoji.add_emoji"),onClick:t[16]||(t[16]=(...t)=>e.showEmojiPicker&&e.showEmojiPicker(...t))},[Object(r.m)(E,{icon:"smile-beam"})],8,C),e.pollsAvailable?(Object(r.D)(),Object(r.j)("button",{key:0,class:Object(r.w)(["poll-icon button-unstyled",{selected:e.pollFormVisible}]),title:e.$t("polls.add_poll"),onClick:t[17]||(t[17]=(...t)=>e.togglePollForm&&e.togglePollForm(...t))},[Object(r.m)(E,{icon:"poll-h"})],10,P)):Object(r.i)("",!0)]),e.posting?(Object(r.D)(),Object(r.j)("button",x,Object(r.O)(e.$t("post_status.posting")),1)):e.isOverLengthLimit?(Object(r.D)(),Object(r.j)("button",D,Object(r.O)(e.$t("post_status.post")),1)):(Object(r.D)(),Object(r.j)("button",{key:2,disabled:e.uploadingFiles||e.disableSubmit,class:"btn button-default",onTouchstart:t[18]||(t[18]=Object(r.Y)(t=>e.postStatus(t,e.newStatus),["stop","prevent"])),onClick:t[19]||(t[19]=Object(r.Y)(t=>e.postStatus(t,e.newStatus),["stop","prevent"]))},Object(r.O)(e.$t("post_status.post")),41,T))],512),Object(r.W)(Object(r.k)("div",{style:Object(r.x)({animation:"show"===e.showDropIcon?"fade-in 0.25s":"fade-out 0.5s"}),class:"drop-indicator",onDragleave:t[20]||(t[20]=(...t)=>e.fileDragStop&&e.fileDragStop(...t)),onDrop:t[21]||(t[21]=Object(r.Y)((...t)=>e.fileDrop&&e.fileDrop(...t),["stop"]))},[Object(r.m)(E,{icon:e.uploadFileLimitReached?"ban":"upload"},null,8,["icon"])],36),[[r.T,"hide"!==e.showDropIcon]]),e.error?(Object(r.D)(),Object(r.j)("div",I,[Object(r.l)(" Error: "+Object(r.O)(e.error)+" ",1),Object(r.k)("button",{class:"button-unstyled",onClick:t[22]||(t[22]=(...t)=>e.clearError&&e.clearError(...t))},[Object(r.m)(E,{class:"fa-scale-110 fa-old-padding",icon:"times"})])])):Object(r.i)("",!0),e.newStatus.files&&e.newStatus.files.length>0?(Object(r.D)(),Object(r.h)(H,{key:2,class:"attachments",grid:!0,nsfw:!1,attachments:e.newStatus.files,descriptions:e.newStatus.mediaDescriptions,"set-media":()=>e.$store.dispatch("setMedia",e.newStatus.files),editable:!0,"edit-attachment":e.editAttachment,"remove-attachment":e.removeMediaFile,"shift-up-attachment":e.newStatus.files.length>1&&e.shiftUpMediaFile,"shift-dn-attachment":e.newStatus.files.length>1&&e.shiftDnMediaFile,onPlay:t[23]||(t[23]=t=>e.$emit("mediaplay",e.attachment.id)),onPause:t[24]||(t[24]=t=>e.$emit("mediapause",e.attachment.id))},null,8,["attachments","descriptions","set-media","edit-attachment","remove-attachment","shift-up-attachment","shift-dn-attachment"])):Object(r.i)("",!0),e.newStatus.files.length>0&&!e.disableSensitivityCheckbox?(Object(r.D)(),Object(r.j)("div",$,[Object(r.m)(q,{modelValue:e.newStatus.nsfw,"onUpdate:modelValue":t[25]||(t[25]=t=>e.newStatus.nsfw=t)},{default:Object(r.V)(()=>[Object(r.l)(Object(r.O)(e.$t("post_status.attachments_sensitive")),1)]),_:1},8,["modelValue"])])):Object(r.i)("",!0)],32)],512)}]]);t.a=Re},function(e,t,n){"use strict";var r=n(0);const i=["href","alt","title"],o={key:1,class:"attachment-buttons"},s=["placeholder"],a={key:1},c={class:"attachment-wrapper"},l=["href","alt","title"],u=["src"],d={key:1,class:"attachment-buttons"},p=["title"],h=["title"],b=["title"],m=["title"],f=["title"],O=["title"],j=["title"],g=["href"],v=["href"],y=["href"],w=["src","alt","title"],k={key:0,class:"image"},_=["src"],S={class:"text"},C=["href"],P=["innerHTML"],x=["href"],D=["placeholder"],T={key:1};var I=n(5),$=n.n(I),z=n(50),M=n(139),U=n(141),F=n(327),E=n.n(F),L=n(33),R=n(8),A=n(6),N=n(3);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}A.c.add(N.D,N.Q,N.K,N.xb,N.U,N.rb,N.lb,N.db,N.sb,N.T,N.b);var V={props:["attachment","description","hideDescription","nsfw","size","setMedia","remove","shiftUp","shiftDn","edit"],data:function(){return{localDescription:this.description||this.attachment.description,nsfwImage:this.$store.state.instance.nsfwCensorImage||E.a,hideNsfwLocal:this.$store.getters.mergedConfig.hideNsfw,preloadImage:this.$store.getters.mergedConfig.preloadImage,loading:!1,img:"image"===L.a.fileType(this.attachment.mimetype)&&document.createElement("img"),modalOpen:!1,showHidden:!1,flashLoaded:!1,showDescription:!1}},components:{Flash:M.a,StillImage:z.a,VideoAttachment:U.a},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){$()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({classNames:function(){return[{"-loading":this.loading,"-nsfw-placeholder":this.hidden,"-editable":void 0!==this.edit},"-type-"+this.type,this.size&&"-size-"+this.size,"-".concat(this.useContainFit?"contain":"cover","-fit")]},usePlaceholder:function(){return"hide"===this.size},useContainFit:function(){return this.$store.getters.mergedConfig.useContainFit},placeholderName:function(){return""!==this.attachment.description&&this.attachment.description?this.attachment.description:this.type.toUpperCase()},placeholderIconClass:function(){return"image"===this.type?"image":"video"===this.type?"video":"audio"===this.type?"music":"file"},referrerpolicy:function(){return this.$store.state.instance.mediaProxyAvailable?"":"no-referrer"},type:function(){return L.a.fileType(this.attachment.mimetype)},hidden:function(){return this.nsfw&&this.hideNsfwLocal&&!this.showHidden},isEmpty:function(){return"html"===this.type&&!this.attachment.oembed},useModal:function(){var e=[];switch(this.size){case"hide":case"small":e=["image","video","audio","flash"];break;default:e=this.mergedConfig.playVideosInModal?["image","video","flash"]:["image"]}return e.includes(this.type)},videoTag:function(){return this.useModal?"button":"span"}},Object(R.c)(["mergedConfig"])),watch:{localDescription:function(e){this.onEdit(e)}},methods:{linkClicked:function(e){var t=e.target;"A"===t.tagName&&window.open(t.href,"_blank")},openModal:function(e){this.useModal?(this.$emit("setMedia"),this.$store.dispatch("setCurrentMedia",this.attachment)):"unknown"===this.type&&window.open(this.attachment.url)},openModalForce:function(e){this.$emit("setMedia"),this.$store.dispatch("setCurrentMedia",this.attachment)},onEdit:function(e){this.edit&&this.edit(this.attachment,e)},onRemove:function(){this.remove&&this.remove(this.attachment)},onShiftUp:function(){this.shiftUp&&this.shiftUp(this.attachment)},onShiftDn:function(){this.shiftDn&&this.shiftDn(this.attachment)},stopFlash:function(){this.$refs.flash.closePlayer()},setFlashLoaded:function(e){this.flashLoaded=e},toggleDescription:function(){this.showDescription=!this.showDescription},toggleHidden:function(e){var t=this;!this.mergedConfig.useOneClickNsfw||this.showHidden||"video"===this.type&&!this.mergedConfig.playVideosInModal?this.img&&!this.preloadImage?this.img.onload?this.img.onload():(this.loading=!0,this.img.src=this.attachment.url,this.img.onload=function(){t.loading=!1,t.showHidden=!t.showHidden}):this.showHidden=!this.showHidden:this.openModal(e)},onImageLoad:function(e){var t=e.naturalWidth,n=e.naturalHeight;this.$emit("naturalSizeLoad",{id:this.attachment.id,width:t,height:n})}}},H=(n(509),n(4));const q=n.n(H)()(V,[["render",function(e,t,n,I,$,z){const M=Object(r.J)("FAIcon"),U=Object(r.J)("StillImage"),F=Object(r.J)("VideoAttachment"),E=Object(r.J)("Flash");return e.usePlaceholder?(Object(r.D)(),Object(r.j)("button",{key:0,class:Object(r.w)(["Attachment -placeholder button-unstyled",e.classNames]),onClick:t[4]||(t[4]=(...t)=>e.openModal&&e.openModal(...t))},["html"!==e.type?(Object(r.D)(),Object(r.j)("a",{key:0,class:"placeholder",target:"_blank",href:e.attachment.url,alt:e.attachment.description,title:e.attachment.description,onClick:t[0]||(t[0]=Object(r.Y)(()=>{},["prevent"]))},[Object(r.m)(M,{icon:e.placeholderIconClass},null,8,["icon"]),Object(r.k)("b",null,Object(r.O)(e.nsfw?"NSFW / ":""),1),Object(r.l)(Object(r.O)(e.edit?"":e.placeholderName),1)],8,i)):Object(r.i)("",!0),e.edit||e.remove?(Object(r.D)(),Object(r.j)("div",o,[e.remove?(Object(r.D)(),Object(r.j)("button",{key:0,class:"button-unstyled attachment-button",onClick:t[1]||(t[1]=Object(r.Y)((...t)=>e.onRemove&&e.onRemove(...t),["prevent"]))},[Object(r.m)(M,{icon:"trash-alt"})])):Object(r.i)("",!0)])):Object(r.i)("",!0),"hide"!==e.size&&!e.hideDescription&&(e.edit||e.localDescription||e.showDescription)?(Object(r.D)(),Object(r.j)("div",{key:2,class:Object(r.w)(["description-container",{"-static":!e.edit}])},[e.edit?Object(r.W)((Object(r.D)(),Object(r.j)("input",{key:0,"onUpdate:modelValue":t[2]||(t[2]=t=>e.localDescription=t),type:"text",class:"description-field",placeholder:e.$t("post_status.media_description"),onKeydown:t[3]||(t[3]=Object(r.X)(Object(r.Y)(()=>{},["prevent"]),["enter"]))},null,40,s)),[[r.S,e.localDescription]]):(Object(r.D)(),Object(r.j)("p",a,Object(r.O)(e.localDescription),1))],2)):Object(r.i)("",!0)],2)):(Object(r.D)(),Object(r.j)("div",{key:1,class:Object(r.w)(["Attachment",e.classNames])},[Object(r.W)(Object(r.k)("div",c,[e.hidden?(Object(r.D)(),Object(r.j)("a",{key:0,class:"image-container",href:e.attachment.url,alt:e.attachment.description,title:e.attachment.description,onClick:t[5]||(t[5]=Object(r.Y)((...t)=>e.toggleHidden&&e.toggleHidden(...t),["prevent","stop"]))},[(Object(r.D)(),Object(r.j)("img",{key:e.nsfwImage,class:"nsfw",src:e.nsfwImage},null,8,u)),"video"===e.type?(Object(r.D)(),Object(r.h)(M,{key:0,class:"play-icon",icon:"play-circle"})):Object(r.i)("",!0)],8,l)):Object(r.i)("",!0),e.hidden?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("div",d,["flash"===e.type&&e.flashLoaded?(Object(r.D)(),Object(r.j)("button",{key:0,class:"button-unstyled attachment-button",title:e.$t("status.attachment_stop_flash"),onClick:t[6]||(t[6]=Object(r.Y)((...t)=>e.stopFlash&&e.stopFlash(...t),["prevent"]))},[Object(r.m)(M,{icon:"stop"})],8,p)):Object(r.i)("",!0),e.attachment.description&&"small"!==e.size&&!e.edit&&"unknown"!==e.type?(Object(r.D)(),Object(r.j)("button",{key:1,class:"button-unstyled attachment-button",title:e.$t("status.show_attachment_description"),onClick:t[7]||(t[7]=Object(r.Y)((...t)=>e.toggleDescription&&e.toggleDescription(...t),["prevent"]))},[Object(r.m)(M,{icon:"align-right"})],8,h)):Object(r.i)("",!0),e.useModal||"unknown"===e.type?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("button",{key:2,class:"button-unstyled attachment-button",title:e.$t("status.show_attachment_in_modal"),onClick:t[8]||(t[8]=Object(r.Y)((...t)=>e.openModalForce&&e.openModalForce(...t),["prevent"]))},[Object(r.m)(M,{icon:"search-plus"})],8,b)),e.nsfw&&e.hideNsfwLocal?(Object(r.D)(),Object(r.j)("button",{key:3,class:"button-unstyled attachment-button",title:e.$t("status.hide_attachment"),onClick:t[9]||(t[9]=Object(r.Y)((...t)=>e.toggleHidden&&e.toggleHidden(...t),["prevent"]))},[Object(r.m)(M,{icon:"times"})],8,m)):Object(r.i)("",!0),e.shiftUp?(Object(r.D)(),Object(r.j)("button",{key:4,class:"button-unstyled attachment-button",title:e.$t("status.move_up"),onClick:t[10]||(t[10]=Object(r.Y)((...t)=>e.onShiftUp&&e.onShiftUp(...t),["prevent"]))},[Object(r.m)(M,{icon:"chevron-left"})],8,f)):Object(r.i)("",!0),e.shiftDn?(Object(r.D)(),Object(r.j)("button",{key:5,class:"button-unstyled attachment-button",title:e.$t("status.move_down"),onClick:t[11]||(t[11]=Object(r.Y)((...t)=>e.onShiftDn&&e.onShiftDn(...t),["prevent"]))},[Object(r.m)(M,{icon:"chevron-right"})],8,O)):Object(r.i)("",!0),e.remove?(Object(r.D)(),Object(r.j)("button",{key:6,class:"button-unstyled attachment-button",title:e.$t("status.remove_attachment"),onClick:t[12]||(t[12]=Object(r.Y)((...t)=>e.onRemove&&e.onRemove(...t),["prevent"]))},[Object(r.m)(M,{icon:"trash-alt"})],8,j)):Object(r.i)("",!0)])),"image"!==e.type||e.hidden&&!e.preloadImage?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("a",{key:2,class:Object(r.w)(["image-container",{"-hidden":e.hidden&&e.preloadImage}]),href:e.attachment.url,target:"_blank",onClick:t[13]||(t[13]=Object(r.Y)((...t)=>e.openModal&&e.openModal(...t),["stop","prevent"]))},[Object(r.m)(U,{class:"image",referrerpolicy:e.referrerpolicy,mimetype:e.attachment.mimetype,src:e.attachment.large_thumb_url||e.attachment.url,"image-load-handler":e.onImageLoad,alt:e.attachment.description},null,8,["referrerpolicy","mimetype","src","image-load-handler","alt"])],10,g)),"unknown"!==e.type||e.hidden?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("a",{key:3,class:"placeholder-container",href:e.attachment.url,target:"_blank"},[Object(r.m)(M,{size:"5x",icon:e.placeholderIconClass},null,8,["icon"]),Object(r.k)("p",null,Object(r.O)(e.localDescription),1)],8,v)),"video"!==e.type||e.hidden?Object(r.i)("",!0):(Object(r.D)(),Object(r.h)(Object(r.L)(e.videoTag),{key:4,class:Object(r.w)(["video-container",{"button-unstyled":"isModal"}]),href:e.attachment.url,onClick:Object(r.Y)(e.openModal,["stop","prevent"])},{default:Object(r.V)(()=>[Object(r.m)(F,{class:"video",attachment:e.attachment,controls:!e.useModal,onPlay:t[14]||(t[14]=t=>e.$emit("play")),onPause:t[15]||(t[15]=t=>e.$emit("pause"))},null,8,["attachment","controls"]),e.useModal?(Object(r.D)(),Object(r.h)(M,{key:0,class:"play-icon",icon:"play-circle"})):Object(r.i)("",!0)]),_:1},8,["href","onClick"])),"audio"!==e.type||e.hidden?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("span",{key:5,class:"audio-container",href:e.attachment.url,onClick:t[18]||(t[18]=Object(r.Y)((...t)=>e.openModal&&e.openModal(...t),["stop","prevent"]))},["audio"===e.type?(Object(r.D)(),Object(r.j)("audio",{key:0,src:e.attachment.url,alt:e.attachment.description,title:e.attachment.description,controls:"",onPlay:t[16]||(t[16]=t=>e.$emit("play")),onPause:t[17]||(t[17]=t=>e.$emit("pause"))},null,40,w)):Object(r.i)("",!0)],8,y)),"html"===e.type&&e.attachment.oembed?(Object(r.D)(),Object(r.j)("div",{key:6,class:"oembed-container",onClick:t[19]||(t[19]=Object(r.Y)((...t)=>e.linkClicked&&e.linkClicked(...t),["prevent"]))},[e.attachment.thumb_url?(Object(r.D)(),Object(r.j)("div",k,[Object(r.k)("img",{src:e.attachment.thumb_url},null,8,_)])):Object(r.i)("",!0),Object(r.k)("div",S,[Object(r.k)("h1",null,[Object(r.k)("a",{href:e.attachment.url},Object(r.O)(e.attachment.oembed.title),9,C)]),Object(r.k)("div",{innerHTML:e.attachment.oembed.oembedHTML},null,8,P)])])):Object(r.i)("",!0),"flash"!==e.type||e.hidden?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("span",{key:7,class:"flash-container",href:e.attachment.url,onClick:t[22]||(t[22]=Object(r.Y)((...t)=>e.openModal&&e.openModal(...t),["stop","prevent"]))},[Object(r.m)(E,{ref:"flash",class:"flash",src:e.attachment.large_thumb_url||e.attachment.url,onPlayerOpened:t[20]||(t[20]=t=>e.setFlashLoaded(!0)),onPlayerClosed:t[21]||(t[21]=t=>e.setFlashLoaded(!1))},null,8,["src"])],8,x))],512),[[r.T,!e.isEmpty]]),"hide"!==e.size&&!e.hideDescription&&(e.edit||e.localDescription&&e.showDescription)?(Object(r.D)(),Object(r.j)("div",{key:0,class:Object(r.w)(["description-container",{"-static":!e.edit}])},[e.edit?Object(r.W)((Object(r.D)(),Object(r.j)("input",{key:0,"onUpdate:modelValue":t[23]||(t[23]=t=>e.localDescription=t),type:"text",class:"description-field",placeholder:e.$t("post_status.media_description"),onKeydown:t[24]||(t[24]=Object(r.X)(Object(r.Y)(()=>{},["prevent"]),["enter"]))},null,40,D)),[[r.S,e.localDescription]]):(Object(r.D)(),Object(r.j)("p",T,Object(r.O)(e.localDescription),1))],2)):Object(r.i)("",!0)],2))}]]);t.a=q},function(e,t,n){"use strict";var r=n(0);const i=["datetime","title"];var o=n(47),s=n(38),a={name:"Timeago",props:["time","autoUpdate","longFormat","nowThreshold"],data:function(){return{relativeTime:{key:"time.now",num:0},interval:null}},computed:{localeDateString:function(){var e=s.a.internalToBrowserLocale(this.$i18n.locale);return"string"==typeof this.time?new Date(Date.parse(this.time)).toLocaleString(e):this.time.toLocaleString(e)}},created:function(){this.refreshRelativeTimeObject()},unmounted:function(){clearTimeout(this.interval)},methods:{refreshRelativeTimeObject:function(){var e="number"==typeof this.nowThreshold?this.nowThreshold:1;this.relativeTime=this.longFormat?o.d(this.time,e):o.e(this.time,e),this.autoUpdate&&(this.interval=setTimeout(this.refreshRelativeTimeObject,1e3*this.autoUpdate))}}},c=n(4);const l=n.n(c)()(a,[["render",function(e,t,n,o,s,a){return Object(r.D)(),Object(r.j)("time",{datetime:n.time,title:a.localeDateString},Object(r.O)(e.$t(s.relativeTime.key,[s.relativeTime.num])),9,i)}]]);t.a=l},,,,,,,,,,function(e,t,n){"use strict";var r=n(0);const i={class:"list"},o={key:0,class:"list-empty-content faint"};var s={props:{items:{type:Array,default:function(){return[]}},getKey:{type:Function,default:function(e){return e.id}}}},a=(n(562),n(4));const c=n.n(a)()(s,[["render",function(e,t,n,s,a,c){return Object(r.D)(),Object(r.j)("div",i,[(Object(r.D)(!0),Object(r.j)(r.a,null,Object(r.H)(n.items,t=>(Object(r.D)(),Object(r.j)("div",{key:n.getKey(t),class:"list-item"},[Object(r.I)(e.$slots,"item",{item:t})]))),128)),0===n.items.length&&e.$slots.empty?(Object(r.D)(),Object(r.j)("div",o,[Object(r.I)(e.$slots,"empty")])):Object(r.i)("",!0)])}]]);t.a=c},function(e,t,n){"use strict";var r,i=n(13),o=n.n(i),s=n(12),a=n.n(s),c=n(10),l=n.n(c),u={ar:function(){return n.e(5).then(n.bind(null,595))},ca:function(){return n.e(6).then(n.bind(null,596))},cs:function(){return n.e(7).then(n.bind(null,597))},de:function(){return n.e(8).then(n.bind(null,598))},eo:function(){return n.e(9).then(n.bind(null,599))},es:function(){return n.e(10).then(n.bind(null,600))},et:function(){return n.e(11).then(n.bind(null,601))},eu:function(){return n.e(12).then(n.bind(null,602))},fi:function(){return n.e(13).then(n.bind(null,603))},fr:function(){return n.e(14).then(n.bind(null,604))},ga:function(){return n.e(15).then(n.bind(null,605))},he:function(){return n.e(16).then(n.bind(null,606))},hu:function(){return n.e(17).then(n.bind(null,607))},it:function(){return n.e(18).then(n.bind(null,608))},ja:function(){return n.e(20).then(n.bind(null,609))},ja_easy:function(){return n.e(19).then(n.bind(null,610))},ko:function(){return n.e(21).then(n.bind(null,611))},nb:function(){return n.e(22).then(n.bind(null,612))},nl:function(){return n.e(23).then(n.bind(null,613))},oc:function(){return n.e(24).then(n.bind(null,614))},pl:function(){return n.e(25).then(n.bind(null,615))},pt:function(){return n.e(26).then(n.bind(null,616))},ro:function(){return n.e(27).then(n.bind(null,617))},ru:function(){return n.e(28).then(n.bind(null,618))},te:function(){return n.e(29).then(n.bind(null,619))},uk:function(){return n.e(30).then(n.bind(null,620))},zh:function(){return n.e(31).then(n.bind(null,621))},zh_Hant:function(){return n.e(32).then(n.bind(null,622))}},d={languages:["en"].concat(a()(Object.keys(u))),default:{en:n(442).default},setLanguage:(r=o()(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u[n]){e.next=5;break}return e.next=3,u[n]();case 3:r=e.sent,t.setLocaleMessage(n,r.default);case 5:t.locale=n;case 6:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})};t.a=d},function(e,t,n){"use strict";var r=n(5),i=n.n(r),o=n(0),s=n(8),a=n(68);n(574);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var l=function(e){return e.findIndex((function(e){return e.props}))};t.a={name:"TabSwitcher",props:{renderOnlyFocused:{required:!1,type:Boolean,default:!1},onSwitch:{required:!1,type:Function,default:void 0},activeTab:{required:!1,type:String,default:void 0},scrollableTabs:{required:!1,type:Boolean,default:!1},sideTabBar:{required:!1,type:Boolean,default:!1},bodyScrollLock:{required:!1,type:Boolean,default:!1}},data:function(){return{active:l(this.slots())}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({activeIndex:function(){var e=this;return this.activeTab?this.slots().findIndex((function(t){return t&&t.props&&e.activeTab===t.props.key})):this.active},isActive:function(){var e=this;return function(t){return e.$slots.default().findIndex((function(e){return e.props&&e.props["data-tab-name"]===t}))===e.activeIndex}},settingsModalVisible:function(){return"visible"===this.settingsModalState}},Object(s.e)({settingsModalState:function(e){return e.interface.settingsModalState}})),beforeUpdate:function(){this.slots()[this.active].props||(this.active=l(this.slots()))},methods:{clickTab:function(e){var t=this;return function(n){n.preventDefault(),t.setTab(e)}},slots:function(){return this.$slots.default()[0].type===o.a?this.$slots.default()[0].children:this.$slots.default()},setTab:function(e){"function"==typeof this.onSwitch&&this.onSwitch.call(null,this.slots()[e].key),this.active=e,this.scrollableTabs&&(this.$refs.contents.scrollTop=0)}},render:function(){var e=this,t=this.slots().map((function(t,n){var r=t.props;if(r){var i=["tab","button-default"],s=["tab-wrapper"];return e.activeIndex===n&&(i.push("active"),s.push("active")),r.image?Object(o.m)("div",{class:s.join(" ")},[Object(o.m)("button",{disabled:r.disabled,onClick:e.clickTab(n),class:i.join(" "),type:"button"},[Object(o.m)("img",{src:r.image,title:r["image-tooltip"]},null),r.label?"":r.label])]):Object(o.m)("div",{class:s.join(" ")},[Object(o.m)("button",{disabled:r.disabled,onClick:e.clickTab(n),class:i.join(" "),type:"button"},[r.icon?Object(o.m)(a.a,{class:"tab-icon",size:"2x","fixed-width":!0,icon:r.icon},null):"",Object(o.m)("span",{class:"text"},[r.label])])])}})),n=this.slots().map((function(t,n){var r=t.props;if(r){var i=e.activeIndex===n,s=[i?"active":"hidden"];r.fullHeight&&s.push("full-height");var a=!e.renderOnlyFocused||i?t:"";return Object(o.m)("div",{class:s},[e.sideTabBar?Object(o.m)("h1",{class:"mobile-label"},[r.label]):"",a])}}));return Object(o.m)("div",{class:"tab-switcher "+(this.sideTabBar?"side-tabs":"top-tabs")},[Object(o.m)("div",{class:"tabs"},[t]),Object(o.W)(Object(o.m)("div",{ref:"contents",class:"contents"+(this.scrollableTabs?" scrollable-tabs":"")},[n]),[[Object(o.K)("body-scroll-lock"),this.bodyScrollLock]])])}}},,,,,function(e,t,n){"use strict";var r=n(21),i=n.n(r),o=n(15),s={postStatus:function(e){var t=e.store,n=e.status,r=e.spoilerText,s=e.visibility,a=e.sensitive,c=e.poll,l=e.media,u=void 0===l?[]:l,d=e.inReplyToStatusId,p=void 0===d?void 0:d,h=e.contentType,b=void 0===h?"text/plain":h,m=e.preview,f=void 0!==m&&m,O=e.idempotencyKey,j=void 0===O?"":O,g=i()(u,"id");return o.c.postStatus({credentials:t.state.users.currentUser.credentials,status:n,spoilerText:r,visibility:s,sensitive:a,mediaIds:g,inReplyToStatusId:p,contentType:b,poll:c,preview:f,idempotencyKey:j}).then((function(e){return e.error||f||t.dispatch("addNewStatuses",{statuses:[e],timeline:"friends",showImmediately:!0,noIdUpdate:!0}),e})).catch((function(e){return{error:e.message}}))},uploadMedia:function(e){var t=e.store,n=e.formData,r=t.state.users.currentUser.credentials;return o.c.uploadMedia({credentials:r,formData:n})},setMediaDescription:function(e){var t=e.store,n=e.id,r=e.description,i=t.state.users.currentUser.credentials;return o.c.setMediaDescription({credentials:i,id:n,description:r})}};t.a=s},function(e,t,n){"use strict";n.r(t);var r=n(0);const i={key:0,class:"notifications-heading panel-heading -sticky"},o={class:"title"},s={key:0,class:"badge badge-notification unseen-count"},a={class:"panel-body"},c=Object(r.k)("div",{class:"notification-overlay"},null,-1),l={class:"panel-footer"},u={key:0,class:"new-status-notification text-center faint"},d={class:"new-status-notification text-center"},p={key:2,class:"new-status-notification text-center"};var h=n(5),b=n.n(h),m=n(8);const f={key:1},O={key:0,class:"Notification container -muted"},j=["href"],g={class:"notification-right"},v={class:"notification-details"},y={class:"name-and-action"},w={key:0},k=["title"],_=Object(r.l)(" "+Object(r.O)(" ")+" "),S={key:2},C=Object(r.l)(" "+Object(r.O)(" ")+" "),P={key:3},x=Object(r.l)(" "+Object(r.O)(" ")+" "),D={key:4},T=Object(r.l)(" "+Object(r.O)(" ")+" "),I={key:5},$=Object(r.l)(" "+Object(r.O)(" ")+" "),z={key:6},M=Object(r.l)(" "+Object(r.O)(" ")+" "),U={key:7},F=["src","name"],E={key:1,class:"emoji-reaction-emoji"},L={key:8},R=Object(r.l)(" "+Object(r.O)(" ")+" "),A={key:0,class:"timeago"},N={key:1,class:"timeago"},B={class:"faint"},V={key:1,class:"follow-text"},H={key:0,style:{"white-space":"nowrap"}},q=["title"],J=["title"],W={key:2,class:"move-text"};var Y=n(45),G=n(34),K=n(22),X=n(35),Z=n(59),Q=n(25),ee=n(26),te=n(31),ne=n(23),re=n(6),ie=n(3);function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}re.c.add(ie.m,ie.rb,ie.jb,ie.Z,ie.vb,ie.ub,ie.C,ie.nb);var se={data:function(){return{userExpanded:!1,betterShadow:this.$store.state.interface.browserSupport.cssFilter,unmuted:!1}},props:["notification"],components:{StatusContent:Y.a,UserAvatar:K.default,UserCard:X.a,Timeago:Z.a,Status:G.default,RichContent:Q.a},methods:{toggleUserExpanded:function(){this.userExpanded=!this.userExpanded},generateUserProfileLink:function(e){return Object(ne.a)(e.id,e.screen_name,this.$store.state.instance.restrictedNicknames)},getUser:function(e){return this.$store.state.users.usersObject[e.from_profile.id]},toggleMute:function(){this.unmuted=!this.unmuted},approveUser:function(){this.$store.state.api.backendInteractor.approveUser({id:this.user.id}),this.$store.dispatch("removeFollowRequest",this.user),this.$store.dispatch("markSingleNotificationAsSeen",{id:this.notification.id}),this.$store.dispatch("updateNotification",{id:this.notification.id,updater:function(e){e.type="follow"}})},denyUser:function(){var e=this;this.$store.state.api.backendInteractor.denyUser({id:this.user.id}).then((function(){e.$store.dispatch("dismissNotificationLocal",{id:e.notification.id}),e.$store.dispatch("removeFollowRequest",e.user)}))}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({userClass:function(){return Object(te.a)(this.notification.from_profile)},userStyle:function(){var e=this.$store.getters.mergedConfig.highlight,t=this.notification.from_profile;return Object(te.b)(e[t.screen_name])},user:function(){return this.$store.getters.findUser(this.notification.from_profile.id)},userProfileLink:function(){return this.generateUserProfileLink(this.user)},targetUser:function(){return this.$store.getters.findUser(this.notification.target.id)},targetUserProfileLink:function(){return this.generateUserProfileLink(this.targetUser)},needMute:function(){return this.$store.getters.relationship(this.user.id).muting},isStatusNotification:function(){return Object(ee.b)(this.notification.type)}},Object(m.e)({currentUser:function(e){return e.users.currentUser}}))},ae=(n(556),n(4)),ce=n.n(ae);var le=ce()(se,[["render",function(e,t,n,i,o,s){const a=Object(r.J)("Status"),c=Object(r.J)("router-link"),l=Object(r.J)("FAIcon"),u=Object(r.J)("UserAvatar"),d=Object(r.J)("UserCard"),p=Object(r.J)("RichContent"),h=Object(r.J)("i18n-t"),b=Object(r.J)("Timeago"),m=Object(r.J)("StatusContent");return"mention"===e.notification.type?(Object(r.D)(),Object(r.h)(a,{key:0,class:"Notification",compact:!0,statusoid:e.notification.status},null,8,["statusoid"])):(Object(r.D)(),Object(r.j)("div",f,[e.needMute&&!e.unmuted?(Object(r.D)(),Object(r.j)("div",O,[Object(r.k)("small",null,[Object(r.m)(c,{to:e.userProfileLink},{default:Object(r.V)(()=>[Object(r.l)(Object(r.O)(e.notification.from_profile.screen_name_ui),1)]),_:1},8,["to"])]),Object(r.k)("button",{class:"button-unstyled unmute",onClick:t[0]||(t[0]=Object(r.Y)((...t)=>e.toggleMute&&e.toggleMute(...t),["prevent"]))},[Object(r.m)(l,{class:"fa-scale-110 fa-old-padding",icon:"eye-slash"})])])):(Object(r.D)(),Object(r.j)("div",{key:1,class:Object(r.w)(["Notification non-mention",[e.userClass,{highlighted:e.userStyle},"-type--"+e.notification.type]]),style:Object(r.x)([e.userStyle])},[Object(r.k)("a",{class:"avatar-container",href:e.$router.resolve(e.userProfileLink).href,onClickCapture:t[1]||(t[1]=Object(r.Y)((...t)=>e.toggleUserExpanded&&e.toggleUserExpanded(...t),["stop","prevent"]))},[Object(r.m)(u,{compact:!0,"better-shadow":e.betterShadow,user:e.notification.from_profile},null,8,["better-shadow","user"])],40,j),Object(r.k)("div",g,[e.userExpanded?(Object(r.D)(),Object(r.h)(d,{key:0,"user-id":e.getUser(e.notification).id,rounded:!0,bordered:!0},null,8,["user-id"])):Object(r.i)("",!0),Object(r.k)("span",v,[Object(r.k)("div",y,[e.notification.from_profile.name_html?(Object(r.D)(),Object(r.j)("bdi",w,[Object(r.m)(p,{class:"username",title:"@"+e.notification.from_profile.screen_name_ui,html:e.notification.from_profile.name_html,emoji:e.notification.from_profile.emoji},null,8,["title","html","emoji"])])):(Object(r.D)(),Object(r.j)("span",{key:1,class:"username",title:"@"+e.notification.from_profile.screen_name_ui},Object(r.O)(e.notification.from_profile.name),9,k)),_,"like"===e.notification.type?(Object(r.D)(),Object(r.j)("span",S,[Object(r.m)(l,{class:"type-icon",icon:"star"}),C,Object(r.k)("small",null,Object(r.O)(e.$t("notifications.favorited_you")),1)])):Object(r.i)("",!0),"repeat"===e.notification.type?(Object(r.D)(),Object(r.j)("span",P,[Object(r.m)(l,{class:"type-icon",icon:"retweet",title:e.$t("tool_tip.repeat")},null,8,["title"]),x,Object(r.k)("small",null,Object(r.O)(e.$t("notifications.repeated_you")),1)])):Object(r.i)("",!0),"follow"===e.notification.type?(Object(r.D)(),Object(r.j)("span",D,[Object(r.m)(l,{class:"type-icon",icon:"user-plus"}),T,Object(r.k)("small",null,Object(r.O)(e.$t("notifications.followed_you")),1)])):Object(r.i)("",!0),"follow_request"===e.notification.type?(Object(r.D)(),Object(r.j)("span",I,[Object(r.m)(l,{class:"type-icon",icon:"user"}),$,Object(r.k)("small",null,Object(r.O)(e.$t("notifications.follow_request")),1)])):Object(r.i)("",!0),"move"===e.notification.type?(Object(r.D)(),Object(r.j)("span",z,[Object(r.m)(l,{class:"type-icon",icon:"suitcase-rolling"}),M,Object(r.k)("small",null,Object(r.O)(e.$t("notifications.migrated_to")),1)])):Object(r.i)("",!0),"pleroma:emoji_reaction"===e.notification.type?(Object(r.D)(),Object(r.j)("span",U,[Object(r.k)("small",null,[Object(r.m)(h,{scope:"global",keypath:"notifications.reacted_with"},{default:Object(r.V)(()=>[null!==e.notification.emoji_url?(Object(r.D)(),Object(r.j)("img",{key:0,class:"notification-reaction-emoji",src:e.notification.emoji_url,name:e.notification.emoji},null,8,F)):(Object(r.D)(),Object(r.j)("span",E,Object(r.O)(e.notification.emoji),1))]),_:1})])])):Object(r.i)("",!0),"poll"===e.notification.type?(Object(r.D)(),Object(r.j)("span",L,[Object(r.m)(l,{class:"type-icon",icon:"poll-h"}),R,Object(r.k)("small",null,Object(r.O)(e.$t("notifications.poll_ended")),1)])):Object(r.i)("",!0)]),e.isStatusNotification?(Object(r.D)(),Object(r.j)("div",A,[e.notification.status?(Object(r.D)(),Object(r.h)(c,{key:0,to:{name:"conversation",params:{id:e.notification.status.id}},class:"faint-link"},{default:Object(r.V)(()=>[Object(r.m)(b,{time:e.notification.created_at,"auto-update":240},null,8,["time"])]),_:1},8,["to"])):Object(r.i)("",!0)])):(Object(r.D)(),Object(r.j)("div",N,[Object(r.k)("span",B,[Object(r.m)(b,{time:e.notification.created_at,"auto-update":240},null,8,["time"])])])),e.needMute?(Object(r.D)(),Object(r.j)("button",{key:2,class:"button-unstyled",onClick:t[2]||(t[2]=Object(r.Y)((...t)=>e.toggleMute&&e.toggleMute(...t),["prevent"]))},[Object(r.m)(l,{class:"fa-scale-110 fa-old-padding",icon:"eye-slash"})])):Object(r.i)("",!0)]),"follow"===e.notification.type||"follow_request"===e.notification.type?(Object(r.D)(),Object(r.j)("div",V,[Object(r.m)(c,{to:e.userProfileLink,class:"follow-name"},{default:Object(r.V)(()=>[Object(r.l)(" @"+Object(r.O)(e.notification.from_profile.screen_name_ui),1)]),_:1},8,["to"]),"follow_request"===e.notification.type?(Object(r.D)(),Object(r.j)("div",H,[Object(r.k)("button",{class:"button-unstyled",title:e.$t("tool_tip.accept_follow_request"),onClick:t[3]||(t[3]=t=>e.approveUser())},[Object(r.m)(l,{icon:"check",class:"fa-scale-110 fa-old-padding follow-request-accept"})],8,q),Object(r.k)("button",{class:"button-unstyled",title:e.$t("tool_tip.reject_follow_request"),onClick:t[4]||(t[4]=t=>e.denyUser())},[Object(r.m)(l,{icon:"times",class:"fa-scale-110 fa-old-padding follow-request-reject"})],8,J)])):Object(r.i)("",!0)])):"move"===e.notification.type?(Object(r.D)(),Object(r.j)("div",W,[Object(r.m)(c,{to:e.targetUserProfileLink},{default:Object(r.V)(()=>[Object(r.l)(" @"+Object(r.O)(e.notification.target.screen_name_ui),1)]),_:1},8,["to"])])):(Object(r.D)(),Object(r.h)(m,{key:3,class:"faint",compact:!0,status:e.notification.action},null,8,["status"]))])],6))]))}]]);const ue={class:"dropdown-menu"},de={class:"filter-trigger-button button-unstyled"};var pe=n(24);function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}re.c.add(ie.G);var me={components:{Popover:pe.default},computed:{filters:function(){return this.$store.getters.mergedConfig.notificationVisibility}},methods:{toggleNotificationFilter:function(e){this.$store.dispatch("setOption",{name:"notificationVisibility",value:be(be({},this.filters),{},b()({},e,!this.filters[e]))})}}};n(557);var fe=ce()(me,[["render",function(e,t,n,i,o,s){const a=Object(r.J)("FAIcon"),c=Object(r.J)("Popover");return Object(r.D)(),Object(r.h)(c,{trigger:"click",class:"NotificationFilters",placement:"bottom","bound-to":{x:"container"}},{content:Object(r.V)(()=>[Object(r.k)("div",ue,[Object(r.k)("button",{class:"button-default dropdown-item",onClick:t[0]||(t[0]=e=>s.toggleNotificationFilter("likes"))},[Object(r.k)("span",{class:Object(r.w)(["menu-checkbox",{"menu-checkbox-checked":s.filters.likes}])},null,2),Object(r.l)(Object(r.O)(e.$t("settings.notification_visibility_likes")),1)]),Object(r.k)("button",{class:"button-default dropdown-item",onClick:t[1]||(t[1]=e=>s.toggleNotificationFilter("repeats"))},[Object(r.k)("span",{class:Object(r.w)(["menu-checkbox",{"menu-checkbox-checked":s.filters.repeats}])},null,2),Object(r.l)(Object(r.O)(e.$t("settings.notification_visibility_repeats")),1)]),Object(r.k)("button",{class:"button-default dropdown-item",onClick:t[2]||(t[2]=e=>s.toggleNotificationFilter("follows"))},[Object(r.k)("span",{class:Object(r.w)(["menu-checkbox",{"menu-checkbox-checked":s.filters.follows}])},null,2),Object(r.l)(Object(r.O)(e.$t("settings.notification_visibility_follows")),1)]),Object(r.k)("button",{class:"button-default dropdown-item",onClick:t[3]||(t[3]=e=>s.toggleNotificationFilter("mentions"))},[Object(r.k)("span",{class:Object(r.w)(["menu-checkbox",{"menu-checkbox-checked":s.filters.mentions}])},null,2),Object(r.l)(Object(r.O)(e.$t("settings.notification_visibility_mentions")),1)]),Object(r.k)("button",{class:"button-default dropdown-item",onClick:t[4]||(t[4]=e=>s.toggleNotificationFilter("emojiReactions"))},[Object(r.k)("span",{class:Object(r.w)(["menu-checkbox",{"menu-checkbox-checked":s.filters.emojiReactions}])},null,2),Object(r.l)(Object(r.O)(e.$t("settings.notification_visibility_emoji_reactions")),1)]),Object(r.k)("button",{class:"button-default dropdown-item",onClick:t[5]||(t[5]=e=>s.toggleNotificationFilter("moves"))},[Object(r.k)("span",{class:Object(r.w)(["menu-checkbox",{"menu-checkbox-checked":s.filters.moves}])},null,2),Object(r.l)(Object(r.O)(e.$t("settings.notification_visibility_moves")),1)]),Object(r.k)("button",{class:"button-default dropdown-item",onClick:t[6]||(t[6]=e=>s.toggleNotificationFilter("polls"))},[Object(r.k)("span",{class:Object(r.w)(["menu-checkbox",{"menu-checkbox-checked":s.filters.polls}])},null,2),Object(r.l)(Object(r.O)(e.$t("settings.notification_visibility_polls")),1)])])]),trigger:Object(r.V)(()=>[Object(r.k)("button",de,[Object(r.m)(a,{icon:"filter"})])]),_:1})}]]),Oe=n(99),je=n(101);function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}re.c.add(ie.r);var ve={components:{Notification:le,NotificationFilters:fe},props:{minimalMode:Boolean,filterMode:Array,disableTeleport:Boolean},data:function(){return{bottomedOut:!1,seenToDisplayCount:30}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({mainClass:function(){return this.minimalMode?"":"panel panel-default"},notifications:function(){return Object(ee.e)(this.$store)},error:function(){return this.$store.state.statuses.notifications.error},unseenNotifications:function(){return Object(ee.f)(this.$store)},filteredNotifications:function(){return Object(ee.a)(this.$store,this.filterMode)},unseenCount:function(){return this.unseenNotifications.length},unseenCountTitle:function(){return this.unseenCount+this.unreadChatCount},loading:function(){return this.$store.state.statuses.notifications.loading},noHeading:function(){var e=this.$store.state.interface.layoutType;return this.minimalMode||"mobile"===e},teleportTarget:function(){return{wide:"#notifs-column",mobile:"#mobile-notifications"}[this.$store.state.interface.layoutType]||"#notifs-sidebar"},notificationsToDisplay:function(){return this.filteredNotifications.slice(0,this.unseenCount+this.seenToDisplayCount)}},Object(m.c)(["unreadChatCount"])),watch:{unseenCountTitle:function(e){e>0?(je.a.drawFaviconBadge(),this.$store.dispatch("setPageTitle","(".concat(e,")"))):(je.a.clearFaviconBadge(),this.$store.dispatch("setPageTitle",""))}},methods:{markAsSeen:function(){this.$store.dispatch("markNotificationsAsSeen"),this.seenToDisplayCount=30},fetchOlderNotifications:function(){var e=this;if(!this.loading){var t=this.filteredNotifications.length-this.unseenCount;if(this.seenToDisplayCount<t)this.seenToDisplayCount=Math.min(this.seenToDisplayCount+20,t);else{this.seenToDisplayCount>t&&(this.seenToDisplayCount=t);var n=this.$store,r=n.state.users.currentUser.credentials;n.commit("setNotificationsLoading",{value:!0}),Oe.a.fetchAndUpdate({store:n,credentials:r,older:!0}).then((function(t){n.commit("setNotificationsLoading",{value:!1}),0===t.length&&(e.bottomedOut=!0),e.seenToDisplayCount+=t.length}))}}}}};n(558);const ye=ce()(ve,[["render",function(e,t,n,h,b,m){const f=Object(r.J)("NotificationFilters"),O=Object(r.J)("notification"),j=Object(r.J)("FAIcon");return Object(r.D)(),Object(r.h)(r.c,{disabled:e.minimalMode||e.disableTeleport,to:e.teleportTarget},[Object(r.k)("div",{class:Object(r.w)([{minimal:e.minimalMode},"Notifications"])},[Object(r.k)("div",{class:Object(r.w)(e.mainClass)},[e.noHeading?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("div",i,[Object(r.k)("div",o,[Object(r.l)(Object(r.O)(e.$t("notifications.notifications"))+" ",1),e.unseenCount?(Object(r.D)(),Object(r.j)("span",s,Object(r.O)(e.unseenCount),1)):Object(r.i)("",!0)]),e.unseenCount?(Object(r.D)(),Object(r.j)("button",{key:0,class:"button-default read-button",onClick:t[0]||(t[0]=Object(r.Y)((...t)=>e.markAsSeen&&e.markAsSeen(...t),["prevent"]))},Object(r.O)(e.$t("notifications.read")),1)):Object(r.i)("",!0),Object(r.m)(f)])),Object(r.k)("div",a,[(Object(r.D)(!0),Object(r.j)(r.a,null,Object(r.H)(e.notificationsToDisplay,t=>(Object(r.D)(),Object(r.j)("div",{key:t.id,class:Object(r.w)(["notification",{unseen:!e.minimalMode&&!t.seen}])},[c,Object(r.m)(O,{notification:t},null,8,["notification"])],2))),128))]),Object(r.k)("div",l,[e.bottomedOut?(Object(r.D)(),Object(r.j)("div",u,Object(r.O)(e.$t("notifications.no_more_notifications")),1)):e.loading?(Object(r.D)(),Object(r.j)("div",p,[Object(r.m)(j,{icon:"circle-notch",spin:"",size:"lg"})])):(Object(r.D)(),Object(r.j)("button",{key:1,class:"button-unstyled -link -fullwidth",onClick:t[1]||(t[1]=Object(r.Y)(t=>e.fetchOlderNotifications(),["prevent"]))},[Object(r.k)("div",d,Object(r.O)(e.minimalMode?e.$t("interactions.load_older"):e.$t("notifications.load_older")),1)]))])],2)],2)],8,["disabled","to"])}]]);t.default=ye},function(e,t,n){"use strict";var r=n(0);const i={class:"gallery-rows"},o={key:0,class:"many-attachments"},s={class:"many-attachments-text"},a={class:"many-attachments-buttons"},c={key:0,class:"many-attachments-button"},l={key:1,class:"many-attachments-button"},u={key:2,class:"many-attachments-button"};var d=n(12),p=n.n(d),h=n(39),b=n.n(h),m=n(134),f=n.n(m),O={props:["attachments","limitRows","descriptions","limit","nsfw","setMedia","size","editable","removeAttachment","shiftUpAttachment","shiftDnAttachment","editAttachment","grid"],data:function(){return{sizes:{},hidingLong:!0}},components:{Attachment:n(58).a},computed:{rows:function(){var e=this;if(!this.attachments)return[];var t=this.limit>0?this.attachments.slice(0,this.limit):this.attachments;if("hide"===this.size)return t.map((function(e){return{minimal:!0,items:[e]}}));var n=this.grid?[{grid:!0,items:t}]:t.reduce((function(t,n,r){if(n.mimetype.includes("audio"))return[].concat(p()(t),[{audio:!0,items:[n]},{items:[]}]);if(!(n.mimetype.includes("image")||n.mimetype.includes("video")||n.mimetype.includes("flash")))return[].concat(p()(t),[{minimal:!0,items:[n]},{items:[]}]);var i=e.attachments.length-r+1,o=t[t.length-1].items;return o.push(n),o.length>=3&&i>3?[].concat(p()(t),[{items:[]}]):t}),[{items:[]}]).filter((function(e){return e.items.length>0}));return n},attachmentsDimensionalScore:function(){return this.rows.reduce((function(e,t){var n=0;return t.minimal?n+=1/8:t.audio?n+=1/4:n+=1/(t.items.length+.6),e+n}),0)},tooManyAttachments:function(){return!this.editable&&"small"!==this.size&&("hide"===this.size?this.attachments.length>8:this.attachmentsDimensionalScore>1)}},methods:{onNaturalSizeLoad:function(e){var t=e.id,n=e.width,r=e.height;b()(this.sizes,t,{width:n,height:r})},rowStyle:function(e){return e.audio?{"padding-bottom":"25%"}:e.minimal||e.grid?void 0:{"padding-bottom":"".concat(100/(e.items.length+.6),"%")}},itemStyle:function(e,t){var n=this,r=f()(t,(function(e){return n.getAspectRatio(e.id)}));return{flex:"".concat(this.getAspectRatio(e)/r," 1 0%")}},getAspectRatio:function(e){var t=this.sizes[e];return t?t.width/t.height:1},toggleHidingLong:function(e){this.hidingLong=e},openGallery:function(){this.$store.dispatch("setMedia",this.attachments),this.$store.dispatch("setCurrentMedia",this.attachments[0])},onMedia:function(){this.$store.dispatch("setMedia",this.attachments)}}},j=(n(510),n(4));const g=n.n(j)()(O,[["render",function(e,t,n,d,p,h){const b=Object(r.J)("Attachment");return Object(r.D)(),Object(r.j)("div",{ref:"galleryContainer",class:Object(r.w)(["Gallery",{"-long":e.tooManyAttachments&&e.hidingLong}])},[Object(r.k)("div",i,[(Object(r.D)(!0),Object(r.j)(r.a,null,Object(r.H)(e.rows,(t,n)=>(Object(r.D)(),Object(r.j)("div",{key:n,class:Object(r.w)(["gallery-row",{"-audio":t.audio,"-minimal":t.minimal,"-grid":e.grid}]),style:Object(r.x)(e.rowStyle(t))},[Object(r.k)("div",{class:Object(r.w)(["gallery-row-inner",{"-grid":e.grid}])},[(Object(r.D)(!0),Object(r.j)(r.a,null,Object(r.H)(t.items,(i,o)=>(Object(r.D)(),Object(r.h)(b,{key:i.id,class:"gallery-item",nsfw:e.nsfw,attachment:i,size:e.size,editable:e.editable,remove:e.removeAttachment,"shift-up":!(0===o&&0===n)&&e.shiftUpAttachment,"shift-dn":!(o===t.items.length-1&&n===e.rows.length-1)&&e.shiftDnAttachment,edit:e.editAttachment,description:e.descriptions&&e.descriptions[i.id],"hide-description":"small"===e.size||e.tooManyAttachments&&e.hidingLong,style:Object(r.x)(e.itemStyle(i.id,t.items)),onSetMedia:e.onMedia,onNaturalSizeLoad:e.onNaturalSizeLoad},null,8,["nsfw","attachment","size","editable","remove","shift-up","shift-dn","edit","description","hide-description","style","onSetMedia","onNaturalSizeLoad"]))),128))],2)],6))),128))]),e.tooManyAttachments?(Object(r.D)(),Object(r.j)("div",o,[Object(r.k)("div",s,Object(r.O)(e.$t("status.many_attachments",{number:e.attachments.length})),1),Object(r.k)("div",a,[e.hidingLong?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("span",c,[Object(r.k)("button",{class:"button-unstyled -link",onClick:t[0]||(t[0]=t=>e.toggleHidingLong(!0))},Object(r.O)(e.$t("status.collapse_attachments")),1)])),e.hidingLong?(Object(r.D)(),Object(r.j)("span",l,[Object(r.k)("button",{class:"button-unstyled -link",onClick:t[1]||(t[1]=t=>e.toggleHidingLong(!1))},Object(r.O)(e.$t("status.show_all_attachments")),1)])):Object(r.i)("",!0),e.hidingLong?(Object(r.D)(),Object(r.j)("span",u,[Object(r.k)("button",{class:"button-unstyled -link",onClick:t[2]||(t[2]=(...t)=>e.openGallery&&e.openGallery(...t))},Object(r.O)(e.$t("status.open_gallery")),1)])):Object(r.i)("",!0)])])):Object(r.i)("",!0)],2)}]]);t.a=g},function(e,t,n){"use strict";var r=n(0);const i={class:"MentionLink"},o=["href","innerHTML"],s=["href"],a={class:"shortName"},c=Object(r.l)("@"),l=["innerHTML"],u=["innerHTML"],d={class:"userNameFull"},p=Object(r.l)(" @"),h=["innerHTML"],b=["innerHTML"];var m=n(40),f=n.n(m),O=n(5),j=n.n(O),g=n(23),v=n(8),y=n(31),w=n(22),k=n(6),_=n(3),S=["backgroundColor","backgroundPosition","backgroundImage"];function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){j()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}k.c.add(_.f);var x={name:"MentionLink",components:{UserAvatar:w.default},props:{url:{required:!0,type:String},content:{required:!0,type:String},userId:{required:!1,type:String},userScreenName:{required:!1,type:String}},methods:{onClick:function(){var e=Object(g.a)(this.userId||this.user.id,this.userScreenName||this.user.screen_name);this.$router.push(e)}},computed:P(P({user:function(){return this.url&&this.$store&&this.$store.getters.findUserByUrl(this.url)},isYou:function(){return this.user&&this.user.id===this.currentUser.id},userName:function(){return this.user&&this.userNameFullUi.split("@")[0]},serverName:function(){return this.user&&(this.userNameFullUi.split("@")[1]||this.$store.getters.instanceDomain)},userNameFull:function(){return this.user&&this.user.screen_name},userNameFullUi:function(){return this.user&&this.user.screen_name_ui},highlight:function(){return this.user&&this.mergedConfig.highlight[this.user.screen_name]},highlightType:function(){return this.highlight&&"-"+this.highlight.type},highlightClass:function(){if(this.highlight)return Object(y.a)(this.user)},style:function(){if(this.highlight){var e=Object(y.b)(this.highlight);e.backgroundColor,e.backgroundPosition,e.backgroundImage;return f()(e,S)}},classnames:function(){return[{"-you":this.isYou&&this.shouldBoldenYou,"-highlighted":this.highlight},this.highlightType]},useAtIcon:function(){return this.mergedConfig.useAtIcon},isRemote:function(){return this.userName!==this.userNameFull},shouldShowFullUserName:function(){var e=this.mergedConfig.mentionLinkDisplay;return"short"!==e&&("full"===e||this.isRemote)},shouldShowTooltip:function(){return this.mergedConfig.mentionLinkShowTooltip&&"short"===this.mergedConfig.mentionLinkDisplay&&this.isRemote},shouldShowAvatar:function(){return this.mergedConfig.mentionLinkShowAvatar},shouldShowYous:function(){return this.mergedConfig.mentionLinkShowYous},shouldBoldenYou:function(){return this.mergedConfig.mentionLinkBoldenYou},shouldFadeDomain:function(){return this.mergedConfig.mentionLinkFadeDomain}},Object(v.c)(["mergedConfig"])),Object(v.e)({currentUser:function(e){return e.users.currentUser}}))},D=(n(513),n(4));const T=n.n(D)()(x,[["render",function(e,t,n,m,f,O){return Object(r.D)(),Object(r.j)("span",i,[e.user?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("a",{key:0,href:e.url,class:"original",target:"_blank",innerHTML:e.content},null,8,o)),e.user?(Object(r.D)(),Object(r.j)("span",{key:1,class:Object(r.w)(["new",e.classnames]),style:Object(r.x)(e.style)},[Object(r.k)("a",{class:Object(r.w)(["short button-unstyled",{"-with-tooltip":e.shouldShowTooltip}]),href:e.url,onClick:t[0]||(t[0]=Object(r.Y)((...t)=>e.onClick&&e.onClick(...t),["prevent"]))},[Object(r.k)("span",a,[c,Object(r.k)("span",{class:"userName",innerHTML:e.userName},null,8,l),e.shouldShowFullUserName?(Object(r.D)(),Object(r.j)("span",{key:0,class:Object(r.w)(["serverName",{"-faded":e.shouldFadeDomain}]),innerHTML:"@"+e.serverName},null,10,u)):Object(r.i)("",!0)]),e.isYou&&e.shouldShowYous?(Object(r.D)(),Object(r.j)("span",{key:0,class:Object(r.w)({"-you":e.shouldBoldenYou})},Object(r.O)(" "+e.$t("status.you")),3)):Object(r.i)("",!0)],10,s),e.shouldShowTooltip?(Object(r.D)(),Object(r.j)("span",{key:0,class:Object(r.w)(["full popover-default",[e.highlightType]])},[Object(r.k)("span",d,[p,Object(r.k)("span",{class:"userName",innerHTML:e.userName},null,8,h),Object(r.k)("span",{class:Object(r.w)(["serverName",{"-faded":e.shouldFadeDomain}]),innerHTML:"@"+e.serverName},null,10,b)])],2)):Object(r.i)("",!0)],6)):Object(r.i)("",!0)])}]]);t.a=T},,function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(0);const i={class:"MentionsLine"},o={key:0,class:"extraMentions"},s={key:0,class:"fullExtraMentions"};var a=n(5),c=n.n(a),l=n(79),u=n(8);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var p=5,h={name:"MentionsLine",props:{mentions:{required:!0,type:Array}},data:function(){return{expanded:!1}},components:{MentionLink:l.a},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({mentionsComputed:function(){return this.mentions.slice(0,p)},extraMentions:function(){return this.mentions.slice(p)},manyMentions:function(){return this.extraMentions.length>0}},Object(u.c)(["mergedConfig"])),methods:{toggleShowMore:function(){this.expanded=!this.expanded}}},b=(n(514),n(4));const m=n.n(b)()(h,[["render",function(e,t,n,a,c,l){const u=Object(r.J)("MentionLink");return Object(r.D)(),Object(r.j)("span",i,[(Object(r.D)(!0),Object(r.j)(r.a,null,Object(r.H)(e.mentionsComputed,e=>(Object(r.D)(),Object(r.h)(u,{key:e.index,class:"mention-link",content:e.content,url:e.url},null,8,["content","url"]))),128)),e.manyMentions?(Object(r.D)(),Object(r.j)("span",o,[e.expanded?(Object(r.D)(),Object(r.j)("span",s,[(Object(r.D)(!0),Object(r.j)(r.a,null,Object(r.H)(e.extraMentions,e=>(Object(r.D)(),Object(r.h)(u,{key:e.index,class:"mention-link",content:e.content,url:e.url},null,8,["content","url"]))),128))])):Object(r.i)("",!0),e.expanded?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("button",{key:1,class:"button-unstyled showMoreLess",onClick:t[0]||(t[0]=(...t)=>e.toggleShowMore&&e.toggleShowMore(...t))},Object(r.O)(e.$t("status.plus_more",{number:e.extraMentions.length})),1)),e.expanded?(Object(r.D)(),Object(r.j)("button",{key:2,class:"button-unstyled showMoreLess",onClick:t[1]||(t[1]=(...t)=>e.toggleShowMore&&e.toggleShowMore(...t))},Object(r.O)(e.$t("general.show_less")),1)):Object(r.i)("",!0)])):Object(r.i)("",!0)])}]]);t.b=m},,,,,,,,,,,,,,,function(e,t,n){"use strict";var r={fileSizeFormat:function(e){var t,n=["B","KiB","MiB","GiB","TiB"];return e<1?e+" "+n[0]:(t=Math.min(Math.floor(Math.log(e)/Math.log(1024)),n.length-1),{num:e=1*(e/Math.pow(1024,t)).toFixed(2),unit:n[t]})}};t.a=r},,,function(e,t,n){"use strict";var r=n(12),i=n.n(r),o=n(15),s=n(44),a=function(e){var t=e.store,n=e.credentials,r=e.older,o=void 0!==r&&r,s=e.since,a={credentials:n},l=t.getters,u=(t.rootState||t.state).statuses.notifications,d=l.mergedConfig.hideMutedPosts;if(a.withMuted=!d,a.timeline="notifications",o)return u.minId!==Number.POSITIVE_INFINITY&&(a.until=u.minId),c({store:t,args:a,older:o});void 0===s&&u.maxId!==Number.POSITIVE_INFINITY?a.since=u.maxId:null!==s&&(a.since=s);var p=c({store:t,args:a,older:o}),h=u.data,b=h.filter((function(e){return e.seen})).map((function(e){return e.id}));return h.length-b.length>0&&b.length>0&&(a.since=Math.max.apply(Math,i()(b)),c({store:t,args:a,older:o})),p},c=function(e){var t=e.store,n=e.args,r=e.older;return o.c.fetchTimeline(n).then((function(e){if(e.errors)throw new Error("".concat(e.status," ").concat(e.statusText));var n=e.data;return function(e){var t=e.store,n=e.notifications,r=e.older;t.dispatch("addNewNotifications",{notifications:n,older:r})}({store:t,notifications:n,older:r}),n})).catch((function(e){t.dispatch("pushGlobalNotice",{level:"error",messageKey:"notifications.error",messageArgs:[e.message],timeout:5e3})}))},l={fetchAndUpdate:a,startFetching:function(e){var t=e.credentials,n=e.store;setTimeout((function(){return n.dispatch("setNotificationsSilence",!1)}),1e4);var r=function(){return a({credentials:t,store:n})};return r(),Object(s.a)(r,2e4)}};t.a=l},,function(e,t,n){"use strict";var r,i,o,s=(r=[],i=function(e){return e.complete&&0!==e.naturalHeight},{initFaviconService:function(){document.querySelectorAll('link[rel="icon"]').forEach((function(e){if(e){var t=document.createElement("canvas");t.width=128,t.height=128;var n=new Image;n.crossOrigin="anonymous",n.src=e.href;var i=t.getContext("2d");r.push({favcanvas:t,favimg:n,favcontext:i,favicon:e})}}))},clearFaviconBadge:o=function(){0!==r.length&&r.forEach((function(e){var t=e.favimg,n=e.favcanvas,r=e.favcontext,o=e.favicon;t&&r&&o&&(r.clearRect(0,0,128,128),i(t)&&r.drawImage(t,0,0,t.width,t.height,0,0,128,128),o.href=n.toDataURL("image/png"))}))},drawFaviconBadge:function(){0!==r.length&&(o(),r.forEach((function(e){var t=e.favimg,n=e.favcanvas,r=e.favcontext,o=e.favicon;if(t&&r&&r){var s=getComputedStyle(document.body),a="".concat(s.getPropertyValue("--badgeNotification")||"rgb(240, 100, 100)");i(t)&&r.drawImage(t,0,0,t.width,t.height,0,0,128,128),r.fillStyle=a,r.beginPath(),r.arc(96,32,32,0,2*Math.PI,!1),r.fill(),o.href=n.toDataURL("image/png")}})))}});t.a=s},,,function(e,t,n){"use strict";var r=n(0);const i=["disabled"];var o={props:{disabled:{type:Boolean},click:{type:Function,default:function(){return Promise.resolve()}}},data:function(){return{progress:!1}},methods:{onClick:function(){var e=this;this.progress=!0,this.click().then((function(){e.progress=!1}))}}},s=n(4);const a=n.n(s)()(o,[["render",function(e,t,n,o,s,a){return Object(r.D)(),Object(r.j)("button",{disabled:s.progress||n.disabled,onClick:t[0]||(t[0]=(...e)=>a.onClick&&a.onClick(...e))},[s.progress&&e.$slots.progress?Object(r.I)(e.$slots,"progress",{key:0}):Object(r.I)(e.$slots,"default",{key:1})],8,i)}]]);t.a=a},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return O}));var r=n(5),i=n.n(r),o=n(11),s=n.n(o),a=n(317),c=n.n(a),l=n(43),u=n(70),d=n(38);function p(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={expertLevel:0,colors:{},theme:void 0,customTheme:void 0,customThemeSource:void 0,hideISP:!1,hideInstanceWallpaper:!1,hideShoutbox:!1,hideMutedPosts:void 0,hideMutedThreads:void 0,hideWordFilteredPosts:void 0,muteBotStatuses:void 0,collapseMessageWithSubject:void 0,padEmoji:!0,hideAttachments:!1,hideAttachmentsInConv:!1,maxThumbnails:16,hideNsfw:!0,preloadImage:!0,loopVideo:!0,loopVideoSilentOnly:!0,streaming:!1,emojiReactionsOnTimeline:!0,alwaysShowNewPostButton:!1,autohideFloatingPostButton:!1,pauseOnUnfocused:!0,stopGifs:!0,replyVisibility:"all",thirdColumnMode:"notifications",notificationVisibility:{follows:!0,mentions:!0,likes:!0,repeats:!0,moves:!0,emojiReactions:!0,followRequest:!0,chatMention:!0,polls:!0},webPushNotifications:!1,muteWords:[],highlight:{},interfaceLanguage:(window.navigator.language||"en").split("-")[0],hideScopeNotice:!1,useStreamingApi:!0,sidebarRight:void 0,scopeCopy:void 0,subjectLineBehavior:void 0,alwaysShowSubjectInput:void 0,postContentType:void 0,minimalScopesMode:void 0,hideFilteredStatuses:void 0,playVideosInModal:!1,useOneClickNsfw:!1,useContainFit:!0,disableStickyHeaders:!1,showScrollbars:!1,greentext:void 0,useAtIcon:void 0,mentionLinkDisplay:void 0,mentionLinkShowTooltip:void 0,mentionLinkShowAvatar:void 0,mentionLinkFadeDomain:void 0,mentionLinkShowYous:void 0,mentionLinkBoldenYou:void 0,hidePostStats:void 0,hideBotIndication:void 0,hideUserStats:void 0,virtualScrolling:void 0,sensitiveByDefault:void 0,sensitiveIfSubject:void 0,renderMisskeyMarkdown:void 0,conversationDisplay:void 0,conversationTreeAdvanced:void 0,conversationOtherRepliesButton:void 0,conversationTreeFadeAncestors:void 0,maxDepthInThread:void 0},O=Object.entries(f).filter((function(e){var t=s()(e,2);t[0];return void 0===t[1]})).map((function(e){var t=s()(e,2),n=t[0];t[1];return n})),j={state:m({},f),getters:{defaultConfig:function(e,t,n,r){var i=n.instance;return m(m({},f),Object.fromEntries(O.map((function(e){return[e,i[e]]}))))},mergedConfig:function(e,t,n,r){return m(m({},r.defaultConfig),Object.fromEntries(Object.entries(e).filter((function(e){var t=s()(e,2);t[0];return void 0!==t[1]}))))}},mutations:{setOption:function(e,t){var n=t.name,r=t.value;e[n]=r},setHighlight:function(e,t){var n=t.user,r=t.color,i=t.type,o=this.state.config.highlight[n];r||i?e.highlight[n]={color:r||o.color,type:i||o.type}:delete e.highlight[n]}},actions:{loadSettings:function(e,t){var n,r=e.dispatch,i=new Set(Object.keys(f)),o=new Set(Object.keys(t)),s=new Set,a=p(o);try{for(a.s();!(n=a.n()).done;){var c=n.value;i.has(c)&&s.add(c)}}catch(e){a.e(e)}finally{a.f()}s.forEach((function(e){return r("setOption",{name:e,value:t[e]})}))},setHighlight:function(e,t){var n=e.commit;e.dispatch;n("setHighlight",{user:t.user,color:t.color,type:t.type})},setOption:function(e,t){var n=e.commit,r=e.dispatch,i=t.name,o=t.value;switch(n("setOption",{name:i,value:o}),i){case"theme":Object(l.l)(o);break;case"customTheme":case"customThemeSource":Object(l.b)(o);break;case"interfaceLanguage":u.a.setLanguage(this.getters.i18n,o),c.a.set("userLanguage",d.a.internalToBackendLocale(o));break;case"thirdColumnMode":r("setLayoutWidth",void 0)}}}};t.a=j},,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(49),i=n.n(r),o=function(e,t){var n=e.text.toLowerCase(),r=e.summary.toLowerCase();return i()(t,(function(e){return n.includes(e.toLowerCase())||r.includes(e.toLowerCase())}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t){if("Notification"in window&&"granted"===window.Notification.permission&&!e.statuses.notifications.desktopNotificationSilence){var n=new window.Notification(t.title,t);setTimeout(n.close.bind(n),5e3)}}},,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.top,s=void 0===o?0:o,a=r.left,c=void 0===a?0:a,l=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u={top:s+t.offsetTop,left:c+t.offsetLeft};if(!l&&t!==window){var d=i(t),p=d.topPadding,h=d.leftPadding;u.top+=l?0:p,u.left+=l?0:h}if(t.offsetParent&&"sticky"!==window.getComputedStyle(t.offsetParent).position&&(n===window||n.contains(t.offsetParent)||n===t.offsetParent))return e(t.offsetParent,n,u,!1);if(n!==window){var b=i(n),m=b.topPadding,f=b.leftPadding;u.top+=m,u.left+=f}return u},i=function(e){var t=window.getComputedStyle(e)["padding-top"],n=Number(t.substring(0,t.length-2)),r=window.getComputedStyle(e)["padding-left"];return{topPadding:n,leftPadding:Number(r.substring(0,r.length-2))}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=function(e){var t=e.filename,n=void 0===t?"data":t,r=e.getExportedObject;return{exportData:function(){var e=JSON.stringify(r(),null,2),t=document.createElement("a");t.setAttribute("download","".concat(n,".json")),t.setAttribute("href","data:application/json;base64,"+window.btoa(e)),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}},i=function(e){var t=e.onImport,n=e.onImportFailure,r=e.validator,i=void 0===r?function(){return!0}:r;return{importData:function(){var e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept",".json"),e.addEventListener("change",(function(e){if(e.target.files[0]){var r=new FileReader;r.onload=function(e){var r=e.target;try{var o=JSON.parse(r.result),s=i(o);!0===s?t(o):n({validationResult:s})}catch(e){n({error:e})}},r.readAsText(e.target.files[0])}})),document.body.appendChild(e),e.click(),document.body.removeChild(e)}}}},function(e,t,n){"use strict";var r=n(0);const i={class:"Flash"},o={key:0,class:"label"},s={key:1,class:"label"},a={key:2,class:"label"};var c,l=(c=null,{getRuffle:function(){return new Promise((function(e,t){if(c)e(c);else{window.RufflePlayer={},window.RufflePlayer.config={polyfills:!1,publicPath:"/static/ruffle"};var n=document.createElement("script");n.src="/static/ruffle/ruffle.js",n.type="text/javascript",n.onerror=function(e){t(e)},n.onabort=function(e){t(e)},n.oncancel=function(e){t(e)},n.onload=function(){c=window.RufflePlayer,e(c)},document.body.appendChild(n)}}))}}),u=n(6),d=n(3);u.c.add(d.lb,d.z);var p={props:["src"],data:function(){return{player:!1,loaded:!1,ruffleInstance:null}},methods:{openPlayer:function(){var e=this;this.player||(this.player="hidden",l.getRuffle().then((function(t){var n=t.newest().createPlayer();n.config={letterbox:"on"},e.$refs.container.appendChild(n),n.style.width="100%",n.style.height="100%",n.load(e.src).then((function(){e.player=!0})).catch((function(t){console.error("Error loading ruffle",t),e.player="error"})),e.ruffleInstance=n,e.$emit("playerOpened")})))},closePlayer:function(){this.ruffleInstance&&this.ruffleInstance.remove(),this.player=!1,this.$emit("playerClosed")}}},h=(n(508),n(4));const b=n.n(h)()(p,[["render",function(e,t,n,c,l,u){const d=Object(r.J)("FAIcon");return Object(r.D)(),Object(r.j)("div",i,[!0===e.player||"hidden"===e.player?(Object(r.D)(),Object(r.j)("div",{key:0,ref:"container",class:Object(r.w)(["player",{hidden:"hidden"===e.player}])},null,2)):Object(r.i)("",!0),!0!==e.player?(Object(r.D)(),Object(r.j)("button",{key:1,class:"button-unstyled placeholder",onClick:t[0]||(t[0]=(...t)=>e.openPlayer&&e.openPlayer(...t))},["hidden"===e.player?(Object(r.D)(),Object(r.j)("span",o,Object(r.O)(e.$t("general.loading")),1)):Object(r.i)("",!0),"error"===e.player?(Object(r.D)(),Object(r.j)("span",s,Object(r.O)(e.$t("general.flash_fail")),1)):(Object(r.D)(),Object(r.j)("span",a,[Object(r.k)("p",null,Object(r.O)(e.$t("general.flash_content")),1),Object(r.k)("p",null,[Object(r.m)(d,{icon:"exclamation-triangle"}),Object(r.l)(" "+Object(r.O)(e.$t("general.flash_security")),1)])]))])):Object(r.i)("",!0)])}]]);t.a=b},function(e,t,n){"use strict";var r=n(0);const i=["disabled","title"];var o=n(11),s=n.n(o),a=function(e,t){return new Promise((function(n,r){t.state.api.backendInteractor.followUser({id:e}).then((function(e){if(t.commit("updateUserRelationship",[e]),!(e.following||e.locked&&e.requested))return function e(t,n,r){return new Promise((function(e,i){setTimeout((function(){r.state.api.backendInteractor.fetchUserRelationship({id:n}).then((function(e){return r.commit("updateUserRelationship",[e]),e})).then((function(n){return e([n.following,n.requested,n.locked,t])})).catch((function(e){return i(e)}))}),500)})).then((function(t){var i=s()(t,4),o=i[0],a=i[1],c=i[2],l=i[3];o||c&&a||!(l<=3)||e(++l,n,r)}))}(1,e,t).then((function(){n()}));n()}))}))},c={props:["relationship","user","labelFollowing","buttonClass"],data:function(){return{inProgress:!1}},computed:{isPressed:function(){return this.inProgress||this.relationship.following},title:function(){return this.inProgress||this.relationship.following?this.$t("user_card.follow_unfollow"):this.relationship.requested?this.$t("user_card.follow_cancel"):this.$t("user_card.follow")},label:function(){return this.inProgress?this.$t("user_card.follow_progress"):this.relationship.following?this.labelFollowing||this.$t("user_card.following"):this.relationship.requested?this.$t("user_card.follow_sent"):this.$t("user_card.follow")},disabled:function(){return this.inProgress||this.user.deactivated}},methods:{onClick:function(){this.relationship.following||this.relationship.requested?this.unfollow():this.follow()},follow:function(){var e=this;this.inProgress=!0,a(this.relationship.id,this.$store).then((function(){e.inProgress=!1}))},unfollow:function(){var e=this,t=this.$store;this.inProgress=!0,function(e,t){return new Promise((function(n,r){t.state.api.backendInteractor.unfollowUser({id:e}).then((function(e){t.commit("updateUserRelationship",[e]),n({updated:e})}))}))}(this.relationship.id,t).then((function(){e.inProgress=!1,t.commit("removeStatus",{timeline:"friends",userId:e.relationship.id})}))}}},l=n(4);const u=n.n(l)()(c,[["render",function(e,t,n,o,s,a){return Object(r.D)(),Object(r.j)("button",{class:Object(r.w)(["btn button-default follow-button",{toggled:e.isPressed}]),disabled:e.disabled,title:e.title,onClick:t[0]||(t[0]=(...t)=>e.onClick&&e.onClick(...t))},Object(r.O)(e.label),11,i)}]]);t.a=u},function(e,t,n){"use strict";var r=n(0);const i=["src","loop","controls","alt","title"];var o={props:["attachment","controls"],data:function(){return{blocksSuspend:!1,hasAudio:!0}},computed:{loopVideo:function(){return this.$store.getters.mergedConfig.loopVideoSilentOnly?!this.hasAudio:this.$store.getters.mergedConfig.loopVideo}},methods:{onPlaying:function(e){this.setHasAudio(e),this.loopVideo?this.$emit("play",{looping:!0}):this.$emit("play")},onPaused:function(e){this.$emit("pause")},setHasAudio:function(e){var t=e.srcElement||e.target;this.hasAudio&&(void 0!==t.webkitAudioDecodedByteCount&&t.webkitAudioDecodedByteCount>0||void 0!==t.mozHasAudio&&t.mozHasAudio||void 0!==t.audioTracks&&t.audioTracks.length>0||(this.hasAudio=!1))}}},s=n(4);const a=n.n(s)()(o,[["render",function(e,t,n,o,s,a){return Object(r.D)(),Object(r.j)("video",{class:"video",preload:"metadata",src:e.attachment.url,loop:e.loopVideo,controls:e.controls,alt:e.attachment.description,title:e.attachment.description,playsinline:"",onPlaying:t[0]||(t[0]=(...t)=>e.onPlaying&&e.onPlaying(...t)),onPause:t[1]||(t[1]=(...t)=>e.onPaused&&e.onPaused(...t))},null,40,i)}]]);t.a=a},function(e,t,n){"use strict";var r=n(0);const i=["href"],o={key:0,class:"card-image"},s=["src"],a={class:"card-content"},c={class:"card-host faint"},l={key:0,class:"nsfw-alert alert warning"},u={class:"card-title"},d={key:0,class:"card-description"};var p=n(5),h=n.n(p),b=n(8);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var f={name:"LinkPreview",props:["card","size","nsfw"],data:function(){return{imageLoaded:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({useImage:function(){return this.card.image&&!this.censored&&"hide"!==this.size},censored:function(){return this.nsfw&&this.hideNsfwConfig},useDescription:function(){return this.card.description&&/\S/.test(this.card.description)},hideNsfwConfig:function(){return this.mergedConfig.hideNsfw}},Object(b.c)(["mergedConfig"])),created:function(){var e=this;if(this.useImage){var t=new Image;t.onload=function(){e.imageLoaded=!0},t.src=this.card.image}}},O=(n(522),n(4));const j=n.n(O)()(f,[["render",function(e,t,n,p,h,b){return Object(r.D)(),Object(r.j)("div",null,[Object(r.k)("a",{class:"link-preview-card",href:e.card.url,target:"_blank",rel:"noopener"},[e.useImage&&e.imageLoaded?(Object(r.D)(),Object(r.j)("div",o,[Object(r.k)("img",{src:e.card.image},null,8,s)])):Object(r.i)("",!0),Object(r.k)("div",a,[Object(r.k)("span",c,[e.censored?(Object(r.D)(),Object(r.j)("span",l,Object(r.O)(e.$t("status.nsfw")),1)):Object(r.i)("",!0),Object(r.l)(" "+Object(r.O)(e.card.provider_name),1)]),Object(r.k)("h4",u,Object(r.O)(e.card.title),1),e.useDescription?(Object(r.D)(),Object(r.j)("p",d,Object(r.O)(e.card.description),1)):Object(r.i)("",!0)])],8,i)])}]]);t.a=j},function(e,t,n){"use strict";var r=n(0);const i={class:"remote-follow"},o=["action"],s=["value"],a=Object(r.k)("input",{type:"hidden",name:"profile",value:""},null,-1),c={click:"submit",class:"button-default remote-button"};var l={props:["user"],computed:{subscribeUrl:function(){var e=new URL(this.user.statusnet_profile_url);return"".concat(e.protocol,"//").concat(e.host,"/main/ostatus")}}},u=(n(525),n(4));const d=n.n(u)()(l,[["render",function(e,t,n,l,u,d){return Object(r.D)(),Object(r.j)("div",i,[Object(r.k)("form",{method:"POST",action:e.subscribeUrl},[Object(r.k)("input",{type:"hidden",name:"nickname",value:e.user.screen_name},null,8,s),a,Object(r.k)("button",c,Object(r.O)(e.$t("user_card.remote_follow")),1)],8,o)])}]]);t.a=d},function(e,t,n){"use strict";var r=n(0);const i={class:"avatars"};var o=n(22),s=n(23),a={props:["users"],computed:{slicedUsers:function(){return this.users?this.users.slice(0,15):[]}},components:{UserAvatar:o.default},methods:{userProfileLink:function(e){return Object(s.a)(e.id,e.screen_name,this.$store.state.instance.restrictedNicknames)}}},c=(n(551),n(4));const l=n.n(c)()(a,[["render",function(e,t,n,o,s,a){const c=Object(r.J)("UserAvatar"),l=Object(r.J)("router-link");return Object(r.D)(),Object(r.j)("div",i,[(Object(r.D)(!0),Object(r.j)(r.a,null,Object(r.H)(e.slicedUsers,t=>(Object(r.D)(),Object(r.h)(l,{key:t.id,to:e.userProfileLink(t),class:"avatars-item"},{default:Object(r.V)(()=>[Object(r.m)(c,{user:t,class:"avatar-small"},null,8,["user"])]),_:2},1032,["to"]))),128))])}]]);t.a=l},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(13),i=n.n(r),o=n(10),s=n.n(o);t.a=function(e){var t=a(e.emoji),n=e.store&&c(e.store);return function(r){var i=r[0];return":"===i&&e.emoji?t(r):"@"===i&&n?n(r):[]}};var a=function(e){return function(t){var n=t.toLowerCase().substr(1);return e.filter((function(e){return e.displayText.toLowerCase().match(n)})).sort((function(e,t){var r=0,i=0;return r+=e.displayText.toLowerCase()===n?200:0,i+=t.displayText.toLowerCase()===n?200:0,r+=e.imageUrl?100:0,i+=t.imageUrl?100:0,r+=e.displayText.toLowerCase().startsWith(n)?10:0,i+=t.displayText.toLowerCase().startsWith(n)?10:0,r-=e.displayText.length,(i-=t.displayText.length)-r+(e.displayText>t.displayText?.5:-.5)}))}},c=function(e){var t,n=e.dispatch,r=e.state,o=[],a="",c=null,l=null,u=function(e){return l&&l(),new Promise((function(t,r){c=setTimeout((function(){(function(e){return n("searchUsers",{query:e})})(e).then(t).catch(r)}),300),l=function(){clearTimeout(c),t([])}}))};return t=i()(s.a.mark((function e(t){var n,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.toLowerCase().substr(1),a!==n){e.next=3;break}return e.abrupt("return",o);case 3:if(o=[],a=n,n.includes("@")){e.next=8;break}return e.next=8,u(n);case 8:return i=r.users.users.filter((function(e){return e.screen_name.toLowerCase().startsWith(n)||e.name.toLowerCase().startsWith(n)})).slice(0,20).sort((function(e,t){var r=0,i=0;return r+=e.screen_name.toLowerCase().startsWith(n)?2:0,i+=t.screen_name.toLowerCase().startsWith(n)?2:0,r+=e.name.toLowerCase().startsWith(n)?1:0,10*((i+=t.name.toLowerCase().startsWith(n)?1:0)-r)+(e.name>t.name?1:-1)+(e.screen_name>t.screen_name?1:-1)})).map((function(e){var t=e.screen_name;return{displayText:e.screen_name_ui,detailText:e.name,imageUrl:e.profile_image_url_original,replacement:"@"+t+" "}})),o=i||[],e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}}},,,,,,,function(e,t,n){"use strict";var r=n(0);const i={for:"interface-language-switcher"},o=Object(r.l)(" "+Object(r.O)(" ")+" "),s=["value"];var a=n(38),c={components:{Select:n(52).a},props:{promptText:{type:String,required:!0},language:{type:String,required:!0},setLanguage:{type:Function,required:!0}},computed:{languages:function(){return a.a.languages},controlledLanguage:{get:function(){return this.language},set:function(e){this.setLanguage(e)}}},methods:{getLanguageName:function(e){return a.a.getLanguageName(e)}}},l=n(4);const u=n.n(l)()(c,[["render",function(e,t,n,a,c,l){const u=Object(r.J)("Select");return Object(r.D)(),Object(r.j)("div",null,[Object(r.k)("label",i,Object(r.O)(n.promptText),1),o,Object(r.m)(u,{id:"interface-language-switcher",modelValue:l.controlledLanguage,"onUpdate:modelValue":t[0]||(t[0]=e=>l.controlledLanguage=e)},{default:Object(r.V)(()=>[(Object(r.D)(!0),Object(r.j)(r.a,null,Object(r.H)(l.languages,e=>(Object(r.D)(),Object(r.j)("option",{key:e.code,value:e.code},Object(r.O)(e.name),9,s))),128))]),_:1},8,["modelValue"])])}]]);t.a=u},function(e,t,n){"use strict";var r=n(0);const i={key:0,class:"ScopeSelector"},o=["title"],s=Object(r.l)(" "+Object(r.O)(" ")+" "),a=["title"],c=Object(r.l)(" "+Object(r.O)(" ")+" "),l=["title"],u=Object(r.l)(" "+Object(r.O)(" ")+" "),d=["title"],p=["title"];var h=n(6),b=n(3);h.c.add(b.y,b.I,b.O,b.P);var m={props:["showAll","userDefault","originalScope","initialScope","onScopeChange"],data:function(){return{currentScope:this.initialScope}},computed:{showNothing:function(){return!(this.showPublic||this.showUnlisted||this.showPrivate||this.showDirect)},showPublic:function(){return"direct"!==this.originalScope&&this.shouldShow("public")},showLocal:function(){return"direct"!==this.originalScope&&this.shouldShow("local")},showUnlisted:function(){return"direct"!==this.originalScope&&this.shouldShow("unlisted")},showPrivate:function(){return"direct"!==this.originalScope&&this.shouldShow("private")},showDirect:function(){return this.shouldShow("direct")},css:function(){return{public:{selected:"public"===this.currentScope},unlisted:{selected:"unlisted"===this.currentScope},private:{selected:"private"===this.currentScope},direct:{selected:"direct"===this.currentScope},local:{selected:"local"===this.currentScope}}}},methods:{shouldShow:function(e){return this.showAll||this.currentScope===e||this.originalScope===e||this.userDefault===e||"direct"===e},changeVis:function(e){this.currentScope=e,this.onScopeChange&&this.onScopeChange(e)}}},f=(n(501),n(4));const O=n.n(f)()(m,[["render",function(e,t,n,h,b,m){const f=Object(r.J)("FAIcon");return e.showNothing?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("div",i,[e.showDirect?(Object(r.D)(),Object(r.j)("button",{key:0,class:Object(r.w)(["button-unstyled scope",e.css.direct]),title:e.$t("post_status.scope.direct"),type:"button",onClick:t[0]||(t[0]=t=>e.changeVis("direct"))},[Object(r.m)(f,{icon:"envelope",class:"fa-scale-110 fa-old-padding"})],10,o)):Object(r.i)("",!0),s,e.showPrivate?(Object(r.D)(),Object(r.j)("button",{key:1,class:Object(r.w)(["button-unstyled scope",e.css.private]),title:e.$t("post_status.scope.private"),type:"button",onClick:t[1]||(t[1]=t=>e.changeVis("private"))},[Object(r.m)(f,{icon:"lock",class:"fa-scale-110 fa-old-padding"})],10,a)):Object(r.i)("",!0),c,e.showUnlisted?(Object(r.D)(),Object(r.j)("button",{key:2,class:Object(r.w)(["button-unstyled scope",e.css.unlisted]),title:e.$t("post_status.scope.unlisted"),type:"button",onClick:t[2]||(t[2]=t=>e.changeVis("unlisted"))},[Object(r.m)(f,{icon:"lock-open",class:"fa-scale-110 fa-old-padding"})],10,l)):Object(r.i)("",!0),u,e.showPublic?(Object(r.D)(),Object(r.j)("button",{key:3,class:Object(r.w)(["button-unstyled scope",e.css.public]),title:e.$t("post_status.scope.public"),type:"button",onClick:t[3]||(t[3]=t=>e.changeVis("public"))},[Object(r.m)(f,{icon:"globe",class:"fa-scale-110 fa-old-padding"})],10,d)):Object(r.i)("",!0),e.showLocal?(Object(r.D)(),Object(r.j)("button",{key:4,class:Object(r.w)(["button-unstyled scope",e.css.local]),title:e.$t("post_status.scope.local"),type:"button",onClick:t[4]||(t[4]=t=>e.changeVis("local"))},[Object(r.m)(f,{icon:"users",class:"fa-scale-110 fa-old-padding"})],10,p)):Object(r.i)("",!0)]))}]]);t.a=O},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return m}));var r=n(11),i=n.n(r),o=n(5),s=n.n(o),a=n(39),c=n.n(a),l=n(16),u=n.n(l);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var p=function(e,t){var n=e.rootState,r=e.commit,i=t.path,o=t.value,s={};return c()(s,i,o),n.api.backendInteractor.updateProfile({params:s}).then((function(e){r("addNewUsers",[e]),r("setCurrentUser",e)}))},h=function(e,t){var n=e.rootState,r=e.commit,i=t.path,o=t.value,s=t.oldValue,a={};return c()(a,i,o),n.api.backendInteractor.updateNotificationSettings({settings:a}).then((function(e){"success"===e.status?r("confirmServerSideOption",{name:name,value:o}):r("confirmServerSideOption",{name:name,value:s})}))},b={defaultScope:"source.privacy",defaultNSFW:"source.sensitive",stripRichContent:{get:"source.pleroma.no_rich_text",set:"no_rich_text"},locked:"locked",acceptChatMessages:{get:"pleroma.accepts_chat_messages",set:"accepts_chat_messages"},allowFollowingMove:{get:"pleroma.allow_following_move",set:"allow_following_move"},discoverable:{get:"source.pleroma.discoverable",set:"discoverable"},hideFavorites:{get:"pleroma.hide_favorites",set:"hide_favorites"},hideFollowers:{get:"pleroma.hide_followers",set:"hide_followers"},hideFollows:{get:"pleroma.hide_follows",set:"hide_follows"},hideFollowersCount:{get:"pleroma.hide_followers_count",set:"hide_followers_count"},hideFollowsCount:{get:"pleroma.hide_follows_count",set:"hide_follows_count"},webPushHideContents:{get:"pleroma.notification_settings.hide_notification_contents",set:"hide_notification_contents",api:h},blockNotificationsFromStrangers:{get:"pleroma.notification_settings.block_from_strangers",set:"block_from_strangers",api:h}},m=Object.fromEntries(Object.keys(b).map((function(e){return[e,null]}))),f={state:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},m),mutations:{confirmServerSideOption:function(e,t){var n=t.name,r=t.value;c()(e,n,r)},wipeServerSideOption:function(e,t){var n=t.name;c()(e,n,null)},wipeAllServerSideOptions:function(e){Object.keys(b).forEach((function(t){c()(e,t,null)}))},setCurrentUser:function(e,t){Object.entries(b).forEach((function(n){var r=i()(n,2),o=r[0],s=r[1],a=s.get,l=void 0===a?s:a;c()(e,o,u()(t._original,l))}))}},actions:{setServerSideOption:function(e,t){var n=e.rootState,r=e.state,i=e.commit,o=(e.dispatch,t.name),s=t.value,a=u()(r,o),c=b[o];if(!c)throw new Error("Invalid server-side setting");var l=c.set,d=void 0===l?c:l,h=c.api,m=void 0===h?p:h;i("wipeServerSideOption",{name:o}),m({rootState:n,commit:i},{path:d,value:s,oldValue:a}).catch((function(e){console.warn("Error setting server-side option:",e),i("confirmServerSideOption",{name:o,value:a})}))},logout:function(e){(0,e.commit)("wipeAllServerSideOptions")}}};t.a=f},,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(95),i=n.n(r),o=function(e){return function(e){return i()(e)?e.options:e}(e).props}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(0);const i={ref:"panel-body",class:"autocomplete-panel-body"},o=["onClick"],s={class:"image"},a=["src"],c={key:1},l={class:"label"},u={class:"displayText"},d={class:"detailText"};var p=n(5),h=n.n(p),b=n(40),m=n.n(b),f=n(13),O=n.n(f),j=n(326),g=n.n(j),v=n(10),y=n.n(v),w=n(30),k=n.n(w),_=n(55),S=n.n(_),C=function(e){return S()(e,(function(e,t){var n={word:t,start:0,end:t.length};if(e.length>0){var r=e.pop();n.start+=r.end,n.end+=r.end,e.push(r)}return e.push(n),e}),[])},P=function(e){for(var t=[],n="",r=0;r<e.length;r++){var i=e[r];n?!!i.trim()==!!n.trim()?n+=i:(t.push(n),n=i):n=i}return n&&t.push(n),t},x={wordAtPosition:function(e,t){var n=P(e),r=C(n);return k()(r,(function(e){var n=e.start,r=e.end;return n<=t&&r>t}))},addPositionToWords:C,splitByWhitespaceBoundary:P,replaceWord:function(e,t,n){return e.slice(0,t.start)+n+e.slice(t.end)}};const D={class:"emoji-picker panel panel-default panel-body"},T={class:"heading"},I={class:"emoji-tabs"},$=["title","onClick"],z={key:0,class:"additional-tabs"},M=["title"],U={class:"content"},F={class:"emoji-search"},E=["placeholder"],L=["title","onClick"],R={key:0},A=["src"],N={class:"keep-open"},B={key:0,class:"stickers-content"};var V=n(51),H=n(6),q=n(3);function J(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}H.c.add(q.k,q.kb,q.ib);var Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(""===t)return e;var n,r=t.toLowerCase(),i=[],o=J(e);try{for(o.s();!(n=o.n()).done;){var s=n.value,a=s.displayText.toLowerCase().indexOf(r);a>-1&&(Array.isArray(i[a])||(i[a]=[]),i[a].push(s))}}catch(e){o.e(e)}finally{o.f()}return i.flat()},G={props:{enableStickerPicker:{required:!1,type:Boolean,default:!1}},data:function(){return{keyword:"",activeGroup:"custom",showingStickers:!1,groupsScrolledClass:"scrolled-top",keepOpen:!1,customEmojiBufferSlice:60,customEmojiTimeout:null,customEmojiLoadAllConfirmed:!1}},components:{StickerPicker:Object(r.n)((function(){return n.e(4).then(n.bind(null,709))})),Checkbox:V.a},methods:{onStickerUploaded:function(e){this.$emit("sticker-uploaded",e)},onStickerUploadFailed:function(e){this.$emit("sticker-upload-failed",e)},onEmoji:function(e){var t=e.imageUrl?":".concat(e.displayText,":"):e.replacement;this.$emit("emoji",{insertion:t,keepOpen:this.keepOpen})},onScroll:function(e){var t=e&&e.target||this.$refs["emoji-groups"];this.updateScrolledClass(t),this.scrolledGroup(t),this.triggerLoadMore(t)},highlight:function(e){var t=this,n=this.$refs["group-"+e].offsetTop;this.setShowStickers(!1),this.activeGroup=e,this.$nextTick((function(){t.$refs["emoji-groups"].scrollTop=n+1}))},updateScrolledClass:function(e){e.scrollTop<=5?this.groupsScrolledClass="scrolled-top":e.scrollTop>=e.scrollTopMax-5?this.groupsScrolledClass="scrolled-bottom":this.groupsScrolledClass="scrolled-middle"},triggerLoadMore:function(e){var t=this.$refs["group-end-custom"];if(t){var n=t.offsetTop+t.offsetHeight,r=e.scrollTop+e.clientHeight,i=e.scrollTop,o=e.scrollHeight;n<i||r===o||!(n-r<64)&&!(i<5)||this.loadEmoji()}},scrolledGroup:function(e){var t=this,n=e.scrollTop+5;this.$nextTick((function(){t.emojisView.forEach((function(e){t.$refs["group-"+e.id].offsetTop<=n&&(t.activeGroup=e.id)}))}))},loadEmoji:function(){this.customEmojiBuffer.length===this.filteredEmoji.length||(this.customEmojiBufferSlice+=60)},startEmojiLoad:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t||(this.keyword=""),this.$nextTick((function(){e.$refs["emoji-groups"].scrollTop=0}));var n=this.customEmojiBuffer.length,r=n===this.filteredEmoji.length;r&&!t||(this.customEmojiBufferSlice=60)},toggleStickers:function(){this.showingStickers=!this.showingStickers},setShowStickers:function(e){this.showingStickers=e}},watch:{keyword:function(){this.customEmojiLoadAllConfirmed=!1,this.onScroll(),this.startEmojiLoad(!0)}},computed:{activeGroupView:function(){return this.showingStickers?"":this.activeGroup},stickersAvailable:function(){return this.$store.state.instance.stickers?this.$store.state.instance.stickers.length>0:0},filteredEmoji:function(){return Y(this.$store.state.instance.customEmoji||[],this.keyword)},customEmojiBuffer:function(){return this.filteredEmoji.slice(0,this.customEmojiBufferSlice)},emojis:function(){var e=this.$store.state.instance.emoji||[],t=this.customEmojiBuffer;return[{id:"custom",text:this.$t("emoji.custom"),icon:"smile-beam",emojis:t},{id:"standard",text:this.$t("emoji.unicode"),icon:"box-open",emojis:Y(e,this.keyword)}]},emojisView:function(){return this.emojis.filter((function(e){return e.emojis.length>0}))},stickerPickerEnabled:function(){return 0!==(this.$store.state.instance.stickers||[]).length}}},K=(n(503),n(4)),X=n.n(K);var Z=X()(G,[["render",function(e,t,n,i,o,s){const a=Object(r.J)("FAIcon"),c=Object(r.J)("Checkbox"),l=Object(r.J)("sticker-picker");return Object(r.D)(),Object(r.j)("div",D,[Object(r.k)("div",T,[Object(r.k)("span",I,[(Object(r.D)(!0),Object(r.j)(r.a,null,Object(r.H)(e.emojis,t=>(Object(r.D)(),Object(r.j)("span",{key:t.id,class:Object(r.w)(["emoji-tabs-item",{active:e.activeGroupView===t.id,disabled:0===t.emojis.length}]),title:t.text,onClick:Object(r.Y)(n=>e.highlight(t.id),["prevent"])},[Object(r.m)(a,{icon:t.icon,"fixed-width":""},null,8,["icon"])],10,$))),128))]),e.stickerPickerEnabled?(Object(r.D)(),Object(r.j)("span",z,[Object(r.k)("span",{class:Object(r.w)(["stickers-tab-icon additional-tabs-item",{active:e.showingStickers}]),title:e.$t("emoji.stickers"),onClick:t[0]||(t[0]=Object(r.Y)((...t)=>e.toggleStickers&&e.toggleStickers(...t),["prevent"]))},[Object(r.m)(a,{icon:"sticky-note","fixed-width":""})],10,M)])):Object(r.i)("",!0)]),Object(r.k)("div",U,[Object(r.k)("div",{class:Object(r.w)(["emoji-content",{hidden:e.showingStickers}])},[Object(r.k)("div",F,[Object(r.W)(Object(r.k)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.keyword=t),type:"text",class:"form-control",placeholder:e.$t("emoji.search_emoji")},null,8,E),[[r.S,e.keyword]])]),Object(r.k)("div",{ref:"emoji-groups",class:Object(r.w)(["emoji-groups",e.groupsScrolledClass]),onScroll:t[2]||(t[2]=(...t)=>e.onScroll&&e.onScroll(...t))},[(Object(r.D)(!0),Object(r.j)(r.a,null,Object(r.H)(e.emojisView,t=>(Object(r.D)(),Object(r.j)("div",{key:t.id,class:"emoji-group"},[Object(r.k)("h6",{ref_for:!0,ref:"group-"+t.id,class:"emoji-group-title"},Object(r.O)(t.text),513),(Object(r.D)(!0),Object(r.j)(r.a,null,Object(r.H)(t.emojis,n=>(Object(r.D)(),Object(r.j)("span",{key:t.id+n.displayText,title:n.displayText,class:"emoji-item",onClick:Object(r.Y)(t=>e.onEmoji(n),["stop","prevent"])},[n.imageUrl?(Object(r.D)(),Object(r.j)("img",{key:1,src:n.imageUrl},null,8,A)):(Object(r.D)(),Object(r.j)("span",R,Object(r.O)(n.replacement),1))],8,L))),128)),Object(r.k)("span",{ref_for:!0,ref:"group-end-"+t.id},null,512)]))),128))],34),Object(r.k)("div",N,[Object(r.m)(c,{modelValue:e.keepOpen,"onUpdate:modelValue":t[3]||(t[3]=t=>e.keepOpen=t)},{default:Object(r.V)(()=>[Object(r.l)(Object(r.O)(e.$t("emoji.keep_open")),1)]),_:1},8,["modelValue"])])],2),e.showingStickers?(Object(r.D)(),Object(r.j)("div",B,[Object(r.m)(l,{onUploaded:e.onStickerUploaded,onUploadFailed:e.onStickerUploadFailed},null,8,["onUploaded","onUploadFailed"])])):Object(r.i)("",!0)])])}]]),Q=n(137),ee=n(41),te=["imageUrl"];function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}H.c.add(ee.c);var ie,oe={emits:["update:modelValue","shown"],props:{suggest:{required:!0,type:Function},modelValue:{required:!0,type:String},enableEmojiPicker:{required:!1,type:Boolean,default:!1},hideEmojiButton:{required:!1,type:Boolean,default:!1},enableStickerPicker:{required:!1,type:Boolean,default:!1},placement:{required:!1,type:String,default:"auto"},newlineOnCtrlEnter:{required:!1,type:Boolean,default:!1}},data:function(){return{input:void 0,highlighted:0,caret:0,focused:!1,blurTimeout:null,showPicker:!1,temporarilyHideSuggestions:!1,keepOpen:!1,disableClickOutside:!1,suggestions:[]}},components:{EmojiPicker:Z},computed:{padEmoji:function(){return this.$store.getters.mergedConfig.padEmoji},showSuggestions:function(){return this.focused&&this.suggestions&&this.suggestions.length>0&&!this.showPicker&&!this.temporarilyHideSuggestions},textAtCaret:function(){return(this.wordAtCaret||{}).word||""},wordAtCaret:function(){if(this.modelValue&&this.caret)return x.wordAtPosition(this.modelValue,this.caret-1)||{}}},mounted:function(){var e=this.$refs.root,t=e.querySelector(".emoji-input > input")||e.querySelector(".emoji-input > textarea");t&&(this.input=t,this.resize(),t.addEventListener("blur",this.onBlur),t.addEventListener("focus",this.onFocus),t.addEventListener("paste",this.onPaste),t.addEventListener("keyup",this.onKeyUp),t.addEventListener("keydown",this.onKeyDown),t.addEventListener("click",this.onClickInput),t.addEventListener("transitionend",this.onTransition),t.addEventListener("input",this.onInput))},unmounted:function(){var e=this.input;e&&(e.removeEventListener("blur",this.onBlur),e.removeEventListener("focus",this.onFocus),e.removeEventListener("paste",this.onPaste),e.removeEventListener("keyup",this.onKeyUp),e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("click",this.onClickInput),e.removeEventListener("transitionend",this.onTransition),e.removeEventListener("input",this.onInput))},watch:{showSuggestions:function(e){this.$emit("shown",e)},textAtCaret:(ie=O()(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.charAt(0),this.suggestions=[],t!==n){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.suggest(t);case 6:if(r=e.sent,this.textAtCaret===t){e.next=9;break}return e.abrupt("return");case 9:if(!(r.length<=0)){e.next=11;break}return e.abrupt("return");case 11:this.suggestions=g()(r,5).map((function(e){var t=e.imageUrl;return re(re({},m()(e,te)),{},{img:t||""})}));case 12:case"end":return e.stop()}}),e,this)}))),function(e){return ie.apply(this,arguments)}),suggestions:{handler:function(e){this.$nextTick(this.resize)},deep:!0}},methods:{focusPickerInput:function(){var e=this.$refs.picker.$el;if(e){var t=e.querySelector("input");t&&t.focus()}},triggerShowPicker:function(){var e=this;this.showPicker=!0,this.$refs.picker.startEmojiLoad(),this.$nextTick((function(){e.scrollIntoView(),e.focusPickerInput()})),this.disableClickOutside=!0,setTimeout((function(){e.disableClickOutside=!1}),0)},togglePicker:function(){this.input.focus(),this.showPicker=!this.showPicker,this.showPicker&&(this.scrollIntoView(),this.$refs.picker.startEmojiLoad(),this.$nextTick(this.focusPickerInput))},replace:function(e){var t=x.replaceWord(this.modelValue,this.wordAtCaret,e);this.$emit("update:modelValue",t),this.caret=0},insert:function(e){var t=e.insertion,n=e.keepOpen,r=e.surroundingSpace,i=void 0===r||r,o=this.modelValue.substring(0,this.caret)||"",s=this.modelValue.substring(this.caret)||"",a=/\s/,c=i&&!a.exec(o.slice(-1))&&o.length&&this.padEmoji>0?" ":"",l=i&&!a.exec(s[0])&&this.padEmoji?" ":"",u=[o,c,t,l,s].join("");this.keepOpen=n,this.$emit("update:modelValue",u);var d=this.caret+(t+l+c).length;n||this.input.focus(),this.$nextTick((function(){this.input.setSelectionRange(d,d),this.caret=d}))},replaceText:function(e,t){var n=this.suggestions.length||0;if(1!==this.textAtCaret.length&&(n>0||t)){var r=(t||this.suggestions[this.highlighted]).replacement,i=x.replaceWord(this.modelValue,this.wordAtCaret,r);this.$emit("update:modelValue",i),this.highlighted=0;var o=this.wordAtCaret.start+r.length;this.$nextTick((function(){this.input.focus(),this.input.setSelectionRange(o,o),this.caret=o})),e.preventDefault()}},cycleBackward:function(e){(this.suggestions.length||0)>1?(this.highlighted-=1,this.highlighted<0&&(this.highlighted=this.suggestions.length-1),e.preventDefault()):this.highlighted=0},cycleForward:function(e){var t=this.suggestions.length||0;t>1?(this.highlighted+=1,this.highlighted>=t&&(this.highlighted=0),e.preventDefault()):this.highlighted=0},scrollIntoView:function(){var e=this,t=this.$refs.picker.$el,n=this.$el.closest(".sidebar-scroller")||this.$el.closest(".post-form-modal-view")||window,r=n===window?n.scrollY:n.scrollTop,i=r+(n===window?n.innerHeight:n.offsetHeight),o=t.offsetHeight+Object(Q.a)(t,n).top,s=r+Math.max(0,o-i);n===window?n.scroll(0,s):n.scrollTop=s,this.$nextTick((function(){var t=e.input.offsetHeight,n=e.$refs.picker;n.$el.getBoundingClientRect().bottom>window.innerHeight&&(n.$el.style.top="auto",n.$el.style.bottom=t+"px")}))},onTransition:function(e){this.resize()},onBlur:function(e){var t=this;this.blurTimeout=setTimeout((function(){t.focused=!1,t.setCaret(e),t.resize()}),200)},onClick:function(e,t){this.replaceText(e,t)},onFocus:function(e){this.blurTimeout&&(clearTimeout(this.blurTimeout),this.blurTimeout=null),this.keepOpen||(this.showPicker=!1),this.focused=!0,this.setCaret(e),this.resize(),this.temporarilyHideSuggestions=!1},onKeyUp:function(e){var t=e.key;this.setCaret(e),this.resize(),this.temporarilyHideSuggestions="Escape"===t},onPaste:function(e){this.setCaret(e),this.resize()},onKeyDown:function(e){var t=this,n=e.ctrlKey,r=e.shiftKey,i=e.key;this.newlineOnCtrlEnter&&n&&"Enter"===i&&(this.insert({insertion:"\n",surroundingSpace:!1}),e.stopPropagation(),e.preventDefault(),this.$nextTick((function(){t.input.blur(),t.input.focus()}))),this.temporarilyHideSuggestions||("Tab"===i&&(r?this.cycleBackward(e):this.cycleForward(e)),"ArrowUp"===i?this.cycleBackward(e):"ArrowDown"===i&&this.cycleForward(e),"Enter"===i&&(n||this.replaceText(e))),"Escape"===i&&(this.temporarilyHideSuggestions||this.input.focus()),this.showPicker=!1,this.resize()},onInput:function(e){this.showPicker=!1,this.setCaret(e),this.resize(),this.$emit("update:modelValue",e.target.value)},onClickInput:function(e){this.showPicker=!1},onClickOutside:function(e){this.disableClickOutside||(this.showPicker=!1)},onStickerUploaded:function(e){this.showPicker=!1,this.$emit("sticker-uploaded",e)},onStickerUploadFailed:function(e){this.showPicker=!1,this.$emit("sticker-upload-Failed",e)},setCaret:function(e){var t=e.target.selectionStart;this.caret=t},resize:function(){var e=this.$refs.panel;if(e){var t=this.$refs.picker.$el,n=this.$refs["panel-body"],r=this.input,i=r.offsetHeight,o=r.offsetTop+i;this.setPlacement(n,e,o),this.setPlacement(t,t,o)}},setPlacement:function(e,t,n){e&&t&&(t.style.top=n+"px",t.style.bottom="auto",("top"===this.placement||"auto"===this.placement&&this.overflowsBottom(e))&&(t.style.top="auto",t.style.bottom=this.input.offsetHeight+"px"))},overflowsBottom:function(e){return e.getBoundingClientRect().bottom>window.innerHeight}}};n(504);const se=X()(oe,[["render",function(e,t,n,p,h,b){const m=Object(r.J)("FAIcon"),f=Object(r.J)("EmojiPicker"),O=Object(r.K)("click-outside");return Object(r.W)((Object(r.D)(),Object(r.j)("div",{ref:"root",class:Object(r.w)(["emoji-input",{"with-picker":!e.hideEmojiButton}])},[Object(r.I)(e.$slots,"default"),e.enableEmojiPicker?(Object(r.D)(),Object(r.j)(r.a,{key:0},[e.hideEmojiButton?Object(r.i)("",!0):(Object(r.D)(),Object(r.j)("button",{key:0,class:"button-unstyled emoji-picker-icon",type:"button",onClick:t[0]||(t[0]=Object(r.Y)((...t)=>e.togglePicker&&e.togglePicker(...t),["prevent"]))},[Object(r.m)(m,{icon:["far","smile-beam"]})])),e.enableEmojiPicker?(Object(r.D)(),Object(r.h)(f,{key:1,ref:"picker",class:Object(r.w)([{hide:!e.showPicker},"emoji-picker-panel"]),"enable-sticker-picker":e.enableStickerPicker,onEmoji:e.insert,onStickerUploaded:e.onStickerUploaded,onStickerUploadFailed:e.onStickerUploadFailed},null,8,["class","enable-sticker-picker","onEmoji","onStickerUploaded","onStickerUploadFailed"])):Object(r.i)("",!0)],64)):Object(r.i)("",!0),Object(r.k)("div",{ref:"panel",class:Object(r.w)(["autocomplete-panel",{hide:!e.showSuggestions}])},[Object(r.k)("div",i,[(Object(r.D)(!0),Object(r.j)(r.a,null,Object(r.H)(e.suggestions,(t,n)=>(Object(r.D)(),Object(r.j)("div",{key:n,class:Object(r.w)(["autocomplete-item",{highlighted:n===e.highlighted}]),onClick:Object(r.Y)(n=>e.onClick(n,t),["stop","prevent"])},[Object(r.k)("span",s,[t.img?(Object(r.D)(),Object(r.j)("img",{key:0,src:t.img},null,8,a)):(Object(r.D)(),Object(r.j)("span",c,Object(r.O)(t.replacement),1))]),Object(r.k)("div",l,[Object(r.k)("span",u,Object(r.O)(t.displayText),1),Object(r.k)("span",d,Object(r.O)(t.detailText),1)])],10,o))),128))],512)],2)],2)),[[O,e.onClickOutside]])}]]);t.a=se},,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"static/img/nsfw.ca95de9.png"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),t.default={about:{mrf:{federation:e=>{const{normalize:t}=e;return t(["Federation"])},keyword:{keyword_policies:e=>{const{normalize:t}=e;return t(["Keyword policies"])},ftl_removal:e=>{const{normalize:t}=e;return t(['Removal from "The Whole Known Network" Timeline'])},reject:e=>{const{normalize:t}=e;return t(["Reject"])},replace:e=>{const{normalize:t}=e;return t(["Replace"])},is_replaced_by:e=>{const{normalize:t}=e;return t(["â†’"])}},mrf_policies:e=>{const{normalize:t}=e;return t(["Enabled MRF policies"])},mrf_policies_desc:e=>{const{normalize:t}=e;return t(["MRF policies manipulate the federation behaviour of the instance.  The following policies are enabled:"])},simple:{simple_policies:e=>{const{normalize:t}=e;return t(["Instance-specific policies"])},instance:e=>{const{normalize:t}=e;return t(["Instance"])},reason:e=>{const{normalize:t}=e;return t(["Reason"])},not_applicable:e=>{const{normalize:t}=e;return t(["N/A"])},accept:e=>{const{normalize:t}=e;return t(["Accept"])},accept_desc:e=>{const{normalize:t}=e;return t(["This instance only accepts messages from the following instances:"])},reject:e=>{const{normalize:t}=e;return t(["Reject"])},reject_desc:e=>{const{normalize:t}=e;return t(["This instance will not accept messages from the following instances:"])},quarantine:e=>{const{normalize:t}=e;return t(["Quarantine"])},quarantine_desc:e=>{const{normalize:t}=e;return t(["This instance will send only public posts to the following instances:"])},ftl_removal:e=>{const{normalize:t}=e;return t(['Removal from "Known Network" Timeline'])},ftl_removal_desc:e=>{const{normalize:t}=e;return t(['This instance removes these instances from "Known Network" timeline:'])},media_removal:e=>{const{normalize:t}=e;return t(["Media Removal"])},media_removal_desc:e=>{const{normalize:t}=e;return t(["This instance removes media from posts on the following instances:"])},media_nsfw:e=>{const{normalize:t}=e;return t(["Media force-set as sensitive"])},media_nsfw_desc:e=>{const{normalize:t}=e;return t(["This instance forces media to be set sensitive in posts on the following instances:"])}}},staff:e=>{const{normalize:t}=e;return t(["Staff"])}},shoutbox:{title:e=>{const{normalize:t}=e;return t(["Shoutbox"])}},domain_mute_card:{mute:e=>{const{normalize:t}=e;return t(["Mute"])},mute_progress:e=>{const{normalize:t}=e;return t(["Mutingâ€¦"])},unmute:e=>{const{normalize:t}=e;return t(["Unmute"])},unmute_progress:e=>{const{normalize:t}=e;return t(["Unmutingâ€¦"])}},exporter:{export:e=>{const{normalize:t}=e;return t(["Export"])},processing:e=>{const{normalize:t}=e;return t(["Processing, you'll soon be asked to download your file"])}},features_panel:{shout:e=>{const{normalize:t}=e;return t(["Shoutbox"])},pleroma_chat_messages:e=>{const{normalize:t}=e;return t(["Pleroma Chat"])},gopher:e=>{const{normalize:t}=e;return t(["Gopher"])},media_proxy:e=>{const{normalize:t}=e;return t(["Media proxy"])},scope_options:e=>{const{normalize:t}=e;return t(["Scope options"])},text_limit:e=>{const{normalize:t}=e;return t(["Text limit"])},title:e=>{const{normalize:t}=e;return t(["Features"])},who_to_follow:e=>{const{normalize:t}=e;return t(["Who to follow"])},upload_limit:e=>{const{normalize:t}=e;return t(["Upload limit"])}},finder:{error_fetching_user:e=>{const{normalize:t}=e;return t(["Error fetching user"])},find_user:e=>{const{normalize:t}=e;return t(["Find user"])}},general:{apply:e=>{const{normalize:t}=e;return t(["Apply"])},submit:e=>{const{normalize:t}=e;return t(["Submit"])},more:e=>{const{normalize:t}=e;return t(["More"])},loading:e=>{const{normalize:t}=e;return t(["Loadingâ€¦"])},generic_error:e=>{const{normalize:t}=e;return t(["An error occured"])},error_retry:e=>{const{normalize:t}=e;return t(["Please try again"])},retry:e=>{const{normalize:t}=e;return t(["Try again"])},optional:e=>{const{normalize:t}=e;return t(["optional"])},show_more:e=>{const{normalize:t}=e;return t(["Show more"])},show_less:e=>{const{normalize:t}=e;return t(["Show less"])},dismiss:e=>{const{normalize:t}=e;return t(["Dismiss"])},cancel:e=>{const{normalize:t}=e;return t(["Cancel"])},disable:e=>{const{normalize:t}=e;return t(["Disable"])},enable:e=>{const{normalize:t}=e;return t(["Enable"])},confirm:e=>{const{normalize:t}=e;return t(["Confirm"])},verify:e=>{const{normalize:t}=e;return t(["Verify"])},close:e=>{const{normalize:t}=e;return t(["Close"])},peek:e=>{const{normalize:t}=e;return t(["Peek"])},role:{admin:e=>{const{normalize:t}=e;return t(["Admin"])},moderator:e=>{const{normalize:t}=e;return t(["Moderator"])}},flash_content:e=>{const{normalize:t}=e;return t(["Click to show Flash content using Ruffle (Experimental, may not work)."])},flash_security:e=>{const{normalize:t}=e;return t(["Note that this can be potentially dangerous since Flash content is still arbitrary code."])},flash_fail:e=>{const{normalize:t}=e;return t(["Failed to load flash content, see console for details."])},scope_in_timeline:{direct:e=>{const{normalize:t}=e;return t(["Direct"])},private:e=>{const{normalize:t}=e;return t(["Followers-only"])},public:e=>{const{normalize:t}=e;return t(["Public"])},unlisted:e=>{const{normalize:t}=e;return t(["Unlisted"])}}},image_cropper:{crop_picture:e=>{const{normalize:t}=e;return t(["Crop picture"])},save:e=>{const{normalize:t}=e;return t(["Save"])},save_without_cropping:e=>{const{normalize:t}=e;return t(["Save without cropping"])},cancel:e=>{const{normalize:t}=e;return t(["Cancel"])}},importer:{submit:e=>{const{normalize:t}=e;return t(["Submit"])},success:e=>{const{normalize:t}=e;return t(["Imported successfully."])},error:e=>{const{normalize:t}=e;return t(["An error occured while importing this file."])}},login:{login:e=>{const{normalize:t}=e;return t(["Log in"])},description:e=>{const{normalize:t}=e;return t(["Log in with OAuth"])},logout:e=>{const{normalize:t}=e;return t(["Log out"])},password:e=>{const{normalize:t}=e;return t(["Password"])},placeholder:e=>{const{normalize:t}=e;return t(["e.g. lain"])},register:e=>{const{normalize:t}=e;return t(["Register"])},username:e=>{const{normalize:t}=e;return t(["Username"])},hint:e=>{const{normalize:t}=e;return t(["Log in to join the discussion"])},authentication_code:e=>{const{normalize:t}=e;return t(["Authentication code"])},enter_recovery_code:e=>{const{normalize:t}=e;return t(["Enter a recovery code"])},enter_two_factor_code:e=>{const{normalize:t}=e;return t(["Enter a two-factor code"])},recovery_code:e=>{const{normalize:t}=e;return t(["Recovery code"])},heading:{totp:e=>{const{normalize:t}=e;return t(["Two-factor authentication"])},recovery:e=>{const{normalize:t}=e;return t(["Two-factor recovery"])}}},media_modal:{previous:e=>{const{normalize:t}=e;return t(["Previous"])},next:e=>{const{normalize:t}=e;return t(["Next"])},counter:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("current"))," / ",n(r("total"))])},hide:e=>{const{normalize:t}=e;return t(["Close media viewer"])}},nav:{about:e=>{const{normalize:t}=e;return t(["About"])},administration:e=>{const{normalize:t}=e;return t(["Administration"])},back:e=>{const{normalize:t}=e;return t(["Back"])},friend_requests:e=>{const{normalize:t}=e;return t(["Follow requests"])},mentions:e=>{const{normalize:t}=e;return t(["Mentions"])},interactions:e=>{const{normalize:t}=e;return t(["Interactions"])},dms:e=>{const{normalize:t}=e;return t(["Direct messages"])},public_tl:e=>{const{normalize:t}=e;return t(["Public timeline"])},timeline:e=>{const{normalize:t}=e;return t(["Timeline"])},home_timeline:e=>{const{normalize:t}=e;return t(["Home timeline"])},twkn:e=>{const{normalize:t}=e;return t(["Known Network"])},bookmarks:e=>{const{normalize:t}=e;return t(["Bookmarks"])},user_search:e=>{const{normalize:t}=e;return t(["User Search"])},search:e=>{const{normalize:t}=e;return t(["Search"])},who_to_follow:e=>{const{normalize:t}=e;return t(["Who to follow"])},preferences:e=>{const{normalize:t}=e;return t(["Preferences"])},timelines:e=>{const{normalize:t}=e;return t(["Timelines"])},chats:e=>{const{normalize:t}=e;return t(["Chats"])}},notifications:{broken_favorite:e=>{const{normalize:t}=e;return t(["Unknown status, searching for itâ€¦"])},error:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["Error fetching notifications: ",n(r(0))])},favorited_you:e=>{const{normalize:t}=e;return t(["favorited your status"])},followed_you:e=>{const{normalize:t}=e;return t(["followed you"])},follow_request:e=>{const{normalize:t}=e;return t(["wants to follow you"])},load_older:e=>{const{normalize:t}=e;return t(["Load older notifications"])},notifications:e=>{const{normalize:t}=e;return t(["Notifications"])},read:e=>{const{normalize:t}=e;return t(["Read!"])},repeated_you:e=>{const{normalize:t}=e;return t(["repeated your status"])},no_more_notifications:e=>{const{normalize:t}=e;return t(["No more notifications"])},migrated_to:e=>{const{normalize:t}=e;return t(["migrated to"])},reacted_with:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["reacted with ",n(r(0))])},poll_ended:e=>{const{normalize:t}=e;return t(["poll has ended"])}},polls:{add_poll:e=>{const{normalize:t}=e;return t(["Add poll"])},add_option:e=>{const{normalize:t}=e;return t(["Add option"])},option:e=>{const{normalize:t}=e;return t(["Option"])},votes:e=>{const{normalize:t}=e;return t(["votes"])},people_voted_count:e=>{const{normalize:t,interpolate:n,named:r,plural:i}=e;return i([t([n(r("count"))," person voted"]),t([n(r("count"))," people voted"])])},votes_count:e=>{const{normalize:t,interpolate:n,named:r,plural:i}=e;return i([t([n(r("count"))," vote"]),t([n(r("count"))," votes"])])},vote:e=>{const{normalize:t}=e;return t(["Vote"])},type:e=>{const{normalize:t}=e;return t(["Poll type"])},single_choice:e=>{const{normalize:t}=e;return t(["Single choice"])},multiple_choices:e=>{const{normalize:t}=e;return t(["Multiple choices"])},expiry:e=>{const{normalize:t}=e;return t(["Poll age"])},expires_in:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["Poll ends in ",n(r(0))])},expired:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["Poll ended ",n(r(0))," ago"])},not_enough_options:e=>{const{normalize:t}=e;return t(["Too few unique options in poll"])}},emoji:{stickers:e=>{const{normalize:t}=e;return t(["Stickers"])},emoji:e=>{const{normalize:t}=e;return t(["Emoji"])},keep_open:e=>{const{normalize:t}=e;return t(["Keep picker open"])},search_emoji:e=>{const{normalize:t}=e;return t(["Search for an emoji"])},add_emoji:e=>{const{normalize:t}=e;return t(["Insert emoji"])},custom:e=>{const{normalize:t}=e;return t(["Custom emoji"])},unicode:e=>{const{normalize:t}=e;return t(["Unicode emoji"])},load_all_hint:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Loaded first ",n(r("saneAmount"))," emoji, loading all emoji may cause performance issues."])},load_all:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Loading all ",n(r("emojiAmount"))," emoji"])}},errors:{storage_unavailable:e=>{const{normalize:t}=e;return t(["Pleroma could not access browser storage. Your login or your local settings won't be saved and you might encounter unexpected issues. Try enabling cookies."])}},interactions:{favs_repeats:e=>{const{normalize:t}=e;return t(["Repeats and favorites"])},follows:e=>{const{normalize:t}=e;return t(["New follows"])},moves:e=>{const{normalize:t}=e;return t(["User migrates"])},load_older:e=>{const{normalize:t}=e;return t(["Load older interactions"])}},post_status:{new_status:e=>{const{normalize:t}=e;return t(["Post new status"])},account_not_locked_warning:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["Your account is not ",n(r(0)),". Anyone can follow you to view your follower-only posts."])},account_not_locked_warning_link:e=>{const{normalize:t}=e;return t(["locked"])},attachments_sensitive:e=>{const{normalize:t}=e;return t(["Mark attachments as sensitive"])},media_description:e=>{const{normalize:t}=e;return t(["Media description"])},content_type:{"text/plain":e=>{const{normalize:t}=e;return t(["Plain text"])},"text/html":e=>{const{normalize:t}=e;return t(["HTML"])},"text/markdown":e=>{const{normalize:t}=e;return t(["Markdown"])},"text/bbcode":e=>{const{normalize:t}=e;return t(["BBCode"])},"text/x.misskeymarkdown":e=>{const{normalize:t}=e;return t(["MFM"])}},content_warning:e=>{const{normalize:t}=e;return t(["Subject (optional)"])},default:e=>{const{normalize:t}=e;return t(["Just landed in L.A."])},direct_warning_to_all:e=>{const{normalize:t}=e;return t(["This post will be visible to all the mentioned users."])},direct_warning_to_first_only:e=>{const{normalize:t}=e;return t(["This post will only be visible to the mentioned users at the beginning of the message."])},posting:e=>{const{normalize:t}=e;return t(["Posting"])},post:e=>{const{normalize:t}=e;return t(["Post"])},preview:e=>{const{normalize:t}=e;return t(["Preview"])},preview_empty:e=>{const{normalize:t}=e;return t(["Empty"])},empty_status_error:e=>{const{normalize:t}=e;return t(["Can't post an empty status with no files"])},media_description_error:e=>{const{normalize:t}=e;return t(["Failed to update media, try again"])},scope_notice:{public:e=>{const{normalize:t}=e;return t(["This post will be visible to everyone"])},private:e=>{const{normalize:t}=e;return t(["This post will be visible to your followers only"])},unlisted:e=>{const{normalize:t}=e;return t(["This post will not be visible in Public Timeline and The Whole Known Network"])},local:e=>{const{normalize:t}=e;return t(["This post won't be visible outside of IHBA"])}},scope:{direct:e=>{const{normalize:t}=e;return t(["Direct - post to mentioned users only"])},private:e=>{const{normalize:t}=e;return t(["Followers-only - post to followers only"])},public:e=>{const{normalize:t}=e;return t(["Public - post to public timelines"])},unlisted:e=>{const{normalize:t}=e;return t(["Unlisted - do not post to public timelines"])},local:e=>{const{normalize:t}=e;return t(["Local - do not federate this post"])}}},registration:{bio:e=>{const{normalize:t}=e;return t(["Bio"])},email:e=>{const{normalize:t}=e;return t(["Email"])},fullname:e=>{const{normalize:t}=e;return t(["Display name"])},password_confirm:e=>{const{normalize:t}=e;return t(["Password confirmation"])},registration:e=>{const{normalize:t}=e;return t(["Registration"])},token:e=>{const{normalize:t}=e;return t(["Invite token"])},captcha:e=>{const{normalize:t}=e;return t(["CAPTCHA"])},new_captcha:e=>{const{normalize:t}=e;return t(["Click the image to get a new captcha"])},username_placeholder:e=>{const{normalize:t}=e;return t(["e.g. lain"])},fullname_placeholder:e=>{const{normalize:t}=e;return t(["e.g. Lain Iwakura"])},bio_placeholder:e=>{const{normalize:t}=e;return t(["e.g.\nHi, I'm Lain.\nIâ€™m an anime girl living in suburban Japan. You may know me from the Wired."])},reason:e=>{const{normalize:t}=e;return t(["Reason to register"])},reason_placeholder:e=>{const{normalize:t}=e;return t(["This instance approves registrations manually.\nLet the administration know why you want to register."])},register:e=>{const{normalize:t}=e;return t(["Register"])},validations:{username_required:e=>{const{normalize:t}=e;return t(["cannot be left blank"])},fullname_required:e=>{const{normalize:t}=e;return t(["cannot be left blank"])},email_required:e=>{const{normalize:t}=e;return t(["cannot be left blank"])},password_required:e=>{const{normalize:t}=e;return t(["cannot be left blank"])},password_confirmation_required:e=>{const{normalize:t}=e;return t(["cannot be left blank"])},password_confirmation_match:e=>{const{normalize:t}=e;return t(["should be the same as password"])}},email_language:e=>{const{normalize:t}=e;return t(["In which language do you want to receive emails from the server?"])}},remote_user_resolver:{remote_user_resolver:e=>{const{normalize:t}=e;return t(["Remote user resolver"])},searching_for:e=>{const{normalize:t}=e;return t(["Searching for"])},error:e=>{const{normalize:t}=e;return t(["Not found."])}},selectable_list:{select_all:e=>{const{normalize:t}=e;return t(["Select all"])}},settings:{app_name:e=>{const{normalize:t}=e;return t(["App name"])},expert_mode:e=>{const{normalize:t}=e;return t(["Show advanced"])},save:e=>{const{normalize:t}=e;return t(["Save changes"])},security:e=>{const{normalize:t}=e;return t(["Security"])},setting_changed:e=>{const{normalize:t}=e;return t(["Setting is different from default"])},setting_server_side:e=>{const{normalize:t}=e;return t(["This setting is tied to your profile and affects all sessions and clients"])},enter_current_password_to_confirm:e=>{const{normalize:t}=e;return t(["Enter your current password to confirm your identity"])},post_look_feel:e=>{const{normalize:t}=e;return t(["Posts Look & Feel"])},mention_links:e=>{const{normalize:t}=e;return t(["Mention links"])},mfa:{otp:e=>{const{normalize:t}=e;return t(["OTP"])},setup_otp:e=>{const{normalize:t}=e;return t(["Setup OTP"])},wait_pre_setup_otp:e=>{const{normalize:t}=e;return t(["presetting OTP"])},confirm_and_enable:e=>{const{normalize:t}=e;return t(["Confirm & enable OTP"])},title:e=>{const{normalize:t}=e;return t(["Two-factor Authentication"])},generate_new_recovery_codes:e=>{const{normalize:t}=e;return t(["Generate new recovery codes"])},warning_of_generate_new_codes:e=>{const{normalize:t}=e;return t(["When you generate new recovery codes, your old codes wonâ€™t work anymore."])},recovery_codes:e=>{const{normalize:t}=e;return t(["Recovery codes."])},waiting_a_recovery_codes:e=>{const{normalize:t}=e;return t(["Receiving backup codesâ€¦"])},recovery_codes_warning:e=>{const{normalize:t}=e;return t(["Write the codes down or save them somewhere secure - otherwise you won't see them again. If you lose access to your 2FA app and recovery codes you'll be locked out of your account."])},authentication_methods:e=>{const{normalize:t}=e;return t(["Authentication methods"])},scan:{title:e=>{const{normalize:t}=e;return t(["Scan"])},desc:e=>{const{normalize:t}=e;return t(["Using your two-factor app, scan this QR code or enter text key:"])},secret_code:e=>{const{normalize:t}=e;return t(["Key"])}},verify:{desc:e=>{const{normalize:t}=e;return t(["To enable two-factor authentication, enter the code from your two-factor app:"])}}},allow_following_move:e=>{const{normalize:t}=e;return t(["Allow auto-follow when following account moves"])},attachmentRadius:e=>{const{normalize:t}=e;return t(["Attachments"])},attachments:e=>{const{normalize:t}=e;return t(["Attachments"])},avatar:e=>{const{normalize:t}=e;return t(["Avatar"])},avatarAltRadius:e=>{const{normalize:t}=e;return t(["Avatars (notifications)"])},avatarRadius:e=>{const{normalize:t}=e;return t(["Avatars"])},background:e=>{const{normalize:t}=e;return t(["Background"])},bio:e=>{const{normalize:t}=e;return t(["Bio"])},email_language:e=>{const{normalize:t}=e;return t(["Language for receiving emails from the server"])},block_export:e=>{const{normalize:t}=e;return t(["Block export"])},block_export_button:e=>{const{normalize:t}=e;return t(["Export your blocks to a csv file"])},block_import:e=>{const{normalize:t}=e;return t(["Block import"])},block_import_error:e=>{const{normalize:t}=e;return t(["Error importing blocks"])},blocks_imported:e=>{const{normalize:t}=e;return t(["Blocks imported! Processing them will take a while."])},mute_export:e=>{const{normalize:t}=e;return t(["Mute export"])},mute_export_button:e=>{const{normalize:t}=e;return t(["Export your mutes to a csv file"])},mute_import:e=>{const{normalize:t}=e;return t(["Mute import"])},mute_import_error:e=>{const{normalize:t}=e;return t(["Error importing mutes"])},mutes_imported:e=>{const{normalize:t}=e;return t(["Mutes imported! Processing them will take a while."])},import_mutes_from_a_csv_file:e=>{const{normalize:t}=e;return t(["Import mutes from a csv file"])},blocks_tab:e=>{const{normalize:t}=e;return t(["Blocks"])},bot:e=>{const{normalize:t}=e;return t(["This is a bot account"])},btnRadius:e=>{const{normalize:t}=e;return t(["Buttons"])},cBlue:e=>{const{normalize:t}=e;return t(["Blue (Reply, follow)"])},cGreen:e=>{const{normalize:t}=e;return t(["Green (Retweet)"])},cOrange:e=>{const{normalize:t}=e;return t(["Orange (Favorite)"])},cRed:e=>{const{normalize:t}=e;return t(["Red (Cancel)"])},change_email:e=>{const{normalize:t}=e;return t(["Change email"])},change_email_error:e=>{const{normalize:t}=e;return t(["There was an issue changing your email."])},changed_email:e=>{const{normalize:t}=e;return t(["Email changed successfully!"])},change_password:e=>{const{normalize:t}=e;return t(["Change password"])},change_password_error:e=>{const{normalize:t}=e;return t(["There was an issue changing your password."])},changed_password:e=>{const{normalize:t}=e;return t(["Password changed successfully!"])},chatMessageRadius:e=>{const{normalize:t}=e;return t(["Chat message"])},collapse_subject:e=>{const{normalize:t}=e;return t(["Collapse posts with subjects"])},composing:e=>{const{normalize:t}=e;return t(["Composing"])},confirm_new_password:e=>{const{normalize:t}=e;return t(["Confirm new password"])},current_avatar:e=>{const{normalize:t}=e;return t(["Your current avatar"])},current_mascot:e=>{const{normalize:t}=e;return t(["Your current mascot"])},current_password:e=>{const{normalize:t}=e;return t(["Current password"])},mutes_and_blocks:e=>{const{normalize:t}=e;return t(["Mutes and Blocks"])},data_import_export_tab:e=>{const{normalize:t}=e;return t(["Data import / export"])},default_vis:e=>{const{normalize:t}=e;return t(["Default visibility scope"])},delete_account:e=>{const{normalize:t}=e;return t(["Delete account"])},delete_account_description:e=>{const{normalize:t}=e;return t(["Permanently delete your data and deactivate your account."])},delete_account_error:e=>{const{normalize:t}=e;return t(["There was an issue deleting your account. If this persists please contact your instance administrator."])},delete_account_instructions:e=>{const{normalize:t}=e;return t(["Type your password in the input below to confirm account deletion."])},discoverable:e=>{const{normalize:t}=e;return t(["Allow discovery of this account in search results and other services"])},domain_mutes:e=>{const{normalize:t}=e;return t(["Domains"])},avatar_size_instruction:e=>{const{normalize:t}=e;return t(["The recommended minimum size for avatar images is 150x150 pixels."])},pad_emoji:e=>{const{normalize:t}=e;return t(["Pad emoji with spaces when adding from picker"])},emoji_reactions_on_timeline:e=>{const{normalize:t}=e;return t(["Show emoji reactions on timeline"])},export_theme:e=>{const{normalize:t}=e;return t(["Save preset"])},filtering:e=>{const{normalize:t}=e;return t(["Filtering"])},wordfilter:e=>{const{normalize:t}=e;return t(["Wordfilter"])},filtering_explanation:e=>{const{normalize:t}=e;return t(["All statuses containing these words will be muted, one per line"])},word_filter:e=>{const{normalize:t}=e;return t(["Word filter"])},follow_export:e=>{const{normalize:t}=e;return t(["Follow export"])},follow_export_button:e=>{const{normalize:t}=e;return t(["Export your follows to a csv file"])},follow_import:e=>{const{normalize:t}=e;return t(["Follow import"])},follow_import_error:e=>{const{normalize:t}=e;return t(["Error importing followers"])},follows_imported:e=>{const{normalize:t}=e;return t(["Follows imported! Processing them will take a while."])},accent:e=>{const{normalize:t}=e;return t(["Accent"])},foreground:e=>{const{normalize:t}=e;return t(["Foreground"])},general:e=>{const{normalize:t}=e;return t(["General"])},hide_attachments_in_convo:e=>{const{normalize:t}=e;return t(["Hide attachments in conversations"])},hide_attachments_in_tl:e=>{const{normalize:t}=e;return t(["Hide attachments in timeline"])},hide_media_previews:e=>{const{normalize:t}=e;return t(["Hide media previews"])},hide_muted_posts:e=>{const{normalize:t}=e;return t(["Hide posts of muted users"])},mute_bot_posts:e=>{const{normalize:t}=e;return t(["Mute bot posts"])},hide_bot_indication:e=>{const{normalize:t}=e;return t(["Hide bot indication in posts"])},hide_all_muted_posts:e=>{const{normalize:t}=e;return t(["Hide muted posts"])},max_thumbnails:e=>{const{normalize:t}=e;return t(["Maximum amount of thumbnails per post (empty = no limit)"])},hide_isp:e=>{const{normalize:t}=e;return t(["Hide instance-specific panel"])},hide_shoutbox:e=>{const{normalize:t}=e;return t(["Hide instance shoutbox"])},right_sidebar:e=>{const{normalize:t}=e;return t(["Reverse order of columns"])},always_show_post_button:e=>{const{normalize:t}=e;return t(["Always show floating New Post button"])},hide_wallpaper:e=>{const{normalize:t}=e;return t(["Hide instance wallpaper"])},preload_images:e=>{const{normalize:t}=e;return t(["Preload images"])},use_one_click_nsfw:e=>{const{normalize:t}=e;return t(["Open NSFW attachments with just one click"])},hide_post_stats:e=>{const{normalize:t}=e;return t(["Hide post statistics (e.g. the number of favorites)"])},hide_user_stats:e=>{const{normalize:t}=e;return t(["Hide user statistics (e.g. the number of followers)"])},hide_filtered_statuses:e=>{const{normalize:t}=e;return t(["Hide all filtered posts"])},hide_wordfiltered_statuses:e=>{const{normalize:t}=e;return t(["Hide word-filtered statuses"])},hide_muted_threads:e=>{const{normalize:t}=e;return t(["Hide muted threads"])},import_blocks_from_a_csv_file:e=>{const{normalize:t}=e;return t(["Import blocks from a csv file"])},import_followers_from_a_csv_file:e=>{const{normalize:t}=e;return t(["Import follows from a csv file"])},import_theme:e=>{const{normalize:t}=e;return t(["Load preset"])},inputRadius:e=>{const{normalize:t}=e;return t(["Input fields"])},checkboxRadius:e=>{const{normalize:t}=e;return t(["Checkboxes"])},instance_default:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["(default: ",n(r("value")),")"])},instance_default_simple:e=>{const{normalize:t}=e;return t(["(default)"])},interface:e=>{const{normalize:t}=e;return t(["Interface"])},interfaceLanguage:e=>{const{normalize:t}=e;return t(["Interface language"])},invalid_theme_imported:e=>{const{normalize:t}=e;return t(["The selected file is not a supported Pleroma theme. No changes to your theme were made."])},limited_availability:e=>{const{normalize:t}=e;return t(["Unavailable in your browser"])},links:e=>{const{normalize:t}=e;return t(["Links"])},lock_account_description:e=>{const{normalize:t}=e;return t(["Restrict your account to approved followers only"])},loop_video:e=>{const{normalize:t}=e;return t(["Loop videos"])},loop_video_silent_only:e=>{const{normalize:t}=e;return t(['Loop only videos without sound (i.e. Mastodon\'s "gifs")'])},mutes_tab:e=>{const{normalize:t}=e;return t(["Mutes"])},play_videos_in_modal:e=>{const{normalize:t}=e;return t(["Play videos in a popup frame"])},file_export_import:{backup_restore:e=>{const{normalize:t}=e;return t(["Settings backup"])},backup_settings:e=>{const{normalize:t}=e;return t(["Backup settings to file"])},backup_settings_theme:e=>{const{normalize:t}=e;return t(["Backup settings and theme to file"])},restore_settings:e=>{const{normalize:t}=e;return t(["Restore settings from file"])},errors:{invalid_file:e=>{const{normalize:t}=e;return t(["The selected file is not a supported Pleroma settings backup. No changes were made."])},file_too_new:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Incompatile major version: ",n(r("fileMajor")),", this PleromaFE (settings ver ",n(r("feMajor")),") is too old to handle it"])},file_too_old:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Incompatile major version: ",n(r("fileMajor")),", file version is too old and not supported (min. set. ver. ",n(r("feMajor")),")"])},file_slightly_new:e=>{const{normalize:t}=e;return t(["File minor version is different, some settings might not load"])}}},profile_fields:{label:e=>{const{normalize:t}=e;return t(["Profile metadata"])},add_field:e=>{const{normalize:t}=e;return t(["Add field"])},name:e=>{const{normalize:t}=e;return t(["Label"])},value:e=>{const{normalize:t}=e;return t(["Content"])}},account_privacy:e=>{const{normalize:t}=e;return t(["Privacy"])},use_contain_fit:e=>{const{normalize:t}=e;return t(["Don't crop the attachment in thumbnails"])},name:e=>{const{normalize:t}=e;return t(["Name"])},name_bio:e=>{const{normalize:t}=e;return t(["Name & bio"])},new_email:e=>{const{normalize:t}=e;return t(["New email"])},new_password:e=>{const{normalize:t}=e;return t(["New password"])},posts:e=>{const{normalize:t}=e;return t(["Posts"])},user_profiles:e=>{const{normalize:t}=e;return t(["User Profiles"])},notification_visibility:e=>{const{normalize:t}=e;return t(["Types of notifications to show"])},notification_visibility_follows:e=>{const{normalize:t}=e;return t(["Follows"])},notification_visibility_likes:e=>{const{normalize:t}=e;return t(["Favorites"])},notification_visibility_mentions:e=>{const{normalize:t}=e;return t(["Mentions"])},notification_visibility_repeats:e=>{const{normalize:t}=e;return t(["Repeats"])},notification_visibility_moves:e=>{const{normalize:t}=e;return t(["User Migrates"])},notification_visibility_emoji_reactions:e=>{const{normalize:t}=e;return t(["Reactions"])},notification_visibility_polls:e=>{const{normalize:t}=e;return t(["Ends of polls you voted in"])},no_rich_text_description:e=>{const{normalize:t}=e;return t(["Strip rich text formatting from all posts"])},no_blocks:e=>{const{normalize:t}=e;return t(["No blocks"])},no_mutes:e=>{const{normalize:t}=e;return t(["No mutes"])},hide_favorites_description:e=>{const{normalize:t}=e;return t(["Don't show list of my favorites (people still get notified)"])},hide_follows_description:e=>{const{normalize:t}=e;return t(["Don't show who I'm following"])},hide_followers_description:e=>{const{normalize:t}=e;return t(["Don't show who's following me"])},hide_follows_count_description:e=>{const{normalize:t}=e;return t(["Don't show follow count"])},hide_followers_count_description:e=>{const{normalize:t}=e;return t(["Don't show follower count"])},show_admin_badge:e=>{const{normalize:t}=e;return t(['Show "Admin" badge in my profile'])},show_moderator_badge:e=>{const{normalize:t}=e;return t(['Show "Moderator" badge in my profile'])},nsfw_clickthrough:e=>{const{normalize:t}=e;return t(["Hide sensitive/NSFW media"])},oauth_tokens:e=>{const{normalize:t}=e;return t(["OAuth tokens"])},token:e=>{const{normalize:t}=e;return t(["Token"])},refresh_token:e=>{const{normalize:t}=e;return t(["Refresh token"])},valid_until:e=>{const{normalize:t}=e;return t(["Valid until"])},revoke_token:e=>{const{normalize:t}=e;return t(["Revoke"])},panelRadius:e=>{const{normalize:t}=e;return t(["Panels"])},pause_on_unfocused:e=>{const{normalize:t}=e;return t(["Pause when tab is not focused"])},presets:e=>{const{normalize:t}=e;return t(["Presets"])},profile_background:e=>{const{normalize:t}=e;return t(["Profile background"])},profile_banner:e=>{const{normalize:t}=e;return t(["Profile banner"])},profile_tab:e=>{const{normalize:t}=e;return t(["Profile"])},radii_help:e=>{const{normalize:t}=e;return t(["Set up interface edge rounding (in pixels)"])},replies_in_timeline:e=>{const{normalize:t}=e;return t(["Replies in timeline"])},reply_visibility_all:e=>{const{normalize:t}=e;return t(["Show all replies"])},reply_visibility_following:e=>{const{normalize:t}=e;return t(["Only show replies directed at me or users I'm following"])},reply_visibility_self:e=>{const{normalize:t}=e;return t(["Only show replies directed at me"])},reply_visibility_following_short:e=>{const{normalize:t}=e;return t(["Show replies to my follows"])},reply_visibility_self_short:e=>{const{normalize:t}=e;return t(["Show replies to self only"])},autohide_floating_post_button:e=>{const{normalize:t}=e;return t(["Automatically hide New Post button (mobile)"])},saving_err:e=>{const{normalize:t}=e;return t(["Error saving settings"])},saving_ok:e=>{const{normalize:t}=e;return t(["Settings saved"])},search_user_to_block:e=>{const{normalize:t}=e;return t(["Search whom you want to block"])},search_user_to_mute:e=>{const{normalize:t}=e;return t(["Search whom you want to mute"])},security_tab:e=>{const{normalize:t}=e;return t(["Security"])},scope_copy:e=>{const{normalize:t}=e;return t(["Copy scope when replying (DMs are always copied)"])},mascot:e=>{const{normalize:t}=e;return t(["Mastodon FE Mascot"])},minimal_scopes_mode:e=>{const{normalize:t}=e;return t(["Minimize post scope selection options"])},set_new_avatar:e=>{const{normalize:t}=e;return t(["Set new avatar"])},set_new_mascot:e=>{const{normalize:t}=e;return t(["Set new mascot"])},set_new_profile_background:e=>{const{normalize:t}=e;return t(["Set new profile background"])},set_new_profile_banner:e=>{const{normalize:t}=e;return t(["Set new profile banner"])},reset_avatar:e=>{const{normalize:t}=e;return t(["Reset avatar"])},reset_profile_background:e=>{const{normalize:t}=e;return t(["Reset profile background"])},reset_profile_banner:e=>{const{normalize:t}=e;return t(["Reset profile banner"])},reset_avatar_confirm:e=>{const{normalize:t}=e;return t(["Do you really want to reset the avatar?"])},reset_banner_confirm:e=>{const{normalize:t}=e;return t(["Do you really want to reset the banner?"])},reset_background_confirm:e=>{const{normalize:t}=e;return t(["Do you really want to reset the background?"])},settings:e=>{const{normalize:t}=e;return t(["Settings"])},subject_input_always_show:e=>{const{normalize:t}=e;return t(["Always show subject field"])},subject_line_behavior:e=>{const{normalize:t}=e;return t(["Copy subject when replying"])},subject_line_email:e=>{const{normalize:t}=e;return t(['Like email: "re: subject"'])},subject_line_mastodon:e=>{const{normalize:t}=e;return t(["Like mastodon: copy as is"])},subject_line_noop:e=>{const{normalize:t}=e;return t(["Do not copy"])},conversation_display:e=>{const{normalize:t}=e;return t(["Conversation display style"])},conversation_display_tree:e=>{const{normalize:t}=e;return t(["Tree-style"])},disable_sticky_headers:e=>{const{normalize:t}=e;return t(["Don't stick column headers to top of the screen"])},show_scrollbars:e=>{const{normalize:t}=e;return t(["Show side column's scrollbars"])},third_column_mode:e=>{const{normalize:t}=e;return t(["When there's enough space, show third column containing"])},third_column_mode_none:e=>{const{normalize:t}=e;return t(["Don't show third column at all"])},third_column_mode_notifications:e=>{const{normalize:t}=e;return t(["Notifications column"])},third_column_mode_postform:e=>{const{normalize:t}=e;return t(["Main post form and navigation"])},tree_advanced:e=>{const{normalize:t}=e;return t(["Allow more flexible navigation in tree view"])},tree_fade_ancestors:e=>{const{normalize:t}=e;return t(["Display ancestors of the current status in faint text"])},conversation_display_linear:e=>{const{normalize:t}=e;return t(["Linear-style"])},conversation_other_replies_button:e=>{const{normalize:t}=e;return t(['Show the "other replies" button'])},conversation_other_replies_button_below:e=>{const{normalize:t}=e;return t(["Below statuses"])},conversation_other_replies_button_inside:e=>{const{normalize:t}=e;return t(["Inside statuses"])},max_depth_in_thread:e=>{const{normalize:t}=e;return t(["Maximum number of levels in thread to display by default"])},post_status_content_type:e=>{const{normalize:t}=e;return t(["Post status content type"])},sensitive_by_default:e=>{const{normalize:t}=e;return t(["Mark posts as sensitive by default"])},sensitive_if_subject:e=>{const{normalize:t}=e;return t(["Automatically mark images as sensitive if a subject line is specified"])},render_mfm:e=>{const{normalize:t}=e;return t(["Render Misskey Markdown"])},useStreamingApiWarning:e=>{const{normalize:t}=e;return t(["It's cool use it. If it breaks refresh I guess?"])},stop_gifs:e=>{const{normalize:t}=e;return t(["Pause animated images until you hover on them"])},streaming:e=>{const{normalize:t}=e;return t(["Automatically show new posts when scrolled to the top"])},user_mutes:e=>{const{normalize:t}=e;return t(["Users"])},useStreamingApi:e=>{const{normalize:t}=e;return t(["Receive posts and notifications real-time"])},text:e=>{const{normalize:t}=e;return t(["Text"])},theme:e=>{const{normalize:t}=e;return t(["Theme"])},theme_help:e=>{const{normalize:t}=e;return t(["Use hex color codes (#rrggbb) to customize your color theme."])},theme_help_v2_1:e=>{const{normalize:t}=e;return t(['You can also override certain component\'s colors and opacity by toggling the checkbox, use "Clear all" button to clear all overrides.'])},theme_help_v2_2:e=>{const{normalize:t}=e;return t(["Icons underneath some entries are background/text contrast indicators, hover over for detailed info. Please keep in mind that when using transparency contrast indicators show the worst possible case."])},tooltipRadius:e=>{const{normalize:t}=e;return t(["Tooltips/alerts"])},type_domains_to_mute:e=>{const{normalize:t}=e;return t(["Search domains to mute"])},upload_a_photo:e=>{const{normalize:t}=e;return t(["Upload a photo"])},user_settings:e=>{const{normalize:t}=e;return t(["User Settings"])},values:{false:e=>{const{normalize:t}=e;return t(["no"])},true:e=>{const{normalize:t}=e;return t(["yes"])}},virtual_scrolling:e=>{const{normalize:t}=e;return t(["Optimize timeline rendering"])},use_at_icon:e=>{const{normalize:t}=e;return t(["Display ","@"," symbol as an icon instead of text"])},mention_link_display:e=>{const{normalize:t}=e;return t(["Display mention links"])},mention_link_display_short:e=>{const{normalize:t}=e;return t(["always as short names (e.g. ","@","foo)"])},mention_link_display_full_for_remote:e=>{const{normalize:t}=e;return t(["as full names only for remote users (e.g. ","@","foo","@","example.org)"])},mention_link_display_full:e=>{const{normalize:t}=e;return t(["always as full names (e.g. ","@","foo","@","example.org)"])},mention_link_show_tooltip:e=>{const{normalize:t}=e;return t(["Show full user names as tooltip for remote users"])},mention_link_show_avatar:e=>{const{normalize:t}=e;return t(["Show user avatar beside the link"])},mention_link_fade_domain:e=>{const{normalize:t}=e;return t(["Fade domains (e.g. ","@","example.org in ","@","foo","@","example.org)"])},mention_link_bolden_you:e=>{const{normalize:t}=e;return t(["Highlight mention of you when you are mentioned"])},fun:e=>{const{normalize:t}=e;return t(["Fun"])},greentext:e=>{const{normalize:t}=e;return t(["Meme arrows"])},show_yous:e=>{const{normalize:t}=e;return t(["Show (You)s"])},notifications:e=>{const{normalize:t}=e;return t(["Notifications"])},notification_setting_filters:e=>{const{normalize:t}=e;return t(["Filters"])},notification_setting_block_from_strangers:e=>{const{normalize:t}=e;return t(["Block notifications from users who you do not follow"])},notification_setting_privacy:e=>{const{normalize:t}=e;return t(["Privacy"])},notification_setting_hide_notification_contents:e=>{const{normalize:t}=e;return t(["Hide the sender and contents of push notifications"])},notification_mutes:e=>{const{normalize:t}=e;return t(["To stop receiving notifications from a specific user, use a mute."])},notification_blocks:e=>{const{normalize:t}=e;return t(["Blocking a user stops all notifications as well as unsubscribes them."])},enable_web_push_notifications:e=>{const{normalize:t}=e;return t(["Enable web push notifications"])},more_settings:e=>{const{normalize:t}=e;return t(["More settings"])},style:{switcher:{keep_color:e=>{const{normalize:t}=e;return t(["Keep colors"])},keep_shadows:e=>{const{normalize:t}=e;return t(["Keep shadows"])},keep_opacity:e=>{const{normalize:t}=e;return t(["Keep opacity"])},keep_roundness:e=>{const{normalize:t}=e;return t(["Keep roundness"])},keep_fonts:e=>{const{normalize:t}=e;return t(["Keep fonts"])},save_load_hint:e=>{const{normalize:t}=e;return t(['"Keep" options preserve currently set options when selecting or loading themes, it also stores said options when exporting a theme. When all checkboxes unset, exporting theme will save everything.'])},reset:e=>{const{normalize:t}=e;return t(["Reset"])},clear_all:e=>{const{normalize:t}=e;return t(["Clear all"])},clear_opacity:e=>{const{normalize:t}=e;return t(["Clear opacity"])},load_theme:e=>{const{normalize:t}=e;return t(["Load theme"])},keep_as_is:e=>{const{normalize:t}=e;return t(["Keep as is"])},use_snapshot:e=>{const{normalize:t}=e;return t(["Old version"])},use_source:e=>{const{normalize:t}=e;return t(["New version"])},help:{upgraded_from_v2:e=>{const{normalize:t}=e;return t(["PleromaFE has been upgraded, theme could look a little bit different than you remember."])},v2_imported:e=>{const{normalize:t}=e;return t(["File you imported was made for older FE. We try to maximize compatibility but there still could be inconsistencies."])},future_version_imported:e=>{const{normalize:t}=e;return t(["File you imported was made in newer version of FE."])},older_version_imported:e=>{const{normalize:t}=e;return t(["File you imported was made in older version of FE."])},snapshot_present:e=>{const{normalize:t}=e;return t(["Theme snapshot is loaded, so all values are overriden. You can load theme's actual data instead."])},snapshot_missing:e=>{const{normalize:t}=e;return t(["No theme snapshot was in the file so it could look different than originally envisioned."])},fe_upgraded:e=>{const{normalize:t}=e;return t(["PleromaFE's theme engine upgraded after version update."])},fe_downgraded:e=>{const{normalize:t}=e;return t(["PleromaFE's version rolled back."])},migration_snapshot_ok:e=>{const{normalize:t}=e;return t(["Just to be safe, theme snapshot loaded. You can try loading theme data."])},migration_napshot_gone:e=>{const{normalize:t}=e;return t(["For whatever reason snapshot was missing, some stuff could look different than you remember."])},snapshot_source_mismatch:e=>{const{normalize:t}=e;return t(["Versions conflict: most likely FE was rolled back and updated again, if you changed theme using older version of FE you most likely want to use old version, otherwise use new version."])}}},common:{color:e=>{const{normalize:t}=e;return t(["Color"])},opacity:e=>{const{normalize:t}=e;return t(["Opacity"])},contrast:{hint:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Contrast ratio is ",n(r("ratio")),", it ",n(r("level"))," ",n(r("context"))])},level:{aa:e=>{const{normalize:t}=e;return t(["meets Level AA guideline (minimal)"])},aaa:e=>{const{normalize:t}=e;return t(["meets Level AAA guideline (recommended)"])},bad:e=>{const{normalize:t}=e;return t(["doesn't meet any accessibility guidelines"])}},context:{"18pt":e=>{const{normalize:t}=e;return t(["for large (18pt+) text"])},text:e=>{const{normalize:t}=e;return t(["for text"])}}}},common_colors:{_tab_label:e=>{const{normalize:t}=e;return t(["Common"])},main:e=>{const{normalize:t}=e;return t(["Common colors"])},foreground_hint:e=>{const{normalize:t}=e;return t(['See "Advanced" tab for more detailed control'])},rgbo:e=>{const{normalize:t}=e;return t(["Icons, accents, badges"])}},advanced_colors:{_tab_label:e=>{const{normalize:t}=e;return t(["Advanced"])},alert:e=>{const{normalize:t}=e;return t(["Alert background"])},alert_error:e=>{const{normalize:t}=e;return t(["Error"])},alert_warning:e=>{const{normalize:t}=e;return t(["Warning"])},alert_neutral:e=>{const{normalize:t}=e;return t(["Neutral"])},post:e=>{const{normalize:t}=e;return t(["Posts/User bios"])},badge:e=>{const{normalize:t}=e;return t(["Badge background"])},popover:e=>{const{normalize:t}=e;return t(["Tooltips, menus, popovers"])},badge_notification:e=>{const{normalize:t}=e;return t(["Notification"])},panel_header:e=>{const{normalize:t}=e;return t(["Panel header"])},top_bar:e=>{const{normalize:t}=e;return t(["Top bar"])},borders:e=>{const{normalize:t}=e;return t(["Borders"])},buttons:e=>{const{normalize:t}=e;return t(["Buttons"])},inputs:e=>{const{normalize:t}=e;return t(["Input fields"])},faint_text:e=>{const{normalize:t}=e;return t(["Faded text"])},underlay:e=>{const{normalize:t}=e;return t(["Underlay"])},wallpaper:e=>{const{normalize:t}=e;return t(["Wallpaper"])},poll:e=>{const{normalize:t}=e;return t(["Poll graph"])},icons:e=>{const{normalize:t}=e;return t(["Icons"])},highlight:e=>{const{normalize:t}=e;return t(["Highlighted elements"])},pressed:e=>{const{normalize:t}=e;return t(["Pressed"])},selectedPost:e=>{const{normalize:t}=e;return t(["Selected post"])},selectedMenu:e=>{const{normalize:t}=e;return t(["Selected menu item"])},disabled:e=>{const{normalize:t}=e;return t(["Disabled"])},toggled:e=>{const{normalize:t}=e;return t(["Toggled"])},tabs:e=>{const{normalize:t}=e;return t(["Tabs"])},chat:{incoming:e=>{const{normalize:t}=e;return t(["Incoming"])},outgoing:e=>{const{normalize:t}=e;return t(["Outgoing"])},border:e=>{const{normalize:t}=e;return t(["Border"])}}},radii:{_tab_label:e=>{const{normalize:t}=e;return t(["Roundness"])}},shadows:{_tab_label:e=>{const{normalize:t}=e;return t(["Shadow and lighting"])},component:e=>{const{normalize:t}=e;return t(["Component"])},override:e=>{const{normalize:t}=e;return t(["Override"])},shadow_id:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Shadow #",n(r("value"))])},blur:e=>{const{normalize:t}=e;return t(["Blur"])},spread:e=>{const{normalize:t}=e;return t(["Spread"])},inset:e=>{const{normalize:t}=e;return t(["Inset"])},hintV3:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["For shadows you can also use the ",n(r(0))," notation to use other color slot."])},filter_hint:{always_drop_shadow:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["Warning, this shadow always uses ",n(r(0))," when browser supports it."])},drop_shadow_syntax:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0))," does not support ",n(r(1))," parameter and ",n(r(2))," keyword."])},avatar_inset:e=>{const{normalize:t}=e;return t(["Please note that combining both inset and non-inset shadows on avatars might give unexpected results with transparent avatars."])},spread_zero:e=>{const{normalize:t}=e;return t(["Shadows with spread > 0 will appear as if it was set to zero"])},inset_classic:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["Inset shadows will be using ",n(r(0))])}},components:{panel:e=>{const{normalize:t}=e;return t(["Panel"])},panelHeader:e=>{const{normalize:t}=e;return t(["Panel header"])},topBar:e=>{const{normalize:t}=e;return t(["Top bar"])},avatar:e=>{const{normalize:t}=e;return t(["User avatar (in profile view)"])},avatarStatus:e=>{const{normalize:t}=e;return t(["User avatar (in post display)"])},popup:e=>{const{normalize:t}=e;return t(["Popups and tooltips"])},button:e=>{const{normalize:t}=e;return t(["Button"])},buttonHover:e=>{const{normalize:t}=e;return t(["Button (hover)"])},buttonPressed:e=>{const{normalize:t}=e;return t(["Button (pressed)"])},buttonPressedHover:e=>{const{normalize:t}=e;return t(["Button (pressed+hover)"])},input:e=>{const{normalize:t}=e;return t(["Input field"])}}},fonts:{_tab_label:e=>{const{normalize:t}=e;return t(["Fonts"])},help:e=>{const{normalize:t}=e;return t(['Select font to use for elements of UI. For "custom" you have to enter exact font name as it appears in system.'])},components:{interface:e=>{const{normalize:t}=e;return t(["Interface"])},input:e=>{const{normalize:t}=e;return t(["Input fields"])},post:e=>{const{normalize:t}=e;return t(["Post text"])},postCode:e=>{const{normalize:t}=e;return t(["Monospaced text in a post (rich text)"])}},family:e=>{const{normalize:t}=e;return t(["Font name"])},size:e=>{const{normalize:t}=e;return t(["Size (in px)"])},weight:e=>{const{normalize:t}=e;return t(["Weight (boldness)"])},custom:e=>{const{normalize:t}=e;return t(["Custom"])}},preview:{header:e=>{const{normalize:t}=e;return t(["Preview"])},content:e=>{const{normalize:t}=e;return t(["Content"])},error:e=>{const{normalize:t}=e;return t(["Example error"])},button:e=>{const{normalize:t}=e;return t(["Button"])},text:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["A bunch of more ",n(r(0))," and ",n(r(1))])},mono:e=>{const{normalize:t}=e;return t(["content"])},input:e=>{const{normalize:t}=e;return t(["Just landed in L.A."])},faint_link:e=>{const{normalize:t}=e;return t(["helpful manual"])},fine_print:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["Read our ",n(r(0))," to learn nothing useful!"])},header_faint:e=>{const{normalize:t}=e;return t(["This is fine"])},checkbox:e=>{const{normalize:t}=e;return t(["I have skimmed over terms and conditions"])},link:e=>{const{normalize:t}=e;return t(["a nice lil' link"])}}},version:{title:e=>{const{normalize:t}=e;return t(["Version"])},backend_version:e=>{const{normalize:t}=e;return t(["Backend version"])},frontend_version:e=>{const{normalize:t}=e;return t(["Frontend version"])}}},time:{day:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0))," day"])},days:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0))," days"])},day_short:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0)),"d"])},days_short:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0)),"d"])},hour:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0))," hour"])},hours:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0))," hours"])},hour_short:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0)),"h"])},hours_short:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0)),"h"])},in_future:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["in ",n(r(0))])},in_past:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0))," ago"])},minute:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0))," minute"])},minutes:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0))," minutes"])},minute_short:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0)),"min"])},minutes_short:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0)),"min"])},month:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0))," month"])},months:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0))," months"])},month_short:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0)),"mo"])},months_short:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0)),"mo"])},now:e=>{const{normalize:t}=e;return t(["just now"])},now_short:e=>{const{normalize:t}=e;return t(["now"])},second:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0))," second"])},seconds:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0))," seconds"])},second_short:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0)),"s"])},seconds_short:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0)),"s"])},week:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0))," week"])},weeks:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0))," weeks"])},week_short:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0)),"w"])},weeks_short:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0)),"w"])},year:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0))," year"])},years:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0))," years"])},year_short:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0)),"y"])},years_short:e=>{const{normalize:t,interpolate:n,list:r}=e;return t([n(r(0)),"y"])}},timeline:{collapse:e=>{const{normalize:t}=e;return t(["Collapse"])},conversation:e=>{const{normalize:t}=e;return t(["Conversation"])},error:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["Error fetching timeline: ",n(r(0))])},load_older:e=>{const{normalize:t}=e;return t(["Load older statuses"])},no_retweet_hint:e=>{const{normalize:t}=e;return t(["Post is marked as followers-only or direct and cannot be repeated"])},repeated:e=>{const{normalize:t}=e;return t(["repeated"])},show_new:e=>{const{normalize:t}=e;return t(["Show new"])},reload:e=>{const{normalize:t}=e;return t(["Reload"])},up_to_date:e=>{const{normalize:t}=e;return t(["Up-to-date"])},no_more_statuses:e=>{const{normalize:t}=e;return t(["No more statuses"])},no_statuses:e=>{const{normalize:t}=e;return t(["No statuses"])},socket_reconnected:e=>{const{normalize:t}=e;return t(["Realtime connection established"])},socket_broke:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["Realtime connection lost: CloseEvent code ",n(r(0))])}},status:{favorites:e=>{const{normalize:t}=e;return t(["Favorites"])},repeats:e=>{const{normalize:t}=e;return t(["Repeats"])},delete:e=>{const{normalize:t}=e;return t(["Delete status"])},pin:e=>{const{normalize:t}=e;return t(["Pin on profile"])},unpin:e=>{const{normalize:t}=e;return t(["Unpin from profile"])},pinned:e=>{const{normalize:t}=e;return t(["Pinned"])},bookmark:e=>{const{normalize:t}=e;return t(["Bookmark"])},unbookmark:e=>{const{normalize:t}=e;return t(["Unbookmark"])},delete_confirm:e=>{const{normalize:t}=e;return t(["Do you really want to delete this status?"])},reply_to:e=>{const{normalize:t}=e;return t(["Reply to"])},mentions:e=>{const{normalize:t}=e;return t(["Mentions"])},replies_list:e=>{const{normalize:t}=e;return t(["Replies:"])},replies_list_with_others:e=>{const{normalize:t,interpolate:n,named:r,plural:i}=e;return i([t(["Replies (+",n(r("numReplies"))," other):"]),t(["Replies (+",n(r("numReplies"))," others):"])])},mute_conversation:e=>{const{normalize:t}=e;return t(["Mute conversation"])},unmute_conversation:e=>{const{normalize:t}=e;return t(["Unmute conversation"])},status_unavailable:e=>{const{normalize:t}=e;return t(["Status unavailable"])},copy_link:e=>{const{normalize:t}=e;return t(["Copy link to status"])},external_source:e=>{const{normalize:t}=e;return t(["External source"])},thread_muted:e=>{const{normalize:t}=e;return t(["Thread muted"])},thread_muted_and_words:e=>{const{normalize:t}=e;return t([", has words:"])},show_full_subject:e=>{const{normalize:t}=e;return t(["Show full subject"])},hide_full_subject:e=>{const{normalize:t}=e;return t(["Hide full subject"])},show_content:e=>{const{normalize:t}=e;return t(["Show content"])},hide_content:e=>{const{normalize:t}=e;return t(["Hide content"])},status_deleted:e=>{const{normalize:t}=e;return t(["This post was deleted"])},nsfw:e=>{const{normalize:t}=e;return t(["NSFW"])},expand:e=>{const{normalize:t}=e;return t(["Expand"])},you:e=>{const{normalize:t}=e;return t(["(You)"])},plus_more:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["+",n(r("number"))," more"])},many_attachments:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Post has ",n(r("number"))," attachment(s)"])},collapse_attachments:e=>{const{normalize:t}=e;return t(["Collapse attachments"])},show_all_attachments:e=>{const{normalize:t}=e;return t(["Show all attachments"])},show_attachment_in_modal:e=>{const{normalize:t}=e;return t(["Show in media modal"])},show_attachment_description:e=>{const{normalize:t}=e;return t(["Preview description (open attachment for full description)"])},hide_attachment:e=>{const{normalize:t}=e;return t(["Hide attachment"])},remove_attachment:e=>{const{normalize:t}=e;return t(["Remove attachment"])},attachment_stop_flash:e=>{const{normalize:t}=e;return t(["Stop Flash player"])},move_up:e=>{const{normalize:t}=e;return t(["Shift attachment left"])},move_down:e=>{const{normalize:t}=e;return t(["Shift attachment right"])},open_gallery:e=>{const{normalize:t}=e;return t(["Open gallery"])},thread_hide:e=>{const{normalize:t}=e;return t(["Hide this thread"])},thread_show:e=>{const{normalize:t}=e;return t(["Show this thread"])},thread_show_full:e=>{const{normalize:t,interpolate:n,named:r,plural:i}=e;return i([t(["Show everything under this thread (",n(r("numStatus"))," status in total, max depth ",n(r("depth")),")"]),t(["Show everything under this thread (",n(r("numStatus"))," statuses in total, max depth ",n(r("depth")),")"])])},thread_show_full_with_icon:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("icon"))," ",n(r("text"))])},thread_follow:e=>{const{normalize:t,interpolate:n,named:r,plural:i}=e;return i([t(["See the remaining part of this thread (",n(r("numStatus"))," status in total)"]),t(["See the remaining part of this thread (",n(r("numStatus"))," statuses in total)"])])},thread_follow_with_icon:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("icon"))," ",n(r("text"))])},ancestor_follow:e=>{const{normalize:t,interpolate:n,named:r,plural:i}=e;return i([t(["See ",n(r("numReplies"))," other reply under this status"]),t(["See ",n(r("numReplies"))," other replies under this status"])])},ancestor_follow_with_icon:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("icon"))," ",n(r("text"))])},show_all_conversation_with_icon:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("icon"))," ",n(r("text"))])},show_all_conversation:e=>{const{normalize:t,interpolate:n,named:r,plural:i}=e;return i([t(["Show full conversation (",n(r("numStatus"))," other status)"]),t(["Show full conversation (",n(r("numStatus"))," other statuses)"])])},show_only_conversation_under_this:e=>{const{normalize:t}=e;return t(["Only show replies to this status"])}},user_card:{approve:e=>{const{normalize:t}=e;return t(["Approve"])},block:e=>{const{normalize:t}=e;return t(["Block"])},blocked:e=>{const{normalize:t}=e;return t(["Blocked!"])},deactivated:e=>{const{normalize:t}=e;return t(["Deactivated"])},deny:e=>{const{normalize:t}=e;return t(["Deny"])},edit_profile:e=>{const{normalize:t}=e;return t(["Edit profile"])},favorites:e=>{const{normalize:t}=e;return t(["Favorites"])},follow:e=>{const{normalize:t}=e;return t(["Follow"])},follow_cancel:e=>{const{normalize:t}=e;return t(["Cancel request"])},follow_sent:e=>{const{normalize:t}=e;return t(["Request sent!"])},follow_progress:e=>{const{normalize:t}=e;return t(["Requestingâ€¦"])},follow_unfollow:e=>{const{normalize:t}=e;return t(["Unfollow"])},followees:e=>{const{normalize:t}=e;return t(["Following"])},followers:e=>{const{normalize:t}=e;return t(["Followers"])},following:e=>{const{normalize:t}=e;return t(["Following!"])},follows_you:e=>{const{normalize:t}=e;return t(["Follows you!"])},hidden:e=>{const{normalize:t}=e;return t(["Hidden"])},its_you:e=>{const{normalize:t}=e;return t(["It's you!"])},media:e=>{const{normalize:t}=e;return t(["Media"])},mention:e=>{const{normalize:t}=e;return t(["Mention"])},message:e=>{const{normalize:t}=e;return t(["Message"])},mute:e=>{const{normalize:t}=e;return t(["Mute"])},muted:e=>{const{normalize:t}=e;return t(["Muted"])},per_day:e=>{const{normalize:t}=e;return t(["per day"])},remote_follow:e=>{const{normalize:t}=e;return t(["Remote follow"])},report:e=>{const{normalize:t}=e;return t(["Report"])},statuses:e=>{const{normalize:t}=e;return t(["Statuses"])},subscribe:e=>{const{normalize:t}=e;return t(["Subscribe"])},unsubscribe:e=>{const{normalize:t}=e;return t(["Unsubscribe"])},unblock:e=>{const{normalize:t}=e;return t(["Unblock"])},unblock_progress:e=>{const{normalize:t}=e;return t(["Unblockingâ€¦"])},block_progress:e=>{const{normalize:t}=e;return t(["Blockingâ€¦"])},unmute:e=>{const{normalize:t}=e;return t(["Unmute"])},unmute_progress:e=>{const{normalize:t}=e;return t(["Unmutingâ€¦"])},mute_progress:e=>{const{normalize:t}=e;return t(["Mutingâ€¦"])},hide_repeats:e=>{const{normalize:t}=e;return t(["Hide repeats"])},show_repeats:e=>{const{normalize:t}=e;return t(["Show repeats"])},domain_muted:e=>{const{normalize:t}=e;return t(["Unblock domain"])},mute_domain:e=>{const{normalize:t}=e;return t(["Block domain"])},bot:e=>{const{normalize:t}=e;return t(["Bot"])},admin_menu:{moderation:e=>{const{normalize:t}=e;return t(["Moderation"])},grant_admin:e=>{const{normalize:t}=e;return t(["Grant Admin"])},revoke_admin:e=>{const{normalize:t}=e;return t(["Revoke Admin"])},grant_moderator:e=>{const{normalize:t}=e;return t(["Grant Moderator"])},revoke_moderator:e=>{const{normalize:t}=e;return t(["Revoke Moderator"])},activate_account:e=>{const{normalize:t}=e;return t(["Activate account"])},deactivate_account:e=>{const{normalize:t}=e;return t(["Deactivate account"])},delete_account:e=>{const{normalize:t}=e;return t(["Delete account"])},force_nsfw:e=>{const{normalize:t}=e;return t(["Mark all posts as NSFW"])},strip_media:e=>{const{normalize:t}=e;return t(["Remove media from posts"])},force_unlisted:e=>{const{normalize:t}=e;return t(["Force posts to be unlisted"])},sandbox:e=>{const{normalize:t}=e;return t(["Force posts to be followers-only"])},disable_remote_subscription:e=>{const{normalize:t}=e;return t(["Disallow following user from remote instances"])},disable_any_subscription:e=>{const{normalize:t}=e;return t(["Disallow following user at all"])},quarantine:e=>{const{normalize:t}=e;return t(["Disallow user posts from federating"])},delete_user:e=>{const{normalize:t}=e;return t(["Delete user"])},delete_user_confirmation:e=>{const{normalize:t}=e;return t(["Are you absolutely sure? This action cannot be undone."])}},highlight:{disabled:e=>{const{normalize:t}=e;return t(["No highlight"])},solid:e=>{const{normalize:t}=e;return t(["Solid bg"])},striped:e=>{const{normalize:t}=e;return t(["Striped bg"])},side:e=>{const{normalize:t}=e;return t(["Side stripe"])}}},user_profile:{timeline_title:e=>{const{normalize:t}=e;return t(["User timeline"])},profile_does_not_exist:e=>{const{normalize:t}=e;return t(["Sorry, this profile does not exist."])},profile_loading_error:e=>{const{normalize:t}=e;return t(["Sorry, there was an error loading this profile."])}},user_reporting:{title:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["Reporting ",n(r(0))])},add_comment_description:e=>{const{normalize:t}=e;return t(["The report will be sent to your instance moderators. You can provide an explanation of why you are reporting this account below:"])},additional_comments:e=>{const{normalize:t}=e;return t(["Additional comments"])},forward_description:e=>{const{normalize:t}=e;return t(["The account is from another server. Send a copy of the report there as well?"])},forward_to:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["Forward to ",n(r(0))])},submit:e=>{const{normalize:t}=e;return t(["Submit"])},generic_error:e=>{const{normalize:t}=e;return t(["An error occurred while processing your request."])}},who_to_follow:{more:e=>{const{normalize:t}=e;return t(["More"])},who_to_follow:e=>{const{normalize:t}=e;return t(["Who to follow"])}},tool_tip:{media_upload:e=>{const{normalize:t}=e;return t(["Upload media"])},repeat:e=>{const{normalize:t}=e;return t(["Repeat"])},reply:e=>{const{normalize:t}=e;return t(["Reply"])},favorite:e=>{const{normalize:t}=e;return t(["Favorite"])},add_reaction:e=>{const{normalize:t}=e;return t(["Add Reaction"])},user_settings:e=>{const{normalize:t}=e;return t(["User Settings"])},accept_follow_request:e=>{const{normalize:t}=e;return t(["Accept follow request"])},reject_follow_request:e=>{const{normalize:t}=e;return t(["Reject follow request"])},bookmark:e=>{const{normalize:t}=e;return t(["Bookmark"])}},upload:{error:{base:e=>{const{normalize:t}=e;return t(["Upload failed."])},message:e=>{const{normalize:t,interpolate:n,list:r}=e;return t(["Upload failed: ",n(r(0))])},file_too_big:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["File too big [",n(r("filesize")),n(r("filesizeunit"))," / ",n(r("allowedsize")),n(r("allowedsizeunit")),"]"])},default:e=>{const{normalize:t}=e;return t(["Try again later"])}},file_size_units:{B:e=>{const{normalize:t}=e;return t(["B"])},KiB:e=>{const{normalize:t}=e;return t(["KiB"])},MiB:e=>{const{normalize:t}=e;return t(["MiB"])},GiB:e=>{const{normalize:t}=e;return t(["GiB"])},TiB:e=>{const{normalize:t}=e;return t(["TiB"])}}},search:{people:e=>{const{normalize:t}=e;return t(["People"])},hashtags:e=>{const{normalize:t}=e;return t(["Hashtags"])},person_talking:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("count"))," person talking"])},people_talking:e=>{const{normalize:t,interpolate:n,named:r}=e;return t([n(r("count"))," people talking"])},no_results:e=>{const{normalize:t}=e;return t(["No results"])}},password_reset:{forgot_password:e=>{const{normalize:t}=e;return t(["Forgot password?"])},password_reset:e=>{const{normalize:t}=e;return t(["Password reset"])},instruction:e=>{const{normalize:t}=e;return t(["Enter your email address or username. We will send you a link to reset your password."])},placeholder:e=>{const{normalize:t}=e;return t(["Your email or username"])},check_email:e=>{const{normalize:t}=e;return t(["Check your email for a link to reset your password."])},return_home:e=>{const{normalize:t}=e;return t(["Return to the home page"])},too_many_requests:e=>{const{normalize:t}=e;return t(["You have reached the limit of attempts, try again later."])},password_reset_disabled:e=>{const{normalize:t}=e;return t(["Password reset is disabled. Please contact your instance administrator."])},password_reset_required:e=>{const{normalize:t}=e;return t(["You must reset your password to log in."])},password_reset_required_but_mailer_is_disabled:e=>{const{normalize:t}=e;return t(["You must reset your password, but password reset is disabled. Please contact your instance administrator."])}},chats:{you:e=>{const{normalize:t}=e;return t(["You:"])},message_user:e=>{const{normalize:t,interpolate:n,named:r}=e;return t(["Message ",n(r("nickname"))])},delete:e=>{const{normalize:t}=e;return t(["Delete"])},chats:e=>{const{normalize:t}=e;return t(["Chats"])},new:e=>{const{normalize:t}=e;return t(["New Chat"])},empty_message_error:e=>{const{normalize:t}=e;return t(["Cannot post empty message"])},more:e=>{const{normalize:t}=e;return t(["More"])},delete_confirm:e=>{const{normalize:t}=e;return t(["Do you really want to delete this message?"])},error_loading_chat:e=>{const{normalize:t}=e;return t(["Something went wrong when loading the chat."])},error_sending_message:e=>{const{normalize:t}=e;return t(["Something went wrong when sending the message."])},empty_chat_list_placeholder:e=>{const{normalize:t}=e;return t(["You don't have any chats yet. Start a new chat!"])}},file_type:{audio:e=>{const{normalize:t}=e;return t(["Audio"])},video:e=>{const{normalize:t}=e;return t(["Video"])},image:e=>{const{normalize:t}=e;return t(["Image"])},file:e=>{const{normalize:t}=e;return t(["File"])}},display_date:{today:e=>{const{normalize:t}=e;return t(["Today"])}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(223)},,function(e,t,n){"use strict";n(225)},function(e,t,n){"use strict";n(226)},function(e,t,n){"use strict";n(227)},function(e,t,n){"use strict";n(228)},function(e,t,n){"use strict";n(229)},function(e,t,n){"use strict";n(230)},function(e,t,n){"use strict";n(231)},function(e,t,n){"use strict";n(232)},function(e,t,n){"use strict";n(233)},function(e,t,n){"use strict";n(234)},function(e,t,n){"use strict";n(235)},,function(e,t,n){"use strict";n(236)},function(e,t,n){"use strict";n(237)},function(e,t,n){"use strict";n(238)},function(e,t,n){"use strict";n(239)},function(e,t,n){},function(e,t,n){"use strict";n(240)},,,,function(e,t,n){"use strict";n(242)},function(e,t,n){"use strict";n(243)},function(e,t,n){"use strict";n(244)},function(e,t,n){"use strict";n(245)},function(e,t,n){"use strict";n(246)},function(e,t,n){"use strict";n(247)},function(e,t,n){"use strict";n(248)},function(e,t,n){"use strict";n(249)},function(e,t,n){"use strict";n(250)},function(e,t,n){"use strict";n(251)},function(e,t,n){"use strict";n(252)},function(e,t,n){"use strict";n(253)},function(e,t,n){"use strict";n(254)},,,,function(e,t,n){"use strict";n(256)},function(e,t,n){"use strict";n(257)},function(e,t,n){"use strict";n(258)},function(e,t,n){"use strict";n(259)},function(e,t,n){"use strict";n(260)},function(e,t,n){"use strict";n(261)},function(e,t,n){"use strict";n(262)},function(e,t,n){"use strict";n(263)},function(e,t,n){"use strict";n(264)},function(e,t,n){"use strict";n(265)},function(e,t,n){"use strict";n(266)},function(e,t,n){"use strict";n(267)},function(e,t,n){"use strict";n(268)},function(e,t,n){"use strict";n(269)},function(e,t,n){"use strict";n(270)},function(e,t,n){"use strict";n(271)},function(e,t,n){"use strict";n(272)},function(e,t,n){"use strict";n(273)},function(e,t,n){"use strict";n(274)},function(e,t,n){"use strict";n(275)},function(e,t,n){"use strict";n(276)},function(e,t,n){"use strict";n(277)},function(e,t,n){"use strict";n(278)},function(e,t,n){"use strict";n(279)},function(e,t,n){"use strict";n(280)},function(e,t,n){"use strict";n(281)},function(e,t,n){"use strict";n(282)},function(e,t,n){"use strict";n(283)},function(e,t,n){"use strict";n(284)},function(e,t,n){"use strict";n(285)},,,function(e,t,n){"use strict";n(287)},function(e,t,n){"use strict";n(288)},function(e,t,n){"use strict";n(289)},function(e,t,n){"use strict";n(290)},function(e,t,n){"use strict";n(291)},function(e,t,n){},function(e,t,n){"use strict";n(292)},function(e,t,n){"use strict";n(293)},function(e,t,n){"use strict";n(294)},function(e,t,n){"use strict";n(295)},function(e,t,n){"use strict";n(296)},function(e,t,n){"use strict";n(297)},function(e,t,n){"use strict";n(298)},function(e,t,n){"use strict";n(299)},function(e,t,n){},function(e,t,n){"use strict";n(302)},function(e,t,n){"use strict";n(303)},,function(e,t,n){"use strict";n(304)},function(e,t,n){"use strict";n(305)},function(e,t,n){"use strict";n(306)},function(e,t,n){"use strict";n(307)},function(e,t,n){"use strict";n(308)},function(e,t,n){"use strict";n(309)},function(e,t,n){"use strict";n.r(t);var r=n(13),i=n.n(r),o=n(10),s=n.n(o),a=n(8),c=(n(348),n(311));try{new EventTarget}catch(e){window.EventTarget=c.a}var l={state:{settingsModalState:"hidden",settingsModalLoaded:!1,settingsModalTargetTab:null,settings:{currentSaveStateNotice:null,noticeClearTimeout:null,notificationPermission:null},browserSupport:{cssFilter:window.CSS&&window.CSS.supports&&(window.CSS.supports("filter","drop-shadow(0 0)")||window.CSS.supports("-webkit-filter","drop-shadow(0 0)"))},layoutType:"normal",globalNotices:[],layoutHeight:0,lastTimeline:null},mutations:{settingsSaved:function(e,t){var n=t.success,r=t.error;n?(e.noticeClearTimeout&&clearTimeout(e.noticeClearTimeout),e.settings.currentSaveStateNotice={error:!1,data:n},e.settings.noticeClearTimeout=setTimeout((function(){return delete e.settings.currentSaveStateNotice}),2e3)):e.settings.currentSaveStateNotice={error:!0,errorData:r}},setNotificationPermission:function(e,t){e.notificationPermission=t},setLayoutType:function(e,t){e.layoutType=t},closeSettingsModal:function(e){e.settingsModalState="hidden"},togglePeekSettingsModal:function(e){switch(e.settingsModalState){case"minimized":return void(e.settingsModalState="visible");case"visible":return void(e.settingsModalState="minimized");default:throw new Error("Illegal minimization state of settings modal")}},openSettingsModal:function(e){e.settingsModalState="visible",e.settingsModalLoaded||(e.settingsModalLoaded=!0)},setSettingsModalTargetTab:function(e,t){e.settingsModalTargetTab=t},pushGlobalNotice:function(e,t){e.globalNotices.push(t)},removeGlobalNotice:function(e,t){e.globalNotices=e.globalNotices.filter((function(e){return e!==t}))},setLayoutHeight:function(e,t){e.layoutHeight=t},setLayoutWidth:function(e,t){e.layoutWidth=t},setLastTimeline:function(e,t){e.lastTimeline=t}},actions:{setPageTitle:function(e){var t=e.rootState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";document.title="".concat(n," ").concat(t.instance.name)},settingsSaved:function(e,t){var n=e.commit;e.dispatch;n("settingsSaved",{success:t.success,error:t.error})},setNotificationPermission:function(e,t){(0,e.commit)("setNotificationPermission",t)},closeSettingsModal:function(e){(0,e.commit)("closeSettingsModal")},openSettingsModal:function(e){(0,e.commit)("openSettingsModal")},togglePeekSettingsModal:function(e){(0,e.commit)("togglePeekSettingsModal")},clearSettingsModalTargetTab:function(e){(0,e.commit)("setSettingsModalTargetTab",null)},openSettingsModalTab:function(e,t){var n=e.commit;n("setSettingsModalTargetTab",t),n("openSettingsModal")},pushGlobalNotice:function(e,t){var n=e.commit,r=e.dispatch,i=e.state,o=t.messageKey,s=t.messageArgs,a=void 0===s?{}:s,c=t.level,l=void 0===c?"error":c,u=t.timeout,d=void 0===u?0:u;n("pushGlobalNotice",{messageKey:o,messageArgs:a,level:l});var p=i.globalNotices[i.globalNotices.length-1];return d&&setTimeout((function(){return r("removeGlobalNotice",p)}),d),p},removeGlobalNotice:function(e,t){(0,e.commit)("removeGlobalNotice",t)},setLayoutHeight:function(e,t){(0,e.commit)("setLayoutHeight",t)},setLayoutWidth:function(e,t){var n=e.commit,r=e.state,i=e.rootGetters,o=e.rootState,s=t;void 0!==t?n("setLayoutWidth",t):s=r.layoutWidth;var a=s<=800?"mobile":"normal";"none"!==i.mergedConfig.thirdColumnMode&&o.users.currentUser?n("setLayoutType",s>=1300?"wide":a):n("setLayoutType",a)},setLastTimeline:function(e,t){(0,e.commit)("setLastTimeline",t)}}},u=n(12),d=n.n(u),p=n(5),h=n.n(p),b=n(11),m=n.n(b),f=n(43),O=n(54),j=n(15),g=n(121);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w={state:{name:"Pleroma FE",registrationOpen:!0,server:"http://localhost:4040/",textlimit:5e3,themeData:void 0,vapidPublicKey:void 0,alwaysShowSubjectInput:!0,defaultAvatar:"/images/avi.png",defaultBanner:"/images/banner.png",background:"/static/aurora_borealis.jpg",collapseMessageWithSubject:!1,greentext:!1,useAtIcon:!1,mentionLinkDisplay:"short",mentionLinkShowTooltip:!0,mentionLinkShowAvatar:!1,mentionLinkFadeDomain:!0,mentionLinkShowYous:!1,mentionLinkBoldenYou:!0,hideFilteredStatuses:!1,hideMutedPosts:!1,hideMutedThreads:!0,hideWordFilteredPosts:!1,hidePostStats:!1,hideBotIndication:!1,hideSitename:!1,hideUserStats:!1,muteBotStatuses:!1,loginMethod:"password",logo:"/static/logo.svg",logoMargin:".2em",logoMask:!0,logoLeft:!1,minimalScopesMode:!1,nsfwCensorImage:void 0,postContentType:"text/plain",redirectRootLogin:"/main/friends",redirectRootNoLogin:"/main/all",scopeCopy:!0,showFeaturesPanel:!0,showInstanceSpecificPanel:!1,sidebarRight:!1,subjectLineBehavior:"email",theme:"pleroma-dark",virtualScrolling:!0,sensitiveByDefault:!1,sensitiveIfSubject:!1,renderMisskeyMarkdown:!1,conversationDisplay:"linear",conversationTreeAdvanced:!1,conversationOtherRepliesButton:"below",conversationTreeFadeAncestors:!1,maxDepthInThread:6,customEmoji:[],customEmojiFetched:!1,emoji:[],emojiFetched:!1,pleromaBackend:!0,postFormats:[],restrictedNicknames:[],safeDM:!0,knownDomains:[],shoutAvailable:!1,pleromaChatMessagesAvailable:!1,gopherAvailable:!1,mediaProxyAvailable:!1,suggestionsEnabled:!1,suggestionsWeb:"",instanceSpecificPanelContent:"",tos:"",backendVersion:"",frontendVersion:"",pollsAvailable:!1,pollLimits:{max_options:4,max_option_chars:255,min_expiration:60,max_expiration:86400}},mutations:{setInstanceOption:function(e,t){var n=t.name,r=t.value;void 0!==r&&(e[n]=r)},setKnownDomains:function(e,t){e.knownDomains=t}},getters:{instanceDefaultConfig:function(e){return g.c.map((function(t){return[t,e[t]]})).reduce((function(e,t){var n=m()(t,2),r=n[0],i=n[1];return y(y({},e),{},h()({},r,i))}),{})},instanceDomain:function(e){return new URL(e.server).hostname}},actions:{setInstanceOption:function(e,t){var n=e.commit,r=e.dispatch,i=t.name,o=t.value;switch(n("setInstanceOption",{name:i,value:o}),i){case"name":r("setPageTitle");break;case"shoutAvailable":o&&r("initializeSocket");break;case"theme":r("setTheme",o)}},getStaticEmoji:function(e){return i()(s.a.mark((function t(){var n,r,i,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,t.next=4,window.fetch("/static/emoji.json");case 4:if(!(r=t.sent).ok){t.next=13;break}return t.next=8,r.json();case 8:i=t.sent,o=Object.keys(i).map((function(e){return{displayText:e,imageUrl:!1,replacement:i[e]}})).sort((function(e,t){return e.name>t.name?1:-1})),n("setInstanceOption",{name:"emoji",value:o}),t.next=14;break;case 13:throw r;case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(1),console.warn("Can't load static emoji"),console.warn(t.t0);case 20:case"end":return t.stop()}}),t,null,[[1,16]])})))()},getCustomEmoji:function(e){return i()(s.a.mark((function t(){var n,r,i,o,a,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.commit,r=e.state,t.prev=1,t.next=4,window.fetch("/api/pleroma/emoji.json");case 4:if(!(i=t.sent).ok){t.next=14;break}return t.next=8,i.json();case 8:o=t.sent,a=Array.isArray(o)?Object.assign.apply(Object,[{}].concat(d()(o))):o,c=Object.entries(a).map((function(e){var t=m()(e,2),n=t[0],i=t[1],o=i.image_url;return{displayText:n,imageUrl:o?r.server+o:i,tags:o?i.tags.sort((function(e,t){return e>t?1:0})):["utf"],replacement:":".concat(n,": ")}})).sort((function(e,t){return e.displayText.toLowerCase()>t.displayText.toLowerCase()?1:-1})),n("setInstanceOption",{name:"customEmoji",value:c}),t.next=15;break;case 14:throw i;case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(1),console.warn("Can't load custom emojis"),console.warn(t.t0);case 21:case"end":return t.stop()}}),t,null,[[1,17]])})))()},setTheme:function(e,t){var n=e.commit,r=e.rootState;n("setInstanceOption",{name:"theme",value:t}),Object(f.j)(t).then((function(e){if(n("setInstanceOption",{name:"themeData",value:e}),!r.config.customTheme){var t=e.source;!e.theme||t&&t.themeEngineVersion===O.a?Object(f.b)(t):Object(f.b)(e.theme)}}))},fetchEmoji:function(e){var t=e.dispatch,n=e.state;n.customEmojiFetched||(n.customEmojiFetched=!0,t("getCustomEmoji")),n.emojiFetched||(n.emojiFetched=!0,t("getStaticEmoji"))},getKnownDomains:function(e){return i()(s.a.mark((function t(){var n,r,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.commit,r=e.rootState,t.prev=1,t.next=4,j.c.fetchKnownDomains({credentials:r.users.currentUser.credentials});case 4:i=t.sent,n("setKnownDomains",i),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.warn("Can't load known domains"),console.warn(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))()}}},k=n(131),_=n.n(k),S=n(19),C=n.n(S),P=n(46),x=n.n(P),D=n(318),T=n.n(D),I=n(122),$=n.n(I),z=n(132),M=n.n(z),U=n(133),F=n.n(U),E=n(30),L=n.n(E),R=n(60),A=n.n(R),N=n(29),B=n.n(N),V=n(319),H=n.n(V),q=n(61),J=n.n(q),W=n(26);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{statuses:[],statusesObject:{},faves:[],visibleStatuses:[],visibleStatusesObject:{},newStatusCount:0,maxId:0,minId:0,minVisibleId:0,loading:!1,followers:[],friends:[],userId:e,flushMarker:0}},X=function(){return{desktopNotificationSilence:!0,maxId:0,minId:Number.POSITIVE_INFINITY,data:[],idStore:{},loading:!1}},Z=function(){return{allStatuses:[],allStatusesObject:{},conversationsObject:{},maxId:0,notifications:X(),favorites:new Set,timelines:{mentions:K(),public:K(),user:K(),favorites:K(),media:K(),publicAndExternal:K(),friends:K(),tag:K(),dms:K(),bookmarks:K()}}},Q=function(e,t,n){var r=t[n.id];return r?($()(r,_()(n,(function(e,t){return null===e||"user"===t}))),r.attachments.splice(r.attachments.length),{item:r,new:!1}):(function(e){e.deleted=!1,e.attachments=e.attachments||[]}(n),e.push(n),t[n.id]=n,{item:n,new:!0})},ee=function(e,t){var n=Number(e.id),r=Number(t.id),i=!Number.isNaN(n),o=!Number.isNaN(r);return i&&o?n>r?-1:1:i&&!o?1:!i&&o||e.id>t.id?-1:1},te=function(e){return e.visibleStatuses=e.visibleStatuses.sort(ee),e.statuses=e.statuses.sort(ee),e.minVisibleId=(x()(e.visibleStatuses)||{}).id,e},ne=function(e,t){var n=Q(e.allStatuses,e.allStatusesObject,t);if(n.new){var r=n.item,i=e.conversationsObject,o=r.statusnet_conversation_id;i[o]?i[o].push(r):i[o]=[r]}return n},re=function(e,t){e.notifications.maxId=t.id>e.notifications.maxId?t.id:e.notifications.maxId,e.notifications.minId=t.id<e.notifications.minId?t.id:e.notifications.minId},ie={addNewStatuses:function(e,t){var n=t.statuses,r=t.showImmediately,i=void 0!==r&&r,o=t.timeline,s=t.user,a=void 0===s?{}:s,c=t.noIdUpdate,l=void 0!==c&&c,u=t.userId,d=t.pagination,p=void 0===d?{}:d;if(!C()(n))return!1;var h=e.allStatuses,b=e.timelines[o],m=p.maxId||(n.length>0?M()(n,"id").id:0),f=p.minId||(n.length>0?F()(n,"id").id:0),O=o&&(f>b.maxId||0===b.maxId)&&n.length>0,j=o&&(m<b.minId||0===b.minId)&&n.length>0;if(!l&&O&&(b.maxId=f),!l&&j&&(b.minId=m),"user"!==o&&"media"!==o||b.userId===u){var g=function(t,n){var r,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=ne(e,t),c=s.item;if(s.new){if("status"===c.type&&L()(c.attentions,{id:a.id})){var l=e.timelines.mentions;b!==l&&(Q(l.statuses,l.statusesObject,c),l.newStatusCount+=1,te(l))}if("direct"===c.visibility){var u=e.timelines.dms;Q(u.statuses,u.statusesObject,c),u.newStatusCount+=1,te(u)}}return o&&i&&(r=Q(b.statuses,b.statusesObject,c)),o&&n?Q(b.visibleStatuses,b.visibleStatusesObject,c):o&&i&&r.new&&(b.newStatusCount+=1),c},v={status:function(e){g(e,i)},retweet:function(e){var t,n=g(e.retweeted_status,!1,!1);t=o&&L()(b.statuses,(function(e){return e.retweeted_status?e.id===n.id||e.retweeted_status.id===n.id:e.id===n.id}))?g(e,!1,!1):g(e,i),t.retweeted_status=n},favorite:function(t){e.favorites.has(t.id)||(e.favorites.add(t.id),function(e,t){var n=L()(h,{id:e.in_reply_to_status_id});n&&(e.user.id===a.id?n.favorited=!0:n.fave_num+=1)}(t))},deletion:function(t){var n=t.uri,r=L()(h,{uri:n});r&&(!function(e,t){J()(e.allStatuses,{id:t.id}),J()(e.notifications.data,(function(e){return e.action.id===t.id}));var n=t.statusnet_conversation_id;e.conversationsObject[n]&&J()(e.conversationsObject[n],{id:t.id})}(e,r),o&&(J()(b.statuses,{uri:n}),J()(b.visibleStatuses,{uri:n})))},follow:function(e){},default:function(e){console.log("unknown status type"),console.log(e)}};B()(n,(function(e){var t=e.type;(v[t]||v.default)(e)})),o&&"bookmarks"!==o&&te(b)}},addNewNotifications:function(e,t){var n=t.dispatch,r=t.notifications,i=(t.older,t.visibleNotificationTypes,t.rootGetters,t.newNotificationSideEffects);B()(r,(function(t){if(!Object(W.c)(t))return console.error("Invalid notification:",t),void re(e,t);Object(W.b)(t.type)&&(t.action=ne(e,t.action).item,t.status=t.status&&ne(e,t.status).item),"pleroma:emoji_reaction"===t.type&&n("fetchEmojiReactionsBy",t.status.id),e.notifications.idStore.hasOwnProperty(t.id)?t.seen&&(e.notifications.idStore[t.id].seen=!0):(re(e,t),e.notifications.data.push(t),e.notifications.idStore[t.id]=t,i(t))}))},removeStatus:function(e,t){var n=t.timeline,r=t.userId,i=e.timelines[n];r&&(J()(i.statuses,{user:{id:r}}),J()(i.visibleStatuses,{user:{id:r}}),i.minVisibleId=i.visibleStatuses.length>0?x()(i.visibleStatuses).id:0,i.maxId=i.statuses.length>0?T()(i.statuses).id:0)},showNewStatuses:function(e,t){var n=t.timeline,r=e.timelines[n];r.newStatusCount=0,r.visibleStatuses=H()(r.statuses,0,50),r.minVisibleId=x()(r.visibleStatuses).id,r.minId=r.minVisibleId,r.visibleStatusesObject={},B()(r.visibleStatuses,(function(e){r.visibleStatusesObject[e.id]=e}))},resetStatuses:function(e){var t=Z();Object.entries(t).forEach((function(t){var n=m()(t,2),r=n[0],i=n[1];e[r]=i}))},clearTimeline:function(e,t){var n=t.timeline,r=t.excludeUserId,i=void 0!==r&&r?e.timelines[n].userId:void 0;e.timelines[n]=K(i)},clearNotifications:function(e){e.notifications=X()},setFavorited:function(e,t){var n=t.status,r=t.value,i=e.allStatusesObject[n.id];i.favorited!==r&&(r?i.fave_num++:i.fave_num--),i.favorited=r},setFavoritedConfirm:function(e,t){var n=t.status,r=t.user,i=e.allStatusesObject[n.id];i.favorited=n.favorited,i.fave_num=n.fave_num;var o=A()(i.favoritedBy,{id:r.id});-1===o||i.favorited?-1===o&&i.favorited&&i.favoritedBy.push(r):i.favoritedBy.splice(o,1)},setMutedStatus:function(e,t){var n=e.allStatusesObject[t.id];n.thread_muted=t.thread_muted,void 0!==n.thread_muted&&e.conversationsObject[n.statusnet_conversation_id].forEach((function(e){e.thread_muted=n.thread_muted}))},setRetweeted:function(e,t){var n=t.status,r=t.value,i=e.allStatusesObject[n.id];i.repeated!==r&&(r?i.repeat_num++:i.repeat_num--),i.repeated=r},setRetweetedConfirm:function(e,t){var n=t.status,r=t.user,i=e.allStatusesObject[n.id];i.repeated=n.repeated,i.repeat_num=n.repeat_num;var o=A()(i.rebloggedBy,{id:r.id});-1===o||i.repeated?-1===o&&i.repeated&&i.rebloggedBy.push(r):i.rebloggedBy.splice(o,1)},setBookmarked:function(e,t){var n=t.status,r=t.value;e.allStatusesObject[n.id].bookmarked=r},setBookmarkedConfirm:function(e,t){var n=t.status;e.allStatusesObject[n.id].bookmarked=n.bookmarked},setDeleted:function(e,t){var n=t.status,r=e.allStatusesObject[n.id];r&&(r.deleted=!0)},setManyDeleted:function(e,t){Object.values(e.allStatusesObject).forEach((function(e){t(e)&&(e.deleted=!0)}))},setLoading:function(e,t){var n=t.timeline,r=t.value;e.timelines[n].loading=r},setNsfw:function(e,t){var n=t.id,r=t.nsfw;e.allStatusesObject[n].nsfw=r},setNotificationsLoading:function(e,t){var n=t.value;e.notifications.loading=n},setNotificationsSilence:function(e,t){var n=t.value;e.notifications.desktopNotificationSilence=n},markNotificationsAsSeen:function(e){B()(e.notifications.data,(function(e){e.seen=!0}))},markSingleNotificationAsSeen:function(e,t){var n=t.id,r=L()(e.notifications.data,(function(e){return e.id===n}));r&&(r.seen=!0)},dismissNotification:function(e,t){var n=t.id;e.notifications.data=e.notifications.data.filter((function(e){return e.id!==n}))},dismissNotifications:function(e,t){var n=t.finder;e.notifications.data=e.notifications.data.filter((function(e){return n}))},updateNotification:function(e,t){var n=t.id,r=t.updater,i=L()(e.notifications.data,(function(e){return e.id===n}));i&&r(i)},queueFlush:function(e,t){var n=t.timeline,r=t.id;e.timelines[n].flushMarker=r},queueFlushAll:function(e){Object.keys(e.timelines).forEach((function(t){e.timelines[t].flushMarker=e.timelines[t].maxId}))},addRepeats:function(e,t){var n=t.id,r=t.rebloggedByUsers,i=t.currentUser,o=e.allStatusesObject[n];o.rebloggedBy=r.filter((function(e){return e})),o.repeat_num=o.rebloggedBy.length,o.repeated=!!o.rebloggedBy.find((function(e){var t=e.id;return i.id===t}))},addFavs:function(e,t){var n=t.id,r=t.favoritedByUsers,i=t.currentUser,o=e.allStatusesObject[n];o.favoritedBy=r.filter((function(e){return e})),o.fave_num=o.favoritedBy.length,o.favorited=!!o.favoritedBy.find((function(e){var t=e.id;return i.id===t}))},addEmojiReactionsBy:function(e,t){var n=t.id,r=t.emojiReactions;t.currentUser;e.allStatusesObject[n].emoji_reactions=r},addOwnReaction:function(e,t){var n=t.id,r=t.emoji,i=t.currentUser,o=e.allStatusesObject[n],s=A()(o.emoji_reactions,{name:r}),a=o.emoji_reactions[s]||{name:r,count:0,accounts:[]},c=G(G({},a),{},{count:a.count+1,me:!0,accounts:[].concat(d()(a.accounts),[i])});s>=0?o.emoji_reactions[s]=c:o.emoji_reactions=[].concat(d()(o.emoji_reactions),[c])},removeOwnReaction:function(e,t){var n=t.id,r=t.emoji,i=t.currentUser,o=e.allStatusesObject[n],s=A()(o.emoji_reactions,{name:r});if(!(s<0)){var a=o.emoji_reactions[s],c=a.accounts||[],l=G(G({},a),{},{count:a.count-1,me:!1,accounts:c.filter((function(e){return e.id!==i.id}))});l.count>0?o.emoji_reactions[s]=l:o.emoji_reactions=o.emoji_reactions.filter((function(e){return e.name!==r}))}},updateStatusWithPoll:function(e,t){var n=t.id,r=t.poll;e.allStatusesObject[n].poll=r},setVirtualHeight:function(e,t){var n=t.statusId,r=t.height;e.allStatusesObject[n].virtualHeight=r}},oe={state:Z(),actions:{addNewStatuses:function(e,t){var n=e.rootState,r=e.commit,i=t.statuses,o=t.showImmediately,s=void 0!==o&&o,a=t.timeline,c=void 0!==a&&a,l=t.noIdUpdate,u=void 0!==l&&l,d=t.userId,p=t.pagination;r("addNewStatuses",{statuses:i,showImmediately:s,timeline:c,noIdUpdate:u,user:n.users.currentUser,userId:d,pagination:p})},addNewNotifications:function(e,t){var n=t.notifications,r=t.older;(0,e.commit)("addNewNotifications",{dispatch:e.dispatch,notifications:n,older:r,rootGetters:e.rootGetters,newNotificationSideEffects:function(t){Object(W.d)(e,t)}})},setNotificationsLoading:function(e,t){e.rootState;(0,e.commit)("setNotificationsLoading",{value:t.value})},setNotificationsSilence:function(e,t){e.rootState;(0,e.commit)("setNotificationsSilence",{value:t.value})},fetchStatus:function(e,t){var n=e.rootState,r=e.dispatch;return n.api.backendInteractor.fetchStatus({id:t}).then((function(e){return r("addNewStatuses",{statuses:[e]})}))},deleteStatus:function(e,t){var n=e.rootState;(0,e.commit)("setDeleted",{status:t}),j.c.deleteStatus({id:t.id,credentials:n.users.currentUser.credentials})},deleteStatusById:function(e,t){var n=e.rootState;(0,e.commit)("setDeleted",{status:n.statuses.allStatusesObject[t]})},markStatusesAsDeleted:function(e,t){(0,e.commit)("setManyDeleted",t)},favorite:function(e,t){var n=e.rootState,r=e.commit;r("setFavorited",{status:t,value:!0}),n.api.backendInteractor.favorite({id:t.id}).then((function(e){return r("setFavoritedConfirm",{status:e,user:n.users.currentUser})}))},unfavorite:function(e,t){var n=e.rootState,r=e.commit;r("setFavorited",{status:t,value:!1}),n.api.backendInteractor.unfavorite({id:t.id}).then((function(e){return r("setFavoritedConfirm",{status:e,user:n.users.currentUser})}))},fetchPinnedStatuses:function(e,t){var n=e.rootState,r=e.dispatch;n.api.backendInteractor.fetchPinnedStatuses({id:t}).then((function(e){return r("addNewStatuses",{statuses:e,timeline:"user",userId:t,showImmediately:!0,noIdUpdate:!0})}))},pinStatus:function(e,t){var n=e.rootState,r=e.dispatch;return n.api.backendInteractor.pinOwnStatus({id:t}).then((function(e){return r("addNewStatuses",{statuses:[e]})}))},unpinStatus:function(e,t){var n=e.rootState,r=e.dispatch;n.api.backendInteractor.unpinOwnStatus({id:t}).then((function(e){return r("addNewStatuses",{statuses:[e]})}))},muteConversation:function(e,t){var n=e.rootState,r=e.commit;return n.api.backendInteractor.muteConversation({id:t}).then((function(e){return r("setMutedStatus",e)}))},unmuteConversation:function(e,t){var n=e.rootState,r=e.commit;return n.api.backendInteractor.unmuteConversation({id:t}).then((function(e){return r("setMutedStatus",e)}))},retweet:function(e,t){var n=e.rootState,r=e.commit;r("setRetweeted",{status:t,value:!0}),n.api.backendInteractor.retweet({id:t.id}).then((function(e){return r("setRetweetedConfirm",{status:e.retweeted_status,user:n.users.currentUser})}))},unretweet:function(e,t){var n=e.rootState,r=e.commit;r("setRetweeted",{status:t,value:!1}),n.api.backendInteractor.unretweet({id:t.id}).then((function(e){return r("setRetweetedConfirm",{status:e,user:n.users.currentUser})}))},bookmark:function(e,t){var n=e.rootState,r=e.commit;r("setBookmarked",{status:t,value:!0}),n.api.backendInteractor.bookmarkStatus({id:t.id}).then((function(e){r("setBookmarkedConfirm",{status:e})}))},unbookmark:function(e,t){var n=e.rootState,r=e.commit;r("setBookmarked",{status:t,value:!1}),n.api.backendInteractor.unbookmarkStatus({id:t.id}).then((function(e){r("setBookmarkedConfirm",{status:e})}))},queueFlush:function(e,t){e.rootState;(0,e.commit)("queueFlush",{timeline:t.timeline,id:t.id})},queueFlushAll:function(e){e.rootState;(0,e.commit)("queueFlushAll")},markNotificationsAsSeen:function(e){var t=e.rootState;(0,e.commit)("markNotificationsAsSeen"),j.c.markNotificationsAsSeen({id:t.statuses.notifications.maxId,credentials:t.users.currentUser.credentials})},markSingleNotificationAsSeen:function(e,t){var n=e.rootState,r=e.commit,i=t.id;r("markSingleNotificationAsSeen",{id:i}),j.c.markNotificationsAsSeen({single:!0,id:i,credentials:n.users.currentUser.credentials})},dismissNotificationLocal:function(e,t){e.rootState;(0,e.commit)("dismissNotification",{id:t.id})},dismissNotification:function(e,t){var n=e.rootState,r=e.commit,i=t.id;r("dismissNotification",{id:i}),n.api.backendInteractor.dismissNotification({id:i})},updateNotification:function(e,t){e.rootState;(0,e.commit)("updateNotification",{id:t.id,updater:t.updater})},fetchFavsAndRepeats:function(e,t){var n=e.rootState,r=e.commit;Promise.all([n.api.backendInteractor.fetchFavoritedByUsers({id:t}),n.api.backendInteractor.fetchRebloggedByUsers({id:t})]).then((function(e){var i=m()(e,2),o=i[0],s=i[1];r("addFavs",{id:t,favoritedByUsers:o,currentUser:n.users.currentUser}),r("addRepeats",{id:t,rebloggedByUsers:s,currentUser:n.users.currentUser})}))},reactWithEmoji:function(e,t){var n=e.rootState,r=e.dispatch,i=e.commit,o=t.id,s=t.emoji,a=n.users.currentUser;a&&(i("addOwnReaction",{id:o,emoji:s,currentUser:a}),n.api.backendInteractor.reactWithEmoji({id:o,emoji:s}).then((function(e){r("fetchEmojiReactionsBy",o)})))},unreactWithEmoji:function(e,t){var n=e.rootState,r=e.dispatch,i=e.commit,o=t.id,s=t.emoji,a=n.users.currentUser;a&&(i("removeOwnReaction",{id:o,emoji:s,currentUser:a}),n.api.backendInteractor.unreactWithEmoji({id:o,emoji:s}).then((function(e){r("fetchEmojiReactionsBy",o)})))},fetchEmojiReactionsBy:function(e,t){var n=e.rootState,r=e.commit;n.api.backendInteractor.fetchEmojiReactions({id:t}).then((function(e){r("addEmojiReactionsBy",{id:t,emojiReactions:e,currentUser:n.users.currentUser})}))},fetchFavs:function(e,t){var n=e.rootState,r=e.commit;n.api.backendInteractor.fetchFavoritedByUsers({id:t}).then((function(e){return r("addFavs",{id:t,favoritedByUsers:e,currentUser:n.users.currentUser})}))},fetchRepeats:function(e,t){var n=e.rootState,r=e.commit;n.api.backendInteractor.fetchRebloggedByUsers({id:t}).then((function(e){return r("addRepeats",{id:t,rebloggedByUsers:e,currentUser:n.users.currentUser})}))},search:function(e,t){var n=t.q,r=t.resolve,i=t.limit,o=t.offset,s=t.following;return e.rootState.api.backendInteractor.search2({q:n,resolve:r,limit:i,offset:o,following:s}).then((function(t){return e.commit("addNewUsers",t.accounts),e.commit("addNewStatuses",{statuses:t.statuses}),t}))},setVirtualHeight:function(e,t){(0,e.commit)("setVirtualHeight",{statusId:t.statusId,height:t.height})}},mutations:ie},se=n(98),ae=n.n(se),ce=n(97),le=n.n(ce),ue=n(145),de=n.n(ue),pe=n(21),he=n.n(pe),be=n(168),me=n.n(be),fe=n(146),Oe=n.n(fe),je=n(44),ge=function(e){var t=e.store,n=e.credentials,r=e.timeline,i=void 0===r?"friends":r,o=e.older,s=void 0!==o&&o,a=e.showImmediately,c=void 0!==a&&a,l=e.userId,u=void 0!==l&&l,d=e.tag,p=void 0!==d&&d,h=e.until,b=e.since,m={timeline:i,credentials:n},f=t.rootState||t.state,O=t.getters,g=f.statuses.timelines[Oe()(i)],v=O.mergedConfig,y=v.hideMutedPosts,w=v.replyVisibility,k=!!f.users.currentUser;s?m.until=h||g.minId:void 0===b?m.since=g.maxId:null!==b&&(m.since=b),m.userId=u,m.tag=p,m.withMuted=!y,k&&["friends","public","publicAndExternal"].includes(i)&&(m.replyVisibility=w);var _=g.statuses.length;return j.c.fetchTimeline(m).then((function(e){if(e.errors)throw new Error("".concat(e.status," ").concat(e.statusText));var n=e.data,r=e.pagination;return!s&&n.length>=20&&!g.loading&&_>0&&t.dispatch("queueFlush",{timeline:i,id:g.maxId}),function(e){var t=e.store,n=e.statuses,r=e.timeline,i=e.showImmediately,o=e.userId,s=e.pagination,a=Oe()(r);t.dispatch("addNewStatuses",{timeline:a,userId:o,statuses:n,showImmediately:i,pagination:s})}({store:t,statuses:n,timeline:i,showImmediately:c,userId:u,pagination:r}),{statuses:n,pagination:r}})).catch((function(e){t.dispatch("pushGlobalNotice",{level:"error",messageKey:"timeline.error",messageArgs:[e.message],timeout:5e3})}))},ve={fetchAndUpdate:ge,startFetching:function(e){var t=e.timeline,n=void 0===t?"friends":t,r=e.credentials,i=e.store,o=e.userId,s=void 0!==o&&o,a=e.tag,c=void 0!==a&&a,l=(i.rootState||i.state).statuses.timelines[Oe()(n)],u=0===l.visibleStatuses.length;l.userId=s,ge({timeline:n,credentials:r,store:i,showImmediately:u,userId:s,tag:c});return Object(je.a)((function(){return ge({timeline:n,credentials:r,store:i,userId:s,tag:c})}),2e4)}},ye=n(99),we={startFetching:function(e){var t=e.credentials,n=e.store,r=function(){return function(e){var t=e.store,n=e.credentials;return j.c.fetchFollowRequests({credentials:n}).then((function(e){t.commit("setFollowRequests",e),t.commit("addNewUsers",e)}),(function(){})).catch((function(){}))}({credentials:t,store:n})};return r(),Object(je.a)(r,24e4)}};function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Se=function(e){return _e(_e({startFetchingTimeline:function(t){var n=t.timeline,r=t.store,i=t.userId,o=void 0!==i&&i,s=t.tag;return ve.startFetching({timeline:n,store:r,credentials:e,userId:o,tag:s})},fetchTimeline:function(t){return ve.fetchAndUpdate(_e(_e({},t),{},{credentials:e}))},startFetchingNotifications:function(t){var n=t.store;return ye.a.startFetching({store:n,credentials:e})},fetchNotifications:function(t){return ye.a.fetchAndUpdate(_e(_e({},t),{},{credentials:e}))},startFetchingFollowRequests:function(t){var n=t.store;return we.startFetching({store:n,credentials:e})},startUserSocket:function(t){var n=t.store.rootState.instance.server.replace("http","ws")+Object(j.d)({credentials:e,stream:"user"});return Object(j.a)({url:n,id:"User"})}},Object.entries(j.c).reduce((function(t,n){var r=m()(n,2),i=r[0],o=r[1];return _e(_e({},t),{},h()({},i,(function(t){return o(_e({credentials:e},t))})))}),{})),{},{verifyCredentials:j.c.verifyCredentials})},Ce=function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},Pe=function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},xe=n(55),De=n.n(xe),Te="".concat(window.location.origin,"/oauth-callback"),Ie=function(e){var t=e.clientId,n=e.clientSecret,r=e.instance,i=e.commit;if(t&&n)return Promise.resolve({clientId:t,clientSecret:n});var o="".concat(r,"/api/v1/apps"),s=new window.FormData;return s.append("client_name","PleromaFE_".concat(window.___pleromafe_commit_hash,"_").concat((new Date).toISOString())),s.append("redirect_uris",Te),s.append("scopes","read write follow push admin"),window.fetch(o,{method:"POST",body:s}).then((function(e){return e.json()})).then((function(e){return{clientId:e.client_id,clientSecret:e.client_secret}})).then((function(e){return i("setClientData",e)||e}))},$e=function(e){var t=e.clientId,n=e.clientSecret,r=e.instance,i="".concat(r,"/oauth/token"),o=new window.FormData;return o.append("client_id",t),o.append("client_secret",n),o.append("grant_type","client_credentials"),o.append("redirect_uri","".concat(window.location.origin,"/oauth-callback")),window.fetch(i,{method:"POST",body:o}).then((function(e){return e.json()}))},ze={login:function(e){var t=e.instance,n={response_type:"code",client_id:e.clientId,redirect_uri:Te,scope:"read write follow push admin"},r=De()(n,(function(e,t,n){var r="".concat(n,"=").concat(encodeURIComponent(t));return e?"".concat(e,"&").concat(r):r}),!1),i="".concat(t,"/oauth/authorize?").concat(r);window.location.href=i},getToken:function(e){var t=e.clientId,n=e.clientSecret,r=e.instance,i=e.code,o="".concat(r,"/oauth/token"),s=new window.FormData;return s.append("client_id",t),s.append("client_secret",n),s.append("grant_type","authorization_code"),s.append("code",i),s.append("redirect_uri","".concat(window.location.origin,"/oauth-callback")),window.fetch(o,{method:"POST",body:s}).then((function(e){return e.json()}))},getTokenWithCredentials:function(e){var t=e.clientId,n=e.clientSecret,r=e.instance,i=e.username,o=e.password,s="".concat(r,"/oauth/token"),a=new window.FormData;return a.append("client_id",t),a.append("client_secret",n),a.append("grant_type","password"),a.append("username",i),a.append("password",o),window.fetch(s,{method:"POST",body:a}).then((function(e){return e.json()}))},getOrCreateApp:Ie,verifyOTPCode:function(e){var t=e.app,n=e.instance,r=e.mfaToken,i=e.code,o="".concat(n,"/oauth/mfa/challenge"),s=new window.FormData;return s.append("client_id",t.client_id),s.append("client_secret",t.client_secret),s.append("mfa_token",r),s.append("code",i),s.append("challenge_type","totp"),window.fetch(o,{method:"POST",body:s}).then((function(e){return e.json()}))},verifyRecoveryCode:function(e){var t=e.app,n=e.instance,r=e.mfaToken,i=e.code,o="".concat(n,"/oauth/mfa/challenge"),s=new window.FormData;return s.append("client_id",t.client_id),s.append("client_secret",t.client_secret),s.append("mfa_token",r),s.append("code",i),s.append("challenge_type","recovery"),window.fetch(o,{method:"POST",body:s}).then((function(e){return e.json()}))},revokeToken:function(e){var t=e.app,n=e.instance,r=e.token,i="".concat(n,"/oauth/revoke"),o=new window.FormData;return o.append("client_id",t.clientId),o.append("client_secret",t.clientSecret),o.append("token",r),window.fetch(i,{method:"POST",body:o}).then((function(e){return e.json()}))}},Me=n(320),Ue=n.n(Me);function Fe(){return"serviceWorker"in navigator&&"PushManager"in window}function Ee(){return Ue.a.register().catch((function(e){return console.error("Unable to get or create a service worker.",e)}))}function Le(e){return window.fetch("/api/v1/push/subscription/",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){if(!e.ok)throw new Error("Bad status code from server.");return e}))}function Re(e,t,n,r){Fe()&&Ee().then((function(n){return function(e,t,n){if(!t)return Promise.reject(new Error("Web Push is disabled in config"));if(!n)return Promise.reject(new Error("VAPID public key is not found"));var r,i,o,s={userVisibleOnly:!0,applicationServerKey:(r=n,i=(r+"=".repeat((4-r.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),o=window.atob(i),Uint8Array.from(d()(o).map((function(e){return e.charCodeAt(0)}))))};return e.pushManager.subscribe(s)}(n,e,t)})).then((function(e){return function(e,t,n){return window.fetch("/api/v1/push/subscription/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({subscription:e,data:{alerts:{follow:n.follows,favourite:n.likes,mention:n.mentions,reblog:n.repeats,move:n.moves}}})}).then((function(e){if(!e.ok)throw new Error("Bad status code from server.");return e.json()})).then((function(e){if(!e.id)throw new Error("Bad response from server.");return e}))}(e,n,r)})).catch((function(e){return console.warn("Failed to setup Web Push Notifications: ".concat(e.message))}))}function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Be=function e(t,n){if(C()(t)&&C()(n))return t.length=n.length,de()(t,n,e)},Ve=function(e,t){return e.rootState.api.backendInteractor.blockUser({id:t}).then((function(n){e.commit("updateUserRelationship",[n]),e.commit("addBlockId",t),e.commit("removeStatus",{timeline:"friends",userId:t}),e.commit("removeStatus",{timeline:"public",userId:t}),e.commit("removeStatus",{timeline:"publicAndExternal",userId:t})}))},He=function(e,t){return e.rootState.api.backendInteractor.unblockUser({id:t}).then((function(t){return e.commit("updateUserRelationship",[t])}))},qe=function(e,t){var n=e.state.relationships[t]||{id:t};return n.muting=!0,e.commit("updateUserRelationship",[n]),e.commit("addMuteId",t),e.rootState.api.backendInteractor.muteUser({id:t}).then((function(n){e.commit("updateUserRelationship",[n]),e.commit("addMuteId",t)}))},Je=function(e,t){var n=e.state.relationships[t]||{id:t};return n.muting=!1,e.commit("updateUserRelationship",[n]),e.rootState.api.backendInteractor.unmuteUser({id:t}).then((function(t){return e.commit("updateUserRelationship",[t])}))},We=function(e,t){return e.rootState.api.backendInteractor.muteDomain({domain:t}).then((function(){return e.commit("addDomainMute",t)}))},Ye=function(e,t){return e.rootState.api.backendInteractor.unmuteDomain({domain:t}).then((function(){return e.commit("removeDomainMute",t)}))},Ge={state:{loggingIn:!1,lastLoginName:!1,currentUser:!1,users:[],usersObject:{},signUpPending:!1,signUpErrors:[],relationships:{}},mutations:{tagUser:function(e,t){var n=t.user.id,r=t.tag,i=e.usersObject[n],o=(i.tags||[]).concat([r]);i.tags=o},untagUser:function(e,t){var n=t.user.id,r=t.tag,i=e.usersObject[n],o=(i.tags||[]).filter((function(e){return e!==r}));i.tags=o},updateRight:function(e,t){var n=t.user.id,r=t.right,i=t.value,o=e.usersObject[n],s=o.rights;s[r]=i,o.rights=s},updateActivationStatus:function(e,t){var n=t.user.id,r=t.deactivated;e.usersObject[n].deactivated=r},setCurrentUser:function(e,t){e.lastLoginName=t.screen_name,e.currentUser=de()(e.currentUser||{},t,Be)},clearCurrentUser:function(e){e.currentUser=!1,e.lastLoginName=!1},beginLogin:function(e){e.loggingIn=!0},endLogin:function(e){e.loggingIn=!1},saveFriendIds:function(e,t){var n=t.id,r=t.friendIds,i=e.usersObject[n];i.friendIds=ae()(le()(i.friendIds||[],r))},saveFollowerIds:function(e,t){var n=t.id,r=t.followerIds,i=e.usersObject[n];i.followerIds=ae()(le()(i.followerIds||[],r))},clearFriends:function(e,t){var n=e.usersObject[t];n&&(n.friendIds=[])},clearFollowers:function(e,t){var n=e.usersObject[t];n&&(n.followerIds=[])},addNewUsers:function(e,t){B()(t,(function(t){t.relationship&&(e.relationships[t.relationship.id]=t.relationship),function(e,t,n){if(!n)return!1;var r=t[n.id];r?de()(r,n,Be):(e.push(n),t[n.id]=n,n.screen_name&&!n.screen_name.includes("@")&&(t[n.screen_name.toLowerCase()]=n))}(e.users,e.usersObject,t)}))},updateUserRelationship:function(e,t){t.forEach((function(t){e.relationships[t.id]=t}))},saveBlockIds:function(e,t){e.currentUser.blockIds=t},addBlockId:function(e,t){-1===e.currentUser.blockIds.indexOf(t)&&e.currentUser.blockIds.push(t)},saveMuteIds:function(e,t){e.currentUser.muteIds=t},addMuteId:function(e,t){-1===e.currentUser.muteIds.indexOf(t)&&e.currentUser.muteIds.push(t)},updateMascot:function(e,t){e.currentUser.mascot=t},saveDomainMutes:function(e,t){e.currentUser.domainMutes=t},addDomainMute:function(e,t){-1===e.currentUser.domainMutes.indexOf(t)&&e.currentUser.domainMutes.push(t)},removeDomainMute:function(e,t){var n=e.currentUser.domainMutes.indexOf(t);-1!==n&&e.currentUser.domainMutes.splice(n,1)},setPinnedToUser:function(e,t){var n=e.usersObject[t.user.id];n.pinnedStatusIds=n.pinnedStatusIds||[];var r=n.pinnedStatusIds.indexOf(t.id);t.pinned&&-1===r?n.pinnedStatusIds.push(t.id):t.pinned||-1===r||n.pinnedStatusIds.splice(r,1)},setUserForStatus:function(e,t){t.user=e.usersObject[t.user.id]},setUserForNotification:function(e,t){"follow"!==t.type&&(t.action.user=e.usersObject[t.action.user.id]),t.from_profile=e.usersObject[t.from_profile.id]},setColor:function(e,t){var n=t.user.id,r=t.highlighted;e.usersObject[n].highlight=r},signUpPending:function(e){e.signUpPending=!0,e.signUpErrors=[]},signUpSuccess:function(e){e.signUpPending=!1},signUpFailure:function(e,t){e.signUpPending=!1,e.signUpErrors=t}},getters:{findUser:function(e){return function(t){var n=e.usersObject[t];return n||"string"!=typeof t?n:e.usersObject[t.toLowerCase()]}},findUserByUrl:function(e){return function(t){return e.users.find((function(e){return e.statusnet_profile_url&&e.statusnet_profile_url.toLowerCase()===t.toLowerCase()}))}},relationship:function(e){return function(t){return t&&e.relationships[t]||{id:t,loading:!0}}}},actions:{fetchUserIfMissing:function(e,t){e.getters.findUser(t)||e.dispatch("fetchUser",t)},fetchUser:function(e,t){return e.rootState.api.backendInteractor.fetchUser({id:t}).then((function(t){return e.commit("addNewUsers",[t]),t}))},fetchUserRelationship:function(e,t){e.state.currentUser&&e.rootState.api.backendInteractor.fetchUserRelationship({id:t}).then((function(t){return e.commit("updateUserRelationship",t)}))},fetchBlocks:function(e){return e.rootState.api.backendInteractor.fetchBlocks().then((function(t){return e.commit("saveBlockIds",he()(t,"id")),e.commit("addNewUsers",t),t}))},blockUser:function(e,t){return Ve(e,t)},unblockUser:function(e,t){return He(e,t)},blockUsers:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Promise.all(t.map((function(t){return Ve(e,t)})))},unblockUsers:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Promise.all(t.map((function(t){return He(e,t)})))},fetchMutes:function(e){return e.rootState.api.backendInteractor.fetchMutes().then((function(t){return e.commit("saveMuteIds",he()(t,"id")),e.commit("addNewUsers",t),t}))},muteUser:function(e,t){return qe(e,t)},unmuteUser:function(e,t){return Je(e,t)},hideReblogs:function(e,t){return function(e,t){return e.rootState.api.backendInteractor.followUser({id:t,reblogs:!1}).then((function(t){e.commit("updateUserRelationship",[t])}))}(e,t)},showReblogs:function(e,t){return function(e,t){return e.rootState.api.backendInteractor.followUser({id:t,reblogs:!0}).then((function(t){return e.commit("updateUserRelationship",[t])}))}(e,t)},muteUsers:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Promise.all(t.map((function(t){return qe(e,t)})))},unmuteUsers:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Promise.all(t.map((function(t){return Je(e,t)})))},fetchMascot:function(e){return function(e){return e.rootState.api.backendInteractor.fetchMascot().then((function(t){var n=t.url;return e.commit("updateMascot",n)}))}(e)},fetchDomainMutes:function(e){return e.rootState.api.backendInteractor.fetchDomainMutes().then((function(t){return e.commit("saveDomainMutes",t),t}))},muteDomain:function(e,t){return We(e,t)},unmuteDomain:function(e,t){return Ye(e,t)},muteDomains:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Promise.all(t.map((function(t){return We(e,t)})))},unmuteDomains:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Promise.all(t.map((function(t){return Ye(e,t)})))},fetchFriends:function(e,t){var n=e.rootState,r=e.commit,i=n.users.usersObject[t],o=x()(i.friendIds);return n.api.backendInteractor.fetchFriends({id:t,maxId:o}).then((function(e){return r("addNewUsers",e),r("saveFriendIds",{id:t,friendIds:he()(e,"id")}),e}))},fetchFollowers:function(e,t){var n=e.rootState,r=e.commit,i=n.users.usersObject[t],o=x()(i.followerIds);return n.api.backendInteractor.fetchFollowers({id:t,maxId:o}).then((function(e){return r("addNewUsers",e),r("saveFollowerIds",{id:t,followerIds:he()(e,"id")}),e}))},clearFriends:function(e,t){(0,e.commit)("clearFriends",t)},clearFollowers:function(e,t){(0,e.commit)("clearFollowers",t)},subscribeUser:function(e,t){var n=e.rootState,r=e.commit;return n.api.backendInteractor.subscribeUser({id:t}).then((function(e){return r("updateUserRelationship",[e])}))},unsubscribeUser:function(e,t){var n=e.rootState,r=e.commit;return n.api.backendInteractor.unsubscribeUser({id:t}).then((function(e){return r("updateUserRelationship",[e])}))},toggleActivationStatus:function(e,t){var n=e.rootState,r=e.commit,i=t.user;(i.deactivated?n.api.backendInteractor.activateUser:n.api.backendInteractor.deactivateUser)({user:i}).then((function(e){var t=!e.is_active;r("updateActivationStatus",{user:e,deactivated:t})}))},registerPushNotifications:function(e){var t=e.state.currentUser.credentials,n=e.rootState.instance.vapidPublicKey;Re(e.rootState.config.webPushNotifications,n,t,e.rootState.config.notificationVisibility)},unregisterPushNotifications:function(e){!function(e){Fe()&&Promise.all([Le(e),Ee().then((function(e){return function(e){return e.pushManager.getSubscription().then((function(e){if(null!==e)return e.unsubscribe()}))}(e).then((function(t){return[e,t]}))})).then((function(e){var t=m()(e,2),n=t[0];return t[1]||console.warn("Push subscription cancellation wasn't successful, killing SW anyway..."),n.unregister().then((function(e){e||console.warn("Failed to kill SW")}))}))]).catch((function(e){return console.warn("Failed to disable Web Push Notifications: ".concat(e.message))}))}(e.state.currentUser.credentials)},addNewUsers:function(e,t){(0,e.commit)("addNewUsers",t)},addNewStatuses:function(e,t){var n=t.statuses,r=he()(n,"user"),i=me()(he()(n,"retweeted_status.user"));e.commit("addNewUsers",r),e.commit("addNewUsers",i),B()(n,(function(t){e.commit("setUserForStatus",t),e.commit("setPinnedToUser",t)})),B()(me()(he()(n,"retweeted_status")),(function(t){e.commit("setUserForStatus",t),e.commit("setPinnedToUser",t)}))},addNewNotifications:function(e,t){var n=t.notifications,r=he()(n,"from_profile"),i=he()(n,"target").filter((function(e){return e})),o=n.map((function(e){return e.id}));e.commit("addNewUsers",r),e.commit("addNewUsers",i);var s=e.rootState.statuses.notifications.idStore,a=Object.entries(s).filter((function(e){var t=m()(e,2),n=t[0];t[1];return o.includes(n)})).map((function(e){var t=m()(e,2);t[0];return t[1]}));B()(a,(function(t){e.commit("setUserForNotification",t)}))},searchUsers:function(e,t){var n=e.rootState,r=e.commit,i=t.query;return n.api.backendInteractor.searchUsers({query:i}).then((function(e){return r("addNewUsers",e),e}))},signUp:function(e,t){return i()(s.a.mark((function n(){var r,i,o;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.commit("signUpPending"),r=e.rootState,n.prev=2,n.next=5,r.api.backendInteractor.register({params:Ne({},t)});case 5:i=n.sent,e.commit("signUpSuccess"),e.commit("setToken",i.access_token),e.dispatch("loginUser",i.access_token),n.next=16;break;case 11:throw n.prev=11,n.t0=n.catch(2),o=n.t0.message,e.commit("signUpFailure",o),n.t0;case 16:case"end":return n.stop()}}),n,null,[[2,11]])})))()},getCaptcha:function(e){return i()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.rootState.api.backendInteractor.getCaptcha());case 1:case"end":return t.stop()}}),t)})))()},logout:function(e){var t=e.rootState,n=t.oauth,r=t.instance,i=Ne(Ne({},n),{},{commit:e.commit,instance:r.server});return ze.getOrCreateApp(i).then((function(e){var t={app:e,instance:i.instance,token:n.userToken};return ze.revokeToken(t)})).then((function(){e.commit("clearCurrentUser"),e.dispatch("disconnectFromSocket"),e.commit("clearToken"),e.dispatch("stopFetchingTimeline","friends"),e.commit("setBackendInteractor",Se(e.getters.getToken())),e.dispatch("stopFetchingNotifications"),e.dispatch("stopFetchingFollowRequests"),e.commit("clearNotifications"),e.commit("resetStatuses"),e.dispatch("resetChats"),e.dispatch("setLastTimeline","public-timeline"),e.dispatch("setLayoutWidth",Ce()),e.dispatch("setLayoutHeight",Pe())}))},loginUser:function(e,t){return new Promise((function(n,r){var i=e.commit;i("beginLogin"),e.rootState.api.backendInteractor.verifyCredentials(t).then((function(o){if(o.error){var s=o.error;i("endLogin"),401===s.status?r(new Error("Wrong username or password")):r(new Error("An error occurred, please try again"))}else{var a=o;a.credentials=t,a.blockIds=[],a.muteIds=[],a.domainMutes=[],i("setCurrentUser",a),i("addNewUsers",[a]),e.dispatch("fetchEmoji"),(c=window.Notification,c?"default"===c.permission?c.requestPermission():Promise.resolve(c.permission):Promise.resolve(null)).then((function(e){return i("setNotificationPermission",e)})),i("setBackendInteractor",Se(t)),a.token&&(e.dispatch("setWsToken",a.token),e.dispatch("initializeSocket"));e.getters.mergedConfig.useStreamingApi?(e.dispatch("fetchTimeline","friends",{since:null}),e.dispatch("fetchNotifications",{since:null}),e.dispatch("enableMastoSockets",!0).catch((function(e){console.error("Failed initializing MastoAPI Streaming socket",e)})).then((function(){e.dispatch("fetchChats",{latest:!0}),setTimeout((function(){return e.dispatch("setNotificationsSilence",!1)}),1e4)}))):(e.dispatch("startFetchingTimeline",{timeline:"friends"}),e.dispatch("startFetchingNotifications"),e.dispatch("startFetchingChats")),e.dispatch("fetchMutes"),e.dispatch("setLayoutWidth",Ce()),e.dispatch("setLayoutHeight",Pe()),e.rootState.api.backendInteractor.fetchFriends({id:a.id}).then((function(e){return i("addNewUsers",e)}))}var c;i("endLogin"),n()})).catch((function(e){console.log(e),i("endLogin"),r(new Error("Failed to connect to server, try again"))}))}))}}},Ke=n(169),Xe=n.n(Ke),Ze=n(127),Qe=function(e,t){if(t.lastMessage&&(e.rootState.chats.currentChatId!==t.id||document.hidden)&&e.rootState.users.currentUser.id!==t.lastMessage.account_id){var n={tag:t.lastMessage.id,title:t.account.name,icon:t.account.profile_image_url,body:t.lastMessage.content};t.lastMessage.attachment&&"image"===t.lastMessage.attachment.type&&(n.image=t.lastMessage.attachment.preview_url),Object(Ze.a)(e.rootState,n)}},et=n(321);function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rt={state:{retryMultiplier:1,backendInteractor:Se(),fetchers:{},socket:null,mastoUserSocket:null,mastoUserSocketStatus:null,followRequests:[]},mutations:{setBackendInteractor:function(e,t){e.backendInteractor=t},addFetcher:function(e,t){var n=t.fetcherName,r=t.fetcher;e.fetchers[n]=r},removeFetcher:function(e,t){var n=t.fetcherName;t.fetcher;e.fetchers[n].stop(),delete e.fetchers[n]},setWsToken:function(e,t){e.wsToken=t},setSocket:function(e,t){e.socket=t},setFollowRequests:function(e,t){e.followRequests=t},setMastoUserSocketStatus:function(e,t){e.mastoUserSocketStatus=t},incrementRetryMultiplier:function(e){e.retryMultiplier=Math.max(++e.retryMultiplier,3)},resetRetryMultiplier:function(e){e.retryMultiplier=1}},actions:{enableMastoSockets:function(e,t){var n=e.state,r=e.dispatch,i=e.commit;if(!n.mastoUserSocket||[WebSocket.CLOSED,WebSocket.CLOSING].includes(n.mastoUserSocket.getState()))return i("setMastoUserSocketStatus",t?j.b.STARTING_INITIAL:j.b.STARTING),r("startMastoUserSocket")},disableMastoSockets:function(e){var t=e.state,n=e.dispatch,r=e.commit;if(t.mastoUserSocket)return r("setMastoUserSocketStatus",j.b.DISABLED),n("stopMastoUserSocket")},startMastoUserSocket:function(e){return new Promise((function(t,n){try{var r=e.state,i=e.commit,o=e.dispatch,s=e.rootState.statuses.timelines.friends;r.mastoUserSocket=r.backendInteractor.startUserSocket({store:e}),r.mastoUserSocket.addEventListener("message",(function(t){var n=t.detail;n&&("notification"===n.event?o("addNewNotifications",{notifications:[n.notification],older:!1}):"update"===n.event?o("addNewStatuses",{statuses:[n.status],userId:!1,showImmediately:0===s.visibleStatuses.length,timeline:"friends"}):"delete"===n.event?o("deleteStatusById",n.id):"pleroma:chat_update"===n.event&&setTimeout((function(){o("addChatMessages",{chatId:n.chatUpdate.id,messages:[n.chatUpdate.lastMessage]}),o("updateChat",{chat:n.chatUpdate}),Qe(e,n.chatUpdate)}),100))})),r.mastoUserSocket.addEventListener("open",(function(){r.mastoUserSocketStatus!==j.b.STARTING_INITIAL&&o("pushGlobalNotice",{level:"success",messageKey:"timeline.socket_reconnected",timeout:5e3}),new Set([j.b.ERROR,j.b.DISABLED]).has(r.mastoUserSocketStatus)&&(o("stopFetchingTimeline",{timeline:"friends"}),o("stopFetchingNotifications"),o("stopFetchingChats")),i("resetRetryMultiplier"),i("setMastoUserSocketStatus",j.b.JOINED)})),r.mastoUserSocket.addEventListener("error",(function(e){var t=e.detail;console.error("Error in MastoAPI websocket:",t),o("clearOpenedChats")})),r.mastoUserSocket.addEventListener("close",(function(e){var t=e.detail,n=new Set([1e3,1001]),s=t.code;n.has(s)?(console.debug("Not restarting socket becasue of closure code ".concat(s," is in ignore list")),i("setMastoUserSocketStatus",j.b.CLOSED)):(console.warn("MastoAPI websocket disconnected, restarting. CloseEvent code: ".concat(s)),setTimeout((function(){o("startMastoUserSocket")}),1e3*r.retryMultiplier),i("incrementRetryMultiplier"),r.mastoUserSocketStatus!==j.b.ERROR&&(o("startFetchingTimeline",{timeline:"friends"}),o("startFetchingNotifications"),o("startFetchingChats"),o("pushGlobalNotice",{level:"error",messageKey:"timeline.socket_broke",messageArgs:[s],timeout:5e3})),i("setMastoUserSocketStatus",j.b.ERROR)),o("clearOpenedChats")})),t()}catch(e){n(e)}}))},stopMastoUserSocket:function(e){var t=e.state,n=e.dispatch;n("startFetchingTimeline",{timeline:"friends"}),n("startFetchingNotifications"),n("startFetchingChats"),t.mastoUserSocket.close()},startFetchingTimeline:function(e,t){var n=t.timeline,r=void 0===n?"friends":n,i=t.tag,o=void 0!==i&&i,s=t.userId,a=void 0!==s&&s;if(!e.state.fetchers[r]){var c=e.state.backendInteractor.startFetchingTimeline({timeline:r,store:e,userId:a,tag:o});e.commit("addFetcher",{fetcherName:r,fetcher:c})}},stopFetchingTimeline:function(e,t){var n=e.state.fetchers[t];n&&e.commit("removeFetcher",{fetcherName:t,fetcher:n})},fetchTimeline:function(e,t,n){var r=Xe()({},n);e.state.backendInteractor.fetchTimeline(nt({store:e,timeline:t},r))},startFetchingNotifications:function(e){if(!e.state.fetchers.notifications){var t=e.state.backendInteractor.startFetchingNotifications({store:e});e.commit("addFetcher",{fetcherName:"notifications",fetcher:t})}},stopFetchingNotifications:function(e){var t=e.state.fetchers.notifications;t&&e.commit("removeFetcher",{fetcherName:"notifications",fetcher:t})},fetchNotifications:function(e,t){var n=Xe()({},t);e.state.backendInteractor.fetchNotifications(nt({store:e},n))},startFetchingFollowRequests:function(e){if(!e.state.fetchers.followRequests){var t=e.state.backendInteractor.startFetchingFollowRequests({store:e});e.commit("addFetcher",{fetcherName:"followRequests",fetcher:t})}},stopFetchingFollowRequests:function(e){var t=e.state.fetchers.followRequests;t&&e.commit("removeFetcher",{fetcherName:"followRequests",fetcher:t})},removeFollowRequest:function(e,t){var n=e.state.followRequests.filter((function(e){return e!==t}));e.commit("setFollowRequests",n)},setWsToken:function(e,t){e.commit("setWsToken",t)},initializeSocket:function(e){var t=e.dispatch,n=e.commit,r=e.state,i=e.rootState,o=r.wsToken;if(i.instance.shoutAvailable&&void 0!==o&&null===r.socket){var s=new et.a("/socket",{params:{token:o}});s.connect(),n("setSocket",s),t("initializeShout",s)}},disconnectFromSocket:function(e){var t=e.commit,n=e.state;n.socket&&n.socket.disconnect(),t("setSocket",null)}}},it=n(220),ot={state:{messages:[],channel:{state:""},joined:!1},mutations:{setChannel:function(e,t){e.channel=t},addMessage:function(e,t){e.messages.push(t),e.messages=e.messages.slice(-19,20)},setMessages:function(e,t){e.messages=t.slice(-19,20)},setJoined:function(e,t){e.joined=t}},actions:{initializeShout:function(e,t){var n=t.channel("chat:public");n.joinPush.receive("ok",(function(){e.commit("setJoined",!0)})),n.onClose((function(){e.commit("setJoined",!1)})),n.onError((function(){e.commit("setJoined",!1)})),n.on("new_msg",(function(t){e.commit("addMessage",t)})),n.on("messages",(function(t){var n=t.messages;e.commit("setMessages",n)})),n.join(),e.commit("setChannel",n)}}},st={state:{clientId:!1,clientSecret:!1,appToken:!1,userToken:!1},mutations:{setClientData:function(e,t){var n=t.clientId,r=t.clientSecret;e.clientId=n,e.clientSecret=r},setAppToken:function(e,t){e.appToken=t},setToken:function(e,t){e.userToken=t},clearToken:function(e){e.userToken=!1,delete e.token}},getters:{getToken:function(e){return function(){return e.userToken||e.token||e.appToken}},getUserToken:function(e){return function(){return e.userToken||e.token}}}},at=function(e){e.strategy=e.initStrategy,e.settings={}},ct={namespaced:!0,state:{settings:{},strategy:"password",initStrategy:"password"},getters:{settings:function(e,t){return e.settings},requiredPassword:function(e,t,n){return"password"===e.strategy},requiredToken:function(e,t,n){return"token"===e.strategy},requiredTOTP:function(e,t,n){return"totp"===e.strategy},requiredRecovery:function(e,t,n){return"recovery"===e.strategy}},mutations:{setInitialStrategy:function(e,t){t&&(e.initStrategy=t,e.strategy=t)},requirePassword:function(e){e.strategy="password"},requireToken:function(e){e.strategy="token"},requireMFA:function(e,t){var n=t.settings;e.settings=n,e.strategy="totp"},requireRecovery:function(e){e.strategy="recovery"},requireTOTP:function(e){e.strategy="totp"},abortMFA:function(e){at(e)}},actions:{login:function(e,t){return i()(s.a.mark((function n(){var r,i,o,a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.state,i=e.dispatch,o=e.commit,a=t.access_token,o("setToken",a,{root:!0}),n.next=5,i("loginUser",a,{root:!0});case 5:at(r);case 6:case"end":return n.stop()}}),n)})))()}}},lt=n(33),ut=new Set(["image","video","audio","flash"]),dt={state:{media:[],currentIndex:0,activated:!1},mutations:{setMedia:function(e,t){e.media=t},setCurrentMedia:function(e,t){e.activated=!0,e.currentIndex=t},close:function(e){e.activated=!1}},actions:{setMedia:function(e,t){(0,e.commit)("setMedia",t.filter((function(e){var t=lt.a.fileType(e.mimetype);return ut.has(t)})))},setCurrentMedia:function(e,t){(0,e.commit)("setCurrentMedia",e.state.media.indexOf(t)||0)},closeMediaViewer:function(e){(0,e.commit)("close")}}},pt={state:{tokens:[]},actions:{fetchTokens:function(e){var t=e.rootState,n=e.commit;t.api.backendInteractor.fetchOAuthTokens().then((function(e){n("swapTokens",e)}))},revokeToken:function(e,t){var n=e.rootState,r=e.commit,i=e.state;n.api.backendInteractor.revokeOAuthToken({id:t}).then((function(e){201===e.status&&r("swapTokens",i.tokens.filter((function(e){return e.id!==t})))}))}},mutations:{swapTokens:function(e,t){e.tokens=t}}},ht=n(49),bt=n.n(ht),mt={state:{userId:null,statuses:[],preTickedIds:[],modalActivated:!1},mutations:{openUserReportingModal:function(e,t){var n=t.userId,r=t.statuses,i=t.preTickedIds;e.userId=n,e.statuses=r,e.preTickedIds=i,e.modalActivated=!0},closeUserReportingModal:function(e){e.modalActivated=!1}},actions:{openUserReportingModal:function(e,t){var n=e.rootState,r=e.commit,i=t.userId,o=t.statusIds,s=void 0===o?[]:o,a=s.map((function(e){return n.statuses.allStatusesObject[e]})),c=s,l=a.concat(bt()(n.statuses.allStatuses,(function(e){return e.user.id===i&&!c.includes(e.id)})));r("openUserReportingModal",{userId:i,statuses:l,preTickedIds:c})},closeUserReportingModal:function(e){(0,e.commit)("closeUserReportingModal")}}},ft={state:{trackedPolls:{},pollsObject:{}},mutations:{mergeOrAddPoll:function(e,t){var n=e.pollsObject[t.id];t.expired=Date.now()>Date.parse(t.expires_at),e.pollsObject[t.id]=n?$()(n,t):t},trackPoll:function(e,t){var n=e.trackedPolls[t];e.trackedPolls[t]=n?n+1:1},untrackPoll:function(e,t){var n=e.trackedPolls[t];e.trackedPolls[t]=n?n-1:0}},actions:{mergeOrAddPoll:function(e,t){(0,e.commit)("mergeOrAddPoll",t)},updateTrackedPoll:function(e,t){var n=e.rootState,r=e.dispatch,i=e.commit;n.api.backendInteractor.fetchPoll({pollId:t}).then((function(e){setTimeout((function(){n.polls.trackedPolls[t]&&r("updateTrackedPoll",t)}),3e4),i("mergeOrAddPoll",e)}))},trackPoll:function(e,t){var n=e.rootState,r=e.commit,i=e.dispatch;n.polls.trackedPolls[t]||setTimeout((function(){return i("updateTrackedPoll",t)}),3e4),r("trackPoll",t)},untrackPoll:function(e,t){(0,e.commit)("untrackPoll",t)},votePoll:function(e,t){var n=e.rootState,r=e.commit,i=(t.id,t.pollId),o=t.choices;return n.api.backendInteractor.vote({pollId:i,choices:o}).then((function(e){return r("mergeOrAddPoll",e),e}))}}},Ot={state:{params:null,modalActivated:!1},mutations:{openPostStatusModal:function(e,t){e.params=t,e.modalActivated=!0},closePostStatusModal:function(e){e.modalActivated=!1}},actions:{openPostStatusModal:function(e,t){(0,e.commit)("openPostStatusModal",t)},closePostStatusModal:function(e){(0,e.commit)("closePostStatusModal")}}},jt=n(134),gt=n.n(jt),vt=n(100),yt=n.n(vt),wt=n(0),kt=n(28),_t=n.n(kt),St=n(322),Ct=n.n(St),Pt=n(125),xt=n.n(Pt);function Dt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Tt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function Tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var It=function(e,t){if(t.idempotency_key)return e.idempotencyKeyIndex[t.idempotency_key]},$t={add:function(e,t){var n=t.messages,r=t.updateMaxId,i=void 0===r||r;if(e)for(var o=function(t){var r=n[t];if(r.chat_id!==e.chatId)return{v:void 0};if(r.fakeId){var o=e.idIndex[r.fakeId];if(o)return e.idIndex[r.id]&&(delete e.idIndex[r.id],e.messages=e.messages.filter((function(e){return e.id!==r.id}))),Object.assign(o,r,{error:!1}),delete o.fakeId,e.idIndex[o.id]=o,delete e.idIndex[r.fakeId],{v:void 0}}(!e.minId||!r.pending&&r.id<e.minId)&&(e.minId=r.id),(!e.maxId||r.id>e.maxId)&&i&&(e.maxId=r.id),e.idIndex[r.id]||It(e,r)||(e.lastSeenMessageId<r.id&&e.newMessageCount++,e.idIndex[r.id]=r,e.messages.push(e.idIndex[r.id]),e.idempotencyKeyIndex[r.idempotency_key]=!0)},s=0;s<n.length;s++){var a=o(s);if("object"===_t()(a))return a.v}},empty:function(e){return{idIndex:{},idempotencyKeyIndex:{},messages:[],newMessageCount:0,lastSeenMessageId:"0",chatId:e,minId:void 0,maxId:void 0}},getView:function(e){if(!e)return[];var t,n=[],r=yt()(e.messages,["pending","id"],["asc","asc"]),i=r[0],o=r[r.length-1];if(i){var s=new Date(i.created_at);s.setHours(0,0,0,0),n.push({type:"date",date:s,id:s.getTime().toString()})}for(var a=!1,c=0;c<r.length;c++){var l=r[c],u=r[c+1],d=new Date(l.created_at);d.setHours(0,0,0,0),o&&o.date<d&&(n.push({type:"date",date:d,id:d.getTime().toString()}),o.isTail=!0,t=void 0,a=!0);var p={type:"message",data:l,date:d,id:l.id,messageChainId:t};(u&&u.account_id)!==l.account_id&&(p.isTail=!0,t=void 0),((o&&o.data&&o.data.account_id)!==l.account_id||a)&&(t=Ct()(),p.isHead=!0,p.messageChainId=t),n.push(p),o=p,a=!1}return n},deleteMessage:function(e,t){if(e){if(e.messages=e.messages.filter((function(e){return e.id!==t})),delete e.idIndex[t],e.maxId===t){var n=F()(e.messages,"id");e.maxId=n.id}if(e.minId===t){var r=M()(e.messages,"id");e.minId=r.id}}},cullOlderMessages:function(e){var t=e.messages.length,n=t-50;if(!(t<=50)){e.messages=xt()(e.messages,["id"]),e.minId=e.messages[n].id;var r,i=Dt(e.messages);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.id<e.minId&&(delete e.idIndex[o.id],delete e.idempotencyKeyIndex[o.idempotency_key])}}catch(e){i.e(e)}finally{i.f()}e.messages=e.messages.slice(n,t)}},resetNewMessageCount:function(e){e&&(e.newMessageCount=0,e.lastSeenMessageId=e.maxId)},clear:function(e){var t,n=[],r=Dt(e.messages);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.error?n.push(i.id):(delete e.idIndex[i.id],delete e.idempotencyKeyIndex[i.idempotency_key])}}catch(e){r.e(e)}finally{r.f()}e.messages=e.messages.filter((function(e){return n.includes(e.id)})),e.newMessageCount=0,e.lastSeenMessageId="0",e.minId=void 0,e.maxId=void 0},handleMessageError:function(e,t,n){if(e){var r=e.idIndex[t];if(r&&(r.error=!0,r.pending=!1,!n)){var i=yt()(e.messages,["pending","id"],["asc","desc"])[0];if(i){var o=r.id;r.id="".concat(i.id,"-").concat((new Date).getTime()),e.idIndex[r.id]=r,delete e.idIndex[o]}}}}},zt=n(14);function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ft={chatList:{data:[],idStore:{}},chatListFetcher:null,openedChats:Object(wt.F)({}),openedChatMessageServices:Object(wt.F)({}),fetcher:void 0,currentChatId:null,lastReadMessageId:null},Et=function(e,t){return L()(e.chatList.data,{id:t})},Lt={state:Ut({},Ft),getters:{currentChat:function(e){return e.openedChats[e.currentChatId]},currentChatMessageService:function(e){return e.openedChatMessageServices[e.currentChatId]},findOpenedChatByRecipientId:function(e){return function(t){return L()(e.openedChats,(function(e){return e.account.id===t}))}},sortedChatList:function(e){return yt()(e.chatList.data,["updated_at"],["desc"])},unreadChatCount:function(e){return gt()(e.chatList.data,"unread")}},actions:{startFetchingChats:function(e){var t=e.dispatch,n=e.commit,r=function(){return t("fetchChats",{latest:!0})};r(),n("setChatListFetcher",{fetcher:function(){return Object(je.a)(r,6e4)}})},stopFetchingChats:function(e){(0,e.commit)("setChatListFetcher",{fetcher:void 0})},fetchChats:function(e){var t=e.dispatch,n=e.rootState;e.commit;return n.api.backendInteractor.chats().then((function(e){var n=e.chats;return t("addNewChats",{chats:n}),n}))},addNewChats:function(e,t){var n=t.chats;(0,e.commit)("addNewChats",{dispatch:e.dispatch,chats:n,rootGetters:e.rootGetters,newChatMessageSideEffects:function(t){Qe(e,t)}})},updateChat:function(e,t){(0,e.commit)("updateChat",{chat:t.chat})},startFetchingCurrentChat:function(e,t){e.commit;(0,e.dispatch)("setCurrentChatFetcher",{fetcher:t.fetcher})},setCurrentChatFetcher:function(e,t){e.rootState;(0,e.commit)("setCurrentChatFetcher",{fetcher:t.fetcher})},addOpenedChat:function(e,t){e.rootState;var n=e.commit,r=e.dispatch,i=t.chat;n("addOpenedChat",{dispatch:r,chat:Object(zt.b)(i)}),r("addNewUsers",[i.account])},addChatMessages:function(e,t){var n=e.commit;n("addChatMessages",Ut({commit:n},t))},resetChatNewMessageCount:function(e,t){(0,e.commit)("resetChatNewMessageCount",t)},clearCurrentChat:function(e,t){e.rootState;var n=e.commit;e.dispatch;n("setCurrentChatId",{chatId:void 0}),n("setCurrentChatFetcher",{fetcher:void 0})},readChat:function(e,t){var n=e.rootState,r=e.commit,i=e.dispatch,o=t.id,s=t.lastReadId,a=n.chats.lastReadMessageId!==s;i("resetChatNewMessageCount"),r("readChat",{id:o,lastReadId:s}),a&&n.api.backendInteractor.readChat({id:o,lastReadId:s})},deleteChatMessage:function(e,t){var n=e.rootState,r=e.commit;n.api.backendInteractor.deleteChatMessage(t),r("deleteChatMessage",Ut({commit:r},t))},resetChats:function(e){var t=e.commit;(0,e.dispatch)("clearCurrentChat"),t("resetChats",{commit:t})},clearOpenedChats:function(e){e.rootState;var t=e.commit;e.dispatch,e.rootGetters;t("clearOpenedChats",{commit:t})},handleMessageError:function(e,t){var n=e.commit;n("handleMessageError",Ut({commit:n},t))},cullOlderMessages:function(e,t){(0,e.commit)("cullOlderMessages",t)}},mutations:{setChatListFetcher:function(e,t){t.commit;var n=t.fetcher,r=e.chatListFetcher;r&&r.stop(),e.chatListFetcher=n&&n()},setCurrentChatFetcher:function(e,t){var n=t.fetcher,r=e.fetcher;r&&r.stop(),e.fetcher=n&&n()},addOpenedChat:function(e,t){t._dispatch;var n=t.chat;e.currentChatId=n.id,e.openedChats[n.id]=n,e.openedChatMessageServices[n.id]||(e.openedChatMessageServices[n.id]=$t.empty(n.id))},setCurrentChatId:function(e,t){var n=t.chatId;e.currentChatId=n},addNewChats:function(e,t){var n=t.chats,r=t.newChatMessageSideEffects;n.forEach((function(t){var n=Et(e,t.id);if(n){var i=(n.lastMessage&&n.lastMessage.id)!==(t.lastMessage&&t.lastMessage.id);n.lastMessage=t.lastMessage,n.unread=t.unread,n.updated_at=t.updated_at,i&&n.unread&&r(t)}else e.chatList.data.push(t),e.chatList.idStore[t.id]=t}))},updateChat:function(e,t){t._dispatch;var n=t.chat,r=(t._rootGetters,Et(e,n.id));r&&(r.lastMessage=n.lastMessage,r.unread=n.unread,r.updated_at=n.updated_at),r||e.chatList.data.unshift(n),e.chatList.idStore[n.id]=n},deleteChat:function(e,t){t._dispatch;var n=t.id;t._rootGetters;e.chats.data=e.chats.data.filter((function(e){return e.last_status.id!==n})),e.chats.idStore=_()(e.chats.idStore,(function(e){return e.last_status.id===n}))},resetChats:function(e,t){var n=t.commit;for(var r in e.chatList={data:[],idStore:{}},e.currentChatId=null,n("setChatListFetcher",{fetcher:void 0}),e.openedChats)$t.clear(e.openedChatMessageServices[r]),delete e.openedChats[r],delete e.openedChatMessageServices[r]},setChatsLoading:function(e,t){var n=t.value;e.chats.loading=n},addChatMessages:function(e,t){var n=t.chatId,r=t.messages,i=t.updateMaxId,o=e.openedChatMessageServices[n];o&&$t.add(o,{messages:r.map(zt.c),updateMaxId:i})},deleteChatMessage:function(e,t){var n=t.chatId,r=t.messageId,i=e.openedChatMessageServices[n];i&&$t.deleteMessage(i,r)},resetChatNewMessageCount:function(e,t){var n=e.openedChatMessageServices[e.currentChatId];$t.resetNewMessageCount(n)},clearOpenedChats:function(e){var t=e.currentChatId;for(var n in e.openedChats)t!==n&&($t.clear(e.openedChatMessageServices[n]),delete e.openedChats[n],delete e.openedChatMessageServices[n])},readChat:function(e,t){var n=t.id,r=t.lastReadId;e.lastReadMessageId=r;var i=Et(e,n);i&&(i.unread=0)},handleMessageError:function(e,t){var n=t.chatId,r=t.fakeId,i=t.isRetry,o=e.openedChatMessageServices[n];$t.handleMessageError(o,r,i)},cullOlderMessages:function(e,t){$t.cullOlderMessages(e.openedChatMessageServices[t])}}},Rt=n(335),At=n(135),Nt=n.n(At),Bt=n(39),Vt=n.n(Bt),Ht=n(16),qt=n.n(Ht),Jt=n(323),Wt=n.n(Jt),Yt=n(324),Gt=!1,Kt=function(e,t){return 0===t.length?e:t.reduce((function(t,n){return Vt()(t,n,qt()(e,n)),t}),{})},Xt=["markNotificationsAsSeen","clearCurrentUser","setCurrentUser","setHighlight","setOption","setClientData","setToken","clearToken"],Zt=n.n(Yt).a;function Qt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.key,n=void 0===t?"vuex-lz":t,r=e.paths,i=void 0===r?[]:r,o=e.getState,s=void 0===o?function(e,t){return t.getItem(e)}:o,a=e.setState,c=void 0===a?function(e,t,n){return Gt?n.setItem(e,t):(console.log("waiting for old state to be loaded..."),Promise.resolve())}:a,l=e.reducer,u=void 0===l?Kt:l,d=e.storage,p=void 0===d?Zt:d,h=e.subscriber,b=void 0===h?function(e){return function(t){return e.subscribe(t)}}:h;return s(n,p).then((function(e){return function(t){try{if(null!==e&&"object"===_t()(e)){var r=e.users||{};r.usersObject={};var o=r.users||[];B()(o,(function(e){r.usersObject[e.id]=e})),e.users=r,t.replaceState(Wt()({},t.state,e))}Gt=!0}catch(e){console.log("Couldn't load state"),console.error(e),Gt=!0}b(t)((function(e,r){try{Xt.includes(e.type)&&c(n,u(Nt()(r),i),p).then((function(n){void 0!==n&&("setOption"!==e.type&&"setCurrentUser"!==e.type||t.dispatch("settingsSaved",{success:n}))}),(function(n){"setOption"!==e.type&&"setCurrentUser"!==e.type||t.dispatch("settingsSaved",{error:n})}))}catch(e){console.log("Couldn't persist state:"),console.log(e)}}))}}))}var en=function(e){e.subscribe((function(t,n){var r=n.instance.vapidPublicKey,i=n.config.webPushNotifications,o="granted"===n.interface.notificationPermission,s=n.users.currentUser,a="setCurrentUser"===t.type,c="setInstanceOption"===t.type&&"vapidPublicKey"===t.payload.name,l="setNotificationPermission"===t.type&&"granted"===t.payload,u="setOption"===t.type&&"webPushNotifications"===t.payload.name,d="setOption"===t.type&&"notificationVisibility"===t.payload.name;if(a||c||l||u||d){if(s&&r&&o&&i)return e.dispatch("registerPushNotifications");if(u&&!i)return e.dispatch("unregisterPushNotifications")}}))},tn=n(70),nn=n(171),rn=n(325),on=n.n(rn),sn=n(68);const an=Object(wt.k)("div",{id:"app_bg_wrapper",class:"app-bg-wrapper"},null,-1),cn=Object(wt.k)("div",{class:"underlay"},null,-1),ln=Object(wt.k)("div",{id:"notifs-sidebar"},null,-1),un={key:0,class:"login-hint panel panel-default"},dn=Object(wt.k)("div",{id:"modal"},null,-1);const pn={class:"user-panel"},hn={key:"user-panel-signed",class:"panel panel-default signed-in"};const bn={class:"login panel panel-default"},mn={class:"panel-heading"},fn={class:"panel-body"},On={class:"form-group"},jn={for:"username"},gn=["disabled","placeholder"],vn={class:"form-group"},yn={for:"password"},wn=["disabled"],kn={class:"form-group"},_n={key:1,class:"form-group"},Sn={class:"form-group"},Cn={class:"login-bottom"},Pn=["disabled"],xn={key:0,class:"form-group"},Dn={class:"alert error"};var Tn=n(6),In=n(3);function $n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$n(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Tn.c.add(In.rb);var Mn={data:function(){return{user:{},error:!1}},computed:zn(zn({isPasswordAuth:function(){return this.requiredPassword},isTokenAuth:function(){return this.requiredToken}},Object(a.e)({registrationOpen:function(e){return e.instance.registrationOpen},instance:function(e){return e.instance},loggingIn:function(e){return e.users.loggingIn},oauth:function(e){return e.oauth}})),Object(a.c)("authFlow",["requiredPassword","requiredToken","requiredMFA"])),methods:zn(zn(zn({},Object(a.d)("authFlow",["requireMFA"])),Object(a.b)({login:"authFlow/login"})),{},{submit:function(){this.isTokenAuth?this.submitToken():this.submitPassword()},submitToken:function(){var e=this.oauth,t={clientId:e.clientId,clientSecret:e.clientSecret,instance:this.instance.server,commit:this.$store.commit};ze.getOrCreateApp(t).then((function(e){ze.login(zn(zn({},e),t))}))},submitPassword:function(){var e=this,t={clientId:this.oauth.clientId,oauth:this.oauth,instance:this.instance.server,commit:this.$store.commit};this.error=!1,ze.getOrCreateApp(t).then((function(n){ze.getTokenWithCredentials(zn(zn({},n),{},{instance:t.instance,username:e.user.username,password:e.user.password})).then((function(t){t.error?"mfa_required"===t.error?e.requireMFA({settings:t}):"password_reset_required"===t.identifier?e.$router.push({name:"password-reset",params:{passwordResetRequested:!0}}):(e.error=t.error,e.focusOnPasswordInput()):e.login(t).then((function(){e.$router.push({name:"friends"})}))}))}))},clearError:function(){this.error=!1},focusOnPasswordInput:function(){var e=this.$refs.passwordInput;e.focus(),e.setSelectionRange(0,e.value.length)}})},Un=(n(498),n(4)),Fn=n.n(Un);var En=Fn()(Mn,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("router-link"),a=Object(wt.J)("FAIcon");return Object(wt.D)(),Object(wt.j)("div",bn,[Object(wt.k)("div",mn,Object(wt.O)(e.$t("login.login")),1),Object(wt.k)("div",fn,[Object(wt.k)("form",{class:"login-form",onSubmit:t[2]||(t[2]=Object(wt.Y)((...t)=>e.submit&&e.submit(...t),["prevent"]))},[e.isPasswordAuth?(Object(wt.D)(),Object(wt.j)(wt.a,{key:0},[Object(wt.k)("div",On,[Object(wt.k)("label",jn,Object(wt.O)(e.$t("login.username")),1),Object(wt.W)(Object(wt.k)("input",{id:"username","onUpdate:modelValue":t[0]||(t[0]=t=>e.user.username=t),disabled:e.loggingIn,class:"form-control",placeholder:e.$t("login.placeholder")},null,8,gn),[[wt.S,e.user.username]])]),Object(wt.k)("div",vn,[Object(wt.k)("label",yn,Object(wt.O)(e.$t("login.password")),1),Object(wt.W)(Object(wt.k)("input",{id:"password",ref:"passwordInput","onUpdate:modelValue":t[1]||(t[1]=t=>e.user.password=t),disabled:e.loggingIn,class:"form-control",type:"password"},null,8,wn),[[wt.S,e.user.password]])]),Object(wt.k)("div",kn,[Object(wt.m)(s,{to:{name:"password-reset"}},{default:Object(wt.V)(()=>[Object(wt.l)(Object(wt.O)(e.$t("password_reset.forgot_password")),1)]),_:1})])],64)):Object(wt.i)("",!0),e.isTokenAuth?(Object(wt.D)(),Object(wt.j)("div",_n,[Object(wt.k)("p",null,Object(wt.O)(e.$t("login.description")),1)])):Object(wt.i)("",!0),Object(wt.k)("div",Sn,[Object(wt.k)("div",Cn,[Object(wt.k)("div",null,[e.registrationOpen?(Object(wt.D)(),Object(wt.h)(s,{key:0,to:{name:"registration"},class:"register"},{default:Object(wt.V)(()=>[Object(wt.l)(Object(wt.O)(e.$t("login.register")),1)]),_:1})):Object(wt.i)("",!0)]),Object(wt.k)("button",{disabled:e.loggingIn,type:"submit",class:"btn button-default"},Object(wt.O)(e.$t("login.login")),9,Pn)])])],32)]),e.error?(Object(wt.D)(),Object(wt.j)("div",xn,[Object(wt.k)("div",Dn,[Object(wt.l)(Object(wt.O)(e.error)+" ",1),Object(wt.k)("button",{class:"button-unstyled",onClick:t[3]||(t[3]=(...t)=>e.clearError&&e.clearError(...t))},[Object(wt.m)(a,{class:"fa-scale-110 fa-old-padding",icon:"times"})])])])):Object(wt.i)("",!0)])}]]);const Ln={class:"login panel panel-default"},Rn={class:"panel-heading"},An={class:"panel-body"},Nn={class:"form-group"},Bn={for:"code"},Vn={class:"form-group"},Hn={class:"login-bottom"},qn=Object(wt.k)("br",null,null,-1),Jn={type:"submit",class:"btn button-default"},Wn={key:0,class:"form-group"},Yn={class:"alert error"};var Gn={verifyOTPCode:function(e){var t=e.clientId,n=e.clientSecret,r=e.instance,i=e.mfaToken,o=e.code,s="".concat(r,"/oauth/mfa/challenge"),a=new window.FormData;return a.append("client_id",t),a.append("client_secret",n),a.append("mfa_token",i),a.append("code",o),a.append("challenge_type","totp"),window.fetch(s,{method:"POST",body:a}).then((function(e){return e.json()}))},verifyRecoveryCode:function(e){var t=e.clientId,n=e.clientSecret,r=e.instance,i=e.mfaToken,o=e.code,s="".concat(r,"/oauth/mfa/challenge"),a=new window.FormData;return a.append("client_id",t),a.append("client_secret",n),a.append("mfa_token",i),a.append("code",o),a.append("challenge_type","recovery"),window.fetch(s,{method:"POST",body:a}).then((function(e){return e.json()}))}};function Kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kn(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Tn.c.add(In.rb);var Zn={data:function(){return{code:null,error:!1}},computed:Xn(Xn({},Object(a.c)({authSettings:"authFlow/settings"})),Object(a.e)({instance:"instance",oauth:"oauth"})),methods:Xn(Xn(Xn({},Object(a.d)("authFlow",["requireTOTP","abortMFA"])),Object(a.b)({login:"authFlow/login"})),{},{clearError:function(){this.error=!1},submit:function(){var e=this,t=this.oauth,n={clientId:t.clientId,clientSecret:t.clientSecret,instance:this.instance.server,mfaToken:this.authSettings.mfa_token,code:this.code};Gn.verifyRecoveryCode(n).then((function(t){if(t.error)return e.error=t.error,void(e.code=null);e.login(t).then((function(){e.$router.push({name:"friends"})}))}))}})};var Qn=Fn()(Zn,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("FAIcon");return Object(wt.D)(),Object(wt.j)("div",Ln,[Object(wt.k)("div",Rn,Object(wt.O)(e.$t("login.heading.recovery")),1),Object(wt.k)("div",An,[Object(wt.k)("form",{class:"login-form",onSubmit:t[3]||(t[3]=Object(wt.Y)((...t)=>e.submit&&e.submit(...t),["prevent"]))},[Object(wt.k)("div",Nn,[Object(wt.k)("label",Bn,Object(wt.O)(e.$t("login.recovery_code")),1),Object(wt.W)(Object(wt.k)("input",{id:"code","onUpdate:modelValue":t[0]||(t[0]=t=>e.code=t),class:"form-control"},null,512),[[wt.S,e.code]])]),Object(wt.k)("div",Vn,[Object(wt.k)("div",Hn,[Object(wt.k)("div",null,[Object(wt.k)("button",{class:"button-unstyled -link",type:"button",onClick:t[1]||(t[1]=Object(wt.Y)((...t)=>e.requireTOTP&&e.requireTOTP(...t),["prevent"]))},Object(wt.O)(e.$t("login.enter_two_factor_code")),1),qn,Object(wt.k)("button",{class:"button-unstyled -link",type:"button",onClick:t[2]||(t[2]=Object(wt.Y)((...t)=>e.abortMFA&&e.abortMFA(...t),["prevent"]))},Object(wt.O)(e.$t("general.cancel")),1)]),Object(wt.k)("button",Jn,Object(wt.O)(e.$t("general.verify")),1)])])],32)]),e.error?(Object(wt.D)(),Object(wt.j)("div",Wn,[Object(wt.k)("div",Yn,[Object(wt.l)(Object(wt.O)(e.error)+" ",1),Object(wt.k)("button",{class:"button-unstyled",onClick:t[4]||(t[4]=(...t)=>e.clearError&&e.clearError(...t))},[Object(wt.m)(s,{class:"fa-scale-110 fa-old-padding",icon:"times"})])])])):Object(wt.i)("",!0)])}]]);const er={class:"login panel panel-default"},tr={class:"panel-heading"},nr={class:"panel-body"},rr={class:"form-group"},ir={for:"code"},or={class:"form-group"},sr={class:"login-bottom"},ar=Object(wt.k)("br",null,null,-1),cr={type:"submit",class:"btn button-default"},lr={key:0,class:"form-group"},ur={class:"alert error"};function dr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Tn.c.add(In.rb);var hr={data:function(){return{code:null,error:!1}},computed:pr(pr({},Object(a.c)({authSettings:"authFlow/settings"})),Object(a.e)({instance:"instance",oauth:"oauth"})),methods:pr(pr(pr({},Object(a.d)("authFlow",["requireRecovery","abortMFA"])),Object(a.b)({login:"authFlow/login"})),{},{clearError:function(){this.error=!1},submit:function(){var e=this,t=this.oauth,n={clientId:t.clientId,clientSecret:t.clientSecret,instance:this.instance.server,mfaToken:this.authSettings.mfa_token,code:this.code};Gn.verifyOTPCode(n).then((function(t){if(t.error)return e.error=t.error,void(e.code=null);e.login(t).then((function(){e.$router.push({name:"friends"})}))}))}})};var br=Fn()(hr,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("FAIcon");return Object(wt.D)(),Object(wt.j)("div",er,[Object(wt.k)("div",tr,Object(wt.O)(e.$t("login.heading.totp")),1),Object(wt.k)("div",nr,[Object(wt.k)("form",{class:"login-form",onSubmit:t[3]||(t[3]=Object(wt.Y)((...t)=>e.submit&&e.submit(...t),["prevent"]))},[Object(wt.k)("div",rr,[Object(wt.k)("label",ir,Object(wt.O)(e.$t("login.authentication_code")),1),Object(wt.W)(Object(wt.k)("input",{id:"code","onUpdate:modelValue":t[0]||(t[0]=t=>e.code=t),class:"form-control"},null,512),[[wt.S,e.code]])]),Object(wt.k)("div",or,[Object(wt.k)("div",sr,[Object(wt.k)("div",null,[Object(wt.k)("button",{class:"button-unstyled -link",type:"button",onClick:t[1]||(t[1]=Object(wt.Y)((...t)=>e.requireRecovery&&e.requireRecovery(...t),["prevent"]))},Object(wt.O)(e.$t("login.enter_recovery_code")),1),ar,Object(wt.k)("button",{class:"button-unstyled -link",type:"button",onClick:t[2]||(t[2]=Object(wt.Y)((...t)=>e.abortMFA&&e.abortMFA(...t),["prevent"]))},Object(wt.O)(e.$t("general.cancel")),1)]),Object(wt.k)("button",cr,Object(wt.O)(e.$t("general.verify")),1)])])],32)]),e.error?(Object(wt.D)(),Object(wt.j)("div",lr,[Object(wt.k)("div",ur,[Object(wt.l)(Object(wt.O)(e.error)+" ",1),Object(wt.k)("button",{class:"button-unstyled",onClick:t[4]||(t[4]=(...t)=>e.clearError&&e.clearError(...t))},[Object(wt.m)(s,{size:"lg",class:"fa-scale-110 fa-old-padding",icon:"times"})])])])):Object(wt.i)("",!0)])}]]);function mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var fr={name:"AuthForm",render:function(){return Object(wt.q)(Object(wt.J)(this.authForm))},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mr(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({authForm:function(){return this.requiredTOTP?"MFATOTPForm":this.requiredRecovery?"MFARecoveryForm":"LoginForm"}},Object(a.c)("authFlow",["requiredTOTP","requiredRecovery"])),components:{MFARecoveryForm:Qn,MFATOTPForm:br,LoginForm:En}},Or=n(57),jr=n(35);function gr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var vr={computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gr(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({signedIn:function(){return this.user}},Object(a.e)({user:function(e){return e.users.currentUser}})),components:{AuthForm:fr,PostStatusForm:Or.a,UserCard:jr.a}};n(531);var yr=Fn()(vr,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("UserCard"),a=Object(wt.J)("PostStatusForm"),c=Object(wt.J)("auth-form");return Object(wt.D)(),Object(wt.j)("div",pn,[e.signedIn?(Object(wt.D)(),Object(wt.j)("div",hn,[Object(wt.m)(s,{"user-id":e.user.id,"hide-bio":!0,rounded:"top"},null,8,["user-id"]),Object(wt.m)(a)])):(Object(wt.D)(),Object(wt.h)(c,{key:"user-panel"}))])}]]);const wr={class:"NavPanel"},kr={class:"panel panel-default"},_r={key:0},Sr={class:"timelines-background"},Cr={key:1},Pr={key:2},xr={key:0,class:"badge badge-notification"},Dr={key:3},Tr={key:0,class:"badge badge-notification"};const Ir={key:0},$r={key:1},zr={key:2},Mr={key:3},Ur={key:4};function Fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}Tn.c.add(In.wb,In.I,In.j,In.y,In.J);var Er={computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fr(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(a.e)({currentUser:function(e){return e.users.currentUser},privateMode:function(e){return e.instance.private},federating:function(e){return e.instance.federating}}))};var Lr=Fn()(Er,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("FAIcon"),a=Object(wt.J)("router-link");return Object(wt.D)(),Object(wt.j)("ul",null,[e.currentUser?(Object(wt.D)(),Object(wt.j)("li",Ir,[Object(wt.m)(a,{class:"menu-item",to:{name:"friends"}},{default:Object(wt.V)(()=>[Object(wt.m)(s,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"home"}),Object(wt.l)(Object(wt.O)(e.$t("nav.home_timeline")),1)]),_:1})])):Object(wt.i)("",!0),e.currentUser||!e.privateMode?(Object(wt.D)(),Object(wt.j)("li",$r,[Object(wt.m)(a,{class:"menu-item",to:{name:"public-timeline"}},{default:Object(wt.V)(()=>[Object(wt.m)(s,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"users"}),Object(wt.l)(Object(wt.O)(e.$t("nav.public_tl")),1)]),_:1})])):Object(wt.i)("",!0),!e.federating||!e.currentUser&&e.privateMode?Object(wt.i)("",!0):(Object(wt.D)(),Object(wt.j)("li",zr,[Object(wt.m)(a,{class:"menu-item",to:{name:"public-external-timeline"}},{default:Object(wt.V)(()=>[Object(wt.m)(s,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"globe"}),Object(wt.l)(Object(wt.O)(e.$t("nav.twkn")),1)]),_:1})])),e.currentUser?(Object(wt.D)(),Object(wt.j)("li",Mr,[Object(wt.m)(a,{class:"menu-item",to:{name:"bookmarks"}},{default:Object(wt.V)(()=>[Object(wt.m)(s,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"bookmark"}),Object(wt.l)(Object(wt.O)(e.$t("nav.bookmarks")),1)]),_:1})])):Object(wt.i)("",!0),e.currentUser?(Object(wt.D)(),Object(wt.j)("li",Ur,[Object(wt.m)(a,{class:"menu-item",to:{name:"dms",params:{username:e.currentUser.screen_name}}},{default:Object(wt.V)(()=>[Object(wt.m)(s,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"envelope"}),Object(wt.l)(Object(wt.O)(e.$t("nav.dms")),1)]),_:1},8,["to"])])):Object(wt.i)("",!0)])}]]);function Rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rr(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Tn.c.add(In.wb,In.I,In.j,In.y,In.n,In.q,In.t,In.i,In.M,In.mb);var Nr={created:function(){this.currentUser&&this.currentUser.locked&&this.$store.dispatch("startFetchingFollowRequests")},components:{TimelineMenuContent:Lr},data:function(){return{showTimelines:!1}},methods:{toggleTimelines:function(){this.showTimelines=!this.showTimelines}},computed:Ar(Ar({},Object(a.e)({currentUser:function(e){return e.users.currentUser},followRequestCount:function(e){return e.api.followRequests.length},privateMode:function(e){return e.instance.private},federating:function(e){return e.instance.federating},pleromaChatMessagesAvailable:function(e){return e.instance.pleromaChatMessagesAvailable}})),Object(a.c)(["unreadChatCount"]))};n(532);var Br=Fn()(Nr,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("FAIcon"),a=Object(wt.J)("TimelineMenuContent"),c=Object(wt.J)("router-link");return Object(wt.D)(),Object(wt.j)("div",wr,[Object(wt.k)("div",kr,[Object(wt.k)("ul",null,[e.currentUser||!e.privateMode?(Object(wt.D)(),Object(wt.j)("li",_r,[Object(wt.k)("button",{class:"button-unstyled menu-item",onClick:t[0]||(t[0]=(...t)=>e.toggleTimelines&&e.toggleTimelines(...t))},[Object(wt.m)(s,{"fixed-width":"",class:"fa-scale-110",icon:"stream"}),Object(wt.l)(Object(wt.O)(e.$t("nav.timelines"))+" ",1),Object(wt.m)(s,{class:"timelines-chevron","fixed-width":"",icon:e.showTimelines?"chevron-up":"chevron-down"},null,8,["icon"])]),Object(wt.W)(Object(wt.k)("div",Sr,[Object(wt.m)(a,{class:"timelines"})],512),[[wt.T,e.showTimelines]])])):Object(wt.i)("",!0),e.currentUser?(Object(wt.D)(),Object(wt.j)("li",Cr,[Object(wt.m)(c,{class:"menu-item",to:{name:"interactions",params:{username:e.currentUser.screen_name}}},{default:Object(wt.V)(()=>[Object(wt.m)(s,{"fixed-width":"",class:"fa-scale-110",icon:"bell"}),Object(wt.l)(Object(wt.O)(e.$t("nav.interactions")),1)]),_:1},8,["to"])])):Object(wt.i)("",!0),e.currentUser&&e.pleromaChatMessagesAvailable?(Object(wt.D)(),Object(wt.j)("li",Pr,[Object(wt.m)(c,{class:"menu-item",to:{name:"chats",params:{username:e.currentUser.screen_name}}},{default:Object(wt.V)(()=>[e.unreadChatCount?(Object(wt.D)(),Object(wt.j)("div",xr,Object(wt.O)(e.unreadChatCount),1)):Object(wt.i)("",!0),Object(wt.m)(s,{"fixed-width":"",class:"fa-scale-110",icon:"comments"}),Object(wt.l)(Object(wt.O)(e.$t("nav.chats")),1)]),_:1},8,["to"])])):Object(wt.i)("",!0),e.currentUser&&e.currentUser.locked?(Object(wt.D)(),Object(wt.j)("li",Dr,[Object(wt.m)(c,{class:"menu-item",to:{name:"friend-requests"}},{default:Object(wt.V)(()=>[Object(wt.m)(s,{"fixed-width":"",class:"fa-scale-110",icon:"user-plus"}),Object(wt.l)(Object(wt.O)(e.$t("nav.friend_requests"))+" ",1),e.followRequestCount>0?(Object(wt.D)(),Object(wt.j)("span",Tr,Object(wt.O)(e.followRequestCount),1)):Object(wt.i)("",!0)]),_:1})])):Object(wt.i)("",!0),Object(wt.k)("li",null,[Object(wt.m)(c,{class:"menu-item",to:{name:"about"}},{default:Object(wt.V)(()=>[Object(wt.m)(s,{"fixed-width":"",class:"fa-scale-110",icon:"info-circle"}),Object(wt.l)(Object(wt.O)(e.$t("nav.about")),1)]),_:1})])])])])}]]);const Vr={class:"instance-specific-panel"},Hr={class:"panel panel-default"},qr={class:"panel-body"},Jr=["innerHTML"];var Wr={computed:{instanceSpecificPanelContent:function(){return this.$store.state.instance.instanceSpecificPanelContent}}};var Yr=Fn()(Wr,[["render",function(e,t,n,r,i,o){return Object(wt.D)(),Object(wt.j)("div",Vr,[Object(wt.k)("div",Hr,[Object(wt.k)("div",qr,[Object(wt.k)("div",{innerHTML:e.instanceSpecificPanelContent},null,8,Jr)])])])}]]);const Gr={class:"features-panel"},Kr={class:"panel panel-default base01-background"},Xr={class:"panel-heading timeline-heading base02-background base04"},Zr={class:"title"},Qr={class:"panel-body features-panel"},ei={key:0},ti={key:1},ni={key:2},ri={key:3},ii={key:4};var oi=n(96),si={computed:{shout:function(){return this.$store.state.instance.shoutAvailable},pleromaChatMessages:function(){return this.$store.state.instance.pleromaChatMessagesAvailable},gopher:function(){return this.$store.state.instance.gopherAvailable},whoToFollow:function(){return this.$store.state.instance.suggestionsEnabled},mediaProxy:function(){return this.$store.state.instance.mediaProxyAvailable},minimalScopesMode:function(){return this.$store.state.instance.minimalScopesMode},textlimit:function(){return this.$store.state.instance.textlimit},uploadlimit:function(){return oi.a.fileSizeFormat(this.$store.state.instance.uploadlimit)}}};n(533);var ai=Fn()(si,[["render",function(e,t,n,r,i,o){return Object(wt.D)(),Object(wt.j)("div",Gr,[Object(wt.k)("div",Kr,[Object(wt.k)("div",Xr,[Object(wt.k)("div",Zr,Object(wt.O)(e.$t("features_panel.title")),1)]),Object(wt.k)("div",Qr,[Object(wt.k)("ul",null,[e.shout?(Object(wt.D)(),Object(wt.j)("li",ei,Object(wt.O)(e.$t("features_panel.shout")),1)):Object(wt.i)("",!0),e.pleromaChatMessages?(Object(wt.D)(),Object(wt.j)("li",ti,Object(wt.O)(e.$t("features_panel.pleroma_chat_messages")),1)):Object(wt.i)("",!0),e.gopher?(Object(wt.D)(),Object(wt.j)("li",ni,Object(wt.O)(e.$t("features_panel.gopher")),1)):Object(wt.i)("",!0),e.whoToFollow?(Object(wt.D)(),Object(wt.j)("li",ri,Object(wt.O)(e.$t("features_panel.who_to_follow")),1)):Object(wt.i)("",!0),e.mediaProxy?(Object(wt.D)(),Object(wt.j)("li",ii,Object(wt.O)(e.$t("features_panel.media_proxy")),1)):Object(wt.i)("",!0),Object(wt.k)("li",null,Object(wt.O)(e.$t("features_panel.scope_options")),1),Object(wt.k)("li",null,Object(wt.O)(e.$t("features_panel.text_limit"))+" = "+Object(wt.O)(e.textlimit),1),Object(wt.k)("li",null,Object(wt.O)(e.$t("features_panel.upload_limit"))+" = "+Object(wt.O)(e.uploadlimit.num)+" "+Object(wt.O)(e.$t("upload.file_size_units."+e.uploadlimit.unit)),1)])])])])}]]);const ci={class:"who-to-follow-panel"},li={class:"panel panel-default base01-background"},ui={class:"panel-heading timeline-heading base02-background base04"},di={class:"title"},pi={class:"who-to-follow"},hi=["src"],bi=Object(wt.k)("br",null,null,-1),mi={class:"who-to-follow-more"};var fi=n(330),Oi=n.n(fi),ji=n(23);function gi(e){var t=e.$store.state.users.currentUser.credentials;t&&(e.usersToFollow.forEach((function(e){e.name="Loading..."})),j.c.suggestions({credentials:t}).then((function(t){!function(e,t){var n=this,r=Oi()(t);e.usersToFollow.forEach((function(t,i){var o=r[i],s=o.avatar||n.$store.state.instance.defaultAvatar,a=o.acct;t.img=s,t.name=a,e.$store.state.api.backendInteractor.fetchUser({id:a}).then((function(n){n.error||(e.$store.commit("addNewUsers",[n]),t.id=n.id)}))}))}(e,t)})))}var vi={data:function(){return{usersToFollow:[]}},computed:{user:function(){return this.$store.state.users.currentUser.screen_name},suggestionsEnabled:function(){return this.$store.state.instance.suggestionsEnabled}},methods:{userProfileLink:function(e,t){return Object(ji.a)(e,t,this.$store.state.instance.restrictedNicknames)}},watch:{user:function(e,t){this.suggestionsEnabled&&gi(this)}},mounted:function(){var e=this;this.usersToFollow=new Array(3).fill().map((function(t){return{img:e.$store.state.instance.defaultAvatar,name:"",id:0}})),this.suggestionsEnabled&&gi(this)}};n(537);var yi=Fn()(vi,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("router-link");return Object(wt.D)(),Object(wt.j)("div",ci,[Object(wt.k)("div",li,[Object(wt.k)("div",ui,[Object(wt.k)("div",di,Object(wt.O)(e.$t("who_to_follow.who_to_follow")),1)]),Object(wt.k)("div",pi,[(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.usersToFollow,t=>(Object(wt.D)(),Object(wt.j)("p",{key:t.id,class:"who-to-follow-items"},[Object(wt.k)("img",{src:t.img},null,8,hi),Object(wt.m)(s,{to:e.userProfileLink(t.id,t.name)},{default:Object(wt.V)(()=>[Object(wt.l)(Object(wt.O)(t.name),1)]),_:2},1032,["to"]),bi]))),128)),Object(wt.k)("p",mi,[Object(wt.m)(s,{to:{name:"who-to-follow"}},{default:Object(wt.V)(()=>[Object(wt.l)(Object(wt.O)(e.$t("who_to_follow.more")),1)]),_:1})])])])])}]]);const wi={key:0,class:"shout-panel"},ki={class:"panel panel-default"},_i={class:"title"},Si={class:"shout-window"},Ci={class:"shout-avatar"},Pi=["src"],xi={class:"shout-content"},Di=Object(wt.k)("br",null,null,-1),Ti={class:"shout-text"},Ii={class:"shout-input"},$i={key:1,class:"shout-panel"},zi={class:"panel panel-default"},Mi={class:"title"};Tn.c.add(In.l,In.rb);var Ui={props:["floating"],data:function(){return{currentMessage:"",channel:null,collapsed:!0}},computed:{messages:function(){return this.$store.state.shout.messages}},methods:{submit:function(e){this.$store.state.shout.channel.push("new_msg",{text:e},1e4),this.currentMessage=""},togglePanel:function(){this.collapsed=!this.collapsed},userProfileLink:function(e){return Object(ji.a)(e.id,e.username,this.$store.state.instance.restrictedNicknames)}},watch:{messages:function(e){var t=this.$el.querySelector(".chat-window");t&&t.scrollTop+t.offsetHeight+20>t.scrollHeight&&this.$nextTick((function(){t&&(t.scrollTop=t.scrollHeight-t.offsetHeight)}))}}};n(538);var Fi=Fn()(Ui,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("FAIcon"),a=Object(wt.J)("router-link");return e.collapsed&&e.floating?(Object(wt.D)(),Object(wt.j)("div",$i,[Object(wt.k)("div",zi,[Object(wt.k)("div",{class:"panel-heading -stub timeline-heading shout-heading",onClick:t[3]||(t[3]=Object(wt.Y)((...t)=>e.togglePanel&&e.togglePanel(...t),["stop","prevent"]))},[Object(wt.k)("div",Mi,[Object(wt.m)(s,{class:"icon",icon:"bullhorn"}),Object(wt.l)(" "+Object(wt.O)(e.$t("shoutbox.title")),1)])])])])):(Object(wt.D)(),Object(wt.j)("div",wi,[Object(wt.k)("div",ki,[Object(wt.k)("div",{class:Object(wt.w)(["panel-heading timeline-heading",{"shout-heading":e.floating}]),onClick:t[0]||(t[0]=Object(wt.Y)((...t)=>e.togglePanel&&e.togglePanel(...t),["stop","prevent"]))},[Object(wt.k)("div",_i,[Object(wt.l)(Object(wt.O)(e.$t("shoutbox.title"))+" ",1),e.floating?(Object(wt.D)(),Object(wt.h)(s,{key:0,icon:"times",class:"close-icon"})):Object(wt.i)("",!0)])],2),Object(wt.k)("div",Si,[(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.messages,t=>(Object(wt.D)(),Object(wt.j)("div",{key:t.id,class:"shout-message"},[Object(wt.k)("span",Ci,[Object(wt.k)("img",{src:t.author.avatar},null,8,Pi)]),Object(wt.k)("div",xi,[Object(wt.m)(a,{class:"shout-name",to:e.userProfileLink(t.author)},{default:Object(wt.V)(()=>[Object(wt.l)(Object(wt.O)(t.author.username),1)]),_:2},1032,["to"]),Di,Object(wt.k)("span",Ti,Object(wt.O)(t.text),1)])]))),128))]),Object(wt.k)("div",Ii,[Object(wt.W)(Object(wt.k)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.currentMessage=t),class:"shout-input-textarea",rows:"1",onKeyup:t[2]||(t[2]=Object(wt.X)(t=>e.submit(e.currentMessage),["enter"]))},null,544),[[wt.S,e.currentMessage]])])])]))}]]);const Ei={class:"settings-modal-panel panel"},Li={class:"panel-heading"},Ri={class:"title"},Ai=["title"],Ni=["title"],Bi={class:"panel-body"},Vi={class:"panel-footer settings-footer"},Hi=["title"],qi=Object(wt.l)(" "+Object(wt.O)(" ")+" "),Ji={class:"dropdown-menu"},Wi=["onClick"],Yi=["onClick"],Gi=["onClick"],Ki=Object(wt.k)("span",{id:"unscrolled-content",class:"extra-content"},null,-1);var Xi={props:{isOpen:{type:Boolean,default:!0},noBackground:{type:Boolean,default:!1}},computed:{classes:function(){return{"modal-background":!this.noBackground,open:this.isOpen}}}};n(539);var Zi=Fn()(Xi,[["render",function(e,t,n,r,i,o){const s=Object(wt.K)("body-scroll-lock");return Object(wt.W)((Object(wt.D)(),Object(wt.j)("div",{class:Object(wt.w)(["modal-view",o.classes]),onClick:t[0]||(t[0]=Object(wt.Y)(t=>e.$emit("backdropClicked"),["self"]))},[Object(wt.I)(e.$slots,"default")],2)),[[wt.T,n.isOpen],[s,n.isOpen&&!n.noBackground]])}]]);const Qi={class:"panel-loading"},eo={class:"loading-text"};Tn.c.add(In.r);var to={};n(540);var no=Fn()(to,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("FAIcon");return Object(wt.D)(),Object(wt.j)("div",Qi,[Object(wt.k)("span",eo,[Object(wt.m)(s,{icon:"circle-notch",spin:"",size:"3x"}),Object(wt.l)(" "+Object(wt.O)(e.$t("general.loading")),1)])])}]]);const ro={class:"async-component-error"};var io={emits:["resetAsyncComponent"],methods:{retry:function(){this.$emit("resetAsyncComponent")}}};n(541);var oo=Fn()(io,[["render",function(e,t,n,r,i,o){return Object(wt.D)(),Object(wt.j)("div",ro,[Object(wt.k)("div",null,[Object(wt.k)("h4",null,Object(wt.O)(e.$t("general.generic_error")),1),Object(wt.k)("p",null,Object(wt.O)(e.$t("general.error_retry")),1),Object(wt.k)("button",{class:"btn button-default",onClick:t[0]||(t[0]=(...e)=>o.retry&&o.retry(...e))},Object(wt.O)(e.$t("general.retry")),1)])])}]]);function so(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ao=function(e,t){var n=function(){return function(){return Object(wt.n)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?so(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):so(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({loader:e},t))}},r=Object(wt.M)({c:n()});return{render:function(){return Object(wt.q)(r.c(),{onResetAsyncComponent:function(){r.c=n()}})}}},co=n(24),lo=n(51),uo=n(138),po=n(41);function ho(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ho(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ho(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Tn.c.add(In.rb,po.e,In.F,In.E,In.n);var mo={data:function(){var e=this;return{dataImporter:Object(uo.b)({validator:this.importValidator,onImport:this.onImport,onImportFailure:this.onImportFailure}),dataThemeExporter:Object(uo.a)({filename:"pleromafe_settings.full",getExportedObject:function(){return e.generateExport(!0)}}),dataExporter:Object(uo.a)({filename:"pleromafe_settings",getExportedObject:function(){return e.generateExport()}})}},components:{Modal:Zi,Popover:co.default,Checkbox:lo.a,SettingsModalContent:ao((function(){return Promise.all([n.e(3),n.e(2)]).then(n.bind(null,708))}),{loadingComponent:no,errorComponent:oo,delay:0})},methods:{closeModal:function(){this.$store.dispatch("closeSettingsModal")},peekModal:function(){this.$store.dispatch("togglePeekSettingsModal")},importValidator:function(e){if(!Array.isArray(e._pleroma_settings_version))return{messageKey:"settings.file_import_export.invalid_file"};var t=m()(e._pleroma_settings_version,2),n=t[0],r=t[1];return n>1?{messageKey:"settings.file_export_import.errors.file_too_new",messageArgs:{fileMajor:n,feMajor:1}}:n<1?{messageKey:"settings.file_export_import.errors.file_too_old",messageArgs:{fileMajor:n,feMajor:1}}:(r>0&&this.$store.dispatch("pushGlobalNotice",{level:"warning",messageKey:"settings.file_export_import.errors.file_slightly_new"}),!0)},onImportFailure:function(e){e.error?this.$store.dispatch("pushGlobalNotice",{messageKey:"settings.invalid_settings_imported",level:"error"}):this.$store.dispatch("pushGlobalNotice",bo(bo({},e.validationResult),{},{level:"error"}))},onImport:function(e){e&&this.$store.dispatch("loadSettings",e)},restore:function(){this.dataImporter.importData()},backup:function(){this.dataExporter.exportData()},backupWithTheme:function(){this.dataThemeExporter.exportData()},generateExport:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.$store.state.config,n=t;if(!e){var r=new Set(["customTheme","customThemeSource","colors"]);n=Object.fromEntries(Object.entries(n).filter((function(e){var t=m()(e,1)[0];return!r.has(t)})))}var i=Nt()(n);return i._pleroma_settings_version=[1,0],i}},computed:{currentSaveStateNotice:function(){return this.$store.state.interface.settings.currentSaveStateNotice},modalActivated:function(){return"hidden"!==this.$store.state.interface.settingsModalState},modalOpenedOnce:function(){return this.$store.state.interface.settingsModalLoaded},modalPeeked:function(){return"minimized"===this.$store.state.interface.settingsModalState},expertLevel:{get:function(){return this.$store.state.config.expertLevel>0},set:function(e){console.log(e),this.$store.dispatch("setOption",{name:"expertLevel",value:e?1:0})}}}};n(542);var fo=Fn()(mo,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("FAIcon"),a=Object(wt.J)("SettingsModalContent"),c=Object(wt.J)("Popover"),l=Object(wt.J)("Checkbox"),u=Object(wt.J)("Modal");return Object(wt.D)(),Object(wt.h)(u,{"is-open":e.modalActivated,class:Object(wt.w)(["settings-modal",{peek:e.modalPeeked}]),"no-background":e.modalPeeked},{default:Object(wt.V)(()=>[Object(wt.k)("div",Ei,[Object(wt.k)("div",Li,[Object(wt.k)("span",Ri,Object(wt.O)(e.$t("settings.settings")),1),Object(wt.m)(wt.e,{name:"fade"},{default:Object(wt.V)(()=>[e.currentSaveStateNotice?(Object(wt.D)(),Object(wt.j)("div",{key:0,class:Object(wt.w)(["alert",{transparent:!e.currentSaveStateNotice.error,error:e.currentSaveStateNotice.error}]),onClick:t[0]||(t[0]=Object(wt.Y)(()=>{},["prevent"]))},Object(wt.O)(e.currentSaveStateNotice.error?e.$t("settings.saving_err"):e.$t("settings.saving_ok")),3)):Object(wt.i)("",!0)]),_:1}),Object(wt.k)("button",{class:"btn button-default",title:e.$t("general.peek"),onClick:t[1]||(t[1]=(...t)=>e.peekModal&&e.peekModal(...t))},[Object(wt.m)(s,{icon:["far","window-minimize"],"fixed-width":""})],8,Ai),Object(wt.k)("button",{class:"btn button-default",title:e.$t("general.close"),onClick:t[2]||(t[2]=(...t)=>e.closeModal&&e.closeModal(...t))},[Object(wt.m)(s,{icon:"times","fixed-width":""})],8,Ni)]),Object(wt.k)("div",Bi,[e.modalOpenedOnce?(Object(wt.D)(),Object(wt.h)(a,{key:0})):Object(wt.i)("",!0)]),Object(wt.k)("div",Vi,[Object(wt.m)(c,{class:"export",trigger:"click",placement:"top",offset:{y:5,x:5},"bound-to":{x:"container"},"remove-padding":""},{trigger:Object(wt.V)(()=>[Object(wt.k)("button",{class:"btn button-default",title:e.$t("general.close")},[Object(wt.k)("span",null,Object(wt.O)(e.$t("settings.file_export_import.backup_restore")),1),qi,Object(wt.m)(s,{icon:"chevron-down"})],8,Hi)]),content:Object(wt.V)(({close:n})=>[Object(wt.k)("div",Ji,[Object(wt.k)("button",{class:"button-default dropdown-item dropdown-item-icon",onClick:[t[3]||(t[3]=Object(wt.Y)((...t)=>e.backup&&e.backup(...t),["prevent"])),n]},[Object(wt.m)(s,{icon:"file-download","fixed-width":""}),Object(wt.k)("span",null,Object(wt.O)(e.$t("settings.file_export_import.backup_settings")),1)],8,Wi),Object(wt.k)("button",{class:"button-default dropdown-item dropdown-item-icon",onClick:[t[4]||(t[4]=Object(wt.Y)((...t)=>e.backupWithTheme&&e.backupWithTheme(...t),["prevent"])),n]},[Object(wt.m)(s,{icon:"file-download","fixed-width":""}),Object(wt.k)("span",null,Object(wt.O)(e.$t("settings.file_export_import.backup_settings_theme")),1)],8,Yi),Object(wt.k)("button",{class:"button-default dropdown-item dropdown-item-icon",onClick:[t[5]||(t[5]=Object(wt.Y)((...t)=>e.restore&&e.restore(...t),["prevent"])),n]},[Object(wt.m)(s,{icon:"file-upload","fixed-width":""}),Object(wt.k)("span",null,Object(wt.O)(e.$t("settings.file_export_import.restore_settings")),1)],8,Gi)])]),_:1}),Object(wt.m)(l,{"model-value":!!e.expertLevel,"onUpdate:modelValue":t[6]||(t[6]=t=>e.expertLevel=Number(t))},{default:Object(wt.V)(()=>[Object(wt.l)(Object(wt.O)(e.$t("settings.expert_mode")),1)]),_:1},8,["model-value"]),Ki])])]),_:1},8,["is-open","class","no-background"])}]]);const Oo=["src","alt","title"],jo=["src","alt","title"],go=["title"],vo=["title"],yo=["title"],wo={key:6,class:"description"},ko={class:"counter"},_o={key:7,class:"loading-spinner"};var So=n(50),Co=n(141);var Po=n(337),xo={methods:{setTransform:function(e){var t=e.scale,n=e.x,r=e.y;this.$el.setTransform({scale:t,x:n,y:r})}},created:function(){Po.a}};var Do=Fn()(xo,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("pinch-zoom");return Object(wt.D)(),Object(wt.h)(s,Object(wt.u)({class:"pinch-zoom-parent"},e.$attrs,Object(wt.P)(e.$listeners)),{default:Object(wt.V)(()=>[Object(wt.I)(e.$slots,"default")]),_:3},16)}]]);var To=n(129),Io=n.n(To),$o=n(128),zo=n.n($o),Mo=function(e,t){return[t[0]-e[0],t[1]-e[1]]},Uo=function(e){return[(t=e.touches[0]).screenX,t.screenY];var t},Fo=function(e){return[e.clientX,e.clientY]},Eo=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},Lo=function(e){return[e[1],-e[0]]},Ro=function(e,t){return e[0]*t[0]+e[1]*t[1]},Ao=function(e,t){var n=Ro(e,t)/Ro(t,t);return[n*t[0],n*t[1]]},No={DIRECTION_LEFT:[-1,0],DIRECTION_RIGHT:[1,0],DIRECTION_UP:[0,-1],DIRECTION_DOWN:[0,1],swipeGesture:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return{direction:e,onSwipe:t,threshold:n,perpendicularTolerance:r,_startPos:[0,0],_swiping:!1}},beginSwipe:function(e,t){t._startPos=Uo(e),t._swiping=!0},updateSwipe:function(e,t){if(t._swiping){var n=Mo(t._startPos,Uo(e));if(!(Eo(n)<t.threshold||Ro(n,t.direction)<0)){var r=Ao(n,t.direction),i=Lo(t.direction),o=Ao(n,i);Eo(r)*t.perpendicularTolerance<Eo(o)||(t.onSwipe(),t._swiping=!1)}}},SwipeAndClickGesture:function(){function e(t){var n=t.direction,r=t.swipePreviewCallback,i=t.swipeEndCallback,o=t.swipeCancelCallback,s=t.swipelessClickCallback,a=t.threshold,c=void 0===a?30:a,l=t.perpendicularTolerance,u=void 0===l?1:l,d=t.disableClickThreshold,p=void 0===d?1:d;Io()(this,e);var h=function(){};this.direction=n,this.swipePreviewCallback=r||h,this.swipeEndCallback=i||h,this.swipeCancelCallback=o||h,this.swipelessClickCallback=s||h,this.threshold="function"==typeof c?c:function(){return c},this.disableClickThreshold="function"==typeof p?p:function(){return p},this.perpendicularTolerance=u,this._reset()}return zo()(e,[{key:"_reset",value:function(){this._startPos=[0,0],this._pointerId=-1,this._swiping=!1,this._swiped=!1,this._preventNextClick=!1}},{key:"start",value:function(e){0===e.button&&(this._startPos=Fo(e),this._pointerId=e.pointerId,this._swiping=!0,this._swiped=!1)}},{key:"move",value:function(e){if(this._swiping&&this._pointerId===e.pointerId){this._swiped=!0;var t=Fo(e),n=Mo(this._startPos,t);this.swipePreviewCallback(n)}}},{key:"cancel",value:function(e){this._swiping&&this._pointerId===e.pointerId&&this.swipeCancelCallback()}},{key:"end",value:function(e){var t=this;if(this._swiping&&this._pointerId===e.pointerId){this._swiping=!1;var n=Fo(e),r=Mo(this._startPos,n),i=function(){if(Eo(r)<t.threshold())return 0;var e=Ro(r,t.direction)>0,n=Ao(r,t.direction),i=Lo(t.direction),o=Ao(r,i);return Eo(n)*t.perpendicularTolerance<Eo(o)?0:e?1:-1}();this._swiped&&this.swipeEndCallback(i),this._reset(),Eo(r)>=this.disableClickThreshold()&&"mouse"===e.pointerType&&(this._preventNextClick=!0)}}},{key:"click",value:function(e){this._preventNextClick||this.swipelessClickCallback(),this._reset()}}]),e}()},Bo={props:{direction:{type:Array},threshold:{type:Function,default:function(){return 30}},perpendicularTolerance:{type:Number,default:1}},methods:{handlePointerDown:function(e){this.$gesture.start(e)},handlePointerMove:function(e){this.$gesture.move(e)},handlePointerUp:function(e){this.$gesture.end(e)},handlePointerCancel:function(e){this.$gesture.cancel(e)},handleNativeClick:function(e){this.$gesture.click(e)},preview:function(e){this.$emit("preview-requested",e)},end:function(e){this.$emit("swipe-finished",e)},click:function(){this.$emit("swipeless-clicked")},cancel:function(){this.$emit("swipe-canceled")}},created:function(){this.$gesture=new No.SwipeAndClickGesture({direction:this.direction,threshold:this.threshold,perpendicularTolerance:this.perpendicularTolerance,swipePreviewCallback:this.preview,swipeEndCallback:this.end,swipeCancelCallback:this.cancel,swipelessClickCallback:this.click})}};var Vo=Fn()(Bo,[["render",function(e,t,n,r,i,o){return Object(wt.D)(),Object(wt.j)("div",Object(wt.u)(e.$attrs,{onPointerdown:t[0]||(t[0]=(...t)=>e.handlePointerDown&&e.handlePointerDown(...t)),onPointermove:t[1]||(t[1]=(...t)=>e.handlePointerMove&&e.handlePointerMove(...t)),onPointerup:t[2]||(t[2]=(...t)=>e.handlePointerUp&&e.handlePointerUp(...t)),onPointercancel:t[3]||(t[3]=(...t)=>e.handlePointerCancel&&e.handlePointerCancel(...t)),onClick:t[4]||(t[4]=(...t)=>e.handleNativeClick&&e.handleNativeClick(...t))}),[Object(wt.I)(e.$slots,"default")],16)}]]),Ho=n(139);Tn.c.add(In.o,In.p,In.r,In.rb);var qo={components:{StillImage:So.a,VideoAttachment:Co.a,PinchZoom:Do,SwipeClick:Vo,Modal:Zi,Flash:Ho.a},data:function(){return{loading:!1,swipeDirection:No.DIRECTION_LEFT,swipeThreshold:function(){return window.innerWidth*(1/4)},pinchZoomMinScale:1,pinchZoomScaleResetLimit:1.2}},computed:{showing:function(){return this.$store.state.mediaViewer.activated},media:function(){return this.$store.state.mediaViewer.media},description:function(){return this.currentMedia.description},currentIndex:function(){return this.$store.state.mediaViewer.currentIndex},currentMedia:function(){return this.media[this.currentIndex]},canNavigate:function(){return this.media.length>1},type:function(){return this.currentMedia?this.getType(this.currentMedia):null}},methods:{getType:function(e){return lt.a.fileType(e.mimetype)},hide:function(){var e=this;setTimeout((function(){e.$store.dispatch("closeMediaViewer")}),100)},hideIfNotSwiped:function(e){var t=this.$refs.swipeClick;t?t.$gesture.click(e):this.hide()},goPrev:function(){if(this.canNavigate){var e=0===this.currentIndex?this.media.length-1:this.currentIndex-1,t=this.media[e];"image"===this.getType(t)&&(this.loading=!0),this.$store.dispatch("setCurrentMedia",t)}},goNext:function(){if(this.canNavigate){var e=this.currentIndex===this.media.length-1?0:this.currentIndex+1,t=this.media[e];"image"===this.getType(t)&&(this.loading=!0),this.$store.dispatch("setCurrentMedia",t)}},onImageLoaded:function(){this.loading=!1},handleSwipePreview:function(e){this.$refs.pinchZoom.setTransform({scale:1,x:e[0],y:0})},handleSwipeEnd:function(e){this.$refs.pinchZoom.setTransform({scale:1,x:0,y:0}),e>0?this.goNext():e<0&&this.goPrev()},handleKeyupEvent:function(e){this.showing&&27===e.keyCode&&this.hide()},handleKeydownEvent:function(e){this.showing&&(39===e.keyCode?this.goNext():37===e.keyCode&&this.goPrev())}},mounted:function(){window.addEventListener("popstate",this.hide),document.addEventListener("keyup",this.handleKeyupEvent),document.addEventListener("keydown",this.handleKeydownEvent)},unmounted:function(){window.removeEventListener("popstate",this.hide),document.removeEventListener("keyup",this.handleKeyupEvent),document.removeEventListener("keydown",this.handleKeydownEvent)}};n(543);var Jo=Fn()(qo,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("PinchZoom"),a=Object(wt.J)("SwipeClick"),c=Object(wt.J)("VideoAttachment"),l=Object(wt.J)("Flash"),u=Object(wt.J)("FAIcon"),d=Object(wt.J)("Modal");return e.showing?(Object(wt.D)(),Object(wt.h)(d,{key:0,class:"media-modal-view",onBackdropClicked:e.hideIfNotSwiped},{default:Object(wt.V)(()=>["image"===e.type?(Object(wt.D)(),Object(wt.h)(a,{key:0,ref:"swipeClick",class:"modal-image-container",direction:e.swipeDirection,threshold:e.swipeThreshold,onPreviewRequested:e.handleSwipePreview,onSwipeFinished:e.handleSwipeEnd,onSwipelessClicked:e.hide},{default:Object(wt.V)(()=>[Object(wt.m)(s,{ref:"pinchZoom",class:"modal-image-container-inner",selector:".modal-image","reach-min-scale-strategy":"reset","stop-propagate-handled":"stop-propgate-handled","allow-pan-min-scale":e.pinchZoomMinScale,"min-scale":e.pinchZoomMinScale,"reset-to-min-scale-limit":e.pinchZoomScaleResetLimit},{default:Object(wt.V)(()=>[Object(wt.k)("img",{class:Object(wt.w)([{loading:e.loading},"modal-image"]),src:e.currentMedia.url,alt:e.currentMedia.description,title:e.currentMedia.description,onLoad:t[0]||(t[0]=(...t)=>e.onImageLoaded&&e.onImageLoaded(...t))},null,42,Oo)]),_:1},8,["allow-pan-min-scale","min-scale","reset-to-min-scale-limit"])]),_:1},8,["direction","threshold","onPreviewRequested","onSwipeFinished","onSwipelessClicked"])):Object(wt.i)("",!0),"video"===e.type?(Object(wt.D)(),Object(wt.h)(c,{key:1,class:"modal-image",attachment:e.currentMedia,controls:!0},null,8,["attachment"])):Object(wt.i)("",!0),"audio"===e.type?(Object(wt.D)(),Object(wt.j)("audio",{key:2,class:"modal-image",src:e.currentMedia.url,alt:e.currentMedia.description,title:e.currentMedia.description,controls:""},null,8,jo)):Object(wt.i)("",!0),"flash"===e.type?(Object(wt.D)(),Object(wt.h)(l,{key:3,class:"modal-image",src:e.currentMedia.url,alt:e.currentMedia.description,title:e.currentMedia.description},null,8,["src","alt","title"])):Object(wt.i)("",!0),e.canNavigate?(Object(wt.D)(),Object(wt.j)("button",{key:4,title:e.$t("media_modal.previous"),class:"modal-view-button modal-view-button-arrow modal-view-button-arrow--prev",onClick:t[1]||(t[1]=Object(wt.Y)((...t)=>e.goPrev&&e.goPrev(...t),["stop","prevent"]))},[Object(wt.m)(u,{class:"button-icon arrow-icon",icon:"chevron-left"})],8,go)):Object(wt.i)("",!0),e.canNavigate?(Object(wt.D)(),Object(wt.j)("button",{key:5,title:e.$t("media_modal.next"),class:"modal-view-button modal-view-button-arrow modal-view-button-arrow--next",onClick:t[2]||(t[2]=Object(wt.Y)((...t)=>e.goNext&&e.goNext(...t),["stop","prevent"]))},[Object(wt.m)(u,{class:"button-icon arrow-icon",icon:"chevron-right"})],8,vo)):Object(wt.i)("",!0),Object(wt.k)("button",{class:"modal-view-button modal-view-button-hide",title:e.$t("media_modal.hide"),onClick:t[3]||(t[3]=Object(wt.Y)((...t)=>e.hide&&e.hide(...t),["stop","prevent"]))},[Object(wt.m)(u,{class:"button-icon",icon:"times"})],8,yo),e.description?(Object(wt.D)(),Object(wt.j)("span",wo,Object(wt.O)(e.description),1)):Object(wt.i)("",!0),Object(wt.k)("span",ko,Object(wt.O)(e.$tc("media_modal.counter",e.currentIndex+1,{current:e.currentIndex+1,total:e.media.length})),1),e.loading?(Object(wt.D)(),Object(wt.j)("span",_o,[Object(wt.m)(u,{spin:"",icon:"circle-notch",size:"5x"})])):Object(wt.i)("",!0)]),_:1},8,["onBackdropClicked"])):Object(wt.i)("",!0)}]]);const Wo={key:1,class:"side-drawer-logo-wrapper"},Yo=["src"],Go={key:0},Ko={key:0,class:"badge badge-notification"},Xo={key:0},Zo={key:0,class:"badge badge-notification"},Qo={href:"/pleroma/admin/#/login-pleroma",target:"_blank"};function es(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ts(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?es(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):es(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Tn.c.add(In.gb,In.hb,In.J,In.t,In.i,In.vb,In.l,In.cb,In.ob,In.s,In.M);var ns={props:["logout"],data:function(){return{closed:!0,closeGesture:void 0}},created:function(){this.closeGesture=No.swipeGesture(No.DIRECTION_LEFT,this.toggleDrawer),this.currentUser&&this.currentUser.locked&&this.$store.dispatch("startFetchingFollowRequests")},components:{UserCard:jr.a},computed:ts(ts({currentUser:function(){return this.$store.state.users.currentUser},shout:function(){return this.$store.state.shout.joined},unseenNotifications:function(){return Object(W.f)(this.$store)},unseenNotificationsCount:function(){return this.unseenNotifications.length},suggestionsEnabled:function(){return this.$store.state.instance.suggestionsEnabled},logo:function(){return this.$store.state.instance.logo},hideSitename:function(){return this.$store.state.instance.hideSitename},sitename:function(){return this.$store.state.instance.name},followRequestCount:function(){return this.$store.state.api.followRequests.length},privateMode:function(){return this.$store.state.instance.private},federating:function(){return this.$store.state.instance.federating},timelinesRoute:function(){return this.$store.state.interface.lastTimeline?this.$store.state.interface.lastTimeline:this.currentUser?"friends":"public-timeline"}},Object(a.e)({pleromaChatMessagesAvailable:function(e){return e.instance.pleromaChatMessagesAvailable}})),Object(a.c)(["unreadChatCount"])),methods:{toggleDrawer:function(){this.closed=!this.closed},doLogout:function(){this.logout(),this.toggleDrawer()},touchStart:function(e){No.beginSwipe(e,this.closeGesture)},touchMove:function(e){No.updateSwipe(e,this.closeGesture)},openSettingsModal:function(){this.$store.dispatch("openSettingsModal")}}};n(544);var rs=Fn()(ns,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("UserCard"),a=Object(wt.J)("FAIcon"),c=Object(wt.J)("router-link");return Object(wt.D)(),Object(wt.j)("div",{class:Object(wt.w)(["side-drawer-container",{"side-drawer-container-closed":e.closed,"side-drawer-container-open":!e.closed}])},[Object(wt.k)("div",{class:Object(wt.w)(["side-drawer-darken",{"side-drawer-darken-closed":e.closed}])},null,2),Object(wt.k)("div",{class:Object(wt.w)(["side-drawer",{"side-drawer-closed":e.closed}]),onTouchstart:t[15]||(t[15]=(...t)=>e.touchStart&&e.touchStart(...t)),onTouchmove:t[16]||(t[16]=(...t)=>e.touchMove&&e.touchMove(...t))},[Object(wt.k)("div",{class:"side-drawer-heading",onClick:t[0]||(t[0]=(...t)=>e.toggleDrawer&&e.toggleDrawer(...t))},[e.currentUser?(Object(wt.D)(),Object(wt.h)(s,{key:0,"user-id":e.currentUser.id,"hide-bio":!0},null,8,["user-id"])):(Object(wt.D)(),Object(wt.j)("div",Wo,[Object(wt.k)("img",{src:e.logo},null,8,Yo),e.hideSitename?Object(wt.i)("",!0):(Object(wt.D)(),Object(wt.j)("span",Go,Object(wt.O)(e.sitename),1))]))]),Object(wt.k)("ul",null,[e.currentUser?Object(wt.i)("",!0):(Object(wt.D)(),Object(wt.j)("li",{key:0,onClick:t[1]||(t[1]=(...t)=>e.toggleDrawer&&e.toggleDrawer(...t))},[Object(wt.m)(c,{to:{name:"login"}},{default:Object(wt.V)(()=>[Object(wt.m)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"sign-in-alt"}),Object(wt.l)(" "+Object(wt.O)(e.$t("login.login")),1)]),_:1})])),e.currentUser||!e.privateMode?(Object(wt.D)(),Object(wt.j)("li",{key:1,onClick:t[2]||(t[2]=(...t)=>e.toggleDrawer&&e.toggleDrawer(...t))},[Object(wt.m)(c,{to:{name:e.timelinesRoute}},{default:Object(wt.V)(()=>[Object(wt.m)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"home"}),Object(wt.l)(" "+Object(wt.O)(e.$t("nav.timelines")),1)]),_:1},8,["to"])])):Object(wt.i)("",!0),e.currentUser&&e.pleromaChatMessagesAvailable?(Object(wt.D)(),Object(wt.j)("li",{key:2,onClick:t[3]||(t[3]=(...t)=>e.toggleDrawer&&e.toggleDrawer(...t))},[Object(wt.m)(c,{to:{name:"chats",params:{username:e.currentUser.screen_name}},style:{position:"relative"}},{default:Object(wt.V)(()=>[Object(wt.m)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"comments"}),Object(wt.l)(" "+Object(wt.O)(e.$t("nav.chats"))+" ",1),e.unreadChatCount?(Object(wt.D)(),Object(wt.j)("span",Ko,Object(wt.O)(e.unreadChatCount),1)):Object(wt.i)("",!0)]),_:1},8,["to"])])):Object(wt.i)("",!0)]),e.currentUser?(Object(wt.D)(),Object(wt.j)("ul",Xo,[Object(wt.k)("li",{onClick:t[4]||(t[4]=(...t)=>e.toggleDrawer&&e.toggleDrawer(...t))},[Object(wt.m)(c,{to:{name:"interactions",params:{username:e.currentUser.screen_name}}},{default:Object(wt.V)(()=>[Object(wt.m)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"bell"}),Object(wt.l)(" "+Object(wt.O)(e.$t("nav.interactions")),1)]),_:1},8,["to"])]),e.currentUser.locked?(Object(wt.D)(),Object(wt.j)("li",{key:0,onClick:t[5]||(t[5]=(...t)=>e.toggleDrawer&&e.toggleDrawer(...t))},[Object(wt.m)(c,{to:"/friend-requests"},{default:Object(wt.V)(()=>[Object(wt.m)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"user-plus"}),Object(wt.l)(" "+Object(wt.O)(e.$t("nav.friend_requests"))+" ",1),e.followRequestCount>0?(Object(wt.D)(),Object(wt.j)("span",Zo,Object(wt.O)(e.followRequestCount),1)):Object(wt.i)("",!0)]),_:1})])):Object(wt.i)("",!0),e.shout?(Object(wt.D)(),Object(wt.j)("li",{key:1,onClick:t[6]||(t[6]=(...t)=>e.toggleDrawer&&e.toggleDrawer(...t))},[Object(wt.m)(c,{to:{name:"shout-panel"}},{default:Object(wt.V)(()=>[Object(wt.m)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"bullhorn"}),Object(wt.l)(" "+Object(wt.O)(e.$t("shoutbox.title")),1)]),_:1})])):Object(wt.i)("",!0)])):Object(wt.i)("",!0),Object(wt.k)("ul",null,[e.currentUser||!e.privateMode?(Object(wt.D)(),Object(wt.j)("li",{key:0,onClick:t[7]||(t[7]=(...t)=>e.toggleDrawer&&e.toggleDrawer(...t))},[Object(wt.m)(c,{to:{name:"search"}},{default:Object(wt.V)(()=>[Object(wt.m)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"search"}),Object(wt.l)(" "+Object(wt.O)(e.$t("nav.search")),1)]),_:1})])):Object(wt.i)("",!0),e.currentUser&&e.suggestionsEnabled?(Object(wt.D)(),Object(wt.j)("li",{key:1,onClick:t[8]||(t[8]=(...t)=>e.toggleDrawer&&e.toggleDrawer(...t))},[Object(wt.m)(c,{to:{name:"who-to-follow"}},{default:Object(wt.V)(()=>[Object(wt.m)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"user-plus"}),Object(wt.l)(" "+Object(wt.O)(e.$t("nav.who_to_follow")),1)]),_:1})])):Object(wt.i)("",!0),Object(wt.k)("li",{onClick:t[10]||(t[10]=(...t)=>e.toggleDrawer&&e.toggleDrawer(...t))},[Object(wt.k)("button",{class:"button-unstyled -link -fullwidth",onClick:t[9]||(t[9]=(...t)=>e.openSettingsModal&&e.openSettingsModal(...t))},[Object(wt.m)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"cog"}),Object(wt.l)(" "+Object(wt.O)(e.$t("settings.settings")),1)])]),Object(wt.k)("li",{onClick:t[11]||(t[11]=(...t)=>e.toggleDrawer&&e.toggleDrawer(...t))},[Object(wt.m)(c,{to:{name:"about"}},{default:Object(wt.V)(()=>[Object(wt.m)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"info-circle"}),Object(wt.l)(" "+Object(wt.O)(e.$t("nav.about")),1)]),_:1})]),e.currentUser&&"admin"===e.currentUser.role?(Object(wt.D)(),Object(wt.j)("li",{key:2,onClick:t[12]||(t[12]=(...t)=>e.toggleDrawer&&e.toggleDrawer(...t))},[Object(wt.k)("a",Qo,[Object(wt.m)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"tachometer-alt"}),Object(wt.l)(" "+Object(wt.O)(e.$t("nav.administration")),1)])])):Object(wt.i)("",!0),e.currentUser?(Object(wt.D)(),Object(wt.j)("li",{key:3,onClick:t[14]||(t[14]=(...t)=>e.toggleDrawer&&e.toggleDrawer(...t))},[Object(wt.k)("button",{class:"button-unstyled -link -fullwidth",onClick:t[13]||(t[13]=(...t)=>e.doLogout&&e.doLogout(...t))},[Object(wt.m)(a,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"sign-out-alt"}),Object(wt.l)(" "+Object(wt.O)(e.$t("login.logout")),1)])])):Object(wt.i)("",!0)])],34),Object(wt.k)("div",{class:Object(wt.w)(["side-drawer-click-outside",{"side-drawer-click-outside-closed":e.closed}]),onClick:t[17]||(t[17]=Object(wt.Y)((...t)=>e.toggleDrawer&&e.toggleDrawer(...t),["stop","prevent"]))},null,2)],2)}]]);var is=n(56),os=n.n(is);Tn.c.add(In.S);var ss=new Set(["chats","chat"]),as={data:function(){return{hidden:!1,scrollingDown:!1,inputActive:!1,oldScrollPos:0,amountScrolled:0}},created:function(){this.autohideFloatingPostButton&&this.activateFloatingPostButtonAutohide(),window.addEventListener("resize",this.handleOSK)},unmounted:function(){this.autohideFloatingPostButton&&this.deactivateFloatingPostButtonAutohide(),window.removeEventListener("resize",this.handleOSK)},computed:{isLoggedIn:function(){return!!this.$store.state.users.currentUser},isHidden:function(){return!!ss.has(this.$route.name)||this.autohideFloatingPostButton&&(this.hidden||this.inputActive)},isPersistent:function(){return!!this.$store.getters.mergedConfig.alwaysShowNewPostButton},autohideFloatingPostButton:function(){return!!this.$store.getters.mergedConfig.autohideFloatingPostButton}},watch:{autohideFloatingPostButton:function(e){e?this.activateFloatingPostButtonAutohide():this.deactivateFloatingPostButtonAutohide()}},methods:{activateFloatingPostButtonAutohide:function(){window.addEventListener("scroll",this.handleScrollStart),window.addEventListener("scroll",this.handleScrollEnd)},deactivateFloatingPostButtonAutohide:function(){window.removeEventListener("scroll",this.handleScrollStart),window.removeEventListener("scroll",this.handleScrollEnd)},openPostForm:function(){this.$store.dispatch("openPostStatusModal")},handleOSK:function(){var e=window.innerWidth<350,t=e&&window.innerHeight<345,n=!e&&window.innerWidth<450&&window.innerHeight<560;this.inputActive=!(!t&&!n)},handleScrollStart:os()((function(){window.scrollY>this.oldScrollPos?this.hidden=!0:this.hidden=!1,this.oldScrollPos=window.scrollY}),100,{leading:!0,trailing:!1}),handleScrollEnd:os()((function(){this.hidden=!1,this.oldScrollPos=window.scrollY}),100,{leading:!1,trailing:!0})}};n(545);var cs=Fn()(as,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("FAIcon");return e.isLoggedIn?(Object(wt.D)(),Object(wt.j)("button",{key:0,class:Object(wt.w)(["MobilePostButton button-default new-status-button",{hidden:e.isHidden,"always-show":e.isPersistent}]),onClick:t[0]||(t[0]=(...t)=>e.openPostForm&&e.openPostForm(...t))},[Object(wt.m)(s,{icon:"pen"})],2)):Object(wt.i)("",!0)}]]);const ls={class:"MobileNav"},us={class:"item"},ds={key:0,class:"alert-dot"},ps={class:"item right"},hs={key:0,class:"alert-dot"},bs={class:"mobile-notifications-header"},ms={class:"title"};var fs=n(77);function Os(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}Tn.c.add(In.rb,In.i,In.h);var js={components:{SideDrawer:rs,Notifications:fs.default},data:function(){return{notificationsCloseGesture:void 0,notificationsOpen:!1}},created:function(){this.notificationsCloseGesture=No.swipeGesture(No.DIRECTION_RIGHT,this.closeMobileNotifications,50)},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Os(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Os(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({currentUser:function(){return this.$store.state.users.currentUser},unseenNotifications:function(){return Object(W.f)(this.$store)},unseenNotificationsCount:function(){return this.unseenNotifications.length},hideSitename:function(){return this.$store.state.instance.hideSitename},sitename:function(){return this.$store.state.instance.name},isChat:function(){return"chat"===this.$route.name}},Object(a.c)(["unreadChatCount"])),methods:{toggleMobileSidebar:function(){this.$refs.sideDrawer.toggleDrawer()},openMobileNotifications:function(){this.notificationsOpen=!0},closeMobileNotifications:function(){this.notificationsOpen&&(this.notificationsOpen=!1,this.markNotificationsAsSeen())},notificationsTouchStart:function(e){No.beginSwipe(e,this.notificationsCloseGesture)},notificationsTouchMove:function(e){No.updateSwipe(e,this.notificationsCloseGesture)},scrollToTop:function(){window.scrollTo(0,0)},logout:function(){this.$router.replace("/main/public"),this.$store.dispatch("logout")},markNotificationsAsSeen:function(){this.$store.dispatch("markNotificationsAsSeen")},onScroll:function(e){var t=e.target;t.scrollTop+t.clientHeight>=t.scrollHeight&&this.$refs.notifications.fetchOlderNotifications()}},watch:{$route:function(){this.closeMobileNotifications()}}};n(559);var gs=Fn()(js,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("FAIcon"),a=Object(wt.J)("router-link"),c=Object(wt.J)("SideDrawer");return Object(wt.D)(),Object(wt.j)("div",ls,[Object(wt.k)("nav",{id:"nav",class:"mobile-nav",onClick:t[2]||(t[2]=t=>e.scrollToTop())},[Object(wt.k)("div",us,[Object(wt.k)("button",{class:"button-unstyled mobile-nav-button",onClick:t[0]||(t[0]=Object(wt.Y)(t=>e.toggleMobileSidebar(),["stop","prevent"]))},[Object(wt.m)(s,{class:"fa-scale-110 fa-old-padding",icon:"bars"}),e.unreadChatCount?(Object(wt.D)(),Object(wt.j)("div",ds)):Object(wt.i)("",!0)]),e.hideSitename?Object(wt.i)("",!0):(Object(wt.D)(),Object(wt.h)(a,{key:0,class:"site-name",to:{name:"root"},"active-class":"home"},{default:Object(wt.V)(()=>[Object(wt.l)(Object(wt.O)(e.sitename),1)]),_:1}))]),Object(wt.k)("div",ps,[e.currentUser?(Object(wt.D)(),Object(wt.j)("button",{key:0,class:"button-unstyled mobile-nav-button",onClick:t[1]||(t[1]=Object(wt.Y)(t=>e.openMobileNotifications(),["stop","prevent"]))},[Object(wt.m)(s,{class:"fa-scale-110 fa-old-padding",icon:"bell"}),e.unseenNotificationsCount?(Object(wt.D)(),Object(wt.j)("div",hs)):Object(wt.i)("",!0)])):Object(wt.i)("",!0)])]),e.currentUser?(Object(wt.D)(),Object(wt.j)("div",{key:0,class:Object(wt.w)(["mobile-notifications-drawer",{"-closed":!e.notificationsOpen}]),onTouchstart:t[5]||(t[5]=Object(wt.Y)((...t)=>e.notificationsTouchStart&&e.notificationsTouchStart(...t),["stop"])),onTouchmove:t[6]||(t[6]=Object(wt.Y)((...t)=>e.notificationsTouchMove&&e.notificationsTouchMove(...t),["stop"]))},[Object(wt.k)("div",bs,[Object(wt.k)("span",ms,Object(wt.O)(e.$t("notifications.notifications")),1),Object(wt.k)("a",{class:"mobile-nav-button",onClick:t[3]||(t[3]=Object(wt.Y)(t=>e.closeMobileNotifications(),["stop","prevent"]))},[Object(wt.m)(s,{class:"fa-scale-110 fa-old-padding",icon:"times"})])]),Object(wt.k)("div",{class:"mobile-notifications",id:"mobile-notifications",onScroll:t[4]||(t[4]=(...t)=>e.onScroll&&e.onScroll(...t))},null,32)],34)):Object(wt.i)("",!0),Object(wt.m)(c,{ref:"sideDrawer",logout:e.logout},null,8,["logout"])])}]]);const vs={class:"inner-nav"},ys={class:"item sitename"},ws=["src"],ks={class:"item right actions"};const _s=["title"],Ss=["placeholder"];Tn.c.add(In.rb,In.cb);var Cs={data:function(){return{searchTerm:void 0,hidden:!0,error:!1}},watch:{$route:function(e){"search"===e.name&&(this.searchTerm=e.query.query)}},methods:{find:function(e){this.$router.push({name:"search",query:{query:e}}),this.$refs.searchInput.focus()},toggleHidden:function(){var e=this;this.hidden=!this.hidden,this.$emit("toggled",this.hidden),this.$nextTick((function(){e.hidden||e.$refs.searchInput.focus()}))}}};n(560);var Ps=Fn()(Cs,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("FAIcon");return Object(wt.D)(),Object(wt.j)("div",{class:Object(wt.w)(["SearchBar",{"-expanded":!e.hidden}])},[e.hidden?(Object(wt.D)(),Object(wt.j)("button",{key:0,class:"button-unstyled nav-icon",title:e.$t("nav.search"),type:"button",onClick:t[0]||(t[0]=Object(wt.Y)((...t)=>e.toggleHidden&&e.toggleHidden(...t),["prevent","stop"]))},[Object(wt.m)(s,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"search"})],8,_s)):(Object(wt.D)(),Object(wt.j)(wt.a,{key:1},[Object(wt.W)(Object(wt.k)("input",{id:"search-bar-input",ref:"searchInput","onUpdate:modelValue":t[1]||(t[1]=t=>e.searchTerm=t),class:"search-bar-input",placeholder:e.$t("nav.search"),type:"text",onKeyup:t[2]||(t[2]=Object(wt.X)(t=>e.find(e.searchTerm),["enter"]))},null,40,Ss),[[wt.S,e.searchTerm]]),Object(wt.k)("button",{class:"button-default search-button",type:"submit",onClick:t[3]||(t[3]=t=>e.find(e.searchTerm))},[Object(wt.m)(s,{"fixed-width":"",icon:"search"})]),Object(wt.k)("button",{class:"button-unstyled cancel-search",type:"button",onClick:t[4]||(t[4]=Object(wt.Y)((...t)=>e.toggleHidden&&e.toggleHidden(...t),["prevent","stop"]))},[Object(wt.m)(s,{"fixed-width":"",icon:"times",class:"cancel-icon fa-scale-110 fa-old-padding"})])],64))],2)}]]);Tn.c.add(In.gb,In.hb,In.J,In.t,In.i,In.vb,In.l,In.cb,In.ob,In.s,In.M);var xs={components:{SearchBar:Ps},data:function(){return{searchBarHidden:!0,supportsMask:window.CSS&&window.CSS.supports&&(window.CSS.supports("mask-size","contain")||window.CSS.supports("-webkit-mask-size","contain")||window.CSS.supports("-moz-mask-size","contain")||window.CSS.supports("-ms-mask-size","contain")||window.CSS.supports("-o-mask-size","contain"))}},computed:{enableMask:function(){return this.supportsMask&&this.$store.state.instance.logoMask},logoStyle:function(){return{visibility:this.enableMask?"hidden":"visible"}},logoMaskStyle:function(){return this.enableMask?{"mask-image":"url(".concat(this.$store.state.instance.logo,")")}:{"background-color":this.enableMask?"":"transparent"}},logoBgStyle:function(){return Object.assign({margin:"".concat(this.$store.state.instance.logoMargin," 0"),opacity:this.searchBarHidden?1:0},this.enableMask?{}:{"background-color":this.enableMask?"":"transparent"})},logo:function(){return this.$store.state.instance.logo},sitename:function(){return this.$store.state.instance.name},hideSitename:function(){return this.$store.state.instance.hideSitename},logoLeft:function(){return this.$store.state.instance.logoLeft},currentUser:function(){return this.$store.state.users.currentUser},privateMode:function(){return this.$store.state.instance.private}},methods:{scrollToTop:function(){window.scrollTo(0,0)},logout:function(){this.$router.replace("/main/public"),this.$store.dispatch("logout")},onSearchBarToggled:function(e){this.searchBarHidden=e},openSettingsModal:function(){this.$store.dispatch("openSettingsModal")}}};n(561);var Ds=Fn()(xs,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("router-link"),a=Object(wt.J)("search-bar"),c=Object(wt.J)("FAIcon");return Object(wt.D)(),Object(wt.j)("nav",{id:"nav",class:Object(wt.w)(["DesktopNav",{"-logoLeft":e.logoLeft}]),onClick:t[4]||(t[4]=t=>e.scrollToTop())},[Object(wt.k)("div",vs,[Object(wt.k)("div",ys,[e.hideSitename?Object(wt.i)("",!0):(Object(wt.D)(),Object(wt.h)(s,{key:0,class:"site-name",to:{name:"root"},"active-class":"home"},{default:Object(wt.V)(()=>[Object(wt.l)(Object(wt.O)(e.sitename),1)]),_:1}))]),Object(wt.m)(s,{class:"logo",to:{name:"root"},style:Object(wt.x)(e.logoBgStyle)},{default:Object(wt.V)(()=>[Object(wt.k)("div",{class:"mask",style:Object(wt.x)(e.logoMaskStyle)},null,4),Object(wt.k)("img",{src:e.logo,style:Object(wt.x)(e.logoStyle)},null,12,ws)]),_:1},8,["style"]),Object(wt.k)("div",ks,[e.currentUser||!e.privateMode?(Object(wt.D)(),Object(wt.h)(a,{key:0,onToggled:e.onSearchBarToggled,onClick:t[0]||(t[0]=Object(wt.Y)(()=>{},["stop"]))},null,8,["onToggled"])):Object(wt.i)("",!0),Object(wt.k)("button",{class:"button-unstyled nav-icon",onClick:t[1]||(t[1]=Object(wt.Y)((...t)=>e.openSettingsModal&&e.openSettingsModal(...t),["stop"]))},[Object(wt.m)(c,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"cog",title:e.$t("nav.preferences")},null,8,["title"])]),e.currentUser&&"admin"===e.currentUser.role?(Object(wt.D)(),Object(wt.j)("a",{key:1,href:"/pleroma/admin/#/login-pleroma",class:"nav-icon",target:"_blank",onClick:t[2]||(t[2]=Object(wt.Y)(()=>{},["stop"]))},[Object(wt.m)(c,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"tachometer-alt",title:e.$t("nav.administration")},null,8,["title"])])):Object(wt.i)("",!0),e.currentUser?(Object(wt.D)(),Object(wt.j)("button",{key:2,class:"button-unstyled nav-icon",onClick:t[3]||(t[3]=Object(wt.Y)((...t)=>e.logout&&e.logout(...t),["prevent"]))},[Object(wt.m)(c,{"fixed-width":"",class:"fa-scale-110 fa-old-padding",icon:"sign-out-alt",title:e.$t("login.logout")},null,8,["title"])])):Object(wt.i)("",!0)])])],2)}]]);const Ts={class:"user-reporting-panel panel"},Is={class:"panel-heading"},$s={class:"title"},zs={class:"panel-body"},Ms={class:"user-reporting-panel-left"},Us=["placeholder"],Fs={key:0},Es=["disabled"],Ls={key:0,class:"alert error"},Rs={class:"user-reporting-panel-right"},As={class:"status-fadein user-reporting-panel-sitem"};var Ns=n(34),Bs=n(69);function Vs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Hs={components:{Status:Ns.default,List:Bs.a,Checkbox:lo.a,Modal:Zi},data:function(){return{comment:"",forward:!1,statusIdsToReport:[],processing:!1,error:!1}},computed:{isLoggedIn:function(){return!!this.$store.state.users.currentUser},isOpen:function(){return this.isLoggedIn&&this.$store.state.reports.modalActivated},userId:function(){return this.$store.state.reports.userId},user:function(){return this.$store.getters.findUser(this.userId)},remoteInstance:function(){return!this.user.is_local&&this.user.screen_name.substr(this.user.screen_name.indexOf("@")+1)},statuses:function(){return this.$store.state.reports.statuses},preTickedIds:function(){return this.$store.state.reports.preTickedIds}},watch:{userId:"resetState",preTickedIds:function(e){this.statusIdsToReport=e}},methods:{resetState:function(){this.comment="",this.forward=!1,this.statusIdsToReport=this.preTickedIds,this.processing=!1,this.error=!1},closeModal:function(){this.$store.dispatch("closeUserReportingModal")},reportUser:function(){var e=this;this.processing=!0,this.error=!1;var t={userId:this.userId,comment:this.comment,forward:this.forward,statusIds:this.statusIdsToReport};this.$store.state.api.backendInteractor.reportUser(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vs(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t)).then((function(){e.processing=!1,e.resetState(),e.closeModal()})).catch((function(){e.processing=!1,e.error=!0}))},clearError:function(){this.error=!1},isChecked:function(e){return-1!==this.statusIdsToReport.indexOf(e)},toggleStatus:function(e,t){e!==this.isChecked(t)&&(e?this.statusIdsToReport.push(t):this.statusIdsToReport.splice(this.statusIdsToReport.indexOf(t),1))},resize:function(e){var t=e.target||e;t instanceof window.Element&&(t.style.height="auto",t.style.height="".concat(t.scrollHeight,"px"),""===t.value&&(t.style.height=null))}}};n(563);var qs=Fn()(Hs,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("Checkbox"),a=Object(wt.J)("Status"),c=Object(wt.J)("List"),l=Object(wt.J)("Modal");return e.isOpen?(Object(wt.D)(),Object(wt.h)(l,{key:0,onBackdropClicked:e.closeModal},{default:Object(wt.V)(()=>[Object(wt.k)("div",Ts,[Object(wt.k)("div",Is,[Object(wt.k)("div",$s,Object(wt.O)(e.$t("user_reporting.title",[e.user.screen_name_ui])),1)]),Object(wt.k)("div",zs,[Object(wt.k)("div",Ms,[Object(wt.k)("div",null,[Object(wt.k)("p",null,Object(wt.O)(e.$t("user_reporting.add_comment_description")),1),Object(wt.W)(Object(wt.k)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.comment=t),class:"form-control",placeholder:e.$t("user_reporting.additional_comments"),rows:"1",onInput:t[1]||(t[1]=(...t)=>e.resize&&e.resize(...t))},null,40,Us),[[wt.S,e.comment]])]),e.user.is_local?Object(wt.i)("",!0):(Object(wt.D)(),Object(wt.j)("div",Fs,[Object(wt.k)("p",null,Object(wt.O)(e.$t("user_reporting.forward_description")),1),Object(wt.m)(s,{modelValue:e.forward,"onUpdate:modelValue":t[2]||(t[2]=t=>e.forward=t)},{default:Object(wt.V)(()=>[Object(wt.l)(Object(wt.O)(e.$t("user_reporting.forward_to",[e.remoteInstance])),1)]),_:1},8,["modelValue"])])),Object(wt.k)("div",null,[Object(wt.k)("button",{class:"btn button-default",disabled:e.processing,onClick:t[3]||(t[3]=(...t)=>e.reportUser&&e.reportUser(...t))},Object(wt.O)(e.$t("user_reporting.submit")),9,Es),e.error?(Object(wt.D)(),Object(wt.j)("div",Ls,Object(wt.O)(e.$t("user_reporting.generic_error")),1)):Object(wt.i)("",!0)])]),Object(wt.k)("div",Rs,[Object(wt.m)(c,{items:e.statuses},{item:Object(wt.V)(({item:t})=>[Object(wt.k)("div",As,[Object(wt.m)(a,{"in-conversation":!1,focused:!1,statusoid:t},null,8,["statusoid"]),Object(wt.m)(s,{"model-value":e.isChecked(t.id),"onUpdate:modelValue":n=>e.toggleStatus(n,t.id)},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["items"])])])])]),_:1},8,["onBackdropClicked"])):Object(wt.i)("",!0)}]]);const Js={class:"post-form-modal-panel panel"},Ws={class:"panel-heading"};var Ys={components:{PostStatusForm:Or.a,Modal:Zi},data:function(){return{resettingForm:!1}},computed:{isLoggedIn:function(){return!!this.$store.state.users.currentUser},modalActivated:function(){return this.$store.state.postStatus.modalActivated},isFormVisible:function(){return this.isLoggedIn&&!this.resettingForm&&this.modalActivated},params:function(){return this.$store.state.postStatus.params||{}}},watch:{params:function(e,t){var n=this;qt()(e,"repliedUser.id")!==qt()(t,"repliedUser.id")&&(this.resettingForm=!0,this.$nextTick((function(){n.resettingForm=!1})))},isFormVisible:function(e){var t=this;e&&this.$nextTick((function(){return t.$el&&t.$el.querySelector("textarea").focus()}))}},methods:{closeModal:function(){this.$store.dispatch("closePostStatusModal")}}};n(564);var Gs=Fn()(Ys,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("PostStatusForm"),a=Object(wt.J)("Modal");return e.isLoggedIn&&!e.resettingForm?(Object(wt.D)(),Object(wt.h)(a,{key:0,"is-open":e.modalActivated,class:"post-form-modal-view",onBackdropClicked:e.closeModal},{default:Object(wt.V)(()=>[Object(wt.k)("div",Js,[Object(wt.k)("div",Ws,Object(wt.O)(e.$t("post_status.new_status")),1),Object(wt.m)(s,Object(wt.u)({class:"panel-body"},e.params,{onPosted:e.closeModal}),null,16,["onPosted"])])]),_:1},8,["is-open","onBackdropClicked"])):Object(wt.i)("",!0)}]]);const Ks={class:"global-notice-list"},Xs={class:"notice-message"},Zs=["onClick"];Tn.c.add(In.rb);var Qs={computed:{notices:function(){return this.$store.state.interface.globalNotices}},methods:{closeNotice:function(e){this.$store.dispatch("removeGlobalNotice",e)}}};n(565);var ea=Fn()(Qs,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("FAIcon");return Object(wt.D)(),Object(wt.j)("div",Ks,[(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.notices,(t,n)=>(Object(wt.D)(),Object(wt.j)("div",{key:n,class:Object(wt.w)(["alert global-notice",{["global-"+t.level]:!0}])},[Object(wt.k)("div",Xs,Object(wt.O)(e.$t(t.messageKey,t.messageArgs)),1),Object(wt.k)("button",{class:"button-unstyled close-notice",onClick:n=>e.closeNotice(t)},[Object(wt.m)(s,{class:"fa-scale-110 fa-old-padding",icon:"times"})],8,Zs)],2))),128))])}]]);function ta(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var na={name:"app",components:{UserPanel:yr,NavPanel:Br,Notifications:Object(wt.n)((function(){return Promise.resolve().then(n.bind(null,77))})),InstanceSpecificPanel:Yr,FeaturesPanel:ai,WhoToFollowPanel:yi,ShoutPanel:Fi,MediaModal:Jo,SideDrawer:rs,MobilePostStatusButton:cs,MobileNav:gs,DesktopNav:Ds,SettingsModal:fo,UserReportingModal:qs,PostStatusModal:Gs,GlobalNoticeList:ea},data:function(){return{mobileActivePanel:"timeline"}},created:function(){var e=this.$store.getters.mergedConfig.interfaceLanguage;this.$store.dispatch("setOption",{name:"interfaceLanguage",value:e}),window.addEventListener("resize",this.updateMobileState)},unmounted:function(){window.removeEventListener("resize",this.updateMobileState)},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ta(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ta(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({classes:function(){return[{"-reverse":this.reverseLayout,"-no-sticky-headers":this.noSticky,"-has-new-post-button":this.newPostButtonShown},"-"+this.layoutType]},currentUser:function(){return this.$store.state.users.currentUser},userBackground:function(){return this.currentUser.background_image},instanceBackground:function(){return this.mergedConfig.hideInstanceWallpaper?null:this.$store.state.instance.background},background:function(){return this.userBackground||this.instanceBackground},bgStyle:function(){if(this.background)return{"--body-background-image":"url(".concat(this.background,")")}},shout:function(){return this.$store.state.shout.joined},suggestionsEnabled:function(){return this.$store.state.instance.suggestionsEnabled},showInstanceSpecificPanel:function(){return this.$store.state.instance.showInstanceSpecificPanel&&!this.$store.getters.mergedConfig.hideISP&&this.$store.state.instance.instanceSpecificPanelContent},isChats:function(){return"chat"===this.$route.name||"chats"===this.$route.name},newPostButtonShown:function(){return!this.isChats&&(this.$store.getters.mergedConfig.alwaysShowNewPostButton||"mobile"===this.layoutType)},showFeaturesPanel:function(){return this.$store.state.instance.showFeaturesPanel},shoutboxPosition:function(){return this.$store.getters.mergedConfig.alwaysShowNewPostButton||!1},hideShoutbox:function(){return this.$store.getters.mergedConfig.hideShoutbox},layoutType:function(){return this.$store.state.interface.layoutType},privateMode:function(){return this.$store.state.instance.private},reverseLayout:function(){var e=this.$store.getters.mergedConfig,t=e.thirdColumnMode,n=e.sidebarRight;return"wide"!==this.layoutType||"notifications"===t?n:!n},noSticky:function(){return this.$store.getters.mergedConfig.disableStickyHeaders},showScrollbars:function(){return this.$store.getters.mergedConfig.showScrollbars}},Object(a.c)(["mergedConfig"])),methods:{updateMobileState:function(){this.$store.dispatch("setLayoutWidth",Ce()),this.$store.dispatch("setLayoutHeight",Pe())}}};n(566);var ra=Fn()(na,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("MobileNav"),a=Object(wt.J)("DesktopNav"),c=Object(wt.J)("Notifications"),l=Object(wt.J)("user-panel"),u=Object(wt.J)("nav-panel"),d=Object(wt.J)("instance-specific-panel"),p=Object(wt.J)("features-panel"),h=Object(wt.J)("who-to-follow-panel"),b=Object(wt.J)("router-link"),m=Object(wt.J)("router-view"),f=Object(wt.J)("media-modal"),O=Object(wt.J)("shout-panel"),j=Object(wt.J)("MobilePostStatusButton"),g=Object(wt.J)("UserReportingModal"),v=Object(wt.J)("PostStatusModal"),y=Object(wt.J)("SettingsModal"),w=Object(wt.J)("GlobalNoticeList");return Object(wt.D)(),Object(wt.j)("div",{id:"app-loaded",style:Object(wt.x)(e.bgStyle)},[an,"mobile"===e.layoutType?(Object(wt.D)(),Object(wt.h)(s,{key:0})):(Object(wt.D)(),Object(wt.h)(a,{key:1})),e.currentUser?(Object(wt.D)(),Object(wt.h)(c,{key:2})):Object(wt.i)("",!0),Object(wt.k)("div",{id:"content",class:Object(wt.w)(["app-layout container",e.classes])},[cn,Object(wt.k)("div",{id:"sidebar",class:Object(wt.w)(["column -scrollable",{"-show-scrollbar":e.showScrollbars}])},[Object(wt.m)(l),"mobile"!==e.layoutType?(Object(wt.D)(),Object(wt.j)(wt.a,{key:0},[Object(wt.m)(u),e.showInstanceSpecificPanel?(Object(wt.D)(),Object(wt.h)(d,{key:0})):Object(wt.i)("",!0),!e.currentUser&&e.showFeaturesPanel?(Object(wt.D)(),Object(wt.h)(p,{key:1})):Object(wt.i)("",!0),e.currentUser&&e.suggestionsEnabled?(Object(wt.D)(),Object(wt.h)(h,{key:2})):Object(wt.i)("",!0),ln],64)):Object(wt.i)("",!0)],2),Object(wt.k)("div",{id:"main-scroller",class:Object(wt.w)(["column main",{"-full-height":e.isChats}])},[e.currentUser?Object(wt.i)("",!0):(Object(wt.D)(),Object(wt.j)("div",un,[Object(wt.m)(b,{to:{name:"login"},class:"panel-body"},{default:Object(wt.V)(()=>[Object(wt.l)(Object(wt.O)(e.$t("login.hint")),1)]),_:1})])),Object(wt.m)(m)],2),Object(wt.k)("div",{id:"notifs-column",class:Object(wt.w)(["column -scrollable",{"-show-scrollbar":e.showScrollbars}])},null,2)],2),Object(wt.m)(f),e.currentUser&&e.shout&&!e.hideShoutbox?(Object(wt.D)(),Object(wt.h)(O,{key:3,floating:!0,class:Object(wt.w)(["floating-shout mobile-hidden",{"-left":e.shoutboxPosition}])},null,8,["class"])):Object(wt.i)("",!0),Object(wt.m)(j),Object(wt.m)(g),Object(wt.m)(v),Object(wt.m)(y),dn,Object(wt.m)(w)],4)}]]);const ia={ref:"timeline",class:"timeline"},oa={key:0,class:"new-status-notification text-center faint"},sa={key:1,class:"new-status-notification text-center faint"},aa={class:"new-status-notification text-center"},ca={key:3,class:"new-status-notification text-center"};var la=n(331),ua=n.n(la),da=n(102),pa=n.n(da);const ha={key:0,class:"panel-heading conversation-heading -sticky"},ba={class:"title"},ma={class:"conversation-body panel-body"},fa={key:0,class:"thread-body"},Oa={key:0,class:"conversation-dive-to-top-level-box"},ja={key:1,class:"thread-ancestors"},ga={key:0,class:"thread-ancestor-dive-box"},va={class:"thread-ancestor-dive-box-inner"},ya={key:1,class:"thread-body"};var wa=n(332),ka=n.n(wa);const _a={class:"thread-tree"},Sa={key:0,class:"thread-tree-replies"},Ca={key:1,class:"thread-tree-replies thread-tree-replies-hidden"};Tn.c.add(In.c,In.e);var Pa={components:{Status:Ns.default},name:"ThreadTree",props:{depth:Number,status:Object,inProfile:Boolean,conversation:Array,collapsable:Boolean,isExpanded:Boolean,pinnedStatusIdsObject:Object,profileUserId:String,focused:Function,highlight:String,getReplies:Function,setHighlight:Function,toggleExpanded:Function,simple:Boolean,toggleThreadDisplay:Function,threadDisplayStatus:Object,showThreadRecursively:Function,totalReplyCount:Object,totalReplyDepth:Object,statusContentProperties:Object,setStatusContentProperty:Function,toggleStatusContentProperty:Function,dive:Function},computed:{suspendable:function(){var e=!this.$refs.statusComponent||this.$refs.statusComponent.suspendable;return this.$refs.childComponent?e&&this.$refs.childComponent.every((function(e){return e.suspendable})):e},reverseLookupTable:function(){return this.conversation.reduce((function(e,t,n){return e[t.id]=n,e}),{})},currentReplies:function(){var e=this;return this.getReplies(this.status.id).map((function(t){var n=t.id;return e.statusById(n)}))},threadShowing:function(){return"showing"===this.threadDisplayStatus[this.status.id]},currentProp:function(){return this.statusContentProperties[this.status.id]}},methods:{statusById:function(e){return this.conversation[this.reverseLookupTable[e]]},collapseThread:function(){},showThread:function(){},showAllSubthreads:function(){},toggleCurrentProp:function(e){this.toggleStatusContentProperty(this.status.id,e)},setCurrentProp:function(e,t){this.setStatusContentProperty(this.status.id,e)}}};n(569);var xa=Fn()(Pa,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("status"),a=Object(wt.J)("thread-tree"),c=Object(wt.J)("FAIcon"),l=Object(wt.J)("i18n-t");return Object(wt.D)(),Object(wt.j)("div",_a,[(Object(wt.D)(),Object(wt.h)(s,{key:e.status.id,ref:"statusComponent","inline-expanded":e.collapsable&&e.isExpanded,statusoid:e.status,expandable:!e.isExpanded,"show-pinned":e.pinnedStatusIdsObject&&e.pinnedStatusIdsObject[e.status.id],focused:e.focused(e.status.id),"in-conversation":e.isExpanded,highlight:e.highlight,replies:e.getReplies(e.status.id),"in-profile":e.inProfile,"profile-user-id":e.profileUserId,class:"conversation-status conversation-status-treeview status-fadein panel-body","simple-tree":e.simple,"controlled-thread-display-status":e.threadDisplayStatus[e.status.id],"controlled-toggle-thread-display":()=>e.toggleThreadDisplay(e.status.id),"controlled-showing-tall":e.currentProp.showingTall,"controlled-expanding-subject":e.currentProp.expandingSubject,"controlled-showing-long-subject":e.currentProp.showingLongSubject,"controlled-replying":e.currentProp.replying,"controlled-media-playing":e.currentProp.mediaPlaying,"controlled-toggle-showing-tall":()=>e.toggleCurrentProp("showingTall"),"controlled-toggle-expanding-subject":()=>e.toggleCurrentProp("expandingSubject"),"controlled-toggle-showing-long-subject":()=>e.toggleCurrentProp("showingLongSubject"),"controlled-toggle-replying":()=>e.toggleCurrentProp("replying"),"controlled-set-media-playing":t=>e.setCurrentProp("mediaPlaying",t),dive:e.dive?()=>e.dive(e.status.id):void 0,onGoto:e.setHighlight,onToggleExpanded:e.toggleExpanded},null,8,["inline-expanded","statusoid","expandable","show-pinned","focused","in-conversation","highlight","replies","in-profile","profile-user-id","simple-tree","controlled-thread-display-status","controlled-toggle-thread-display","controlled-showing-tall","controlled-expanding-subject","controlled-showing-long-subject","controlled-replying","controlled-media-playing","controlled-toggle-showing-tall","controlled-toggle-expanding-subject","controlled-toggle-showing-long-subject","controlled-toggle-replying","controlled-set-media-playing","dive","onGoto","onToggleExpanded"])),e.currentReplies.length&&e.threadShowing?(Object(wt.D)(),Object(wt.j)("div",Sa,[(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.currentReplies,t=>(Object(wt.D)(),Object(wt.h)(a,{key:t.id,ref_for:!0,ref:"childComponent",depth:e.depth+1,status:t,"in-profile":e.inProfile,conversation:e.conversation,collapsable:e.collapsable,"is-expanded":e.isExpanded,"pinned-status-ids-object":e.pinnedStatusIdsObject,"profile-user-id":e.profileUserId,focused:e.focused,"get-replies":e.getReplies,highlight:e.highlight,"set-highlight":e.setHighlight,"toggle-expanded":e.toggleExpanded,simple:e.simple,"toggle-thread-display":e.toggleThreadDisplay,"thread-display-status":e.threadDisplayStatus,"show-thread-recursively":e.showThreadRecursively,"total-reply-count":e.totalReplyCount,"total-reply-depth":e.totalReplyDepth,"status-content-properties":e.statusContentProperties,"set-status-content-property":e.setStatusContentProperty,"toggle-status-content-property":e.toggleStatusContentProperty,dive:e.dive},null,8,["depth","status","in-profile","conversation","collapsable","is-expanded","pinned-status-ids-object","profile-user-id","focused","get-replies","highlight","set-highlight","toggle-expanded","simple","toggle-thread-display","thread-display-status","show-thread-recursively","total-reply-count","total-reply-depth","status-content-properties","set-status-content-property","toggle-status-content-property","dive"]))),128))])):Object(wt.i)("",!0),e.currentReplies.length&&!e.threadShowing?(Object(wt.D)(),Object(wt.j)("div",Ca,[e.simple?(Object(wt.D)(),Object(wt.h)(l,{key:0,scope:"global",tag:"button",keypath:"status.thread_follow_with_icon",class:"button-unstyled -link thread-tree-show-replies-button",onClick:t[0]||(t[0]=Object(wt.Y)(t=>e.dive(e.status.id),["prevent"]))},{icon:Object(wt.V)(()=>[Object(wt.m)(c,{icon:"angle-double-right"})]),text:Object(wt.V)(()=>[Object(wt.k)("span",null,Object(wt.O)(e.$tc("status.thread_follow",e.totalReplyCount[e.status.id],{numStatus:e.totalReplyCount[e.status.id]})),1)]),_:1})):(Object(wt.D)(),Object(wt.h)(l,{key:1,scope:"global",tag:"button",keypath:"status.thread_show_full_with_icon",class:"button-unstyled -link thread-tree-show-replies-button",onClick:t[1]||(t[1]=Object(wt.Y)(t=>e.showThreadRecursively(e.status.id),["prevent"]))},{icon:Object(wt.V)(()=>[Object(wt.m)(c,{icon:"angle-double-down"})]),text:Object(wt.V)(()=>[Object(wt.k)("span",null,Object(wt.O)(e.$tc("status.thread_show_full",e.totalReplyCount[e.status.id],{numStatus:e.totalReplyCount[e.status.id],depth:e.totalReplyDepth[e.status.id]})),1)]),_:1}))])):Object(wt.i)("",!0)])}]]);function Da(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ta(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Da(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Da(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Tn.c.add(In.c,In.d,In.o);var Ia=function(e,t){var n="retweet"===e.type?e.retweeted_status.id:e.id,r="retweet"===t.type?t.retweeted_status.id:t.id,i=Number(n),o=Number(r),s=!Number.isNaN(i),a=!Number.isNaN(o);return s&&a?i<o?-1:1:s&&!a?-1:!s&&a?1:n<r?-1:1},$a={data:function(){return{highlight:null,expanded:!1,threadDisplayStatusObject:{},statusContentPropertiesObject:{},inlineDivePosition:null}},props:["statusId","collapsable","isPage","pinnedStatusIdsObject","inProfile","profileUserId","virtualHidden"],created:function(){this.isPage&&this.fetchConversation()},computed:{maxDepthToShowByDefault:function(){var e=this.$store.getters.mergedConfig.maxDepthInThread-2;return e>=1?e:1},displayStyle:function(){return this.$store.getters.mergedConfig.conversationDisplay},isTreeView:function(){return!this.isLinearView},treeViewIsSimple:function(){return!this.$store.getters.mergedConfig.conversationTreeAdvanced},isLinearView:function(){return"linear"===this.displayStyle},shouldFadeAncestors:function(){return this.$store.getters.mergedConfig.conversationTreeFadeAncestors},otherRepliesButtonPosition:function(){return this.$store.getters.mergedConfig.conversationOtherRepliesButton},showOtherRepliesButtonBelowStatus:function(){return"below"===this.otherRepliesButtonPosition},showOtherRepliesButtonInsideStatus:function(){return"inside"===this.otherRepliesButtonPosition},suspendable:function(){return this.isTreeView?Object.entries(this.statusContentProperties).every((function(e){var t=m()(e,2),n=(t[0],t[1]);return!n.replying&&0===n.mediaPlaying.length})):!this.$refs.statusComponent||!this.$refs.statusComponent[0]||this.$refs.statusComponent.every((function(e){return e.suspendable}))},hideStatus:function(){return this.virtualHidden&&this.suspendable},status:function(){return this.$store.state.statuses.allStatusesObject[this.statusId]},originalStatusId:function(){return this.status.retweeted_status?this.status.retweeted_status.id:this.statusId},conversationId:function(){return this.getConversationId(this.statusId)},conversation:function(){if(!this.status)return[];if(!this.isExpanded)return[this.status];var e=ka()(this.$store.state.statuses.conversationsObject[this.conversationId]),t=A()(e,{id:this.originalStatusId});return-1!==t&&(e[t]=this.status),function(e,t){return(e="retweet"===t.type?bt()(e,(function(e){return"retweet"===e.type||e.id!==t.retweeted_status.id})):bt()(e,(function(e){return"retweet"!==e.type}))).filter((function(e){return e})).sort(Ia)}(e,this.status)},statusMap:function(){return this.conversation.reduce((function(e,t){return e[t.id]=t,e}),{})},threadTree:function(){var e=this,t=this.conversation.reduce((function(e,t,n){return e[t.id]=n,e}),{});return function n(r,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return i.map((function(i){return s[i]?[]:(s[i]=!0,[{status:e.conversation[t[i]],id:i,depth:o},n(r,r[i],o+1,s)].reduce((function(e,t){return e.concat(t)}),[]))})).reduce((function(e,t){return e.concat(t)}),[])}(this.conversation.reduce((function(t,n){var r=n.id;return t.forest[r]=e.getReplies(r).map((function(e){return e.id})),t}),{forest:{}}).forest,this.topLevel.map((function(e){return e.id})))},replyIds:function(){var e=this;return this.conversation.map((function(e){return e.id})).reduce((function(t,n){return t[n]=(e.replies[n]||[]).map((function(e){return e.id})),t}),{})},totalReplyCount:function(){var e=this,t={};return this.conversation.map((function(e){return e.id})).map((function n(r){return t[r]||(t[r]=1+e.replyIds[r].map((function(e){return n(e)})).reduce((function(e,t){return e+t}),0)),t[r]})),Object.keys(t).reduce((function(e,n){return e[n]=t[n]-1,e}),{})},totalReplyDepth:function(){var e=this,t={};return this.conversation.map((function(e){return e.id})).map((function n(r){return t[r]||(t[r]=1+e.replyIds[r].map((function(e){return n(e)})).reduce((function(e,t){return e>t?e:t}),0)),t[r]})),Object.keys(t).reduce((function(e,n){return e[n]=t[n]-1,e}),{})},depths:function(){return this.threadTree.reduce((function(e,t){return e[t.id]=t.depth,e}),{})},topLevel:function(){var e=this,t=this.conversation.reduce((function(t,n){return t.filter((function(t){return-1===e.getReplies(n.id).map((function(e){return e.id})).indexOf(t.id)}))}),this.conversation);return t},otherTopLevelCount:function(){return this.topLevel.length-1},showingTopLevel:function(){return this.canDive&&this.diveRoot?[this.statusMap[this.diveRoot]]:this.topLevel},diveRoot:function(){var e=this.inlineDivePosition||this.statusId;return!this.parentOf(e)?null:e},diveDepth:function(){return this.canDive&&this.diveRoot?this.depths[this.diveRoot]:0},diveMode:function(){return this.canDive&&!!this.diveRoot},shouldShowAllConversationButton:function(){return this.isTreeView&&this.isExpanded&&this.diveMode&&this.topLevel.length>1},shouldShowAncestors:function(){return this.isTreeView&&this.isExpanded&&this.ancestorsOf(this.diveRoot).length},replies:function(){var e=1;return De()(this.conversation,(function(t,n){var r=n.id,i=n.in_reply_to_status_id;return i&&(t[i]=t[i]||[],t[i].push({name:"#".concat(e),id:r})),e++,t}),{})},isExpanded:function(){return!(!this.expanded&&!this.isPage)},hiddenStyle:function(){var e=this.status&&this.status.virtualHeight||"120px";return this.virtualHidden?{height:e}:{}},threadDisplayStatus:function(){var e=this;return this.conversation.reduce((function(t,n){var r=n.id,i=e.depths[r],o=e.threadDisplayStatusObject[r]?e.threadDisplayStatusObject[r]:i-e.diveDepth<=e.maxDepthToShowByDefault?"showing":"hidden";return t[r]=o,t}),{})},statusContentProperties:function(){var e=this;return this.conversation.reduce((function(t,n){var r,i=n.id,o=(r={showingTall:!1,expandingSubject:!1,showingLongSubject:!1,isReplying:!1,mediaPlaying:[]},e.statusContentPropertiesObject[i]?Ta(Ta({},r),e.statusContentPropertiesObject[i]):r);return t[i]=o,t}),{})},canDive:function(){return this.isTreeView&&this.isExpanded},focused:function(){var e=this;return function(t){return e.isExpanded&&t===e.highlight}},maybeHighlight:function(){return this.isExpanded?this.highlight:null}},components:{Status:Ns.default,ThreadTree:xa},watch:{statusId:function(e,t){var n=this.getConversationId(e),r=this.getConversationId(t);n&&r&&n===r?this.setHighlight(this.originalStatusId):this.fetchConversation()},expanded:function(e){e?this.fetchConversation():this.resetDisplayState()},virtualHidden:function(e){this.$store.dispatch("setVirtualHeight",{statusId:this.statusId,height:"".concat(this.$el.clientHeight,"px")})}},methods:{fetchConversation:function(){var e=this;this.status?this.$store.state.api.backendInteractor.fetchConversation({id:this.statusId}).then((function(t){var n=t.ancestors,r=t.descendants;e.$store.dispatch("addNewStatuses",{statuses:n}),e.$store.dispatch("addNewStatuses",{statuses:r}),e.setHighlight(e.originalStatusId)})):this.$store.state.api.backendInteractor.fetchStatus({id:this.statusId}).then((function(t){e.$store.dispatch("addNewStatuses",{statuses:[t]}),e.fetchConversation()}))},getReplies:function(e){return this.replies[e]||[]},getHighlight:function(){return this.isExpanded?this.highlight:null},setHighlight:function(e){e&&(this.highlight=e,this.$store.dispatch("fetchFavsAndRepeats",e),this.$store.dispatch("fetchEmojiReactionsBy",e))},toggleExpanded:function(){this.expanded=!this.expanded},getConversationId:function(e){var t=this.$store.state.statuses.allStatusesObject[e];return qt()(t,"retweeted_status.statusnet_conversation_id",qt()(t,"statusnet_conversation_id"))},setThreadDisplay:function(e,t){this.threadDisplayStatusObject=Ta(Ta({},this.threadDisplayStatusObject),{},h()({},e,t))},toggleThreadDisplay:function(e){var t="showing"===this.threadDisplayStatus[e]?"hidden":"showing";this.setThreadDisplay(e,t)},setThreadDisplayRecursively:function(e,t){var n=this;this.setThreadDisplay(e,t),this.getReplies(e).map((function(e){return e.id})).map((function(e){return n.setThreadDisplayRecursively(e,t)}))},showThreadRecursively:function(e){this.setThreadDisplayRecursively(e,"showing")},setStatusContentProperty:function(e,t,n){this.statusContentPropertiesObject=Ta(Ta({},this.statusContentPropertiesObject),{},h()({},e,Ta(Ta({},this.statusContentPropertiesObject[e]),{},h()({},t,n))))},toggleStatusContentProperty:function(e,t){this.setStatusContentProperty(e,t,!this.statusContentProperties[e][t])},leastVisibleAncestor:function(e){for(var t=e,n=this.parentOf(t);t;){if("showing"===this.threadDisplayStatus[n])return t;n=this.parentOf(n),t=this.parentOf(t)}return this.topLevel[0]?this.topLevel[0].id:void 0},diveIntoStatus:function(e,t){this.tryScrollTo(e)},diveToTopLevel:function(){this.tryScrollTo(this.topLevelAncestorOrSelfId(this.diveRoot)||this.topLevel[0].id)},undive:function(){this.inlineDivePosition=null,this.setHighlight(this.statusId)},tryScrollTo:function(e){var t=this;e&&(this.isPage?this.$router.push({name:"conversation",params:{id:e}}):this.inlineDivePosition=e,this.$nextTick((function(){t.setHighlight(e)})))},goToCurrent:function(){this.tryScrollTo(this.diveRoot||this.topLevel[0].id)},statusById:function(e){return this.statusMap[e]},parentOf:function(e){var t=this.statusById(e);if(t){var n=t.in_reply_to_status_id;if(this.statusMap[n])return n}},parentOrSelf:function(e){return this.parentOf(e)||e},ancestorsOf:function(e){for(var t=[],n=this.parentOf(e);n;)t.unshift(this.statusMap[n]),n=this.parentOf(n);return t},topLevelAncestorOrSelfId:function(e){for(var t=e,n=this.parentOf(e);n;)t=this.parentOf(t),n=this.parentOf(n);return t},resetDisplayState:function(){this.undive(),this.threadDisplayStatusObject={}}}};n(570);var za=Fn()($a,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("FAIcon"),a=Object(wt.J)("i18n-t"),c=Object(wt.J)("status"),l=Object(wt.J)("thread-tree");return e.hideStatus?(Object(wt.D)(),Object(wt.j)("div",{key:1,style:Object(wt.x)(e.hiddenStyle)},null,4)):(Object(wt.D)(),Object(wt.j)("div",{key:0,style:Object(wt.x)(e.hiddenStyle),class:Object(wt.w)(["Conversation",{"-expanded":e.isExpanded,panel:e.isExpanded}])},[e.isExpanded?(Object(wt.D)(),Object(wt.j)("div",ha,[Object(wt.k)("span",ba,Object(wt.O)(e.$t("timeline.conversation")),1),e.collapsable?(Object(wt.D)(),Object(wt.j)("button",{key:0,class:"button-unstyled -link",onClick:t[0]||(t[0]=Object(wt.Y)((...t)=>e.toggleExpanded&&e.toggleExpanded(...t),["prevent"]))},Object(wt.O)(e.$t("timeline.collapse")),1)):Object(wt.i)("",!0)])):Object(wt.i)("",!0),Object(wt.k)("div",ma,[e.isTreeView?(Object(wt.D)(),Object(wt.j)("div",fa,[e.shouldShowAllConversationButton?(Object(wt.D)(),Object(wt.j)("div",Oa,[Object(wt.m)(a,{keypath:"status.show_all_conversation_with_icon",tag:"button",class:"button-unstyled -link",onClick:Object(wt.Y)(e.diveToTopLevel,["prevent"]),scope:"global"},{icon:Object(wt.V)(()=>[Object(wt.m)(s,{icon:"angle-double-left"})]),text:Object(wt.V)(()=>[Object(wt.k)("span",null,Object(wt.O)(e.$tc("status.show_all_conversation",e.otherTopLevelCount,{numStatus:e.otherTopLevelCount})),1)]),_:1},8,["onClick"])])):Object(wt.i)("",!0),e.shouldShowAncestors?(Object(wt.D)(),Object(wt.j)("div",ja,[(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.ancestorsOf(e.diveRoot),t=>(Object(wt.D)(),Object(wt.j)("div",{key:t.id,class:Object(wt.w)(["thread-ancestor",{"thread-ancestor-has-other-replies":e.getReplies(t.id).length>1,"-faded":e.shouldFadeAncestors}])},[Object(wt.m)(c,{ref_for:!0,ref:"statusComponent","inline-expanded":e.collapsable&&e.isExpanded,statusoid:t,expandable:!e.isExpanded,"show-pinned":e.pinnedStatusIdsObject&&e.pinnedStatusIdsObject[t.id],focused:e.focused(t.id),"in-conversation":e.isExpanded,highlight:e.getHighlight(),replies:e.getReplies(t.id),"in-profile":e.inProfile,"profile-user-id":e.profileUserId,class:"conversation-status status-fadein panel-body","simple-tree":e.treeViewIsSimple,"toggle-thread-display":e.toggleThreadDisplay,"thread-display-status":e.threadDisplayStatus,"show-thread-recursively":e.showThreadRecursively,"total-reply-count":e.totalReplyCount,"total-reply-depth":e.totalReplyDepth,"show-other-replies-as-button":e.showOtherRepliesButtonInsideStatus,dive:()=>e.diveIntoStatus(t.id),"controlled-showing-tall":e.statusContentProperties[t.id].showingTall,"controlled-expanding-subject":e.statusContentProperties[t.id].expandingSubject,"controlled-showing-long-subject":e.statusContentProperties[t.id].showingLongSubject,"controlled-replying":e.statusContentProperties[t.id].replying,"controlled-media-playing":e.statusContentProperties[t.id].mediaPlaying,"controlled-toggle-showing-tall":()=>e.toggleStatusContentProperty(t.id,"showingTall"),"controlled-toggle-expanding-subject":()=>e.toggleStatusContentProperty(t.id,"expandingSubject"),"controlled-toggle-showing-long-subject":()=>e.toggleStatusContentProperty(t.id,"showingLongSubject"),"controlled-toggle-replying":()=>e.toggleStatusContentProperty(t.id,"replying"),"controlled-set-media-playing":n=>e.toggleStatusContentProperty(t.id,"mediaPlaying",n),onGoto:e.setHighlight,onToggleExpanded:e.toggleExpanded},null,8,["inline-expanded","statusoid","expandable","show-pinned","focused","in-conversation","highlight","replies","in-profile","profile-user-id","simple-tree","toggle-thread-display","thread-display-status","show-thread-recursively","total-reply-count","total-reply-depth","show-other-replies-as-button","dive","controlled-showing-tall","controlled-expanding-subject","controlled-showing-long-subject","controlled-replying","controlled-media-playing","controlled-toggle-showing-tall","controlled-toggle-expanding-subject","controlled-toggle-showing-long-subject","controlled-toggle-replying","controlled-set-media-playing","onGoto","onToggleExpanded"]),e.showOtherRepliesButtonBelowStatus&&e.getReplies(t.id).length>1?(Object(wt.D)(),Object(wt.j)("div",ga,[Object(wt.k)("div",va,[Object(wt.m)(a,{tag:"button",scope:"global",keypath:"status.ancestor_follow_with_icon",class:"button-unstyled -link thread-tree-show-replies-button",onClick:Object(wt.Y)(n=>e.diveIntoStatus(t.id),["prevent"])},{icon:Object(wt.V)(()=>[Object(wt.m)(s,{icon:"angle-double-right"})]),text:Object(wt.V)(()=>[Object(wt.k)("span",null,Object(wt.O)(e.$tc("status.ancestor_follow",e.getReplies(t.id).length-1,{numReplies:e.getReplies(t.id).length-1})),1)]),_:2},1032,["onClick"])])])):Object(wt.i)("",!0)],2))),128))])):Object(wt.i)("",!0),(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.showingTopLevel,t=>(Object(wt.D)(),Object(wt.h)(l,{key:t.id,ref_for:!0,ref:"statusComponent",depth:0,status:t,"in-profile":e.inProfile,conversation:e.conversation,collapsable:e.collapsable,"is-expanded":e.isExpanded,"pinned-status-ids-object":e.pinnedStatusIdsObject,"profile-user-id":e.profileUserId,focused:e.focused,"get-replies":e.getReplies,highlight:e.maybeHighlight,"set-highlight":e.setHighlight,"toggle-expanded":e.toggleExpanded,simple:e.treeViewIsSimple,"toggle-thread-display":e.toggleThreadDisplay,"thread-display-status":e.threadDisplayStatus,"show-thread-recursively":e.showThreadRecursively,"total-reply-count":e.totalReplyCount,"total-reply-depth":e.totalReplyDepth,"status-content-properties":e.statusContentProperties,"set-status-content-property":e.setStatusContentProperty,"toggle-status-content-property":e.toggleStatusContentProperty,dive:e.canDive?e.diveIntoStatus:void 0},null,8,["status","in-profile","conversation","collapsable","is-expanded","pinned-status-ids-object","profile-user-id","focused","get-replies","highlight","set-highlight","toggle-expanded","simple","toggle-thread-display","thread-display-status","show-thread-recursively","total-reply-count","total-reply-depth","status-content-properties","set-status-content-property","toggle-status-content-property","dive"]))),128))])):Object(wt.i)("",!0),e.isLinearView?(Object(wt.D)(),Object(wt.j)("div",ya,[(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.conversation,t=>(Object(wt.D)(),Object(wt.h)(c,{key:t.id,ref_for:!0,ref:"statusComponent","inline-expanded":e.collapsable&&e.isExpanded,statusoid:t,expandable:!e.isExpanded,"show-pinned":e.pinnedStatusIdsObject&&e.pinnedStatusIdsObject[t.id],focused:e.focused(t.id),"in-conversation":e.isExpanded,highlight:e.getHighlight(),replies:e.getReplies(t.id),"in-profile":e.inProfile,"profile-user-id":e.profileUserId,class:"conversation-status status-fadein panel-body","toggle-thread-display":e.toggleThreadDisplay,"thread-display-status":e.threadDisplayStatus,"show-thread-recursively":e.showThreadRecursively,"total-reply-count":e.totalReplyCount,"total-reply-depth":e.totalReplyDepth,"status-content-properties":e.statusContentProperties,"set-status-content-property":e.setStatusContentProperty,"toggle-status-content-property":e.toggleStatusContentProperty,onGoto:e.setHighlight,onToggleExpanded:e.toggleExpanded},null,8,["inline-expanded","statusoid","expandable","show-pinned","focused","in-conversation","highlight","replies","in-profile","profile-user-id","toggle-thread-display","thread-display-status","show-thread-recursively","total-reply-count","total-reply-depth","status-content-properties","set-status-content-property","toggle-status-content-property","onGoto","onToggleExpanded"]))),128))])):Object(wt.i)("",!0)])],6))}]]);const Ma={class:"timeline-menu-popover popover-default"},Ua={class:"button-unstyled title timeline-menu-title"},Fa={class:"timeline-title"};Tn.c.add(In.n);var Ea={components:{Popover:co.default,TimelineMenuContent:Lr},data:function(){return{isOpen:!1}},created:function(){({friends:"nav.home_timeline",bookmarks:"nav.bookmarks",dms:"nav.dms","public-timeline":"nav.public_tl","public-external-timeline":"nav.twkn"})[this.$route.name]&&this.$store.dispatch("setLastTimeline",this.$route.name)},methods:{openMenu:function(){var e=this;setTimeout((function(){e.isOpen=!0}),25)},blockOpen:function(e){this.isOpen||e.stopPropagation()},timelineName:function(){var e=this.$route.name;if("tag-timeline"===e)return"#"+this.$route.params.tag;var t={friends:"nav.home_timeline",bookmarks:"nav.bookmarks",dms:"nav.dms","public-timeline":"nav.public_tl","public-external-timeline":"nav.twkn"}[this.$route.name];return t?this.$t(t):e}}};n(571);var La=Fn()(Ea,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("TimelineMenuContent"),a=Object(wt.J)("FAIcon"),c=Object(wt.J)("Popover");return Object(wt.D)(),Object(wt.h)(c,{trigger:"click",class:Object(wt.w)(["TimelineMenu",{open:e.isOpen}]),margin:{left:-15,right:-200},"bound-to":{x:"container"},"popover-class":"timeline-menu-popover-wrap",onShow:e.openMenu,onClose:t[1]||(t[1]=()=>e.isOpen=!1)},{content:Object(wt.V)(()=>[Object(wt.k)("div",Ma,[Object(wt.m)(s)])]),trigger:Object(wt.V)(()=>[Object(wt.k)("button",Ua,[Object(wt.k)("span",Fa,Object(wt.O)(e.timelineName()),1),Object(wt.k)("span",null,[Object(wt.m)(a,{size:"sm",icon:"chevron-down"})]),Object(wt.k)("span",{class:"click-blocker",onClick:t[0]||(t[0]=(...t)=>e.blockOpen&&e.blockOpen(...t))})])]),_:1},8,["class","onShow"])}]]);const Ra={class:"dropdown-menu"},Aa={key:0},Na=Object(wt.k)("div",{role:"separator",class:"dropdown-divider"},null,-1),Ba={class:"button-unstyled"};function Va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ha(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Va(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Va(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Tn.c.add(In.G,In.H,In.yb);var qa={components:{Popover:co.default},methods:{setReplyVisibility:function(e){this.$store.dispatch("setOption",{name:"replyVisibility",value:e}),this.$store.dispatch("queueFlushAll")},openTab:function(e){this.$store.dispatch("openSettingsModalTab",e)}},computed:Ha(Ha({},Object(a.c)(["mergedConfig"])),{},{loggedIn:function(){return!!this.$store.state.users.currentUser},replyVisibilitySelf:{get:function(){return"self"===this.mergedConfig.replyVisibility},set:function(){this.setReplyVisibility("self")}},replyVisibilityFollowing:{get:function(){return"following"===this.mergedConfig.replyVisibility},set:function(){this.setReplyVisibility("following")}},replyVisibilityAll:{get:function(){return"all"===this.mergedConfig.replyVisibility},set:function(){this.setReplyVisibility("all")}},hideMedia:{get:function(){return this.mergedConfig.hideAttachments||this.mergedConfig.hideAttachmentsInConv},set:function(){var e=!this.hideMedia;this.$store.dispatch("setOption",{name:"hideAttachments",value:e}),this.$store.dispatch("setOption",{name:"hideAttachmentsInConv",value:e})}},hideMutedPosts:{get:function(){return this.mergedConfig.hideFilteredStatuses},set:function(){var e=!this.hideMutedPosts;this.$store.dispatch("setOption",{name:"hideFilteredStatuses",value:e})}},muteBotStatuses:{get:function(){return this.mergedConfig.muteBotStatuses},set:function(){var e=!this.muteBotStatuses;this.$store.dispatch("setOption",{name:"muteBotStatuses",value:e})}}})};n(572);var Ja=Fn()(qa,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("FAIcon"),a=Object(wt.J)("Popover");return Object(wt.D)(),Object(wt.h)(a,{trigger:"click",class:"TimelineQuickSettings","bound-to":{x:"container"}},{content:Object(wt.V)(()=>[Object(wt.k)("div",Ra,[e.loggedIn?(Object(wt.D)(),Object(wt.j)("div",Aa,[Object(wt.k)("button",{class:"button-default dropdown-item",onClick:t[0]||(t[0]=t=>e.replyVisibilityAll=!0)},[Object(wt.k)("span",{class:Object(wt.w)(["menu-checkbox -radio",{"menu-checkbox-checked":e.replyVisibilityAll}])},null,2),Object(wt.l)(Object(wt.O)(e.$t("settings.reply_visibility_all")),1)]),Object(wt.k)("button",{class:"button-default dropdown-item",onClick:t[1]||(t[1]=t=>e.replyVisibilityFollowing=!0)},[Object(wt.k)("span",{class:Object(wt.w)(["menu-checkbox -radio",{"menu-checkbox-checked":e.replyVisibilityFollowing}])},null,2),Object(wt.l)(Object(wt.O)(e.$t("settings.reply_visibility_following_short")),1)]),Object(wt.k)("button",{class:"button-default dropdown-item",onClick:t[2]||(t[2]=t=>e.replyVisibilitySelf=!0)},[Object(wt.k)("span",{class:Object(wt.w)(["menu-checkbox -radio",{"menu-checkbox-checked":e.replyVisibilitySelf}])},null,2),Object(wt.l)(Object(wt.O)(e.$t("settings.reply_visibility_self_short")),1)]),Na])):Object(wt.i)("",!0),Object(wt.k)("button",{class:"button-default dropdown-item",onClick:t[3]||(t[3]=t=>e.muteBotStatuses=!e.muteBotStatuses)},[Object(wt.k)("span",{class:Object(wt.w)(["menu-checkbox",{"menu-checkbox-checked":e.muteBotStatuses}])},null,2),Object(wt.l)(Object(wt.O)(e.$t("settings.mute_bot_posts")),1)]),Object(wt.k)("button",{class:"button-default dropdown-item",onClick:t[4]||(t[4]=t=>e.hideMedia=!e.hideMedia)},[Object(wt.k)("span",{class:Object(wt.w)(["menu-checkbox",{"menu-checkbox-checked":e.hideMedia}])},null,2),Object(wt.l)(Object(wt.O)(e.$t("settings.hide_media_previews")),1)]),Object(wt.k)("button",{class:"button-default dropdown-item",onClick:t[5]||(t[5]=t=>e.hideMutedPosts=!e.hideMutedPosts)},[Object(wt.k)("span",{class:Object(wt.w)(["menu-checkbox",{"menu-checkbox-checked":e.hideMutedPosts}])},null,2),Object(wt.l)(Object(wt.O)(e.$t("settings.hide_all_muted_posts")),1)]),Object(wt.k)("button",{class:"button-default dropdown-item dropdown-item-icon",onClick:t[6]||(t[6]=t=>e.openTab("filtering"))},[Object(wt.m)(s,{icon:"font"}),Object(wt.l)(Object(wt.O)(e.$t("settings.word_filter")),1)]),Object(wt.k)("button",{class:"button-default dropdown-item dropdown-item-icon",onClick:t[7]||(t[7]=t=>e.openTab("general"))},[Object(wt.m)(s,{icon:"wrench"}),Object(wt.l)(Object(wt.O)(e.$t("settings.more_settings")),1)])])]),trigger:Object(wt.V)(()=>[Object(wt.k)("button",Ba,[Object(wt.m)(s,{icon:"filter"})])]),_:1})}]]);Tn.c.add(In.r,In.s);var Wa={props:["timeline","timelineName","title","userId","tag","embedded","count","pinnedStatusIds","inProfile","footerSlipgate"],data:function(){return{paused:!1,unfocused:!1,bottomedOut:!1,virtualScrollIndex:0,blockingClicks:!1}},components:{Status:Ns.default,Conversation:za,TimelineMenu:La,TimelineQuickSettings:Ja},computed:{filteredVisibleStatuses:function(){var e=this;return this.timeline.visibleStatuses.filter((function(t){return"user"!==e.timelineName||t.id>=e.timeline.minId&&t.id<=e.timeline.maxId}))},filteredPinnedStatusIds:function(){var e=this;return(this.pinnedStatusIds||[]).filter((function(t){return e.timeline.statusesObject[t]}))},newStatusCount:function(){return this.timeline.newStatusCount},showLoadButton:function(){return this.timeline.newStatusCount>0||0!==this.timeline.flushMarker},loadButtonString:function(){return 0!==this.timeline.flushMarker?this.$t("timeline.reload"):"".concat(this.$t("timeline.show_new")," (").concat(this.newStatusCount,")")},classes:function(){var e=this.embedded?["-nonpanel"]:["panel","panel-default"];return this.blockingClicks&&(e=e.concat(["-blocked","_misclick-prevention"])),{root:e,header:["timeline-heading"].concat(this.embedded?[]:["panel-heading","-sticky"]),body:["timeline-body"].concat(this.embedded?[]:["panel-body"]),footer:["timeline-footer"].concat(this.embedded?[]:["panel-footer"])}},pinnedStatusIdsObject:function(){return ua()(this.pinnedStatusIds)},statusesToDisplay:function(){var e=this.timeline.visibleStatuses.length,t=Math.ceil(Math.max(3,window.innerHeight/80)),n=this.virtualScrollIndex-this.filteredPinnedStatusIds.length,r=Math.max(0,n-t),i=Math.min(e,n+t);return this.timeline.visibleStatuses.slice(r,i).map((function(e){return e.id}))},virtualScrollingEnabled:function(){return this.$store.getters.mergedConfig.virtualScrolling}},created:function(){var e=this.$store,t=e.state.users.currentUser.credentials,n=0===this.timeline.visibleStatuses.length;if(window.addEventListener("scroll",this.handleScroll),e.state.api.fetchers[this.timelineName])return!1;ve.fetchAndUpdate({store:e,credentials:t,timeline:this.timelineName,showImmediately:n,userId:this.userId,tag:this.tag})},mounted:function(){void 0!==document.hidden&&(document.addEventListener("visibilitychange",this.handleVisibilityChange,!1),this.unfocused=document.hidden),window.addEventListener("keydown",this.handleShortKey),setTimeout(this.determineVisibleStatuses,250)},unmounted:function(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("keydown",this.handleShortKey),void 0!==document.hidden&&document.removeEventListener("visibilitychange",this.handleVisibilityChange,!1),this.$store.commit("setLoading",{timeline:this.timelineName,value:!1})},methods:{stopBlockingClicks:os()((function(){this.blockingClicks=!1}),1e3),blockClicksTemporarily:function(){this.blockingClicks||(this.blockingClicks=!0),this.stopBlockingClicks()},handleShortKey:function(e){["textarea","input"].includes(e.target.tagName.toLowerCase())||"."===e.key&&this.showNewStatuses()},showNewStatuses:function(){0!==this.timeline.flushMarker?(this.$store.commit("clearTimeline",{timeline:this.timelineName,excludeUserId:!0}),this.$store.commit("queueFlush",{timeline:this.timelineName,id:0}),this.fetchOlderStatuses()):(this.blockClicksTemporarily(),this.$store.commit("showNewStatuses",{timeline:this.timelineName}),this.paused=!1),window.scrollTo({top:0})},fetchOlderStatuses:pa()((function(){var e=this,t=this.$store,n=t.state.users.currentUser.credentials;t.commit("setLoading",{timeline:this.timelineName,value:!0}),ve.fetchAndUpdate({store:t,credentials:n,timeline:this.timelineName,older:!0,showImmediately:!0,userId:this.userId,tag:this.tag}).then((function(t){var n=t.statuses;n&&0===n.length&&(e.bottomedOut=!0)})).finally((function(){return t.commit("setLoading",{timeline:e.timelineName,value:!1})}))}),1e3,void 0),determineVisibleStatuses:function(){if(this.$refs.timeline&&this.virtualScrollingEnabled){var e=this.$refs.timeline.children,t=Math.max(0,Math.min(this.virtualScrollIndex,e.length-1));if(0!==e.length){var n=Math.max(document.body.offsetHeight,window.pageYOffset),r=window.pageYOffset+.5*window.innerHeight,i=Math.floor(e.length*(r/n)),o=e[i].getBoundingClientRect().y,s=e[t].getBoundingClientRect().y;for(Math.abs(o)>s&&(i=t,o=s);o<-20&&i<e.length-1;)o+=e[i].offsetHeight,i++;for(;o>window.innerHeight+100&&i>0;)o-=e[--i].offsetHeight;this.virtualScrollIndex=i}}},scrollLoad:function(e){var t=document.body.getBoundingClientRect(),n=Math.max(t.height,-t.y);!1===this.timeline.loading&&this.$el.offsetHeight>0&&window.innerHeight+window.pageYOffset>=n-750&&this.fetchOlderStatuses()},handleScroll:pa()((function(e){this.determineVisibleStatuses(),this.scrollLoad(e)}),200),handleVisibilityChange:function(){this.unfocused=document.hidden}},watch:{newStatusCount:function(e){if(this.$store.getters.mergedConfig.streaming&&e>0){var t=document.documentElement;!((window.pageYOffset||t.scrollTop)-(t.clientTop||0)<15)||this.paused||this.unfocused&&this.$store.getters.mergedConfig.pauseOnUnfocused?this.paused=!0:this.showNewStatuses()}}}};n(573);var Ya=Fn()(Wa,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("TimelineMenu"),a=Object(wt.J)("TimelineQuickSettings"),c=Object(wt.J)("conversation"),l=Object(wt.J)("FAIcon");return Object(wt.D)(),Object(wt.j)("div",{class:Object(wt.w)(["Timeline",e.classes.root])},[Object(wt.k)("div",{class:Object(wt.w)(e.classes.header)},[e.embedded?Object(wt.i)("",!0):(Object(wt.D)(),Object(wt.h)(s,{key:0})),e.showLoadButton?(Object(wt.D)(),Object(wt.j)("button",{key:1,class:"button-default loadmore-button",onClick:t[0]||(t[0]=Object(wt.Y)((...t)=>e.showNewStatuses&&e.showNewStatuses(...t),["prevent"]))},Object(wt.O)(e.loadButtonString),1)):e.embedded?Object(wt.i)("",!0):(Object(wt.D)(),Object(wt.j)("div",{key:2,class:"loadmore-text faint",onClick:t[1]||(t[1]=Object(wt.Y)(()=>{},["prevent"]))},Object(wt.O)(e.$t("timeline.up_to_date")),1)),e.embedded?Object(wt.i)("",!0):(Object(wt.D)(),Object(wt.h)(a,{key:3}))],2),Object(wt.k)("div",{class:Object(wt.w)(e.classes.body)},[Object(wt.k)("div",ia,[(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.filteredPinnedStatusIds,t=>(Object(wt.D)(),Object(wt.h)(c,{key:t+"-pinned",class:"status-fadein","status-id":t,collapsable:!0,"pinned-status-ids-object":e.pinnedStatusIdsObject,"in-profile":e.inProfile,"profile-user-id":e.userId},null,8,["status-id","pinned-status-ids-object","in-profile","profile-user-id"]))),128)),(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.filteredVisibleStatuses,t=>(Object(wt.D)(),Object(wt.h)(c,{key:t.id,class:"status-fadein","status-id":t.id,collapsable:!0,"in-profile":e.inProfile,"profile-user-id":e.userId,"virtual-hidden":e.virtualScrollingEnabled&&!e.statusesToDisplay.includes(t.id)},null,8,["status-id","in-profile","profile-user-id","virtual-hidden"]))),128))],512)],2),Object(wt.k)("div",{class:Object(wt.w)(e.classes.footer)},[(Object(wt.D)(),Object(wt.h)(wt.c,{to:e.footerSlipgate,disabled:!e.embedded||!e.footerSlipgate},[0===e.count?(Object(wt.D)(),Object(wt.j)("div",oa,Object(wt.O)(e.$t("timeline.no_statuses")),1)):e.bottomedOut?(Object(wt.D)(),Object(wt.j)("div",sa,Object(wt.O)(e.$t("timeline.no_more_statuses")),1)):e.timeline.loading?(Object(wt.D)(),Object(wt.j)("div",ca,[Object(wt.m)(l,{icon:"circle-notch",spin:"",size:"lg"})])):(Object(wt.D)(),Object(wt.j)("button",{key:2,class:"button-unstyled -link",onClick:t[2]||(t[2]=Object(wt.Y)(t=>e.fetchOlderStatuses(),["prevent"]))},[Object(wt.k)("div",aa,Object(wt.O)(e.$t("timeline.load_older")),1)]))],8,["to","disabled"]))],2)],2)}]]),Ga={components:{Timeline:Ya},computed:{timeline:function(){return this.$store.state.statuses.timelines.public}},created:function(){this.$store.dispatch("startFetchingTimeline",{timeline:"public"})},unmounted:function(){this.$store.dispatch("stopFetchingTimeline","public")}};var Ka=Fn()(Ga,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("Timeline");return Object(wt.D)(),Object(wt.h)(s,{title:e.$t("nav.public_tl"),timeline:e.timeline,"timeline-name":"public"},null,8,["title","timeline"])}]]);var Xa={components:{Timeline:Ya},computed:{timeline:function(){return this.$store.state.statuses.timelines.publicAndExternal}},created:function(){this.$store.dispatch("startFetchingTimeline",{timeline:"publicAndExternal"})},unmounted:function(){this.$store.dispatch("stopFetchingTimeline","publicAndExternal")}};var Za=Fn()(Xa,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("Timeline");return Object(wt.D)(),Object(wt.h)(s,{title:e.$t("nav.twkn"),timeline:e.timeline,"timeline-name":"publicAndExternal"},null,8,["title","timeline"])}]]);var Qa={components:{Timeline:Ya},computed:{timeline:function(){return this.$store.state.statuses.timelines.friends}}};var ec=Fn()(Qa,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("Timeline");return Object(wt.D)(),Object(wt.h)(s,{title:e.$t("nav.timeline"),timeline:e.timeline,"timeline-name":"friends"},null,8,["title","timeline"])}]]);var tc={created:function(){this.$store.commit("clearTimeline",{timeline:"tag"}),this.$store.dispatch("startFetchingTimeline",{timeline:"tag",tag:this.tag})},components:{Timeline:Ya},computed:{tag:function(){return this.$route.params.tag},timeline:function(){return this.$store.state.statuses.timelines.tag}},watch:{tag:function(){this.$store.commit("clearTimeline",{timeline:"tag"}),this.$store.dispatch("startFetchingTimeline",{timeline:"tag",tag:this.tag})}},unmounted:function(){this.$store.dispatch("stopFetchingTimeline","tag")}};var nc=Fn()(tc,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("Timeline");return Object(wt.D)(),Object(wt.h)(s,{title:e.tag,timeline:e.timeline,"timeline-name":"tag",tag:e.tag},null,8,["title","timeline","tag"])}]]);var rc={computed:{timeline:function(){return this.$store.state.statuses.timelines.bookmarks}},components:{Timeline:Ya},unmounted:function(){this.$store.commit("clearTimeline",{timeline:"bookmarks"})}};var ic=Fn()(rc,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("Timeline");return Object(wt.D)(),Object(wt.h)(s,{title:e.$t("nav.bookmarks"),timeline:e.timeline,"timeline-name":"bookmarks"},null,8,["title","timeline"])}]]);var oc={components:{Conversation:za},computed:{statusId:function(){return this.$route.params.id}}};var sc=Fn()(oc,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("conversation");return Object(wt.D)(),Object(wt.h)(s,{collapsable:!1,"is-page":"true","status-id":e.statusId},null,8,["status-id"])}]]);const ac={class:"panel panel-default"},cc={class:"panel-heading"},lc={class:"title"},uc=["label"],dc=["label"],pc=["label"],hc=["label"];var bc=n(71),mc={mentions:["mention"],"likes+repeats":["repeat","like"],follows:["follow"],moves:["move"]},fc={data:function(){return{allowFollowingMove:this.$store.state.users.currentUser.allow_following_move,filterMode:mc.mentions}},methods:{onModeSwitch:function(e){this.filterMode=mc[e]}},components:{Notifications:fs.default,TabSwitcher:bc.a}};var Oc=Fn()(fc,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("tab-switcher"),a=Object(wt.J)("Notifications");return Object(wt.D)(),Object(wt.j)("div",ac,[Object(wt.k)("div",cc,[Object(wt.k)("div",lc,Object(wt.O)(e.$t("nav.interactions")),1)]),Object(wt.m)(s,{ref:"tabSwitcher","on-switch":e.onModeSwitch},{default:Object(wt.V)(()=>[Object(wt.k)("span",{key:"mentions",label:e.$t("nav.mentions")},null,8,uc),Object(wt.k)("span",{key:"likes+repeats",label:e.$t("interactions.favs_repeats")},null,8,dc),Object(wt.k)("span",{key:"follows",label:e.$t("interactions.follows")},null,8,pc),e.allowFollowingMove?Object(wt.i)("",!0):(Object(wt.D)(),Object(wt.j)("span",{key:"moves",label:e.$t("interactions.moves")},null,8,hc))]),_:1},8,["on-switch"]),Object(wt.m)(a,{ref:"notifications","no-heading":!0,"minimal-mode":!0,"filter-mode":e.filterMode},null,8,["filter-mode"])])}]]);var jc={computed:{timeline:function(){return this.$store.state.statuses.timelines.dms}},components:{Timeline:Ya}};var gc=Fn()(jc,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("Timeline");return Object(wt.D)(),Object(wt.h)(s,{title:e.$t("nav.dms"),timeline:e.timeline,"timeline-name":"dms"},null,8,["title","timeline"])}]]);const vc={key:0},yc={key:1,class:"chat-list panel panel-default"},wc={class:"panel-heading -sticky"},kc={class:"title"},_c={class:"panel-body"},Sc={key:0,class:"timeline"},Cc={key:1,class:"emtpy-chat-list-alert"};const Pc={class:"chat-list-item-left"},xc={class:"chat-list-item-center"},Dc={class:"heading"},Tc={key:0,class:"name-and-account-name"},Ic=Object(wt.k)("span",{class:"heading-right"},null,-1),$c={class:"time-wrapper"},zc={class:"chat-preview"},Mc={key:0,class:"badge badge-notification unread-chat-count"};var Uc=n(45),Fc=n(22),Ec=n(144),Lc=n(59);const Rc=["title"];var Ac=n(25),Nc={name:"ChatTitle",components:{UserAvatar:Fc.default,RichContent:Ac.a},props:["user","withAvatar"],computed:{title:function(){return this.user?this.user.screen_name_ui:""},htmlTitle:function(){return this.user?this.user.name_html:""}},methods:{getUserProfileLink:function(e){return Object(ji.a)(e.id,e.screen_name)}}};n(575);var Bc=Fn()(Nc,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("UserAvatar"),a=Object(wt.J)("router-link"),c=Object(wt.J)("RichContent");return Object(wt.D)(),Object(wt.j)("div",{class:"chat-title",title:e.title},[e.withAvatar&&e.user?(Object(wt.D)(),Object(wt.h)(a,{key:0,class:"avatar-container",to:e.getUserProfileLink(e.user)},{default:Object(wt.V)(()=>[Object(wt.m)(s,{class:"titlebar-avatar",user:e.user},null,8,["user"])]),_:1},8,["to"])):Object(wt.i)("",!0),e.user?(Object(wt.D)(),Object(wt.h)(c,{key:1,class:"username",title:"@"+(e.user&&e.user.screen_name_ui),html:e.htmlTitle,emoji:e.user.emoji||[]},null,8,["title","html","emoji"])):Object(wt.i)("",!0)],8,Rc)}]]);function Vc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vc(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qc={name:"ChatListItem",props:["chat"],components:{UserAvatar:Fc.default,AvatarList:Ec.a,Timeago:Lc.a,ChatTitle:Bc,StatusBody:Uc.a},computed:Hc(Hc({},Object(a.e)({currentUser:function(e){return e.users.currentUser}})),{},{attachmentInfo:function(){if(0!==this.chat.lastMessage.attachments.length){var e=this.chat.lastMessage.attachments.map((function(e){return lt.a.fileType(e.mimetype)}));return e.includes("video")?this.$t("file_type.video"):e.includes("audio")?this.$t("file_type.audio"):e.includes("image")?this.$t("file_type.image"):this.$t("file_type.file")}},messageForStatusContent:function(){var e=this.chat.lastMessage,t=e?e.emojis:[],n=e&&e.account_id===this.currentUser.id,r=e?this.attachmentInfo||e.content:"",i=n?"<i>".concat(this.$t("chats.you"),"</i> ").concat(r):r;return{summary:"",emojis:t,raw_html:i,text:i,attachments:[]}}}),methods:{openChat:function(e){this.chat.id&&this.$router.push({name:"chat",params:{username:this.currentUser.screen_name,recipient_id:this.chat.account.id}})}}};n(576);var Jc=Fn()(qc,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("UserAvatar"),a=Object(wt.J)("ChatTitle"),c=Object(wt.J)("Timeago"),l=Object(wt.J)("StatusBody");return Object(wt.D)(),Object(wt.j)("div",{class:"chat-list-item",onClickCapture:t[0]||(t[0]=Object(wt.Y)((...t)=>e.openChat&&e.openChat(...t),["prevent"]))},[Object(wt.k)("div",Pc,[Object(wt.m)(s,{user:e.chat.account,height:"48px",width:"48px"},null,8,["user"])]),Object(wt.k)("div",xc,[Object(wt.k)("div",Dc,[e.chat.account?(Object(wt.D)(),Object(wt.j)("span",Tc,[Object(wt.m)(a,{user:e.chat.account},null,8,["user"])])):Object(wt.i)("",!0),Ic,Object(wt.k)("div",$c,[Object(wt.m)(c,{time:e.chat.updated_at,"auto-update":60},null,8,["time"])])]),Object(wt.k)("div",zc,[Object(wt.m)(l,{class:"chat-preview-body",status:e.messageForStatusContent,"single-line":!0},null,8,["status"]),e.chat.unread>0?(Object(wt.D)(),Object(wt.j)("div",Mc,Object(wt.O)(e.chat.unread),1)):Object(wt.i)("",!0)])])],32)}]]);const Wc={class:"panel-default panel chat-new"},Yc={ref:"header",class:"panel-heading"},Gc={class:"input-wrap"},Kc={class:"input-search"},Xc={class:"member-list"},Zc=["onClickCapture"];var Qc=n(53);function el(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?el(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):el(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Tn.c.add(In.cb,In.o);var nl={components:{BasicUserCard:Qc.a,UserAvatar:Fc.default},data:function(){return{suggestions:[],userIds:[],loading:!1,query:""}},created:function(){var e=this;return i()(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.backendInteractor.chats();case 2:n=t.sent,n.chats.forEach((function(t){return e.suggestions.push(t.account)}));case 5:case"end":return t.stop()}}),t)})))()},computed:tl(tl({users:function(){var e=this;return this.userIds.map((function(t){return e.findUser(t)}))},availableUsers:function(){return 0!==this.query.length?this.users:this.suggestions}},Object(a.e)({currentUser:function(e){return e.users.currentUser},backendInteractor:function(e){return e.api.backendInteractor}})),Object(a.c)(["findUser"])),methods:{goBack:function(){this.$emit("cancel")},goToChat:function(e){this.$router.push({name:"chat",params:{recipient_id:e.id}})},onInput:function(){this.search(this.query)},addUser:function(e){this.selectedUserIds.push(e.id),this.query=""},removeUser:function(e){this.selectedUserIds=this.selectedUserIds.filter((function(t){return t!==e}))},search:function(e){var t=this;e?(this.loading=!0,this.userIds=[],this.$store.dispatch("search",{q:e,resolve:!0,type:"accounts"}).then((function(e){t.loading=!1,t.userIds=e.accounts.map((function(e){return e.id}))}))):this.loading=!1}}};n(578);var rl=Fn()(nl,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("FAIcon"),a=Object(wt.J)("BasicUserCard");return Object(wt.D)(),Object(wt.j)("div",Wc,[Object(wt.k)("div",Yc,[Object(wt.k)("button",{class:"button-unstyled go-back-button",onClick:t[0]||(t[0]=(...t)=>e.goBack&&e.goBack(...t))},[Object(wt.m)(s,{size:"lg",icon:"chevron-left"})])],512),Object(wt.k)("div",Gc,[Object(wt.k)("div",Kc,[Object(wt.m)(s,{class:"search-icon fa-scale-110 fa-old-padding",icon:"search"})]),Object(wt.W)(Object(wt.k)("input",{ref:"search","onUpdate:modelValue":t[1]||(t[1]=t=>e.query=t),placeholder:"Search people",onInput:t[2]||(t[2]=(...t)=>e.onInput&&e.onInput(...t))},null,544),[[wt.S,e.query]])]),Object(wt.k)("div",Xc,[(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.availableUsers,t=>(Object(wt.D)(),Object(wt.j)("div",{key:t.id,class:"member"},[Object(wt.k)("div",{onClickCapture:Object(wt.Y)(n=>e.goToChat(t),["prevent"])},[Object(wt.m)(a,{user:t},null,8,["user"])],40,Zc)]))),128))])])}]]);function il(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ol(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?il(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):il(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sl={components:{ChatListItem:Jc,List:Bs.a,ChatNew:rl},computed:ol(ol({},Object(a.e)({currentUser:function(e){return e.users.currentUser}})),Object(a.c)(["sortedChatList"])),data:function(){return{isNew:!1}},created:function(){this.$store.dispatch("fetchChats",{latest:!0})},methods:{cancelNewChat:function(){this.isNew=!1,this.$store.dispatch("fetchChats",{latest:!0})},newChat:function(){this.isNew=!0}}};n(579);var al=Fn()(sl,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("ChatNew"),a=Object(wt.J)("ChatListItem"),c=Object(wt.J)("List");return e.isNew?(Object(wt.D)(),Object(wt.j)("div",vc,[Object(wt.m)(s,{onCancel:e.cancelNewChat},null,8,["onCancel"])])):(Object(wt.D)(),Object(wt.j)("div",yc,[Object(wt.k)("div",wc,[Object(wt.k)("span",kc,Object(wt.O)(e.$t("chats.chats")),1),Object(wt.k)("button",{class:"button-default",onClick:t[0]||(t[0]=(...t)=>e.newChat&&e.newChat(...t))},Object(wt.O)(e.$t("chats.new")),1)]),Object(wt.k)("div",_c,[e.sortedChatList.length>0?(Object(wt.D)(),Object(wt.j)("div",Sc,[Object(wt.m)(c,{items:e.sortedChatList},{item:Object(wt.V)(({item:e})=>[(Object(wt.D)(),Object(wt.h)(a,{key:e.id,compact:!1,chat:e},null,8,["chat"]))]),_:1},8,["items"])])):(Object(wt.D)(),Object(wt.j)("div",Cc,[Object(wt.k)("span",null,Object(wt.O)(e.$t("chats.empty_chat_list_placeholder")),1)]))])]))}]]);const cl={class:"chat-view"},ll={class:"chat-view-inner"},ul={ref:"inner",class:"panel-default panel chat-view-body"},dl={ref:"header",class:"panel-heading -sticky chat-view-heading"},pl={class:"title text-center"},hl={key:1,class:"chat-loading-error"},bl={class:"alert error"},ml={ref:"footer",class:"panel-body footer"},fl={key:0,class:"badge badge-notification unread-chat-count unread-message-count"};const Ol={key:0,class:"avatar-wrapper"},jl={class:"chat-message-inner"},gl={class:"dropdown-menu"},vl=["title"],yl={class:"created-at"},wl={key:1,class:"chat-message-date-separator"};var kl=n(58),_l=n(78),Sl=n(142);var Cl=n(38),Pl={name:"Timeago",props:["date"],computed:{displayDate:function(){var e=new Date;return e.setHours(0,0,0,0),this.date.getTime()===e.getTime()?this.$t("display_date.today"):this.date.toLocaleDateString(Cl.a.internalToBrowserLocale(this.$i18n.locale),{day:"numeric",month:"long"})}}};var xl=Fn()(Pl,[["render",function(e,t,n,r,i,o){return Object(wt.D)(),Object(wt.j)("time",null,Object(wt.O)(o.displayDate),1)}]]);function Dl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dl(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Tn.c.add(In.rb,In.w);var Il={name:"ChatMessage",props:["author","edited","noHeading","chatViewItem","hoveredMessageChain"],emits:["hover"],components:{Popover:co.default,Attachment:kl.a,StatusContent:Uc.a,UserAvatar:Fc.default,Gallery:_l.a,LinkPreview:Sl.a,ChatMessageDate:xl},computed:Tl(Tl({createdAt:function(){return this.chatViewItem.data.created_at.toLocaleTimeString("en",{hour:"2-digit",minute:"2-digit",hour12:!1})},isCurrentUser:function(){return this.message.account_id===this.currentUser.id},message:function(){return this.chatViewItem.data},userProfileLink:function(){return Object(ji.a)(this.author.id,this.author.screen_name,this.$store.state.instance.restrictedNicknames)},isMessage:function(){return"message"===this.chatViewItem.type},messageForStatusContent:function(){return{summary:"",emojis:this.message.emojis,raw_html:this.message.content||"",text:this.message.content||"",attachments:this.message.attachments}},hasAttachment:function(){return this.message.attachments.length>0}},Object(a.e)({betterShadow:function(e){return e.interface.browserSupport.cssFilter},currentUser:function(e){return e.users.currentUser},restrictedNicknames:function(e){return e.instance.restrictedNicknames}})),{},{popoverMarginStyle:function(){return this.isCurrentUser?{}:{left:50}}},Object(a.c)(["mergedConfig","findUser"])),data:function(){return{hovered:!1,menuOpened:!1}},methods:{onHover:function(e){this.$emit("hover",{isHovered:e,messageChainId:this.chatViewItem.messageChainId})},deleteMessage:function(){var e=this;return i()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm(e.$t("chats.delete_confirm"))){t.next=4;break}return t.next=4,e.$store.dispatch("deleteChatMessage",{messageId:e.chatViewItem.data.id,chatId:e.chatViewItem.data.chat_id});case 4:e.hovered=!1,e.menuOpened=!1;case 6:case"end":return t.stop()}}),t)})))()}}};n(580);var $l=Fn()(Il,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("UserAvatar"),a=Object(wt.J)("router-link"),c=Object(wt.J)("FAIcon"),l=Object(wt.J)("Popover"),u=Object(wt.J)("StatusContent"),d=Object(wt.J)("ChatMessageDate");return e.isMessage?(Object(wt.D)(),Object(wt.j)("div",{key:0,class:Object(wt.w)(["chat-message-wrapper",{"hovered-message-chain":e.hoveredMessageChain}]),onMouseover:t[5]||(t[5]=t=>e.onHover(!0)),onMouseleave:t[6]||(t[6]=t=>e.onHover(!1))},[Object(wt.k)("div",{class:Object(wt.w)(["chat-message",[{outgoing:e.isCurrentUser,incoming:!e.isCurrentUser}]])},[e.isCurrentUser?Object(wt.i)("",!0):(Object(wt.D)(),Object(wt.j)("div",Ol,[e.chatViewItem.isHead?(Object(wt.D)(),Object(wt.h)(a,{key:0,to:e.userProfileLink},{default:Object(wt.V)(()=>[Object(wt.m)(s,{compact:!0,"better-shadow":e.betterShadow,user:e.author},null,8,["better-shadow","user"])]),_:1},8,["to"])):Object(wt.i)("",!0)])),Object(wt.k)("div",jl,[Object(wt.k)("div",{class:"status-body",style:Object(wt.x)({"min-width":e.message.attachment?"80%":""})},[Object(wt.k)("div",{class:Object(wt.w)(["media status",{"without-attachment":!e.hasAttachment,pending:e.chatViewItem.data.pending,error:e.chatViewItem.data.error}]),style:{position:"relative"},onMouseenter:t[3]||(t[3]=t=>e.hovered=!0),onMouseleave:t[4]||(t[4]=t=>e.hovered=!1)},[Object(wt.k)("div",{class:Object(wt.w)(["chat-message-menu",{visible:e.hovered||e.menuOpened}])},[Object(wt.m)(l,{trigger:"click",placement:"top","bound-to-selector":e.isCurrentUser?"":".scrollable-message-list","bound-to":{x:"container"},margin:e.popoverMarginStyle,onShow:t[1]||(t[1]=t=>e.menuOpened=!0),onClose:t[2]||(t[2]=t=>e.menuOpened=!1)},{content:Object(wt.V)(()=>[Object(wt.k)("div",gl,[Object(wt.k)("button",{class:"button-default dropdown-item dropdown-item-icon",onClick:t[0]||(t[0]=(...t)=>e.deleteMessage&&e.deleteMessage(...t))},[Object(wt.m)(c,{icon:"times"}),Object(wt.l)(" "+Object(wt.O)(e.$t("chats.delete")),1)])])]),trigger:Object(wt.V)(()=>[Object(wt.k)("button",{class:"button-default menu-icon",title:e.$t("chats.more")},[Object(wt.m)(c,{icon:"ellipsis-h"})],8,vl)]),_:1},8,["bound-to-selector","margin"])],2),Object(wt.m)(u,{class:"message-content",status:e.messageForStatusContent,"full-content":!0},{footer:Object(wt.V)(()=>[Object(wt.k)("span",yl,Object(wt.O)(e.createdAt),1)]),_:1},8,["status"])],34)],4)])],2)],34)):(Object(wt.D)(),Object(wt.j)("div",wl,[Object(wt.m)(d,{date:e.chatViewItem.date},null,8,["date"])]))}]]),zl=function(){return{scrollTop:window.scrollY,scrollHeight:document.documentElement.scrollHeight,offsetHeight:window.innerHeight}};function Ml(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ul(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ml(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ml(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Tn.c.add(In.n,In.o);var Fl={components:{ChatMessage:$l,ChatTitle:Bc,PostStatusForm:Or.a},data:function(){return{jumpToBottomButtonVisible:!1,hoveredMessageChainId:void 0,lastScrollPosition:{},scrollableContainerHeight:"100%",errorLoadingChat:!1,messageRetriers:{}}},created:function(){this.startFetching(),window.addEventListener("resize",this.handleResize)},mounted:function(){var e=this;window.addEventListener("scroll",this.handleScroll),void 0!==document.hidden&&document.addEventListener("visibilitychange",this.handleVisibilityChange,!1),this.$nextTick((function(){e.handleResize()}))},unmounted:function(){window.removeEventListener("scroll",this.handleScroll),void 0!==document.hidden&&document.removeEventListener("visibilitychange",this.handleVisibilityChange,!1),this.$store.dispatch("clearCurrentChat")},computed:Ul(Ul({recipient:function(){return this.currentChat&&this.currentChat.account},recipientId:function(){return this.$route.params.recipient_id},formPlaceholder:function(){return this.recipient?this.$t("chats.message_user",{nickname:this.recipient.screen_name_ui}):""},chatViewItems:function(){return $t.getView(this.currentChatMessageService)},newMessageCount:function(){return this.currentChatMessageService&&this.currentChatMessageService.newMessageCount},streamingEnabled:function(){return this.mergedConfig.useStreamingApi&&this.mastoUserSocketStatus===j.b.JOINED}},Object(a.c)(["currentChat","currentChatMessageService","findOpenedChatByRecipientId","mergedConfig"])),Object(a.e)({backendInteractor:function(e){return e.api.backendInteractor},mastoUserSocketStatus:function(e){return e.api.mastoUserSocketStatus},mobileLayout:function(e){return"mobile"===e.interface.layoutType},currentUser:function(e){return e.users.currentUser}})),watch:{chatViewItems:function(){var e=this,t=this.bottomedOut(10);this.$nextTick((function(){t&&e.scrollDown()}))},$route:function(){this.startFetching()},mastoUserSocketStatus:function(e){e===j.b.JOINED&&this.fetchChat({isFirstFetch:!0})}},methods:{onMessageHover:function(e){var t=e.isHovered,n=e.messageChainId;this.hoveredMessageChainId=t?n:void 0},onFilesDropped:function(){var e=this;this.$nextTick((function(){e.handleResize()}))},handleVisibilityChange:function(){var e=this;this.$nextTick((function(){!document.hidden&&e.bottomedOut(10)&&e.scrollDown({forceRead:!0})}))},handleResize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.expand,r=void 0!==n&&n,i=t.delayed,o=void 0!==i&&i;o?setTimeout((function(){e.handleResize(Ul(Ul({},t),{},{delayed:!1}))}),100):this.$nextTick((function(){var t=zl().offsetHeight,n=void 0===t?void 0:t,i=e.lastScrollPosition.offsetHeight-n;(0!==i||!e.bottomedOut()&&r)&&e.$nextTick((function(){window.scrollTo({top:window.scrollY+i})})),e.lastScrollPosition=zl()}))},scrollDown:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.behavior,n=void 0===t?"auto":t,r=e.forceRead,i=void 0!==r&&r;this.$nextTick((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:n})})),i&&this.readChat()},readChat:function(){if(this.currentChatMessageService&&this.currentChatMessageService.maxId&&!document.hidden){var e=this.currentChatMessageService.maxId;this.$store.dispatch("readChat",{id:this.currentChat.id,lastReadId:e})}},bottomedOut:function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=window.scrollY+e,n=document.documentElement.scrollHeight-window.innerHeight;return n<=t}(e)},reachedTop:function(){return window.scrollY<=0},cullOlderCheck:function(){var e=this;window.setTimeout((function(){e.bottomedOut(10)&&e.$store.dispatch("cullOlderMessages",e.currentChatMessageService.chatId)}),5e3)},handleScroll:pa()((function(){var e=this;this.currentChat&&(this.reachedTop()?this.fetchChat({maxId:this.currentChatMessageService.minId}):this.bottomedOut(10)?(this.jumpToBottomButtonVisible=!1,this.cullOlderCheck(),this.newMessageCount>0&&window.setTimeout((function(){e.$el&&e.readChat()}),1500)):this.jumpToBottomButtonVisible=!0)}),200),handleScrollUp:function(e){var t,n,r=zl();window.scrollTo({top:(t=e,n=r,t.scrollTop+(n.scrollHeight-t.scrollHeight))})},fetchChat:function(e){var t=this,n=e.isFirstFetch,r=void 0!==n&&n,i=e.fetchLatest,o=void 0!==i&&i,s=e.maxId,a=this.currentChatMessageService;if(a&&(!o||!this.streamingEnabled)){var c=a.chatId,l=!!s,u=o&&a.maxId;return this.backendInteractor.chatMessages({id:c,maxId:s,sinceId:u}).then((function(e){r&&$t.clear(a);var n=zl();t.$store.dispatch("addChatMessages",{chatId:c,messages:e}).then((function(){t.$nextTick((function(){l&&t.handleScrollUp(n),!(document.documentElement.scrollHeight>window.innerHeight)&&e.length>0&&t.fetchChat({maxId:t.currentChatMessageService.minId})}))}))}))}},startFetching:function(){var e=this;return i()(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.findOpenedChatByRecipientId(e.recipientId)){t.next=12;break}return t.prev=2,t.next=5,e.backendInteractor.getOrCreateChat({accountId:e.recipientId});case 5:n=t.sent,t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),console.error("Error creating or getting a chat",t.t0),e.errorLoadingChat=!0;case 12:n&&(e.$nextTick((function(){e.scrollDown({forceRead:!0})})),e.$store.dispatch("addOpenedChat",{chat:n}),e.doStartFetching());case 13:case"end":return t.stop()}}),t,null,[[2,8]])})))()},doStartFetching:function(){var e=this;this.$store.dispatch("startFetchingCurrentChat",{fetcher:function(){return Object(je.a)((function(){return e.fetchChat({fetchLatest:!0})}),5e3)}}),this.fetchChat({isFirstFetch:!0})},handleAttachmentPosting:function(){var e=this;this.$nextTick((function(){e.handleResize(),e.scrollDown({forceRead:!0})}))},sendMessage:function(e){var t=this,n=e.status,r=e.media,i=e.idempotencyKey,o={id:this.currentChat.id,content:n,idempotencyKey:i};r[0]&&(o.mediaId=r[0].id);var s=function(e){var t=e.content,n=e.chatId,r=e.attachments,i=e.userId,o=e.idempotencyKey,s={content:t,chat_id:n,created_at:new Date,id:"".concat((new Date).getTime()),attachments:r,account_id:i,idempotency_key:o,emojis:[],pending:!0,isNormalized:!0};return r[0]&&(s.attachment=r[0]),s}({attachments:r,chatId:this.currentChat.id,content:n,userId:this.currentUser.id,idempotencyKey:i});return this.$store.dispatch("addChatMessages",{chatId:this.currentChat.id,messages:[s]}).then((function(){t.handleAttachmentPosting()})),this.doSendMessage({params:o,fakeMessage:s,retriesLeft:10})},doSendMessage:function(e){var t=this,n=e.params,r=e.fakeMessage,i=e.retriesLeft,o=void 0===i?10:i;if(!(o<=0))return this.backendInteractor.sendChatMessage(n).then((function(e){return t.$store.dispatch("addChatMessages",{chatId:t.currentChat.id,updateMaxId:!1,messages:[Ul(Ul({},e),{},{fakeId:r.id})]}),e})).catch((function(e){return console.error("Error sending message",e),t.$store.dispatch("handleMessageError",{chatId:t.currentChat.id,fakeId:r.id,isRetry:10!==o}),(e.statusCode>=500&&e.statusCode<600||"Failed to fetch"===e.message)&&(t.messageRetriers[r.id]=setTimeout((function(){t.doSendMessage({params:n,fakeMessage:r,retriesLeft:o-1})}),1e3*Math.pow(2,10-o))),{}})),Promise.resolve(r)},goBack:function(){this.$router.push({name:"chats",params:{username:this.currentUser.screen_name}})}}};n(581);var El=Fn()(Fl,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("FAIcon"),a=Object(wt.J)("ChatTitle"),c=Object(wt.J)("ChatMessage"),l=Object(wt.J)("PostStatusForm");return Object(wt.D)(),Object(wt.j)("div",cl,[Object(wt.k)("div",ll,[Object(wt.k)("div",ul,[Object(wt.k)("div",dl,[Object(wt.k)("button",{class:"button-unstyled go-back-button",onClick:t[0]||(t[0]=(...t)=>e.goBack&&e.goBack(...t))},[Object(wt.m)(s,{size:"lg",icon:"chevron-left"})]),Object(wt.k)("div",pl,[Object(wt.m)(a,{user:e.recipient,"with-avatar":!0},null,8,["user"])])],512),Object(wt.k)("div",{class:"message-list",style:Object(wt.x)({height:e.scrollableContainerHeight})},[e.errorLoadingChat?(Object(wt.D)(),Object(wt.j)("div",hl,[Object(wt.k)("div",bl,Object(wt.O)(e.$t("chats.error_loading_chat")),1)])):(Object(wt.D)(!0),Object(wt.j)(wt.a,{key:0},Object(wt.H)(e.chatViewItems,t=>(Object(wt.D)(),Object(wt.h)(c,{key:t.id,author:e.recipient,"chat-view-item":t,"hovered-message-chain":t.messageChainId===e.hoveredMessageChainId,onHover:e.onMessageHover},null,8,["author","chat-view-item","hovered-message-chain","onHover"]))),128))],4),Object(wt.k)("div",ml,[Object(wt.k)("div",{class:Object(wt.w)(["jump-to-bottom-button",{visible:e.jumpToBottomButtonVisible}]),onClick:t[1]||(t[1]=t=>e.scrollDown({behavior:"smooth"}))},[Object(wt.k)("span",null,[Object(wt.m)(s,{icon:"chevron-down"}),e.newMessageCount?(Object(wt.D)(),Object(wt.j)("div",fl,Object(wt.O)(e.newMessageCount),1)):Object(wt.i)("",!0)])],2),Object(wt.m)(l,{"disable-subject":!0,"disable-scope-selector":!0,"disable-notice":!0,"disable-lock-warning":!0,"disable-polls":!0,"disable-sensitivity-checkbox":!0,"disable-submit":e.errorLoadingChat||!e.currentChat,"disable-preview":!0,"optimistic-posting":!0,"post-handler":e.sendMessage,"submit-on-enter":!e.mobileLayout,"preserve-focus":!e.mobileLayout,"auto-focus":!e.mobileLayout,placeholder:e.formPlaceholder,"file-limit":1,"max-height":"160","emoji-picker-placement":"top",onResize:e.handleResize},null,8,["disable-submit","post-handler","submit-on-enter","preserve-focus","auto-focus","placeholder","onResize"])],512)],512)])])}]]);const Ll={key:0,class:"user-profile panel panel-default"},Rl={key:0,class:"user-profile-fields"},Al=["title"],Nl=["title"],Bl=["label","disabled"],Vl=["label","disabled"],Hl={key:1,class:"panel user-profile-placeholder"},ql={class:"panel-heading"},Jl={class:"title"},Wl={class:"panel-body"},Yl={key:0};const Gl={class:"follow-card-content-container"},Kl={key:0,class:"faint"},Xl={key:0,class:"follow-card-follow-button"};var Zl=n(143),Ql=n(140),eu={props:["user","noFollowsYou"],components:{BasicUserCard:Qc.a,RemoteFollow:Zl.a,FollowButton:Ql.a},computed:{isMe:function(){return this.$store.state.users.currentUser.id===this.user.id},loggedIn:function(){return this.$store.state.users.currentUser},relationship:function(){return this.$store.getters.relationship(this.user.id)}}};n(582);var tu=Fn()(eu,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("RemoteFollow"),a=Object(wt.J)("FollowButton"),c=Object(wt.J)("basic-user-card");return Object(wt.D)(),Object(wt.h)(c,{user:e.user},{default:Object(wt.V)(()=>[Object(wt.k)("div",Gl,[e.isMe||!e.noFollowsYou&&e.relationship.followed_by?(Object(wt.D)(),Object(wt.j)("span",Kl,Object(wt.O)(e.isMe?e.$t("user_card.its_you"):e.$t("user_card.follows_you")),1)):Object(wt.i)("",!0),e.loggedIn?e.isMe?Object(wt.i)("",!0):(Object(wt.D)(),Object(wt.h)(a,{key:2,relationship:e.relationship,"label-following":e.$t("user_card.follow_unfollow"),class:"follow-card-follow-button",user:e.user},null,8,["relationship","label-following","user"])):(Object(wt.D)(),Object(wt.j)(wt.a,{key:1},[e.relationship.following?Object(wt.i)("",!0):(Object(wt.D)(),Object(wt.j)("div",Xl,[Object(wt.m)(s,{user:e.user},null,8,["user"])]))],64))])]),_:1},8,["user"])}]]),nu=n(300),ru=n.n(nu),iu=n(301);n(583);function ou(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function su(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ou(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ou(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Tn.c.add(In.r);var au=function(e){var t=e.fetch,n=e.select,r=e.unmounted,i=e.childPropName,o=void 0===i?"entries":i,s=e.additionalPropNames,a=void 0===s?[]:s;return function(e){return{props:Object.keys(Object(iu.a)(e)).filter((function(e){return e!==o})).concat(a),data:function(){return{loading:!1,bottomedOut:!1,error:!1,entries:[]}},created:function(){window.addEventListener("scroll",this.scrollLoad),0===this.entries.length&&this.fetchEntries()},unmounted:function(){window.removeEventListener("scroll",this.scrollLoad),r&&r(this.$props,this.$store)},methods:{updateEntries:function(){this.entries=n(this.$props,this.$store)||[]},fetchEntries:function(){var e=this;this.loading||(this.loading=!0,this.error=!1,t(this.$props,this.$store).then((function(t){e.loading=!1,e.bottomedOut=ru()(t)})).catch((function(){e.loading=!1,e.error=!0})).finally((function(){e.updateEntries()})))},scrollLoad:function(e){var t=document.body.getBoundingClientRect(),n=Math.max(t.height,-t.y);!1===this.loading&&!1===this.bottomedOut&&this.$el.offsetHeight>0&&window.innerHeight+window.pageYOffset>=n-750&&this.fetchEntries()}},render:function(){var t,n=su(su({},this.$props),{},h()({},o,this.entries)),r=this.$slots;return Object(wt.m)("div",{class:"with-load-more"},[Object(wt.m)(e,n,(t=r,"function"==typeof t||"[object Object]"===Object.prototype.toString.call(t)&&!Object(wt.t)(t)?r:{default:function(){return[r]}})),Object(wt.m)("div",{class:"with-load-more-footer"},[this.error&&Object(wt.m)("button",{onClick:this.fetchEntries,class:"button-unstyled -link -fullwidth alert error"},[this.$t("general.generic_error")]),!this.error&&this.loading&&Object(wt.m)(sn.a,{spin:!0,icon:"circle-notch"},null),!this.error&&!this.loading&&!this.bottomedOut&&Object(wt.m)("a",{onClick:this.fetchEntries},[this.$t("general.more")])])])}}}};Tn.c.add(In.r);var cu=au({fetch:function(e,t){return t.dispatch("fetchFollowers",e.userId)},select:function(e,t){return qt()(t.getters.findUser(e.userId),"followerIds",[]).map((function(e){return t.getters.findUser(e)}))},destroy:function(e,t){return t.dispatch("clearFollowers",e.userId)},childPropName:"items",additionalPropNames:["userId"]})(Bs.a),lu=au({fetch:function(e,t){return t.dispatch("fetchFriends",e.userId)},select:function(e,t){return qt()(t.getters.findUser(e.userId),"friendIds",[]).map((function(e){return t.getters.findUser(e)}))},destroy:function(e,t){return t.dispatch("clearFriends",e.userId)},childPropName:"items",additionalPropNames:["userId"]})(Bs.a),uu={data:function(){return{error:!1,userId:null,tab:"statuses",footerRef:null}},created:function(){var e=this.$route.params;this.load(e.name||e.id),this.tab=qt()(this.$route,"query.tab","statuses")},unmounted:function(){this.stopFetching()},computed:{timeline:function(){return this.$store.state.statuses.timelines.user},favorites:function(){return this.$store.state.statuses.timelines.favorites},media:function(){return this.$store.state.statuses.timelines.media},isUs:function(){return this.userId&&this.$store.state.users.currentUser.id&&this.userId===this.$store.state.users.currentUser.id},user:function(){return this.$store.getters.findUser(this.userId)},isExternal:function(){return"external-user-profile"===this.$route.name},followsTabVisible:function(){return this.isUs||!this.user.hide_follows},followersTabVisible:function(){return this.isUs||!this.user.hide_followers}},methods:{setFooterRef:function(e){this.footerRef=e},load:function(e){var t=this,n=function(e,n){n!==t.$store.state.statuses.timelines[e].userId&&t.$store.commit("clearTimeline",{timeline:e}),t.$store.dispatch("startFetchingTimeline",{timeline:e,userId:n})},r=function(e){t.userId=e,n("user",e),n("media",e),t.isUs&&n("favorites",e),t.$store.dispatch("fetchPinnedStatuses",e)};this.userId=null,this.error=!1;var i=this.$store.getters.findUser(e);i?r(i.id):this.$store.dispatch("fetchUser",e).then((function(e){var t=e.id;return r(t)})).catch((function(e){var n=qt()(e,"error.error");t.error="No user with such user_id"===n?t.$t("user_profile.profile_does_not_exist"):n||t.$t("user_profile.profile_loading_error")}))},stopFetching:function(){this.$store.dispatch("stopFetchingTimeline","user"),this.$store.dispatch("stopFetchingTimeline","favorites"),this.$store.dispatch("stopFetchingTimeline","media")},switchUser:function(e){this.stopFetching(),this.load(e)},onTabSwitch:function(e){this.tab=e,this.$router.replace({query:{tab:e}})},linkClicked:function(e){var t=e.target;"SPAN"===t.tagName&&(t=t.parentNode),"A"===t.tagName&&window.open(t.href,"_blank")}},watch:{"$route.params.id":function(e){e&&this.switchUser(e)},"$route.params.name":function(e){e&&this.switchUser(e)},"$route.query":function(e){this.tab=e.tab||"statuses"}},components:{UserCard:jr.a,Timeline:Ya,FollowerList:cu,FriendList:lu,FollowCard:tu,TabSwitcher:bc.a,Conversation:za,RichContent:Ac.a}};n(584);var du=Fn()(uu,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("UserCard"),a=Object(wt.J)("RichContent"),c=Object(wt.J)("Timeline"),l=Object(wt.J)("FollowCard"),u=Object(wt.J)("FriendList"),d=Object(wt.J)("FollowerList"),p=Object(wt.J)("tab-switcher"),h=Object(wt.J)("FAIcon");return Object(wt.D)(),Object(wt.j)("div",null,[e.user?(Object(wt.D)(),Object(wt.j)("div",Ll,[Object(wt.m)(s,{"user-id":e.userId,switcher:!0,selected:e.timeline.viewing,"allow-zooming-avatar":!0,rounded:"top"},null,8,["user-id","selected"]),e.user.fields_html&&e.user.fields_html.length>0?(Object(wt.D)(),Object(wt.j)("div",Rl,[(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.user.fields_html,(t,n)=>(Object(wt.D)(),Object(wt.j)("dl",{key:n,class:"user-profile-field"},[Object(wt.k)("dt",{title:e.user.fields_text[n].name,class:"user-profile-field-name"},[Object(wt.m)(a,{html:t.name,emoji:e.user.emoji},null,8,["html","emoji"])],8,Al),Object(wt.k)("dd",{title:e.user.fields_text[n].value,class:"user-profile-field-value"},[Object(wt.m)(a,{html:t.value,emoji:e.user.emoji},null,8,["html","emoji"])],8,Nl)]))),128))])):Object(wt.i)("",!0),Object(wt.m)(p,{"active-tab":e.tab,"render-only-focused":!0,"on-switch":e.onTabSwitch},{default:Object(wt.V)(()=>[Object(wt.m)(c,{key:"statuses",label:e.$t("user_card.statuses"),count:e.user.statuses_count,embedded:!0,title:e.$t("user_profile.timeline_title"),timeline:e.timeline,"timeline-name":"user","user-id":e.userId,"pinned-status-ids":e.user.pinnedStatusIds,"in-profile":!0,footerSlipgate:e.footerRef},null,8,["label","count","title","timeline","user-id","pinned-status-ids","footerSlipgate"]),e.followsTabVisible?(Object(wt.D)(),Object(wt.j)("div",{key:"followees",label:e.$t("user_card.followees"),disabled:!e.user.friends_count},[Object(wt.m)(u,{"user-id":e.userId},{item:Object(wt.V)(({item:e})=>[Object(wt.m)(l,{user:e},null,8,["user"])]),_:1},8,["user-id"])],8,Bl)):Object(wt.i)("",!0),e.followersTabVisible?(Object(wt.D)(),Object(wt.j)("div",{key:"followers",label:e.$t("user_card.followers"),disabled:!e.user.followers_count},[Object(wt.m)(d,{"user-id":e.userId},{item:Object(wt.V)(({item:t})=>[Object(wt.m)(l,{user:t,"no-follows-you":e.isUs},null,8,["user","no-follows-you"])]),_:1},8,["user-id"])],8,Vl)):Object(wt.i)("",!0),Object(wt.m)(c,{key:"media",label:e.$t("user_card.media"),disabled:!e.media.visibleStatuses.length,embedded:!0,title:e.$t("user_card.media"),"timeline-name":"media",timeline:e.media,"user-id":e.userId,"in-profile":!0,footerSlipgate:e.footerRef},null,8,["label","disabled","title","timeline","user-id","footerSlipgate"]),e.isUs?(Object(wt.D)(),Object(wt.h)(c,{key:"favorites",label:e.$t("user_card.favorites"),disabled:!e.favorites.visibleStatuses.length,embedded:!0,title:e.$t("user_card.favorites"),"timeline-name":"favorites",timeline:e.favorites,"in-profile":!0,footerSlipgate:e.footerRef},null,8,["label","disabled","title","timeline","footerSlipgate"])):Object(wt.i)("",!0)]),_:1},8,["active-tab","on-switch"]),Object(wt.k)("div",{class:"panel-footer",ref:e.setFooterRef},null,512)])):(Object(wt.D)(),Object(wt.j)("div",Hl,[Object(wt.k)("div",ql,[Object(wt.k)("div",Jl,Object(wt.O)(e.$t("settings.profile_tab")),1)]),Object(wt.k)("div",Wl,[e.error?(Object(wt.D)(),Object(wt.j)("span",Yl,Object(wt.O)(e.error),1)):(Object(wt.D)(),Object(wt.h)(h,{key:1,spin:"",icon:"circle-notch"}))])]))])}]]);const pu={class:"panel panel-default"},hu={class:"panel-heading"},bu={class:"title"},mu={class:"search-input-container"},fu=["placeholder"],Ou={key:0,class:"text-center loading-icon"},ju={key:1},gu={class:"search-nav-heading"},vu=["label"],yu=["label"],wu=["label"],ku={class:"panel-body"},_u={key:0},Su={key:0,class:"search-result-heading"},Cu={key:1},Pu={key:0,class:"search-result-heading"},xu={key:2},Du={key:0,class:"search-result-heading"},Tu={class:"hashtag"},Iu={key:0},$u={key:0},zu={key:1},Mu={key:0,class:"count"},Uu=Object(wt.k)("div",{class:"search-result-footer text-center panel-footer faint"},null,-1);Tn.c.add(In.r,In.cb);var Fu={components:{FollowCard:tu,Conversation:za,Status:Ns.default,TabSwitcher:bc.a},props:["query"],data:function(){return{loaded:!1,loading:!1,searchTerm:this.query||"",userIds:[],statuses:[],hashtags:[],currenResultTab:"statuses"}},computed:{users:function(){var e=this;return this.userIds.map((function(t){return e.$store.getters.findUser(t)}))},visibleStatuses:function(){var e=this.$store.state.statuses.allStatusesObject;return this.statuses.filter((function(t){return e[t.id]&&!e[t.id].deleted}))}},mounted:function(){this.search(this.query)},watch:{query:function(e){this.searchTerm=e,this.search(e)}},methods:{newQuery:function(e){this.$router.push({name:"search",query:{query:e}}),this.$refs.searchInput.focus()},search:function(e){var t=this;e?(this.loading=!0,this.userIds=[],this.statuses=[],this.hashtags=[],this.$refs.searchInput.blur(),this.$store.dispatch("search",{q:e,resolve:!0}).then((function(e){t.loading=!1,t.userIds=he()(e.accounts,"id"),t.statuses=e.statuses,t.hashtags=e.hashtags,t.currenResultTab=t.getActiveTab(),t.loaded=!0}))):this.loading=!1},resultCount:function(e){var t=this[e].length;return 0===t?"":" (".concat(t,")")},onResultTabSwitch:function(e){this.currenResultTab=e},getActiveTab:function(){return this.visibleStatuses.length>0?"statuses":this.users.length>0?"people":this.hashtags.length>0?"hashtags":"statuses"},lastHistoryRecord:function(e){return e.history&&e.history[0]}}};n(585);var Eu=Fn()(Fu,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("FAIcon"),a=Object(wt.J)("tab-switcher"),c=Object(wt.J)("Status"),l=Object(wt.J)("FollowCard"),u=Object(wt.J)("router-link");return Object(wt.D)(),Object(wt.j)("div",pu,[Object(wt.k)("div",hu,[Object(wt.k)("div",bu,Object(wt.O)(e.$t("nav.search")),1)]),Object(wt.k)("div",mu,[Object(wt.W)(Object(wt.k)("input",{ref:"searchInput","onUpdate:modelValue":t[0]||(t[0]=t=>e.searchTerm=t),class:"search-input",placeholder:e.$t("nav.search"),onKeyup:t[1]||(t[1]=Object(wt.X)(t=>e.newQuery(e.searchTerm),["enter"]))},null,40,fu),[[wt.S,e.searchTerm]]),Object(wt.k)("button",{class:"btn button-default search-button",type:"submit",onClick:t[2]||(t[2]=t=>e.newQuery(e.searchTerm))},[Object(wt.m)(s,{icon:"search"})])]),e.loading?(Object(wt.D)(),Object(wt.j)("div",Ou,[Object(wt.m)(s,{icon:"circle-notch",spin:"",size:"lg"})])):e.loaded?(Object(wt.D)(),Object(wt.j)("div",ju,[Object(wt.k)("div",gu,[Object(wt.m)(a,{ref:"tabSwitcher","on-switch":e.onResultTabSwitch,"active-tab":e.currenResultTab},{default:Object(wt.V)(()=>[Object(wt.k)("span",{key:"statuses",label:e.$t("user_card.statuses")+e.resultCount("visibleStatuses")},null,8,vu),Object(wt.k)("span",{key:"people",label:e.$t("search.people")+e.resultCount("users")},null,8,yu),Object(wt.k)("span",{key:"hashtags",label:e.$t("search.hashtags")+e.resultCount("hashtags")},null,8,wu)]),_:1},8,["on-switch","active-tab"])])])):Object(wt.i)("",!0),Object(wt.k)("div",ku,["statuses"===e.currenResultTab?(Object(wt.D)(),Object(wt.j)("div",_u,[0===e.visibleStatuses.length&&!e.loading&&e.loaded?(Object(wt.D)(),Object(wt.j)("div",Su,[Object(wt.k)("h4",null,Object(wt.O)(e.$t("search.no_results")),1)])):Object(wt.i)("",!0),(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.visibleStatuses,e=>(Object(wt.D)(),Object(wt.h)(c,{key:e.id,collapsable:!1,expandable:!1,compact:!1,class:"search-result",statusoid:e,"no-heading":!1},null,8,["statusoid"]))),128))])):"people"===e.currenResultTab?(Object(wt.D)(),Object(wt.j)("div",Cu,[0===e.users.length&&!e.loading&&e.loaded?(Object(wt.D)(),Object(wt.j)("div",Pu,[Object(wt.k)("h4",null,Object(wt.O)(e.$t("search.no_results")),1)])):Object(wt.i)("",!0),(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.users,e=>(Object(wt.D)(),Object(wt.h)(l,{key:e.id,user:e,class:"list-item search-result"},null,8,["user"]))),128))])):"hashtags"===e.currenResultTab?(Object(wt.D)(),Object(wt.j)("div",xu,[0===e.hashtags.length&&!e.loading&&e.loaded?(Object(wt.D)(),Object(wt.j)("div",Du,[Object(wt.k)("h4",null,Object(wt.O)(e.$t("search.no_results")),1)])):Object(wt.i)("",!0),(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.hashtags,t=>(Object(wt.D)(),Object(wt.j)("div",{key:t.url,class:"status trend search-result"},[Object(wt.k)("div",Tu,[Object(wt.m)(u,{to:{name:"tag-timeline",params:{tag:t.name}}},{default:Object(wt.V)(()=>[Object(wt.l)(" #"+Object(wt.O)(t.name),1)]),_:2},1032,["to"]),e.lastHistoryRecord(t)?(Object(wt.D)(),Object(wt.j)("div",Iu,[1==e.lastHistoryRecord(t).accounts?(Object(wt.D)(),Object(wt.j)("span",$u,Object(wt.O)(e.$t("search.person_talking",{count:e.lastHistoryRecord(t).accounts})),1)):(Object(wt.D)(),Object(wt.j)("span",zu,Object(wt.O)(e.$t("search.people_talking",{count:e.lastHistoryRecord(t).accounts})),1))])):Object(wt.i)("",!0)]),e.lastHistoryRecord(t)?(Object(wt.D)(),Object(wt.j)("div",Mu,Object(wt.O)(e.lastHistoryRecord(t).uses),1)):Object(wt.i)("",!0)]))),128))])):Object(wt.i)("",!0)]),Uu])}]]);const Lu={class:"settings panel panel-default"},Ru={class:"panel-heading"},Au={class:"panel-body"},Nu={class:"container"},Bu={class:"text-fields"},Vu={class:"form--label",for:"sign-up-username"},Hu=["disabled","placeholder"],qu={key:0,class:"form-error"},Ju={key:0},Wu={class:"form--label",for:"sign-up-fullname"},Yu=["disabled","placeholder"],Gu={key:1,class:"form-error"},Ku={key:0},Xu={class:"form--label",for:"email"},Zu=["disabled"],Qu={key:2,class:"form-error"},ed={key:0},td={class:"form-group"},nd={class:"form--label",for:"bio"},rd=["disabled","placeholder"],id={class:"form--label",for:"sign-up-password"},od=["disabled"],sd={key:3,class:"form-error"},ad={key:0},cd={class:"form--label",for:"sign-up-password-confirmation"},ld=["disabled"],ud={key:4,class:"form-error"},dd={key:0},pd={key:1},hd={key:5,class:"form-group"},bd={class:"form--label",for:"reason"},md=["disabled","placeholder"],fd={key:6,id:"captcha-group",class:"form-group"},Od={class:"form--label",for:"captcha-label"},jd=["src"],gd=["disabled"],vd={key:7,class:"form-group"},yd={for:"token"},wd={class:"form-group"},kd=["disabled"],_d=["innerHTML"],Sd={key:0,class:"form-group"},Cd={class:"alert error"};var Pd=n(333),xd=n(62);function Dd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Td(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dd(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Id={setup:function(){return{v$:Object(Pd.a)()}},data:function(){return{user:{email:"",fullname:"",username:"",password:"",confirm:"",reason:"",language:""},captcha:{}}},components:{InterfaceLanguageSwitcher:n(174).a},validations:function(){var e=this;return{user:{email:{required:Object(xd.b)((function(){return e.accountActivationRequired}))},username:{required:xd.a},fullname:{required:xd.a},password:{required:xd.a},confirm:{required:xd.a,sameAs:Object(xd.c)(this.user.password)},reason:{required:Object(xd.b)((function(){return e.accountApprovalRequired}))},language:{}}}},created:function(){(!this.registrationOpen&&!this.token||this.signedIn)&&this.$router.push({name:"root"}),this.setCaptcha()},computed:Td({token:function(){return this.$route.params.token},bioPlaceholder:function(){return this.replaceNewlines(this.$t("registration.bio_placeholder"))},reasonPlaceholder:function(){return this.replaceNewlines(this.$t("registration.reason_placeholder"))}},Object(a.e)({registrationOpen:function(e){return e.instance.registrationOpen},signedIn:function(e){return!!e.users.currentUser},isPending:function(e){return e.users.signUpPending},serverValidationErrors:function(e){return e.users.signUpErrors},termsOfService:function(e){return e.instance.tos},accountActivationRequired:function(e){return e.instance.accountActivationRequired},accountApprovalRequired:function(e){return e.instance.accountApprovalRequired}})),methods:Td(Td({},Object(a.b)(["signUp","getCaptcha"])),{},{submit:function(){var e=this;return i()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.user.nickname=e.user.username,e.user.token=e.token,e.user.captcha_solution=e.captcha.solution,e.user.captcha_token=e.captcha.token,e.user.captcha_answer_data=e.captcha.answer_data,e.user.language&&(e.user.language=Cl.a.internalToBackendLocale(e.user.language)),e.v$.$touch(),e.v$.$invalid){t.next=18;break}return t.prev=8,t.next=11,e.signUp(e.user);case 11:e.$router.push({name:"friends"}),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(8),console.warn("Registration failed: ",t.t0),e.setCaptcha();case 18:case"end":return t.stop()}}),t,null,[[8,14]])})))()},setCaptcha:function(){var e=this;this.getCaptcha().then((function(t){e.captcha=t}))},replaceNewlines:function(e){return e.replace(/\s*\n\s*/g," \n")}})};n(587);var $d=Fn()(Id,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("interface-language-switcher");return Object(wt.D)(),Object(wt.j)("div",Lu,[Object(wt.k)("div",Ru,Object(wt.O)(e.$t("registration.registration")),1),Object(wt.k)("div",Au,[Object(wt.k)("form",{class:"registration-form",onSubmit:t[10]||(t[10]=Object(wt.Y)(t=>e.submit(e.user),["prevent"]))},[Object(wt.k)("div",Nu,[Object(wt.k)("div",Bu,[Object(wt.k)("div",{class:Object(wt.w)(["form-group",{"form-group--error":e.v$.user.username.$error}])},[Object(wt.k)("label",Vu,Object(wt.O)(e.$t("login.username")),1),Object(wt.W)(Object(wt.k)("input",{id:"sign-up-username","onUpdate:modelValue":t[0]||(t[0]=t=>e.v$.user.username.$model=t),disabled:e.isPending,class:"form-control",placeholder:e.$t("registration.username_placeholder")},null,8,Hu),[[wt.S,e.v$.user.username.$model,void 0,{trim:!0}]])],2),e.v$.user.username.$dirty?(Object(wt.D)(),Object(wt.j)("div",qu,[Object(wt.k)("ul",null,[e.v$.user.username.required?Object(wt.i)("",!0):(Object(wt.D)(),Object(wt.j)("li",Ju,[Object(wt.k)("span",null,Object(wt.O)(e.$t("registration.validations.username_required")),1)]))])])):Object(wt.i)("",!0),Object(wt.k)("div",{class:Object(wt.w)(["form-group",{"form-group--error":e.v$.user.fullname.$error}])},[Object(wt.k)("label",Wu,Object(wt.O)(e.$t("registration.fullname")),1),Object(wt.W)(Object(wt.k)("input",{id:"sign-up-fullname","onUpdate:modelValue":t[1]||(t[1]=t=>e.v$.user.fullname.$model=t),disabled:e.isPending,class:"form-control",placeholder:e.$t("registration.fullname_placeholder")},null,8,Yu),[[wt.S,e.v$.user.fullname.$model,void 0,{trim:!0}]])],2),e.v$.user.fullname.$dirty?(Object(wt.D)(),Object(wt.j)("div",Gu,[Object(wt.k)("ul",null,[e.v$.user.fullname.required?Object(wt.i)("",!0):(Object(wt.D)(),Object(wt.j)("li",Ku,[Object(wt.k)("span",null,Object(wt.O)(e.$t("registration.validations.fullname_required")),1)]))])])):Object(wt.i)("",!0),Object(wt.k)("div",{class:Object(wt.w)(["form-group",{"form-group--error":e.v$.user.email.$error}])},[Object(wt.k)("label",Xu,Object(wt.O)(e.$t("registration.email")),1),Object(wt.W)(Object(wt.k)("input",{id:"email","onUpdate:modelValue":t[2]||(t[2]=t=>e.v$.user.email.$model=t),disabled:e.isPending,class:"form-control",type:"email"},null,8,Zu),[[wt.S,e.v$.user.email.$model]])],2),e.v$.user.email.$dirty?(Object(wt.D)(),Object(wt.j)("div",Qu,[Object(wt.k)("ul",null,[e.v$.user.email.required?Object(wt.i)("",!0):(Object(wt.D)(),Object(wt.j)("li",ed,[Object(wt.k)("span",null,Object(wt.O)(e.$t("registration.validations.email_required")),1)]))])])):Object(wt.i)("",!0),Object(wt.k)("div",td,[Object(wt.k)("label",nd,Object(wt.O)(e.$t("registration.bio"))+" ("+Object(wt.O)(e.$t("general.optional"))+")",1),Object(wt.W)(Object(wt.k)("textarea",{id:"bio","onUpdate:modelValue":t[3]||(t[3]=t=>e.user.bio=t),disabled:e.isPending,class:"form-control",placeholder:e.bioPlaceholder},null,8,rd),[[wt.S,e.user.bio]])]),Object(wt.k)("div",{class:Object(wt.w)(["form-group",{"form-group--error":e.v$.user.password.$error}])},[Object(wt.k)("label",id,Object(wt.O)(e.$t("login.password")),1),Object(wt.W)(Object(wt.k)("input",{id:"sign-up-password","onUpdate:modelValue":t[4]||(t[4]=t=>e.user.password=t),disabled:e.isPending,class:"form-control",type:"password"},null,8,od),[[wt.S,e.user.password]])],2),e.v$.user.password.$dirty?(Object(wt.D)(),Object(wt.j)("div",sd,[Object(wt.k)("ul",null,[e.v$.user.password.required?Object(wt.i)("",!0):(Object(wt.D)(),Object(wt.j)("li",ad,[Object(wt.k)("span",null,Object(wt.O)(e.$t("registration.validations.password_required")),1)]))])])):Object(wt.i)("",!0),Object(wt.k)("div",{class:Object(wt.w)(["form-group",{"form-group--error":e.v$.user.confirm.$error}])},[Object(wt.k)("label",cd,Object(wt.O)(e.$t("registration.password_confirm")),1),Object(wt.W)(Object(wt.k)("input",{id:"sign-up-password-confirmation","onUpdate:modelValue":t[5]||(t[5]=t=>e.user.confirm=t),disabled:e.isPending,class:"form-control",type:"password"},null,8,ld),[[wt.S,e.user.confirm]])],2),e.v$.user.confirm.$dirty?(Object(wt.D)(),Object(wt.j)("div",ud,[Object(wt.k)("ul",null,[e.v$.user.confirm.required?Object(wt.i)("",!0):(Object(wt.D)(),Object(wt.j)("li",dd,[Object(wt.k)("span",null,Object(wt.O)(e.$t("registration.validations.password_confirmation_required")),1)])),e.v$.user.confirm.sameAsPassword?Object(wt.i)("",!0):(Object(wt.D)(),Object(wt.j)("li",pd,[Object(wt.k)("span",null,Object(wt.O)(e.$t("registration.validations.password_confirmation_match")),1)]))])])):Object(wt.i)("",!0),Object(wt.k)("div",{class:Object(wt.w)(["form-group",{"form-group--error":e.v$.user.language.$error}])},[Object(wt.m)(s,{for:"email-language","prompt-text":e.$t("registration.email_language"),language:e.v$.user.language.$model,"set-language":t=>e.v$.user.language.$model=t},null,8,["prompt-text","language","set-language"])],2),e.accountApprovalRequired?(Object(wt.D)(),Object(wt.j)("div",hd,[Object(wt.k)("label",bd,Object(wt.O)(e.$t("registration.reason")),1),Object(wt.W)(Object(wt.k)("textarea",{id:"reason","onUpdate:modelValue":t[6]||(t[6]=t=>e.user.reason=t),disabled:e.isPending,class:"form-control",placeholder:e.reasonPlaceholder},null,8,md),[[wt.S,e.user.reason]])])):Object(wt.i)("",!0),"none"!=e.captcha.type?(Object(wt.D)(),Object(wt.j)("div",fd,[Object(wt.k)("label",Od,Object(wt.O)(e.$t("registration.captcha")),1),["kocaptcha","native"].includes(e.captcha.type)?(Object(wt.D)(),Object(wt.j)(wt.a,{key:0},[Object(wt.k)("img",{src:e.captcha.url,onClick:t[7]||(t[7]=(...t)=>e.setCaptcha&&e.setCaptcha(...t))},null,8,jd),Object(wt.k)("sub",null,Object(wt.O)(e.$t("registration.new_captcha")),1),Object(wt.W)(Object(wt.k)("input",{id:"captcha-answer","onUpdate:modelValue":t[8]||(t[8]=t=>e.captcha.solution=t),disabled:e.isPending,class:"form-control",type:"text",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"},null,8,gd),[[wt.S,e.captcha.solution]])],64)):Object(wt.i)("",!0)])):Object(wt.i)("",!0),e.token?(Object(wt.D)(),Object(wt.j)("div",vd,[Object(wt.k)("label",yd,Object(wt.O)(e.$t("registration.token")),1),Object(wt.W)(Object(wt.k)("input",{id:"token","onUpdate:modelValue":t[9]||(t[9]=t=>e.token=t),disabled:"true",class:"form-control",type:"text"},null,512),[[wt.S,e.token]])])):Object(wt.i)("",!0),Object(wt.k)("div",wd,[Object(wt.k)("button",{disabled:e.isPending,type:"submit",class:"btn button-default"},Object(wt.O)(e.$t("registration.register")),9,kd)])]),Object(wt.k)("div",{class:"terms-of-service",innerHTML:e.termsOfService},null,8,_d)]),e.serverValidationErrors.length?(Object(wt.D)(),Object(wt.j)("div",Sd,[Object(wt.k)("div",Cd,[(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.serverValidationErrors,e=>(Object(wt.D)(),Object(wt.j)("span",{key:e},Object(wt.O)(e),1))),128))])])):Object(wt.i)("",!0)],32)])])}]]);const zd={class:"settings panel panel-default"},Md={class:"panel-heading"},Ud={class:"panel-body"},Fd={class:"container"},Ed={key:0},Ld={key:0},Rd={key:1},Ad={key:1},Nd={key:0},Bd={class:"form-group text-center"},Vd={key:2},Hd={key:0,class:"password-reset-required error"},qd={class:"form-group"},Jd=["disabled","placeholder"],Wd={class:"form-group"},Yd=["disabled"],Gd={key:3,class:"alert error notice-dismissible"};var Kd=function(e){var t=e.instance,n={email:e.email},r=De()(n,(function(e,t,n){var r="".concat(n,"=").concat(encodeURIComponent(t));return"".concat(e,"&").concat(r)}),""),i="".concat(t).concat("/auth/password","?").concat(r);return window.fetch(i,{method:"POST"})};function Xd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xd(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Tn.c.add(In.rb);var Qd={data:function(){return{user:{email:""},isPending:!1,success:!1,throttled:!1,error:null}},computed:Zd(Zd({},Object(a.e)({signedIn:function(e){return!!e.users.currentUser},instance:function(e){return e.instance}})),{},{mailerEnabled:function(){return this.instance.mailerEnabled}}),created:function(){this.signedIn&&this.$router.push({name:"root"})},props:{passwordResetRequested:{default:!1,type:Boolean}},methods:{dismissError:function(){this.error=null},submit:function(){var e=this;this.isPending=!0;var t=this.user.email,n=this.instance.server;Kd({instance:n,email:t}).then((function(t){var n=t.status;e.isPending=!1,e.user.email="",204===n?(e.success=!0,e.error=null):429===n&&(e.throttled=!0,e.error=e.$t("password_reset.too_many_requests"))})).catch((function(){e.isPending=!1,e.user.email="",e.error=e.$t("general.generic_error")}))}}};n(588);var ep=Fn()(Qd,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("router-link"),a=Object(wt.J)("FAIcon");return Object(wt.D)(),Object(wt.j)("div",zd,[Object(wt.k)("div",Md,Object(wt.O)(e.$t("password_reset.password_reset")),1),Object(wt.k)("div",Ud,[Object(wt.k)("form",{class:"password-reset-form",onSubmit:t[2]||(t[2]=Object(wt.Y)((...t)=>e.submit&&e.submit(...t),["prevent"]))},[Object(wt.k)("div",Fd,[e.mailerEnabled?e.success||e.throttled?(Object(wt.D)(),Object(wt.j)("div",Ad,[e.success?(Object(wt.D)(),Object(wt.j)("p",Nd,Object(wt.O)(e.$t("password_reset.check_email")),1)):Object(wt.i)("",!0),Object(wt.k)("div",Bd,[Object(wt.m)(s,{to:{name:"root"}},{default:Object(wt.V)(()=>[Object(wt.l)(Object(wt.O)(e.$t("password_reset.return_home")),1)]),_:1})])])):(Object(wt.D)(),Object(wt.j)("div",Vd,[e.passwordResetRequested?(Object(wt.D)(),Object(wt.j)("p",Hd,Object(wt.O)(e.$t("password_reset.password_reset_required")),1)):Object(wt.i)("",!0),Object(wt.k)("p",null,Object(wt.O)(e.$t("password_reset.instruction")),1),Object(wt.k)("div",qd,[Object(wt.W)(Object(wt.k)("input",{ref:"email","onUpdate:modelValue":t[0]||(t[0]=t=>e.user.email=t),disabled:e.isPending,placeholder:e.$t("password_reset.placeholder"),class:"form-control",type:"input"},null,8,Jd),[[wt.S,e.user.email]])]),Object(wt.k)("div",Wd,[Object(wt.k)("button",{disabled:e.isPending,type:"submit",class:"btn button-default btn-block"},Object(wt.O)(e.$t("settings.save")),9,Yd)])])):(Object(wt.D)(),Object(wt.j)("div",Ed,[e.passwordResetRequested?(Object(wt.D)(),Object(wt.j)("p",Ld,Object(wt.O)(e.$t("password_reset.password_reset_required_but_mailer_is_disabled")),1)):(Object(wt.D)(),Object(wt.j)("p",Rd,Object(wt.O)(e.$t("password_reset.password_reset_disabled")),1))])),e.error?(Object(wt.D)(),Object(wt.j)("p",Gd,[Object(wt.k)("span",null,Object(wt.O)(e.error),1),Object(wt.k)("a",{class:"fa-scale-110 fa-old-padding dismiss",onClick:t[1]||(t[1]=Object(wt.Y)(t=>e.dismissError(),["prevent"]))},[Object(wt.m)(a,{icon:"times"})])])):Object(wt.i)("",!0)])],32)])])}]]);const tp={class:"settings panel panel-default"},np={class:"panel-heading"},rp={class:"title"},ip={class:"panel-body"};const op={class:"follow-request-card-content-container"};var sp={props:["user"],components:{BasicUserCard:Qc.a},methods:{findFollowRequestNotificationId:function(){var e=this,t=Object(W.e)(this.$store).find((function(t){return t.from_profile.id===e.user.id&&"follow_request"===t.type}));return t&&t.id},approveUser:function(){this.$store.state.api.backendInteractor.approveUser({id:this.user.id}),this.$store.dispatch("removeFollowRequest",this.user);var e=this.findFollowRequestNotificationId();this.$store.dispatch("markSingleNotificationAsSeen",{id:e}),this.$store.dispatch("updateNotification",{id:e,updater:function(e){e.type="follow"}})},denyUser:function(){var e=this,t=this.findFollowRequestNotificationId();this.$store.state.api.backendInteractor.denyUser({id:this.user.id}).then((function(){e.$store.dispatch("dismissNotificationLocal",{id:t}),e.$store.dispatch("removeFollowRequest",e.user)}))}}};n(589);var ap={components:{FollowRequestCard:Fn()(sp,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("basic-user-card");return Object(wt.D)(),Object(wt.h)(s,{user:e.user},{default:Object(wt.V)(()=>[Object(wt.k)("div",op,[Object(wt.k)("button",{class:"btn button-default",onClick:t[0]||(t[0]=(...t)=>e.approveUser&&e.approveUser(...t))},Object(wt.O)(e.$t("user_card.approve")),1),Object(wt.k)("button",{class:"btn button-default",onClick:t[1]||(t[1]=(...t)=>e.denyUser&&e.denyUser(...t))},Object(wt.O)(e.$t("user_card.deny")),1)])]),_:1},8,["user"])}]])},computed:{requests:function(){return this.$store.state.api.followRequests}}};var cp=Fn()(ap,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("FollowRequestCard");return Object(wt.D)(),Object(wt.j)("div",tp,[Object(wt.k)("div",np,[Object(wt.k)("div",rp,Object(wt.O)(e.$t("nav.friend_requests")),1)]),Object(wt.k)("div",ip,[(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.requests,e=>(Object(wt.D)(),Object(wt.h)(s,{key:e.id,user:e,class:"list-item"},null,8,["user"]))),128))])])}]]);var lp={props:["code"],mounted:function(){var e=this;if(this.code){var t=this.$store.state.oauth,n=t.clientId,r=t.clientSecret;ze.getToken({clientId:n,clientSecret:r,instance:this.$store.state.instance.server,code:this.code}).then((function(t){e.$store.commit("setToken",t.access_token),e.$store.dispatch("loginUser",t.access_token),e.$router.push({name:"friends"})}))}}};var up=Fn()(lp,[["render",function(e,t,n,r,i,o){return Object(wt.D)(),Object(wt.j)("h1",null,"...")}]]);const dp={class:"panel panel-default"},pp={class:"panel-heading"},hp={class:"panel-body"};var bp={components:{FollowCard:tu},data:function(){return{users:[]}},mounted:function(){this.getWhoToFollow()},methods:{showWhoToFollow:function(e){var t=this;e.forEach((function(e,n){t.$store.state.api.backendInteractor.fetchUser({id:e.acct}).then((function(e){e.error||(t.$store.commit("addNewUsers",[e]),t.users.push(e))}))}))},getWhoToFollow:function(){var e=this,t=this.$store.state.users.currentUser.credentials;t&&j.c.suggestions({credentials:t}).then((function(t){e.showWhoToFollow(t)}))}}};var mp=Fn()(bp,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("FollowCard");return Object(wt.D)(),Object(wt.j)("div",dp,[Object(wt.k)("div",pp,Object(wt.O)(e.$t("who_to_follow.who_to_follow")),1),Object(wt.k)("div",hp,[(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.users,e=>(Object(wt.D)(),Object(wt.h)(s,{key:e.id,user:e,class:"list-item"},null,8,["user"]))),128))])])}]]);const fp={class:"column-inner"};const Op={class:"panel panel-default"},jp={class:"panel-body"},gp=["innerHTML"];var vp={computed:{content:function(){return this.$store.state.instance.tos}}};n(590);var yp=Fn()(vp,[["render",function(e,t,n,r,i,o){return Object(wt.D)(),Object(wt.j)("div",null,[Object(wt.k)("div",Op,[Object(wt.k)("div",jp,[Object(wt.k)("div",{class:"tos-content",innerHTML:e.content},null,8,gp)])])])}]]);const wp={class:"staff-panel"},kp={class:"panel panel-default base01-background"},_p={class:"panel-heading timeline-heading base02-background"},Sp={class:"title"},Cp={class:"panel-body"};var Pp=n(334),xp=n.n(Pp);function Dp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dp(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ip={created:function(){var e=this;this.$store.state.instance.staffAccounts.forEach((function(t){return e.$store.dispatch("fetchUserIfMissing",t)}))},components:{BasicUserCard:Qc.a},computed:Tp(Tp({groupedStaffAccounts:function(){var e=he()(this.staffAccounts,this.findUser).filter((function(e){return e})),t=xp()(e,"role");return[{role:"admin",users:t.admin},{role:"moderator",users:t.moderator}].filter((function(e){return e.users}))}},Object(a.c)(["findUser"])),Object(a.e)({staffAccounts:function(e){return e.instance.staffAccounts}}))};n(591);var $p=Fn()(Ip,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("basic-user-card");return Object(wt.D)(),Object(wt.j)("div",wp,[Object(wt.k)("div",kp,[Object(wt.k)("div",_p,[Object(wt.k)("div",Sp,Object(wt.O)(e.$t("about.staff")),1)]),Object(wt.k)("div",Cp,[(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.groupedStaffAccounts,t=>(Object(wt.D)(),Object(wt.j)("div",{key:t.role,class:"staff-group"},[Object(wt.k)("h4",null,Object(wt.O)(e.$t("general.role."+t.role)),1),(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(t.users,e=>(Object(wt.D)(),Object(wt.h)(s,{key:e.screen_name,user:e},null,8,["user"]))),128))]))),128))])])])}]]);const zp={key:0,class:"mrf-transparency-panel"},Mp={class:"panel panel-default base01-background"},Up={class:"panel-heading timeline-heading base02-background"},Fp={class:"title"},Ep={class:"panel-body"},Lp={class:"mrf-section"},Rp=["textContent"],Ap={key:0},Np={key:1},Bp={key:0},Vp={key:1},Hp={key:2},qp={key:0},Jp={key:1},Wp={key:3},Yp={key:0},Gp={key:1},Kp={key:4},Xp={key:0},Zp={key:1},Qp={key:5},eh={key:0},th={key:1},nh={key:6},rh={key:0},ih={key:1},oh={key:7},sh={key:8},ah=["textContent"],ch={key:9},lh=["textContent"],uh={key:10};function dh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ph(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dh(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hh=function(e,t,n){return e.map((function(e){return t[n]&&t[n][e]&&t[n][e].reason?{instance:e,reason:t[n][e].reason}:{instance:e,reason:""}}))},bh={computed:ph(ph({},Object(a.e)({federationPolicy:function(e){return qt()(e,"instance.federationPolicy")},mrfPolicies:function(e){return qt()(e,"instance.federationPolicy.mrf_policies",[])},quarantineInstances:function(e){return hh(qt()(e,"instance.federationPolicy.quarantined_instances",[]),qt()(e,"instance.federationPolicy.quarantined_instances_info",[]),"quarantined_instances")},acceptInstances:function(e){return hh(qt()(e,"instance.federationPolicy.mrf_simple.accept",[]),qt()(e,"instance.federationPolicy.mrf_simple_info",[]),"accept")},rejectInstances:function(e){return hh(qt()(e,"instance.federationPolicy.mrf_simple.reject",[]),qt()(e,"instance.federationPolicy.mrf_simple_info",[]),"reject")},ftlRemovalInstances:function(e){return hh(qt()(e,"instance.federationPolicy.mrf_simple.federated_timeline_removal",[]),qt()(e,"instance.federationPolicy.mrf_simple_info",[]),"federated_timeline_removal")},mediaNsfwInstances:function(e){return hh(qt()(e,"instance.federationPolicy.mrf_simple.media_nsfw",[]),qt()(e,"instance.federationPolicy.mrf_simple_info",[]),"media_nsfw")},mediaRemovalInstances:function(e){return hh(qt()(e,"instance.federationPolicy.mrf_simple.media_removal",[]),qt()(e,"instance.federationPolicy.mrf_simple_info",[]),"media_removal")},keywordsFtlRemoval:function(e){return qt()(e,"instance.federationPolicy.mrf_keyword.federated_timeline_removal",[])},keywordsReject:function(e){return qt()(e,"instance.federationPolicy.mrf_keyword.reject",[])},keywordsReplace:function(e){return qt()(e,"instance.federationPolicy.mrf_keyword.replace",[])}})),{},{hasInstanceSpecificPolicies:function(){return this.quarantineInstances.length||this.acceptInstances.length||this.rejectInstances.length||this.ftlRemovalInstances.length||this.mediaNsfwInstances.length||this.mediaRemovalInstances.length},hasKeywordPolicies:function(){return this.keywordsFtlRemoval.length||this.keywordsReject.length||this.keywordsReplace.length}})};n(592);var mh={components:{InstanceSpecificPanel:Yr,FeaturesPanel:ai,TermsOfServicePanel:yp,StaffPanel:$p,MRFTransparencyPanel:Fn()(bh,[["render",function(e,t,n,r,i,o){return e.federationPolicy?(Object(wt.D)(),Object(wt.j)("div",zp,[Object(wt.k)("div",Mp,[Object(wt.k)("div",Up,[Object(wt.k)("div",Fp,Object(wt.O)(e.$t("about.mrf.federation")),1)]),Object(wt.k)("div",Ep,[Object(wt.k)("div",Lp,[Object(wt.k)("h2",null,Object(wt.O)(e.$t("about.mrf.mrf_policies")),1),Object(wt.k)("p",null,Object(wt.O)(e.$t("about.mrf.mrf_policies_desc")),1),Object(wt.k)("ul",null,[(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.mrfPolicies,e=>(Object(wt.D)(),Object(wt.j)("li",{key:e,textContent:Object(wt.O)(e)},null,8,Rp))),128))]),e.hasInstanceSpecificPolicies?(Object(wt.D)(),Object(wt.j)("h2",Ap,Object(wt.O)(e.$t("about.mrf.simple.simple_policies")),1)):Object(wt.i)("",!0),e.acceptInstances.length?(Object(wt.D)(),Object(wt.j)("div",Np,[Object(wt.k)("h4",null,Object(wt.O)(e.$t("about.mrf.simple.accept")),1),Object(wt.k)("p",null,Object(wt.O)(e.$t("about.mrf.simple.accept_desc")),1),Object(wt.k)("table",null,[Object(wt.k)("tr",null,[Object(wt.k)("th",null,Object(wt.O)(e.$t("about.mrf.simple.instance")),1),Object(wt.k)("th",null,Object(wt.O)(e.$t("about.mrf.simple.reason")),1)]),(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.acceptInstances,t=>(Object(wt.D)(),Object(wt.j)("tr",{key:t.instance+"_accept"},[Object(wt.k)("td",null,Object(wt.O)(t.instance),1),""===t.reason?(Object(wt.D)(),Object(wt.j)("td",Bp,Object(wt.O)(e.$t("about.mrf.simple.not_applicable")),1)):(Object(wt.D)(),Object(wt.j)("td",Vp,Object(wt.O)(t.reason),1))]))),128))])])):Object(wt.i)("",!0),e.rejectInstances.length?(Object(wt.D)(),Object(wt.j)("div",Hp,[Object(wt.k)("h4",null,Object(wt.O)(e.$t("about.mrf.simple.reject")),1),Object(wt.k)("p",null,Object(wt.O)(e.$t("about.mrf.simple.reject_desc")),1),Object(wt.k)("table",null,[Object(wt.k)("tr",null,[Object(wt.k)("th",null,Object(wt.O)(e.$t("about.mrf.simple.instance")),1),Object(wt.k)("th",null,Object(wt.O)(e.$t("about.mrf.simple.reason")),1)]),(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.rejectInstances,t=>(Object(wt.D)(),Object(wt.j)("tr",{key:t.instance+"_reject"},[Object(wt.k)("td",null,Object(wt.O)(t.instance),1),""===t.reason?(Object(wt.D)(),Object(wt.j)("td",qp,Object(wt.O)(e.$t("about.mrf.simple.not_applicable")),1)):(Object(wt.D)(),Object(wt.j)("td",Jp,Object(wt.O)(t.reason),1))]))),128))])])):Object(wt.i)("",!0),e.quarantineInstances.length?(Object(wt.D)(),Object(wt.j)("div",Wp,[Object(wt.k)("h4",null,Object(wt.O)(e.$t("about.mrf.simple.quarantine")),1),Object(wt.k)("p",null,Object(wt.O)(e.$t("about.mrf.simple.quarantine_desc")),1),Object(wt.k)("table",null,[Object(wt.k)("tr",null,[Object(wt.k)("th",null,Object(wt.O)(e.$t("about.mrf.simple.instance")),1),Object(wt.k)("th",null,Object(wt.O)(e.$t("about.mrf.simple.reason")),1)]),(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.quarantineInstances,t=>(Object(wt.D)(),Object(wt.j)("tr",{key:t.instance+"_quarantine"},[Object(wt.k)("td",null,Object(wt.O)(t.instance),1),""===t.reason?(Object(wt.D)(),Object(wt.j)("td",Yp,Object(wt.O)(e.$t("about.mrf.simple.not_applicable")),1)):(Object(wt.D)(),Object(wt.j)("td",Gp,Object(wt.O)(t.reason),1))]))),128))])])):Object(wt.i)("",!0),e.ftlRemovalInstances.length?(Object(wt.D)(),Object(wt.j)("div",Kp,[Object(wt.k)("h4",null,Object(wt.O)(e.$t("about.mrf.simple.ftl_removal")),1),Object(wt.k)("p",null,Object(wt.O)(e.$t("about.mrf.simple.ftl_removal_desc")),1),Object(wt.k)("table",null,[Object(wt.k)("tr",null,[Object(wt.k)("th",null,Object(wt.O)(e.$t("about.mrf.simple.instance")),1),Object(wt.k)("th",null,Object(wt.O)(e.$t("about.mrf.simple.reason")),1)]),(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.ftlRemovalInstances,t=>(Object(wt.D)(),Object(wt.j)("tr",{key:t.instance+"_ftl_removal"},[Object(wt.k)("td",null,Object(wt.O)(t.instance),1),""===t.reason?(Object(wt.D)(),Object(wt.j)("td",Xp,Object(wt.O)(e.$t("about.mrf.simple.not_applicable")),1)):(Object(wt.D)(),Object(wt.j)("td",Zp,Object(wt.O)(t.reason),1))]))),128))])])):Object(wt.i)("",!0),e.mediaNsfwInstances.length?(Object(wt.D)(),Object(wt.j)("div",Qp,[Object(wt.k)("h4",null,Object(wt.O)(e.$t("about.mrf.simple.media_nsfw")),1),Object(wt.k)("p",null,Object(wt.O)(e.$t("about.mrf.simple.media_nsfw_desc")),1),Object(wt.k)("table",null,[Object(wt.k)("tr",null,[Object(wt.k)("th",null,Object(wt.O)(e.$t("about.mrf.simple.instance")),1),Object(wt.k)("th",null,Object(wt.O)(e.$t("about.mrf.simple.reason")),1)]),(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.mediaNsfwInstances,t=>(Object(wt.D)(),Object(wt.j)("tr",{key:t.instance+"_media_nsfw"},[Object(wt.k)("td",null,Object(wt.O)(t.instance),1),""===t.reason?(Object(wt.D)(),Object(wt.j)("td",eh,Object(wt.O)(e.$t("about.mrf.simple.not_applicable")),1)):(Object(wt.D)(),Object(wt.j)("td",th,Object(wt.O)(t.reason),1))]))),128))])])):Object(wt.i)("",!0),e.mediaRemovalInstances.length?(Object(wt.D)(),Object(wt.j)("div",nh,[Object(wt.k)("h4",null,Object(wt.O)(e.$t("about.mrf.simple.media_removal")),1),Object(wt.k)("p",null,Object(wt.O)(e.$t("about.mrf.simple.media_removal_desc")),1),Object(wt.k)("table",null,[Object(wt.k)("tr",null,[Object(wt.k)("th",null,Object(wt.O)(e.$t("about.mrf.simple.instance")),1),Object(wt.k)("th",null,Object(wt.O)(e.$t("about.mrf.simple.reason")),1)]),(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.mediaRemovalInstances,t=>(Object(wt.D)(),Object(wt.j)("tr",{key:t.instance+"_media_removal"},[Object(wt.k)("td",null,Object(wt.O)(t.instance),1),""===t.reason?(Object(wt.D)(),Object(wt.j)("td",rh,Object(wt.O)(e.$t("about.mrf.simple.not_applicable")),1)):(Object(wt.D)(),Object(wt.j)("td",ih,Object(wt.O)(t.reason),1))]))),128))])])):Object(wt.i)("",!0),e.hasKeywordPolicies?(Object(wt.D)(),Object(wt.j)("h2",oh,Object(wt.O)(e.$t("about.mrf.keyword.keyword_policies")),1)):Object(wt.i)("",!0),e.keywordsFtlRemoval.length?(Object(wt.D)(),Object(wt.j)("div",sh,[Object(wt.k)("h4",null,Object(wt.O)(e.$t("about.mrf.keyword.ftl_removal")),1),Object(wt.k)("ul",null,[(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.keywordsFtlRemoval,e=>(Object(wt.D)(),Object(wt.j)("li",{key:e,textContent:Object(wt.O)(e)},null,8,ah))),128))])])):Object(wt.i)("",!0),e.keywordsReject.length?(Object(wt.D)(),Object(wt.j)("div",ch,[Object(wt.k)("h4",null,Object(wt.O)(e.$t("about.mrf.keyword.reject")),1),Object(wt.k)("ul",null,[(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.keywordsReject,e=>(Object(wt.D)(),Object(wt.j)("li",{key:e,textContent:Object(wt.O)(e)},null,8,lh))),128))])])):Object(wt.i)("",!0),e.keywordsReplace.length?(Object(wt.D)(),Object(wt.j)("div",uh,[Object(wt.k)("h4",null,Object(wt.O)(e.$t("about.mrf.keyword.replace")),1),Object(wt.k)("ul",null,[(Object(wt.D)(!0),Object(wt.j)(wt.a,null,Object(wt.H)(e.keywordsReplace,t=>(Object(wt.D)(),Object(wt.j)("li",{key:t},Object(wt.O)(t.pattern)+" "+Object(wt.O)(e.$t("about.mrf.keyword.is_replaced_by"))+" "+Object(wt.O)(t.replacement),1))),128))])])):Object(wt.i)("",!0)])])])])):Object(wt.i)("",!0)}]])},computed:{showFeaturesPanel:function(){return this.$store.state.instance.showFeaturesPanel},showInstanceSpecificPanel:function(){return this.$store.state.instance.showInstanceSpecificPanel&&!this.$store.getters.mergedConfig.hideISP&&this.$store.state.instance.instanceSpecificPanelContent}}};var fh=Fn()(mh,[["render",function(e,t,n,r,i,o){const s=Object(wt.J)("instance-specific-panel"),a=Object(wt.J)("staff-panel"),c=Object(wt.J)("terms-of-service-panel"),l=Object(wt.J)("MRFTransparencyPanel"),u=Object(wt.J)("features-panel");return Object(wt.D)(),Object(wt.j)("div",fp,[e.showInstanceSpecificPanel?(Object(wt.D)(),Object(wt.h)(s,{key:0})):Object(wt.i)("",!0),Object(wt.m)(a),Object(wt.m)(c),Object(wt.m)(l),e.showFeaturesPanel?(Object(wt.D)(),Object(wt.h)(u,{key:1})):Object(wt.i)("",!0)])}]]);const Oh={class:"panel panel-default"},jh={class:"panel-heading"},gh={class:"panel-body"},vh={key:0};var yh={data:function(){return{error:!1}},mounted:function(){this.redirect()},methods:{redirect:function(){var e=this,t=this.$route.params.username+"@"+this.$route.params.hostname;this.$store.state.api.backendInteractor.fetchUser({id:t}).then((function(t){if(t.error)e.error=!0;else{e.$store.commit("addNewUsers",[t]);var n=t.id;e.$router.replace({name:"external-user-profile",params:{id:n}})}})).catch((function(){e.error=!0}))}}};var wh,kh,_h=Fn()(yh,[["render",function(e,t,n,r,i,o){return Object(wt.D)(),Object(wt.j)("div",Oh,[Object(wt.k)("div",jh,Object(wt.O)(e.$t("remote_user_resolver.remote_user_resolver")),1),Object(wt.k)("div",gh,[Object(wt.k)("p",null,Object(wt.O)(e.$t("remote_user_resolver.searching_for"))+" @"+Object(wt.O)(e.$route.params.username)+"@"+Object(wt.O)(e.$route.params.hostname),1),e.error?(Object(wt.D)(),Object(wt.j)("p",vh,Object(wt.O)(e.$t("remote_user_resolver.error")),1)):Object(wt.i)("",!0)])])}]]),Sh=function(e){var t=function(t,n,r){e.state.users.currentUser?r():r(e.state.instance.redirectRootNoLogin||"/main/all")},n=[{name:"root",path:"/",redirect:function(t){return(e.state.users.currentUser?e.state.instance.redirectRootLogin:e.state.instance.redirectRootNoLogin)||"/main/all"}},{name:"public-external-timeline",path:"/main/all",component:Za},{name:"public-timeline",path:"/main/public",component:Ka},{name:"friends",path:"/main/friends",component:ec,beforeEnter:t},{name:"tag-timeline",path:"/tag/:tag",component:nc},{name:"bookmarks",path:"/bookmarks",component:ic},{name:"conversation",path:"/notice/:id",component:sc,meta:{dontScroll:!0}},{name:"remote-user-profile-acct",path:"/remote-users/:_(@)?:username([^/@]+)@:hostname([^/@]+)",component:_h,beforeEnter:t},{name:"remote-user-profile",path:"/remote-users/:hostname/:username",component:_h,beforeEnter:t},{name:"external-user-profile",path:"/users/:id",component:du},{name:"interactions",path:"/users/:username/interactions",component:Oc,beforeEnter:t},{name:"dms",path:"/users/:username/dms",component:gc,beforeEnter:t},{name:"registration",path:"/registration",component:$d},{name:"password-reset",path:"/password-reset",component:ep,props:!0},{name:"registration-token",path:"/registration/:token",component:$d},{name:"friend-requests",path:"/friend-requests",component:cp,beforeEnter:t},{name:"notifications",path:"/:username/notifications",component:fs.default,props:function(){return{disableTeleport:!0}},beforeEnter:t},{name:"login",path:"/login",component:fr},{name:"shout-panel",path:"/shout-panel",component:Fi,props:function(){return{floating:!1}}},{name:"oauth-callback",path:"/oauth-callback",component:up,props:function(e){return{code:e.query.code}}},{name:"search",path:"/search",component:Eu,props:function(e){return{query:e.query.query}}},{name:"who-to-follow",path:"/who-to-follow",component:mp,beforeEnter:t},{name:"about",path:"/about",component:fh},{name:"user-profile",path:"/:_(users)?/:name",component:du}];return e.state.instance.pleromaChatMessagesAvailable&&(n=n.concat([{name:"chat",path:"/users/:username/chats/:recipient_id",component:El,meta:{dontScroll:!1},beforeEnter:t},{name:"chats",path:"/users/:username/chats",component:al,meta:{dontScroll:!1},beforeEnter:t}])),n},Ch=n(170),Ph=new Set([]),xh=function(e){var t=window.innerWidth-document.documentElement.clientWidth;Ch.disableBodyScroll(e,{reserveScrollBarGap:!0}),Ph.add(e),setTimeout((function(){if(Ph.size<=1){if(void 0===wh){var e=document.getElementById("nav");wh=window.getComputedStyle(e).getPropertyValue("padding-right"),e.style.paddingRight=wh?"calc(".concat(wh," + ").concat(t,"px)"):"".concat(t,"px")}if(void 0===kh){var n=document.getElementById("app_bg_wrapper");kh=window.getComputedStyle(n).getPropertyValue("right"),n.style.right=kh?"calc(".concat(kh," + ").concat(t,"px)"):"".concat(t,"px")}document.body.classList.add("scroll-locked")}}))},Dh=function(e){Ph.delete(e),setTimeout((function(){0===Ph.size&&(void 0!==wh&&(document.getElementById("nav").style.paddingRight=wh,wh=void 0),void 0!==kh&&(document.getElementById("app_bg_wrapper").style.right=kh,kh=void 0),document.body.classList.remove("scroll-locked"))})),Ch.enableBodyScroll(e)},Th={mounted:function(e,t){t.value&&xh(e)},updated:function(e,t){t.oldValue!==t.value&&(t.value?xh(e):Dh(e))},unmounted:function(e){Dh(e)}},Ih=function(e){e.directive("body-scroll-lock",Th)},$h=n(101);function zh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zh(Object(n),!0).forEach((function(t){h()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Uh,Fh,Eh,Lh,Rh,Ah,Nh,Bh,Vh,Hh,qh,Jh,Wh,Yh=null,Gh=function(e){var t=atob(e),n=Uint8Array.from(d()(t).map((function(e){return e.charCodeAt(0)})));return(new TextDecoder).decode(n)},Kh=(Uh=i()(s.a.mark((function e(t){var n,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=document.getElementById("initial-results")?(Yh||(Yh=JSON.parse(document.getElementById("initial-results").textContent)),Yh):null)&&n[t]){e.next=3;break}return e.abrupt("return",window.fetch(t));case 3:return r=Gh(n[t]),i=JSON.parse(r),e.abrupt("return",{ok:!0,json:function(){return i},text:function(){return i}});case 6:case"end":return e.stop()}}),e)}))),function(e){return Uh.apply(this,arguments)}),Xh=(Fh=i()(s.a.mark((function e(t){var n,r,i,o,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,e.prev=1,e.next=4,Kh("/api/v1/instance");case 4:if(!(r=e.sent).ok){e.next=16;break}return e.next=8,r.json();case 8:i=e.sent,o=i.max_toot_chars,a=i.pleroma.vapid_public_key,n.dispatch("setInstanceOption",{name:"textlimit",value:o}),n.dispatch("setInstanceOption",{name:"accountApprovalRequired",value:i.approval_required}),a&&n.dispatch("setInstanceOption",{name:"vapidPublicKey",value:a}),e.next=17;break;case 16:throw r;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),console.error("Could not load instance config, potentially fatal"),console.error(e.t0);case 23:case"end":return e.stop()}}),e,null,[[1,19]])}))),function(e){return Fh.apply(this,arguments)}),Zh=(Eh=i()(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.store,e.prev=1,e.next=4,window.fetch("/api/pleroma/frontend_configurations");case 4:if(!(n=e.sent).ok){e.next=12;break}return e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",r.pleroma_fe);case 12:throw n;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.error("Could not load backend-provided frontend config, potentially fatal"),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,15]])}))),function(e){return Eh.apply(this,arguments)}),Qh=(Lh=i()(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.fetch("/static/config.json");case 3:if(!(t=e.sent).ok){e.next=8;break}return e.abrupt("return",t.json());case 8:throw t;case 9:e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(0),console.warn("Failed to load static/config.json, continuing without it."),console.warn(e.t0),e.abrupt("return",{});case 16:case"end":return e.stop()}}),e,null,[[0,11]])}))),function(){return Lh.apply(this,arguments)}),eb=(Rh=i()(s.a.mark((function e(t){var n,r,i,o,a,c,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.apiConfig,r=t.staticConfig,i=t.store,o=window.___pleromafe_dev_overrides||{},a=window.___pleromafe_mode.NODE_ENV,c={},o.staticConfigPreference&&"development"===a?(console.warn("OVERRIDING API CONFIG WITH STATIC CONFIG"),c=Object.assign({},n,r)):c=Object.assign({},r,n),(l=function(e){i.dispatch("setInstanceOption",{name:e,value:c[e]})})("nsfwCensorImage"),l("background"),l("hidePostStats"),l("hideBotIndication"),l("hideUserStats"),l("hideFilteredStatuses"),l("logo"),i.dispatch("setInstanceOption",{name:"logoMask",value:void 0===c.logoMask||c.logoMask}),i.dispatch("setInstanceOption",{name:"logoMargin",value:void 0===c.logoMargin?0:c.logoMargin}),l("logoLeft"),i.commit("authFlow/setInitialStrategy",c.loginMethod),l("redirectRootNoLogin"),l("redirectRootLogin"),l("showInstanceSpecificPanel"),l("minimalScopesMode"),l("hideMutedPosts"),l("collapseMessageWithSubject"),l("scopeCopy"),l("subjectLineBehavior"),l("postContentType"),l("alwaysShowSubjectInput"),l("showFeaturesPanel"),l("hideSitename"),l("sidebarRight"),e.abrupt("return",i.dispatch("setTheme",c.theme));case 31:case"end":return e.stop()}}),e)}))),function(e){return Rh.apply(this,arguments)}),tb=(Ah=i()(s.a.mark((function e(t){var n,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,e.prev=1,e.next=4,window.fetch("/static/terms-of-service.html");case 4:if(!(r=e.sent).ok){e.next=12;break}return e.next=8,r.text();case 8:i=e.sent,n.dispatch("setInstanceOption",{name:"tos",value:i}),e.next=13;break;case 12:throw r;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.warn("Can't load TOS"),console.warn(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,15]])}))),function(e){return Ah.apply(this,arguments)}),nb=(Nh=i()(s.a.mark((function e(t){var n,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,e.prev=1,e.next=4,Kh("/instance/panel.html");case 4:if(!(r=e.sent).ok){e.next=12;break}return e.next=8,r.text();case 8:i=e.sent,n.dispatch("setInstanceOption",{name:"instanceSpecificPanelContent",value:i}),e.next=13;break;case 12:throw r;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.warn("Can't load instance panel"),console.warn(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,15]])}))),function(e){return Nh.apply(this,arguments)}),rb=(Bh=i()(s.a.mark((function e(t){var n,r,o,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,e.prev=1,e.next=4,window.fetch("/static/stickers.json");case 4:if(!(r=e.sent).ok){e.next=15;break}return e.next=8,r.json();case 8:return o=e.sent,e.next=11,Promise.all(Object.entries(o).map(function(){var e=i()(s.a.mark((function e(t){var n,r,i,o,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m()(t,2),r=n[0],i=n[1],e.next=3,window.fetch(i+"pack.json");case 3:if(o=e.sent,a={},!o.ok){e.next=9;break}return e.next=8,o.json();case 8:a=e.sent;case 9:return e.abrupt("return",{pack:r,path:i,meta:a});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:a=e.sent.sort((function(e,t){return e.meta.title.localeCompare(t.meta.title)})),n.dispatch("setInstanceOption",{name:"stickers",value:a}),e.next=16;break;case 15:throw r;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),console.warn("Can't load stickers"),console.warn(e.t0);case 22:case"end":return e.stop()}}),e,null,[[1,18]])}))),function(e){return Bh.apply(this,arguments)}),ib=(Vh=i()(s.a.mark((function e(t){var n,r,i,o,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,r=n.state,i=n.commit,o=r.oauth,a=r.instance,e.abrupt("return",Ie(Mh(Mh({},o),{},{instance:a.server,commit:i})).then((function(e){return $e(Mh(Mh({},e),{},{instance:a.server}))})).then((function(e){i("setAppToken",e.access_token),i("setBackendInteractor",Se(n.getters.getToken()))})));case 4:case"end":return e.stop()}}),e)}))),function(e){return Vh.apply(this,arguments)}),ob=function(e){var t=e.store,n=e.accounts.map((function(e){return e.split("/").pop()}));t.dispatch("setInstanceOption",{name:"staffAccounts",value:n})},sb=(Hh=i()(s.a.mark((function e(t){var n,r,i,o,a,c,l,u,d,p,h,b,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,e.prev=1,e.next=4,Kh("/nodeinfo/2.0.json");case 4:if(!(r=e.sent).ok){e.next=49;break}return e.next=8,r.json();case 8:i=e.sent,o=i.metadata,a=o.features,n.dispatch("setInstanceOption",{name:"name",value:o.nodeName}),n.dispatch("setInstanceOption",{name:"registrationOpen",value:i.openRegistrations}),n.dispatch("setInstanceOption",{name:"mediaProxyAvailable",value:a.includes("media_proxy")}),n.dispatch("setInstanceOption",{name:"safeDM",value:a.includes("safe_dm_mentions")}),n.dispatch("setInstanceOption",{name:"shoutAvailable",value:a.includes("chat")}),n.dispatch("setInstanceOption",{name:"pleromaChatMessagesAvailable",value:a.includes("pleroma_chat_messages")}),n.dispatch("setInstanceOption",{name:"gopherAvailable",value:a.includes("gopher")}),n.dispatch("setInstanceOption",{name:"pollsAvailable",value:a.includes("polls")}),n.dispatch("setInstanceOption",{name:"pollLimits",value:o.pollLimits}),n.dispatch("setInstanceOption",{name:"mailerEnabled",value:o.mailerEnabled}),c=o.uploadLimits,n.dispatch("setInstanceOption",{name:"uploadlimit",value:parseInt(c.general)}),n.dispatch("setInstanceOption",{name:"avatarlimit",value:parseInt(c.avatar)}),n.dispatch("setInstanceOption",{name:"backgroundlimit",value:parseInt(c.background)}),n.dispatch("setInstanceOption",{name:"bannerlimit",value:parseInt(c.banner)}),n.dispatch("setInstanceOption",{name:"fieldsLimits",value:o.fieldsLimits}),n.dispatch("setInstanceOption",{name:"restrictedNicknames",value:o.restrictedNicknames}),n.dispatch("setInstanceOption",{name:"postFormats",value:o.postFormats}),l=o.suggestions,n.dispatch("setInstanceOption",{name:"suggestionsEnabled",value:l.enabled}),n.dispatch("setInstanceOption",{name:"suggestionsWeb",value:l.web}),u=i.software,n.dispatch("setInstanceOption",{name:"backendVersion",value:u.version}),n.dispatch("setInstanceOption",{name:"pleromaBackend",value:"pleroma"===u.name}),d=o.private,n.dispatch("setInstanceOption",{name:"private",value:d}),p=window.___pleromafe_commit_hash,n.dispatch("setInstanceOption",{name:"frontendVersion",value:p}),h=o.federation,n.dispatch("setInstanceOption",{name:"tagPolicyAvailable",value:void 0!==h.mrf_policies&&o.federation.mrf_policies.includes("TagPolicy")}),n.dispatch("setInstanceOption",{name:"federationPolicy",value:h}),n.dispatch("setInstanceOption",{name:"federating",value:void 0===h.enabled||h.enabled}),b=o.accountActivationRequired,n.dispatch("setInstanceOption",{name:"accountActivationRequired",value:b}),m=o.staffAccounts,ob({store:n,accounts:m}),e.next=50;break;case 49:throw r;case 50:e.next=56;break;case 52:e.prev=52,e.t0=e.catch(1),console.warn("Could not load nodeinfo"),console.warn(e.t0);case 56:case"end":return e.stop()}}),e,null,[[1,52]])}))),function(e){return Hh.apply(this,arguments)}),ab=(qh=i()(s.a.mark((function e(t){var n,r,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,e.next=3,Promise.all([Zh({store:n}),Qh()]);case 3:return r=e.sent,i=r[0],o=r[1],e.next=8,eb({store:n,apiConfig:i,staticConfig:o}).then(ib({store:n}));case 8:case"end":return e.stop()}}),e)}))),function(e){return qh.apply(this,arguments)}),cb=(Jh=i()(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,e.abrupt("return",new Promise(function(){var e=i()(s.a.mark((function e(t,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.getters.getUserToken()){e.next=9;break}return e.prev=1,e.next=4,n.dispatch("loginUser",n.getters.getUserToken());case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0);case 9:t();case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),function(e){return Jh.apply(this,arguments)}),lb=(Wh=i()(s.a.mark((function e(t){var n,r,i,o,a,c,l,u,d,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,r=t.i18n,n.dispatch("setLayoutWidth",Ce()),n.dispatch("setLayoutHeight",Pe()),$h.a.initFaviconService(),i=window.___pleromafe_dev_overrides||{},o=void 0!==i.target?i.target:window.location.origin,n.dispatch("setInstanceOption",{name:"server",value:o}),e.next=9,ab({store:n});case 9:return a=n.state.config,c=a.customTheme,l=a.customThemeSource,u=n.state.instance.theme,l||c?l&&l.themeEngineVersion===O.a?Object(f.b)(l):Object(f.b)(c):u||console.error("Failed to load any theme!"),e.next=15,Promise.all([cb({store:n}),nb({store:n}),sb({store:n}),Xh({store:n})]);case 15:return n.dispatch("fetchMutes"),tb({store:n}),rb({store:n}),d=Object(nn.a)({history:Object(nn.b)(),routes:Sh(n),scrollBehavior:function(e,t,n){return!e.matched.some((function(e){return e.meta.dontScroll}))&&(n||{left:0,top:0})}}),(p=Object(wt.g)(ra)).use(d),p.use(n),p.use(r),p.use(on.a),p.use(Ih),p.component("FAIcon",sn.a),p.component("FALayers",sn.b),p.mount("#app"),e.abrupt("return",p);case 29:case"end":return e.stop()}}),e)}))),function(e){return Wh.apply(this,arguments)}),ub=(window.navigator.language||"en").split("-")[0],db=Object(Rt.a)({locale:"en",fallbackLocale:"en",messages:tn.a.default});tn.a.setLanguage(db,ub);var pb={paths:["config","users.lastLoginName","oauth"]};i()(s.a.mark((function e(){var t,n,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,n=[en],e.prev=2,e.next=5,Qt(pb);case 5:r=e.sent,n.push(r),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),t=!0;case 13:i=Object(a.a)({modules:{i18n:{getters:{i18n:function(){return db.global}}},interface:l,instance:w,users:Ge,statuses:oe,api:rt,config:g.a,serverSideConfig:it.a,shout:ot,oauth:st,authFlow:ct,mediaViewer:dt,oauthTokens:pt,reports:mt,polls:ft,postStatus:Ot,chats:Lt},plugins:n,strict:!1}),t&&i.dispatch("pushGlobalNotice",{messageKey:"errors.storage_unavailable",level:"error"}),lb({store:i,i18n:db});case 16:case"end":return e.stop()}}),e,null,[[2,9]])})))(),window.___pleromafe_mode=Object({NODE_ENV:"production"}),window.___pleromafe_commit_hash="3019dd48\n",window.___pleromafe_dev_overrides=void 0}]);
//# sourceMappingURL=app.23b7ec270c69f4f99782.js.map
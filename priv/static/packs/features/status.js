(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{786:function(e,t,a){"use strict";a.d(t,"a",(function(){return x}));var n=a(0),o=a(2),i=(a(9),a(6),a(8)),s=a(1),c=a(3),l=a.n(c),r=a(5),d=a.n(r),u=a(16),p=a.n(u),h=a(115),b=a(122),g=a(234),m=a(539),f=a(322),O=a(7),j=a(540),v=a(21),k=a(88),M=a(228),y=a(778),_=a(14),C=a.n(_),w=a(27),I=a(590);var x=function(e){Object(i.a)(a,e);var t;t=a;function a(){for(var t,a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return t=e.call.apply(e,[this].concat(n))||this,Object(s.a)(Object(o.a)(t),"state",{height:null}),Object(s.a)(Object(o.a)(t),"handleAccountClick",(function(e){0!==e.button||e.ctrlKey||e.metaKey||!t.context.router||(e.preventDefault(),t.context.router.history.push("/accounts/"+t.props.status.getIn(["account","id"]))),e.stopPropagation()})),Object(s.a)(Object(o.a)(t),"handleOpenVideo",(function(e,a){t.props.onOpenVideo(e,a)})),Object(s.a)(Object(o.a)(t),"handleExpandedToggle",(function(){t.props.onToggleHidden(t.props.status)})),Object(s.a)(Object(o.a)(t),"setRef",(function(e){t.node=e,t._measureHeight()})),Object(s.a)(Object(o.a)(t),"handleModalLink",(function(e){var t;e.preventDefault(),t="A"!==e.target.nodeName?e.target.parentNode.href:e.target.href,window.open(t,"mastodon-intent","width=445,height=600,resizable=no,menubar=no,status=no,scrollbars=yes")})),t}var c=a.prototype;return c._measureHeight=function(e){var t=this;this.props.measureHeight&&this.node&&(Object(y.a)((function(){return t.node&&t.setState({height:Math.ceil(t.node.scrollHeight)+1})})),this.props.onHeightChange&&e&&this.props.onHeightChange())},c.componentDidUpdate=function(e,t){this._measureHeight(t.height!==this.state.height)},c.render=function(){var e=this.props.status&&this.props.status.get("reblog")?this.props.status.get("reblog"):this.props.status,t={boxSizing:"border-box"},a=this.props.compact;if(!e)return null;var o="",i="",s="",c="retweet",r="";if(this.props.measureHeight&&(t.height=this.state.height+"px"),e.get("media_attachments").size>0)if("audio"===e.getIn(["media_attachments",0,"type"])){var d=e.getIn(["media_attachments",0]);o=Object(n.a)(M.default,{src:d.get("url"),alt:d.get("description"),duration:d.getIn(["meta","original","duration"],0),height:110,preload:!0})}else if("video"===e.getIn(["media_attachments",0,"type"])){var u=e.getIn(["media_attachments",0]);o=Object(n.a)(k.default,{preview:u.get("preview_url"),blurhash:u.get("blurhash"),src:u.get("url"),alt:u.get("description"),width:300,height:150,inline:!0,onOpenVideo:this.handleOpenVideo,sensitive:e.get("sensitive"),visible:this.props.showMedia,onToggleVisibility:this.props.onToggleMediaVisibility})}else o=Object(n.a)(m.default,{standalone:!0,sensitive:e.get("sensitive"),media:e.get("media_attachments"),height:300,onOpenMedia:this.props.onOpenMedia,visible:this.props.showMedia,onToggleVisibility:this.props.onToggleMediaVisibility});else 0===e.get("spoiler_text").length&&(o=Object(n.a)(j.a,{onOpenMedia:this.props.onOpenMedia,card:e.get("card",null)}));return e.get("application")&&(i=Object(n.a)("span",{},void 0," · ",Object(n.a)("a",{className:"detailed-status__application",href:e.getIn(["application","website"]),target:"_blank",rel:"noopener noreferrer"},void 0,e.getIn(["application","name"])))),"direct"===e.get("visibility")?c="envelope":"private"===e.get("visibility")&&(c="lock"),s=["private","direct"].includes(e.get("visibility"))?Object(n.a)(w.a,{id:c}):this.context.router?Object(n.a)(f.a,{to:"/statuses/"+e.get("id")+"/reblogs",className:"detailed-status__link"},void 0,Object(n.a)(w.a,{id:c}),Object(n.a)("span",{className:"detailed-status__reblogs"},void 0,Object(n.a)(I.a,{value:e.get("reblogs_count")}))):Object(n.a)("a",{href:"/interact/"+e.get("id")+"?type=reblog",className:"detailed-status__link",onClick:this.handleModalLink},void 0,Object(n.a)(w.a,{id:c}),Object(n.a)("span",{className:"detailed-status__reblogs"},void 0,Object(n.a)(I.a,{value:e.get("reblogs_count")}))),r=this.context.router?Object(n.a)(f.a,{to:"/statuses/"+e.get("id")+"/favourites",className:"detailed-status__link"},void 0,Object(n.a)(w.a,{id:"star"}),Object(n.a)("span",{className:"detailed-status__favorites"},void 0,Object(n.a)(I.a,{value:e.get("favourites_count")}))):Object(n.a)("a",{href:"/interact/"+e.get("id")+"?type=favourite",className:"detailed-status__link",onClick:this.handleModalLink},void 0,Object(n.a)(w.a,{id:"star"}),Object(n.a)("span",{className:"detailed-status__favorites"},void 0,Object(n.a)(I.a,{value:e.get("favourites_count")}))),Object(n.a)("div",{style:t},void 0,l.a.createElement("div",{ref:this.setRef,className:C()("detailed-status",{compact:a})},Object(n.a)("a",{href:e.getIn(["account","url"]),onClick:this.handleAccountClick,className:"detailed-status__display-name"},void 0,Object(n.a)("div",{className:"detailed-status__display-avatar"},void 0,Object(n.a)(h.a,{account:e.get("account"),size:48})),Object(n.a)(b.a,{account:e.get("account"),localDomain:this.props.domain})),Object(n.a)(g.a,{status:e,expanded:!e.get("hidden"),onExpandedToggle:this.handleExpandedToggle}),o,Object(n.a)("div",{className:"detailed-status__meta"},void 0,Object(n.a)("a",{className:"detailed-status__datetime",href:e.get("url"),target:"_blank",rel:"noopener noreferrer"},void 0,Object(n.a)(O.a,{value:new Date(e.get("created_at")),hour12:!1,year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})),i," · ",s," · ",r)))},a}(v.a);Object(s.a)(x,"contextTypes",{router:d.a.object}),Object(s.a)(x,"propTypes",{status:p.a.map,onOpenMedia:d.a.func.isRequired,onOpenVideo:d.a.func.isRequired,onToggleHidden:d.a.func.isRequired,measureHeight:d.a.bool,onHeightChange:d.a.func,domain:d.a.string.isRequired,compact:d.a.bool,showMedia:d.a.bool,onToggleMediaVisibility:d.a.func})},862:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return te}));var n,o,i,s=a(0),c=a(2),l=(a(9),a(6),a(8)),r=a(1),d=a(4),u=a.n(d),p=a(3),h=a.n(p),b=a(15),g=a(5),m=a.n(g),f=a(14),O=a.n(f),j=a(16),v=a.n(j),k=a(57),M=a(89),y=a(1057),_=a(786),C=a(53),w=a(723),I=a(7),x=a(22);var D,R,H,T,U=Object(I.f)({delete:{id:"status.delete",defaultMessage:"Delete"},redraft:{id:"status.redraft",defaultMessage:"Delete & re-draft"},direct:{id:"status.direct",defaultMessage:"Direct message @{name}"},mention:{id:"status.mention",defaultMessage:"Mention @{name}"},reply:{id:"status.reply",defaultMessage:"Reply"},reblog:{id:"status.reblog",defaultMessage:"Boost"},reblog_private:{id:"status.reblog_private",defaultMessage:"Boost to original audience"},cancel_reblog_private:{id:"status.cancel_reblog_private",defaultMessage:"Unboost"},cannot_reblog:{id:"status.cannot_reblog",defaultMessage:"This post cannot be boosted"},favourite:{id:"status.favourite",defaultMessage:"Favourite"},bookmark:{id:"status.bookmark",defaultMessage:"Bookmark"},more:{id:"status.more",defaultMessage:"More"},mute:{id:"status.mute",defaultMessage:"Mute @{name}"},muteConversation:{id:"status.mute_conversation",defaultMessage:"Mute conversation"},unmuteConversation:{id:"status.unmute_conversation",defaultMessage:"Unmute conversation"},block:{id:"status.block",defaultMessage:"Block @{name}"},report:{id:"status.report",defaultMessage:"Report @{name}"},share:{id:"status.share",defaultMessage:"Share"},pin:{id:"status.pin",defaultMessage:"Pin on profile"},unpin:{id:"status.unpin",defaultMessage:"Unpin from profile"},embed:{id:"status.embed",defaultMessage:"Embed"},admin_account:{id:"status.admin_account",defaultMessage:"Open moderation interface for @{name}"},admin_status:{id:"status.admin_status",defaultMessage:"Open this status in the moderation interface"},copy:{id:"status.copy",defaultMessage:"Copy link to status"},blockDomain:{id:"account.block_domain",defaultMessage:"Block domain {domain}"},unblockDomain:{id:"account.unblock_domain",defaultMessage:"Unblock domain {domain}"},unmute:{id:"account.unmute",defaultMessage:"Unmute @{name}"},unblock:{id:"account.unblock",defaultMessage:"Unblock @{name}"}}),B=Object(b.connect)((function(e,t){var a=t.status;return{relationship:e.getIn(["relationships",a.getIn(["account","id"])])}}))(n=Object(I.g)((i=o=function(e){Object(l.a)(a,e);var t;t=a;function a(){for(var t,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,Object(r.a)(Object(c.a)(t),"handleReplyClick",(function(){t.props.onReply(t.props.status)})),Object(r.a)(Object(c.a)(t),"handleReblogClick",(function(e){t.props.onReblog(t.props.status,e)})),Object(r.a)(Object(c.a)(t),"handleFavouriteClick",(function(){t.props.onFavourite(t.props.status)})),Object(r.a)(Object(c.a)(t),"handleBookmarkClick",(function(e){t.props.onBookmark(t.props.status,e)})),Object(r.a)(Object(c.a)(t),"handleDeleteClick",(function(){t.props.onDelete(t.props.status,t.context.router.history)})),Object(r.a)(Object(c.a)(t),"handleRedraftClick",(function(){t.props.onDelete(t.props.status,t.context.router.history,!0)})),Object(r.a)(Object(c.a)(t),"handleDirectClick",(function(){t.props.onDirect(t.props.status.get("account"),t.context.router.history)})),Object(r.a)(Object(c.a)(t),"handleMentionClick",(function(){t.props.onMention(t.props.status.get("account"),t.context.router.history)})),Object(r.a)(Object(c.a)(t),"handleMuteClick",(function(){var e=t.props,a=e.status,n=e.relationship,o=e.onMute,i=e.onUnmute,s=a.get("account");n&&n.get("muting")?i(s):o(s)})),Object(r.a)(Object(c.a)(t),"handleBlockClick",(function(){var e=t.props,a=e.status,n=e.relationship,o=e.onBlock,i=e.onUnblock,s=a.get("account");n&&n.get("blocking")?i(s):o(a)})),Object(r.a)(Object(c.a)(t),"handleBlockDomain",(function(){var e=t.props,a=e.status;(0,e.onBlockDomain)(a.get("account").get("acct").split("@")[1])})),Object(r.a)(Object(c.a)(t),"handleUnblockDomain",(function(){var e=t.props,a=e.status;(0,e.onUnblockDomain)(a.get("account").get("acct").split("@")[1])})),Object(r.a)(Object(c.a)(t),"handleConversationMuteClick",(function(){t.props.onMuteConversation(t.props.status)})),Object(r.a)(Object(c.a)(t),"handleReport",(function(){t.props.onReport(t.props.status)})),Object(r.a)(Object(c.a)(t),"handlePinClick",(function(){t.props.onPin(t.props.status)})),Object(r.a)(Object(c.a)(t),"handleShare",(function(){navigator.share({text:t.props.status.get("search_index"),url:t.props.status.get("url")})})),Object(r.a)(Object(c.a)(t),"handleEmbed",(function(){t.props.onEmbed(t.props.status)})),Object(r.a)(Object(c.a)(t),"handleCopy",(function(){var e=t.props.status.get("url"),a=document.createElement("textarea");a.textContent=e,a.style.position="fixed",document.body.appendChild(a);try{a.select(),document.execCommand("copy")}catch(e){}finally{document.body.removeChild(a)}})),t}return a.prototype.render=function(){var e=this.props,t=e.status,a=e.relationship,n=e.intl,o=["public","unlisted"].includes(t.get("visibility")),i=t.get("muted"),c=t.get("account"),l=[];if(o&&(l.push({text:n.formatMessage(U.copy),action:this.handleCopy}),l.push({text:n.formatMessage(U.embed),action:this.handleEmbed}),l.push(null)),x.n===t.getIn(["account","id"]))o?l.push({text:n.formatMessage(t.get("pinned")?U.unpin:U.pin),action:this.handlePinClick}):"private"===t.get("visibility")&&l.push({text:n.formatMessage(t.get("reblogged")?U.cancel_reblog_private:U.reblog_private),action:this.handleReblogClick}),l.push(null),l.push({text:n.formatMessage(i?U.unmuteConversation:U.muteConversation),action:this.handleConversationMuteClick}),l.push(null),l.push({text:n.formatMessage(U.delete),action:this.handleDeleteClick}),l.push({text:n.formatMessage(U.redraft),action:this.handleRedraftClick});else{if(l.push({text:n.formatMessage(U.mention,{name:t.getIn(["account","username"])}),action:this.handleMentionClick}),l.push({text:n.formatMessage(U.direct,{name:t.getIn(["account","username"])}),action:this.handleDirectClick}),l.push(null),a&&a.get("muting")?l.push({text:n.formatMessage(U.unmute,{name:c.get("username")}),action:this.handleMuteClick}):l.push({text:n.formatMessage(U.mute,{name:c.get("username")}),action:this.handleMuteClick}),a&&a.get("blocking")?l.push({text:n.formatMessage(U.unblock,{name:c.get("username")}),action:this.handleBlockClick}):l.push({text:n.formatMessage(U.block,{name:c.get("username")}),action:this.handleBlockClick}),l.push({text:n.formatMessage(U.report,{name:t.getIn(["account","username"])}),action:this.handleReport}),c.get("acct")!==c.get("username")){var r=c.get("acct").split("@")[1];l.push(null),a&&a.get("domain_blocking")?l.push({text:n.formatMessage(U.unblockDomain,{domain:r}),action:this.handleUnblockDomain}):l.push({text:n.formatMessage(U.blockDomain,{domain:r}),action:this.handleBlockDomain})}x.k&&(l.push(null),l.push({text:n.formatMessage(U.admin_account,{name:t.getIn(["account","username"])}),href:"/admin/accounts/"+t.getIn(["account","id"])}),l.push({text:n.formatMessage(U.admin_status),href:"/admin/accounts/"+t.getIn(["account","id"])+"/statuses/"+t.get("id")}))}var d,u="share"in navigator&&o&&Object(s.a)("div",{className:"detailed-status__button"},void 0,Object(s.a)(C.a,{title:n.formatMessage(U.share),icon:"share-alt",onClick:this.handleShare}));d=null===t.get("in_reply_to_id",null)?"reply":"reply-all";var p="retweet";return"direct"===t.get("visibility")?p="envelope":"private"===t.get("visibility")&&(p="lock"),Object(s.a)("div",{className:"detailed-status__action-bar"},void 0,Object(s.a)("div",{className:"detailed-status__button"},void 0,Object(s.a)(C.a,{title:n.formatMessage(U.reply),icon:t.get("in_reply_to_account_id")===t.getIn(["account","id"])?"reply":d,onClick:this.handleReplyClick})),Object(s.a)("div",{className:"detailed-status__button"},void 0,Object(s.a)(C.a,{disabled:!o,active:t.get("reblogged"),title:o?n.formatMessage(U.reblog):n.formatMessage(U.cannot_reblog),icon:p,onClick:this.handleReblogClick})),Object(s.a)("div",{className:"detailed-status__button"},void 0,Object(s.a)(C.a,{className:"star-icon",animate:!0,active:t.get("favourited"),title:n.formatMessage(U.favourite),icon:"star",onClick:this.handleFavouriteClick})),u,Object(s.a)("div",{className:"detailed-status__button"},void 0,Object(s.a)(C.a,{className:"bookmark-icon",active:t.get("bookmarked"),title:n.formatMessage(U.bookmark),icon:"bookmark",onClick:this.handleBookmarkClick})),Object(s.a)("div",{className:"detailed-status__action-bar-dropdown"},void 0,Object(s.a)(w.a,{size:18,icon:"ellipsis-h",status:t,items:l,direction:"left",title:n.formatMessage(U.more)})))},a}(h.a.PureComponent),Object(r.a)(o,"contextTypes",{router:m.a.object}),n=i))||n)||n,N=a(757),S=a(46),V=a(23),A=a(26),E=a(84),F=a(212),z=a(230),P=a(105),q=a(210),L=a(472),J=a(764),K=a(759),W=a(1080),Y=a(48),X=a(21),G=a(301),Q=a(261),Z=a(871),$=a(27);var ee=Object(I.f)({deleteConfirm:{id:"confirmations.delete.confirm",defaultMessage:"Delete"},deleteMessage:{id:"confirmations.delete.message",defaultMessage:"Are you sure you want to delete this status?"},redraftConfirm:{id:"confirmations.redraft.confirm",defaultMessage:"Delete & redraft"},redraftMessage:{id:"confirmations.redraft.message",defaultMessage:"Are you sure you want to delete this status and re-draft it? Favourites and boosts will be lost, and replies to the original post will be orphaned."},revealAll:{id:"status.show_more_all",defaultMessage:"Show more for all"},hideAll:{id:"status.show_less_all",defaultMessage:"Show less for all"},detailedStatus:{id:"status.detailed_status",defaultMessage:"Detailed conversation view"},replyConfirm:{id:"confirmations.reply.confirm",defaultMessage:"Reply"},replyMessage:{id:"confirmations.reply.message",defaultMessage:"Replying now will overwrite the message you are currently composing. Are you sure you want to proceed?"},blockDomainConfirm:{id:"confirmations.domain_block.confirm",defaultMessage:"Hide entire domain"}}),te=(D=Object(b.connect)((function(){var e=Object(q.f)(),t=Object(k.a)([function(e,t){return t.id},function(e){return e.getIn(["contexts","inReplyTos"])}],(function(e,t){var a=u.a.List();return a=a.withMutations((function(a){for(var n=e;n;)a.unshift(n),n=t.get(n)}))})),a=Object(k.a)([function(e,t){return t.id},function(e){return e.getIn(["contexts","replies"])},function(e){return e.get("statuses")}],(function(e,t,a){for(var n=[],o=[e];o.length>0;){var i=o.shift(),s=t.get(i);e!==i&&n.push(i),s&&s.reverse().forEach((function(e){o.unshift(e)}))}var c=n.findIndex((function(e){return a.get(e).get("in_reply_to_account_id")!==a.get(e).get("account")}));return-1!==c&&n.forEach((function(e,t){t>c&&a.get(e).get("in_reply_to_account_id")===a.get(e).get("account")&&(n.splice(t,1),n.splice(c,0,e),c+=1)})),u.a.List(n)}));return function(n,o){var i=e(n,{id:o.params.statusId}),s=u.a.List(),c=u.a.List();return i&&(s=t(n,{id:i.get("in_reply_to_id")}),c=a(n,{id:i.get("id")})),{status:i,ancestorsIds:s,descendantsIds:c,askReplyConfirmation:0!==n.getIn(["compose","text"]).trim().length,domain:n.getIn(["meta","domain"])}}})),Object(I.g)(R=D((T=H=function(e){Object(l.a)(a,e);var t;t=a;function a(){for(var t,a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,Object(r.a)(Object(c.a)(t),"state",{fullscreen:!1,showMedia:Object(Z.b)(t.props.status),loadedStatusId:void 0}),Object(r.a)(Object(c.a)(t),"handleToggleMediaVisibility",(function(){t.setState({showMedia:!t.state.showMedia})})),Object(r.a)(Object(c.a)(t),"handleFavouriteClick",(function(e){e.get("favourited")?t.props.dispatch(Object(S.v)(e)):t.props.dispatch(Object(S.p)(e))})),Object(r.a)(Object(c.a)(t),"handlePin",(function(e){e.get("pinned")?t.props.dispatch(Object(S.w)(e)):t.props.dispatch(Object(S.s)(e))})),Object(r.a)(Object(c.a)(t),"handleReplyClick",(function(e){var a=t.props,n=a.askReplyConfirmation,o=a.dispatch,i=a.intl;o(n?Object(Y.d)("CONFIRM",{message:i.formatMessage(ee.replyMessage),confirm:i.formatMessage(ee.replyConfirm),onConfirm:function(){return o(Object(V.gb)(e,t.context.router.history))}}):Object(V.gb)(e,t.context.router.history))})),Object(r.a)(Object(c.a)(t),"handleModalReblog",(function(e){t.props.dispatch(Object(S.t)(e))})),Object(r.a)(Object(c.a)(t),"handleReblogClick",(function(e,a){e.get("reblogged")?t.props.dispatch(Object(S.x)(e)):a&&a.shiftKey||!x.b?t.handleModalReblog(e):t.props.dispatch(Object(Y.d)("BOOST",{status:e,onReblog:t.handleModalReblog}))})),Object(r.a)(Object(c.a)(t),"handleBookmarkClick",(function(e){e.get("bookmarked")?t.props.dispatch(Object(S.u)(e)):t.props.dispatch(Object(S.o)(e))})),Object(r.a)(Object(c.a)(t),"handleDeleteClick",(function(e,a,n){void 0===n&&(n=!1);var o=t.props,i=o.dispatch,s=o.intl;x.e?i(Object(Y.d)("CONFIRM",{message:s.formatMessage(n?ee.redraftMessage:ee.deleteMessage),confirm:s.formatMessage(n?ee.redraftConfirm:ee.deleteConfirm),onConfirm:function(){return i(Object(M.h)(e.get("id"),a,n))}})):i(Object(M.h)(e.get("id"),a,n))})),Object(r.a)(Object(c.a)(t),"handleDirectClick",(function(e,a){t.props.dispatch(Object(V.X)(e,a))})),Object(r.a)(Object(c.a)(t),"handleMentionClick",(function(e,a){t.props.dispatch(Object(V.cb)(e,a))})),Object(r.a)(Object(c.a)(t),"handleOpenMedia",(function(e,a){t.props.dispatch(Object(Y.d)("MEDIA",{media:e,index:a}))})),Object(r.a)(Object(c.a)(t),"handleOpenVideo",(function(e,a){t.props.dispatch(Object(Y.d)("VIDEO",{media:e,time:a}))})),Object(r.a)(Object(c.a)(t),"handleHotkeyOpenMedia",(function(e){var a=t._properStatus();e.preventDefault(),a.get("media_attachments").size>0&&("audio"===a.getIn(["media_attachments",0,"type"])||("video"===a.getIn(["media_attachments",0,"type"])?t.handleOpenVideo(a.getIn(["media_attachments",0]),0):t.handleOpenMedia(a.get("media_attachments"),0)))})),Object(r.a)(Object(c.a)(t),"handleMuteClick",(function(e){t.props.dispatch(Object(F.g)(e))})),Object(r.a)(Object(c.a)(t),"handleConversationMuteClick",(function(e){e.get("muted")?t.props.dispatch(Object(M.n)(e.get("id"))):t.props.dispatch(Object(M.k)(e.get("id")))})),Object(r.a)(Object(c.a)(t),"handleToggleHidden",(function(e){e.get("hidden")?t.props.dispatch(Object(M.l)(e.get("id"))):t.props.dispatch(Object(M.j)(e.get("id")))})),Object(r.a)(Object(c.a)(t),"handleToggleAll",(function(){var e=t.props,a=e.status,n=e.ancestorsIds,o=e.descendantsIds,i=[a.get("id")].concat(n.toJS(),o.toJS());a.get("hidden")?t.props.dispatch(Object(M.l)(i)):t.props.dispatch(Object(M.j)(i))})),Object(r.a)(Object(c.a)(t),"handleBlockClick",(function(e){var a=t.props.dispatch,n=e.get("account");a(Object(z.f)(n))})),Object(r.a)(Object(c.a)(t),"handleReport",(function(e){t.props.dispatch(Object(P.k)(e.get("account"),e))})),Object(r.a)(Object(c.a)(t),"handleEmbed",(function(e){t.props.dispatch(Object(Y.d)("EMBED",{url:e.get("url")}))})),Object(r.a)(Object(c.a)(t),"handleUnmuteClick",(function(e){t.props.dispatch(Object(A.L)(e.get("id")))})),Object(r.a)(Object(c.a)(t),"handleUnblockClick",(function(e){t.props.dispatch(Object(A.J)(e.get("id")))})),Object(r.a)(Object(c.a)(t),"handleBlockDomainClick",(function(e){t.props.dispatch(Object(Y.d)("CONFIRM",{message:Object(s.a)(I.b,{id:"confirmations.domain_block.message",defaultMessage:"Are you really, really sure you want to block the entire {domain}? In most cases a few targeted blocks or mutes are sufficient and preferable. You will not see content from that domain in any public timelines or your notifications. Your followers from that domain will be removed.",values:{domain:Object(s.a)("strong",{},void 0,e)}}),confirm:t.props.intl.formatMessage(ee.blockDomainConfirm),onConfirm:function(){return t.props.dispatch(Object(E.e)(e))}}))})),Object(r.a)(Object(c.a)(t),"handleUnblockDomainClick",(function(e){t.props.dispatch(Object(E.h)(e))})),Object(r.a)(Object(c.a)(t),"handleHotkeyMoveUp",(function(){t.handleMoveUp(t.props.status.get("id"))})),Object(r.a)(Object(c.a)(t),"handleHotkeyMoveDown",(function(){t.handleMoveDown(t.props.status.get("id"))})),Object(r.a)(Object(c.a)(t),"handleHotkeyReply",(function(e){e.preventDefault(),t.handleReplyClick(t.props.status)})),Object(r.a)(Object(c.a)(t),"handleHotkeyFavourite",(function(){t.handleFavouriteClick(t.props.status)})),Object(r.a)(Object(c.a)(t),"handleHotkeyBoost",(function(){t.handleReblogClick(t.props.status)})),Object(r.a)(Object(c.a)(t),"handleHotkeyMention",(function(e){e.preventDefault(),t.handleMentionClick(t.props.status.get("account"))})),Object(r.a)(Object(c.a)(t),"handleHotkeyOpenProfile",(function(){t.context.router.history.push("/accounts/"+t.props.status.getIn(["account","id"]))})),Object(r.a)(Object(c.a)(t),"handleHotkeyToggleHidden",(function(){t.handleToggleHidden(t.props.status)})),Object(r.a)(Object(c.a)(t),"handleHotkeyToggleSensitive",(function(){t.handleToggleMediaVisibility()})),Object(r.a)(Object(c.a)(t),"handleMoveUp",(function(e){var a=t.props,n=a.status,o=a.ancestorsIds,i=a.descendantsIds;if(e===n.get("id"))t._selectChild(o.size-1,!0);else{var s=o.indexOf(e);-1===s?(s=i.indexOf(e),t._selectChild(o.size+s,!0)):t._selectChild(s-1,!0)}})),Object(r.a)(Object(c.a)(t),"handleMoveDown",(function(e){var a=t.props,n=a.status,o=a.ancestorsIds,i=a.descendantsIds;if(e===n.get("id"))t._selectChild(o.size+1,!1);else{var s=o.indexOf(e);-1===s?(s=i.indexOf(e),t._selectChild(o.size+s+2,!1)):t._selectChild(s+1,!1)}})),Object(r.a)(Object(c.a)(t),"setRef",(function(e){t.node=e})),Object(r.a)(Object(c.a)(t),"onFullScreenChange",(function(){t.setState({fullscreen:Object(Q.d)()})})),t}var n=a.prototype;return n.componentWillMount=function(){this.props.dispatch(Object(M.i)(this.props.params.statusId))},n.componentDidMount=function(){Object(Q.a)(this.onFullScreenChange)},n.componentWillReceiveProps=function(e){e.params.statusId!==this.props.params.statusId&&e.params.statusId&&(this._scrolledIntoView=!1,this.props.dispatch(Object(M.i)(e.params.statusId))),e.status&&e.status.get("id")!==this.state.loadedStatusId&&this.setState({showMedia:Object(Z.b)(e.status),loadedStatusId:e.status.get("id")})},n._selectChild=function(e,t){var a=this.node,n=a.querySelectorAll(".focusable")[e];n&&(t&&a.scrollTop>n.offsetTop?n.scrollIntoView(!0):!t&&a.scrollTop+a.clientHeight<n.offsetTop+n.offsetHeight&&n.scrollIntoView(!1),n.focus())},n.renderChildren=function(e){var t=this;return e.map((function(e){return Object(s.a)(W.a,{id:e,onMoveUp:t.handleMoveUp,onMoveDown:t.handleMoveDown,contextType:"thread"},e)}))},n.componentDidUpdate=function(){if(!this._scrolledIntoView){var e=this.props,t=e.status,a=e.ancestorsIds;if(t&&a&&a.size>0){var n=this.node.querySelectorAll(".focusable")[a.size-1];window.requestAnimationFrame((function(){n.scrollIntoView(!0)})),this._scrolledIntoView=!0}}},n.componentWillUnmount=function(){Object(Q.b)(this.onFullScreenChange)},n.render=function(){var e,t,a=this.props,n=a.shouldUpdateScroll,o=a.status,i=a.ancestorsIds,c=a.descendantsIds,l=a.intl,r=a.domain,d=a.multiColumn,u=this.state.fullscreen;if(null===o)return Object(s.a)(N.a,{},void 0,Object(s.a)(J.a,{multiColumn:d}),Object(s.a)(y.a,{}));i&&i.size>0&&(e=Object(s.a)("div",{},void 0,this.renderChildren(i))),c&&c.size>0&&(t=Object(s.a)("div",{},void 0,this.renderChildren(c)));var p={moveUp:this.handleHotkeyMoveUp,moveDown:this.handleHotkeyMoveDown,reply:this.handleHotkeyReply,favourite:this.handleHotkeyFavourite,boost:this.handleHotkeyBoost,mention:this.handleHotkeyMention,openProfile:this.handleHotkeyOpenProfile,toggleHidden:this.handleHotkeyToggleHidden,toggleSensitive:this.handleHotkeyToggleSensitive,openMedia:this.handleHotkeyOpenMedia};return(Object(s.a)(N.a,{bindToDocument:!d,label:l.formatMessage(ee.detailedStatus)},void 0,Object(s.a)(K.a,{showBackButton:!0,multiColumn:d,extraButton:Object(s.a)("button",{className:"column-header__button",title:l.formatMessage(o.get("hidden")?ee.revealAll:ee.hideAll),"aria-label":l.formatMessage(o.get("hidden")?ee.revealAll:ee.hideAll),onClick:this.handleToggleAll,"aria-pressed":o.get("hidden")?"false":"true"},void 0,Object(s.a)($.a,{id:o.get("hidden")?"eye-slash":"eye"}))}),Object(s.a)(L.a,{scrollKey:"thread",shouldUpdateScroll:n},void 0,h.a.createElement("div",{className:O()("scrollable",{fullscreen:u}),ref:this.setRef},e,Object(s.a)(G.HotKeys,{handlers:p},void 0,Object(s.a)("div",{className:O()("focusable","detailed-status__wrapper"),tabIndex:"0","aria-label":Object(Z.c)(l,o,!1)},void 0,Object(s.a)(_.a,{status:o,onOpenVideo:this.handleOpenVideo,onOpenMedia:this.handleOpenMedia,onToggleHidden:this.handleToggleHidden,domain:r,showMedia:this.state.showMedia,onToggleMediaVisibility:this.handleToggleMediaVisibility},"details-"+o.get("id")),Object(s.a)(B,{status:o,onReply:this.handleReplyClick,onFavourite:this.handleFavouriteClick,onReblog:this.handleReblogClick,onBookmark:this.handleBookmarkClick,onDelete:this.handleDeleteClick,onDirect:this.handleDirectClick,onMention:this.handleMentionClick,onMute:this.handleMuteClick,onUnmute:this.handleUnmuteClick,onMuteConversation:this.handleConversationMuteClick,onBlock:this.handleBlockClick,onUnblock:this.handleUnblockClick,onBlockDomain:this.handleBlockDomainClick,onUnblockDomain:this.handleUnblockDomainClick,onReport:this.handleReport,onPin:this.handlePin,onEmbed:this.handleEmbed},"action-bar-"+o.get("id")))),t))))},a}(X.a),Object(r.a)(H,"contextTypes",{router:m.a.object}),Object(r.a)(H,"propTypes",{params:m.a.object.isRequired,dispatch:m.a.func.isRequired,status:v.a.map,ancestorsIds:v.a.list,descendantsIds:v.a.list,intl:m.a.object.isRequired,askReplyConfirmation:m.a.bool,multiColumn:m.a.bool,domain:m.a.string.isRequired}),R=T))||R)||R)}}]);
//# sourceMappingURL=status.js.map